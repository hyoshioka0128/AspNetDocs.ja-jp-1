---
uid: mvc/overview/getting-started/database-first-development/generating-views
title: 'チュートリアル: ASP.NET MVC アプリで EF Database First のビューを生成する'
description: このチュートリアルでは、ASP.NET スキャフォールディングを使用してコントローラーとビューを生成する方法について説明します。
author: Rick-Anderson
ms.author: riande
ms.date: 01/28/2019
ms.topic: tutorial
ms.assetid: 669367cf-8e30-4eb6-821d-10a7d9bb906c
msc.legacyurl: /mvc/overview/getting-started/database-first-development/generating-views
msc.type: authoredcontent
ms.openlocfilehash: e71e13e22d8a72e1699cfc70d4d93af603edba5b
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78499474"
---
# <a name="tutorial-generate-views-for-ef-database-first-with-aspnet-mvc-app"></a>チュートリアル: ASP.NET MVC アプリで EF Database First のビューを生成する

MVC、Entity Framework、ASP.NET のスキャフォールディングを使用して、既存のデータベースへのインターフェイスを提供する web アプリケーションを作成できます。 このチュートリアルシリーズでは、ユーザーがデータベーステーブルに格納されているデータを表示、編集、作成、および削除できるようにするコードを自動的に生成する方法について説明します。 生成されたコードは、データベーステーブルの列に対応しています。

このチュートリアルでは、ASP.NET スキャフォールディングを使用してコントローラーとビューを生成する方法について説明します。

このチュートリアルでは、次のことを行いました。

> [!div class="checklist"]
> * スキャフォールディングの追加
> * 新しいビューへのリンクの追加
> * 学生のビューを表示する
> * 登録ビューを表示する

## <a name="prerequisite"></a>前提条件

* [Web アプリケーションとデータモデルを作成する](creating-the-web-application.md)

## <a name="add-scaffold"></a>スキャフォールディングの追加

モデルクラスの標準的なデータ操作を提供するコードを生成する準備ができました。 コードを追加するには、スキャフォールディング項目を追加します。 追加できるスキャフォールディングの種類には、さまざまなオプションがあります。このチュートリアルでは、スキャフォールディングには、前のセクションで作成した学生および登録モデルに対応するコントローラーとビューが含まれています。

プロジェクトの一貫性を維持するために、 **[既存のコントローラー]** フォルダーに新しいコントローラーを追加します。 **Controllers**フォルダーを右クリックし、[ **Add** > **New スキャフォールディング Item**] を選択します。

Entity Framework オプション**を使用して、ビューがある MVC 5 コントローラー**を選択します。 このオプションを選択すると、モデルのデータを更新、削除、作成、および表示するためのコントローラーとビューが生成されます。

![mvc コントローラーの追加](generating-views/_static/image2.png)

モデルクラスの **[Student (ContosoSite)]** を選択し、コンテキストクラスに対して **[ContosoSite]** を選択し、コンテキストクラスを選択します。 コントローラー名を**StudentsController**として保持します。

**[追加]** をクリックします。

エラーが発生した場合は、前のセクションでプロジェクトをビルドしていないことが原因である可能性があります。 その場合は、プロジェクトをビルドしてから、スキャフォールディング項目をもう一度追加してみてください。

コード生成プロセスが完了すると、プロジェクトの **[コントローラー]** フォルダーと [**ビュー** > **Students** ] フォルダーに新しいコントローラーとビューが表示されます。

同じ手順をもう一度実行しますが、**登録**クラスのスキャフォールディングを追加します。 完了すると、 **EnrollmentsController.cs**ファイルと、Create、Delete、Details、Edit、および Index の各ビュー**を含む [** 登録] という名前のフォルダー**が表示さ**れます。

## <a name="add-links-to-new-views"></a>新しいビューへのリンクの追加

新しいビューへの移動を容易にするために、生徒用および登録用のインデックスビューにいくつかのハイパーリンクを追加できます。 [ **Views** > **home** > *Index. cshtml*] (サイトのホームページ) でファイルを開きます。 Jumbotron の下に次のコードを追加します。

[!code-cshtml[Main](generating-views/samples/sample1.cshtml)]

Html.actionlink メソッドの場合、最初のパラメーターはリンクに表示するテキストです。 2番目のパラメーターはアクションで、3番目のパラメーターはコントローラーの名前です。 たとえば、最初のリンクは StudentsController の Index アクションを指します。 実際のハイパーリンクは、これらの値から構築されます。 最初のリンクでは、最終的に、 **Views/Students**フォルダー内の**インデックスの cshtml**ファイルに移動します。

## <a name="display-student-views"></a>学生のビューを表示する

プロジェクトに追加されたコードによって、学生の一覧が正しく表示され、ユーザーがデータベース内の学生レコードを編集、作成、または削除できることを確認します。

**Views** > **Home** > *Index. cshtml*ファイルを右クリックし、 **[ブラウザーで表示]** を選択します。 アプリケーションのホームページで、 **[学生のリスト]** を選択します。

![](generating-views/_static/image6.png)

**[インデックス]** ページで、学生とこのデータを変更するためのリンクの一覧を確認します。 **[新規作成]** リンクを選択し、新しい学生の値をいくつか指定します。 **[作成]** をクリックすると、新しい学生がリストに追加されます。

**[インデックス]** ページに戻り、 **[編集]** リンクを選択して、学生の値の一部を変更します。 **[保存]** をクリックすると、student レコードが変更されていることがわかります。

最後に、 **[削除]** リンクを選択し、 **[削除]** ボタンをクリックしてレコードを削除することを確認します。

コードを記述しなくても、Student テーブルのデータに対して一般的な操作を実行するビューが追加されています。

フィールドのテキストラベルはデータベースプロパティ ( **LastName**など) に基づいていることに気付いたかもしれませんが、web ページに表示するものとは必ずしも同じではありません。 たとえば、ラベルを**姓**にすることをお勧めします。 この表示の問題は、このチュートリアルの後半で修正します。

## <a name="display-enrollment-views"></a>登録ビューを表示する

データベースには、Student テーブルと Enrollment テーブルの間の一対多リレーションシップと、コースと登録テーブルの間の一対多リレーションシップが含まれています。 登録のビューでは、これらのリレーションシップが正しく処理されます。 サイトのホームページに移動**し、登録リンクを**選択してから、 **[新規作成]** リンクをクリックします。

ビューには、新しい登録レコードを作成するためのフォームが表示されます。 特に、フォームには**CourseID**ドロップダウンリストと**StudentID**ドロップダウンリストが含まれていることに注意してください。 両方に、関連テーブルの値が設定されます。

さらに、指定された値の検証は、フィールドのデータ型に基づいて自動的に適用されます。 **グレード**には数値が必要であるため、互換性のない値を指定しようとするとエラーメッセージが表示されます。*フィールドグレードは数値である必要があります。*

自動的に生成されたビューで、ユーザーがデータベース内のデータを操作できることを確認しました。 このシリーズの次のチュートリアルでは、データベースを更新し、web アプリケーションで対応する変更を行います。

## <a name="next-steps"></a>次のステップ

このチュートリアルでは、次のことを行いました。

> [!div class="checklist"]
> * 追加されたスキャフォールディング
> * 新しいビューへのリンクを追加しました
> * 表示される学生の表示
> * 表示される登録ビュー

次のチュートリアルに進み、データベースを変更する方法を学習してください。
> [!div class="nextstepaction"]
> [データベースの変更](changing-the-database.md)