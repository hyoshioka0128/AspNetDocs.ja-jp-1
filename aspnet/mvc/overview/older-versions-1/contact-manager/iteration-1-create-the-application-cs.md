---
uid: mvc/overview/older-versions-1/contact-manager/iteration-1-create-the-application-cs
title: 'イテレーション #1 –アプリケーションを作成するC#() |Microsoft Docs'
author: microsoft
description: 最初のイテレーションでは、最も簡単な方法で Contact Manager を作成します。 基本的なデータベース操作 (Create、Read、Update、および D...) のサポートを追加します。
ms.author: riande
ms.date: 02/20/2009
ms.assetid: db0f160b-901c-46d3-865e-7ab6cd4ed68d
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-1-create-the-application-cs
msc.type: authoredcontent
ms.openlocfilehash: d3a940308f21a4f87bf80249bd465e8812794f68
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78470266"
---
# <a name="iteration-1--create-the-application-c"></a><span data-ttu-id="6da98-104">イテレーション #1 –アプリケーションを作成するC#()</span><span class="sxs-lookup"><span data-stu-id="6da98-104">Iteration #1 – Create the Application (C#)</span></span>

<span data-ttu-id="6da98-105">[Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="6da98-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="6da98-106">コードのダウンロード</span><span class="sxs-lookup"><span data-stu-id="6da98-106">Download Code</span></span>](iteration-1-create-the-application-cs/_static/contactmanager_1_cs1.zip)

> <span data-ttu-id="6da98-107">最初のイテレーションでは、最も簡単な方法で Contact Manager を作成します。</span><span class="sxs-lookup"><span data-stu-id="6da98-107">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="6da98-108">基本的なデータベース操作 (作成、読み取り、更新、削除) のサポートを追加します。</span><span class="sxs-lookup"><span data-stu-id="6da98-108">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="6da98-109">Contact Management ASP.NET MVC アプリケーションの構築 (VB)</span><span class="sxs-lookup"><span data-stu-id="6da98-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>

<span data-ttu-id="6da98-110">この一連のチュートリアルでは、最初から最後まで、連絡先管理アプリケーション全体を作成します。</span><span class="sxs-lookup"><span data-stu-id="6da98-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="6da98-111">連絡先マネージャーアプリケーションを使用すると、連絡先情報 (名前、電話番号、電子メールアドレスなど) をユーザーの一覧に格納できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="6da98-112">複数のイテレーションに対してアプリケーションをビルドします。</span><span class="sxs-lookup"><span data-stu-id="6da98-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="6da98-113">各イテレーションで、アプリケーションを段階的に改善します。</span><span class="sxs-lookup"><span data-stu-id="6da98-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="6da98-114">この複数のイテレーションアプローチの目的は、各変更の理由を理解できるようにすることです。</span><span class="sxs-lookup"><span data-stu-id="6da98-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="6da98-115">イテレーション #1-アプリケーションを作成します。</span><span class="sxs-lookup"><span data-stu-id="6da98-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="6da98-116">最初のイテレーションでは、最も簡単な方法で Contact Manager を作成します。</span><span class="sxs-lookup"><span data-stu-id="6da98-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="6da98-117">基本的なデータベース操作 (作成、読み取り、更新、削除) のサポートを追加します。</span><span class="sxs-lookup"><span data-stu-id="6da98-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="6da98-118">イテレーション #2-アプリケーションの外観を良くします。</span><span class="sxs-lookup"><span data-stu-id="6da98-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="6da98-119">このイテレーションでは、既定の ASP.NET MVC ビューマスターページとカスケードスタイルシートを変更することによって、アプリケーションの外観を改善します。</span><span class="sxs-lookup"><span data-stu-id="6da98-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="6da98-120">イテレーション #3-フォーム検証を追加します。</span><span class="sxs-lookup"><span data-stu-id="6da98-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="6da98-121">3番目のイテレーションでは、基本的なフォーム検証を追加します。</span><span class="sxs-lookup"><span data-stu-id="6da98-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="6da98-122">必要なフォームフィールドを完了しないで、フォームを送信できないようにします。</span><span class="sxs-lookup"><span data-stu-id="6da98-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="6da98-123">また、電子メールアドレスと電話番号も検証します。</span><span class="sxs-lookup"><span data-stu-id="6da98-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="6da98-124">イテレーション #4-アプリケーションの疎結合を実現します。</span><span class="sxs-lookup"><span data-stu-id="6da98-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="6da98-125">この4回目のイテレーションでは、複数のソフトウェア設計パターンを利用して、連絡先マネージャーアプリケーションを簡単に管理および変更できるようにします。</span><span class="sxs-lookup"><span data-stu-id="6da98-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="6da98-126">たとえば、リポジトリパターンと依存関係の注入パターンを使用するようにアプリケーションをリファクターします。</span><span class="sxs-lookup"><span data-stu-id="6da98-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="6da98-127">イテレーション #5-単体テストを作成します。</span><span class="sxs-lookup"><span data-stu-id="6da98-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="6da98-128">5番目のイテレーションでは、単体テストを追加することによって、アプリケーションの保守と変更を容易にします。</span><span class="sxs-lookup"><span data-stu-id="6da98-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="6da98-129">データモデルクラスをモック化し、コントローラーと検証ロジックの単体テストをビルドします。</span><span class="sxs-lookup"><span data-stu-id="6da98-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="6da98-130">イテレーション #6-テスト駆動型開発を使用します。</span><span class="sxs-lookup"><span data-stu-id="6da98-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="6da98-131">この6番目のイテレーションでは、最初に単体テストを記述し、単体テストに対してコードを記述することによって、アプリケーションに新しい機能を追加します。</span><span class="sxs-lookup"><span data-stu-id="6da98-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="6da98-132">このイテレーションでは、連絡先グループを追加します。</span><span class="sxs-lookup"><span data-stu-id="6da98-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="6da98-133">イテレーション #7-Ajax 機能を追加します。</span><span class="sxs-lookup"><span data-stu-id="6da98-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="6da98-134">7番目のイテレーションでは、Ajax のサポートを追加することによって、アプリケーションの応答性とパフォーマンスを向上させます。</span><span class="sxs-lookup"><span data-stu-id="6da98-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="6da98-135">このイテレーション</span><span class="sxs-lookup"><span data-stu-id="6da98-135">This Iteration</span></span>

<span data-ttu-id="6da98-136">この最初のイテレーションでは、基本的なアプリケーションをビルドします。</span><span class="sxs-lookup"><span data-stu-id="6da98-136">In this first iteration, we build the basic application.</span></span> <span data-ttu-id="6da98-137">目標は、最も高速で最も簡単な方法で連絡先マネージャーを構築することです。</span><span class="sxs-lookup"><span data-stu-id="6da98-137">The goal is to build the Contact Manager in the fastest and simplest way possible.</span></span> <span data-ttu-id="6da98-138">後のイテレーションでは、アプリケーションの設計が改善されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-138">In later iterations, we improve the design of the application.</span></span>

<span data-ttu-id="6da98-139">Contact Manager アプリケーションは、データベース主導型の基本的なアプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="6da98-139">The Contact Manager application is a basic database-driven application.</span></span> <span data-ttu-id="6da98-140">アプリケーションを使用して、新しい連絡先の作成、既存の連絡先の編集、および連絡先の削除を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="6da98-140">You can use the application to create new contacts, edit existing contacts, and delete contacts.</span></span>

<span data-ttu-id="6da98-141">このイテレーションでは、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="6da98-141">In this iteration, we complete the following steps:</span></span>

1. <span data-ttu-id="6da98-142">ASP.NET MVC アプリケーション</span><span class="sxs-lookup"><span data-stu-id="6da98-142">ASP.NET MVC application</span></span>
2. <span data-ttu-id="6da98-143">連絡先を格納するデータベースを作成する</span><span class="sxs-lookup"><span data-stu-id="6da98-143">Create a database to store our contacts</span></span>
3. <span data-ttu-id="6da98-144">Microsoft Entity Framework を使用してデータベースのモデルクラスを生成する</span><span class="sxs-lookup"><span data-stu-id="6da98-144">Generate a model class for our database with the Microsoft Entity Framework</span></span>
4. <span data-ttu-id="6da98-145">コントローラーアクションとビューを作成して、データベース内のすべての連絡先を一覧表示できるようにします。</span><span class="sxs-lookup"><span data-stu-id="6da98-145">Create a controller action and view that enables us to list all of the contacts in the database</span></span>
5. <span data-ttu-id="6da98-146">コントローラーアクションとビューを作成して、データベースに新しい連絡先を作成できるようにします。</span><span class="sxs-lookup"><span data-stu-id="6da98-146">Create controller actions and a view that enables us to create a new contact in the database</span></span>
6. <span data-ttu-id="6da98-147">コントローラーアクションとビューを作成して、データベース内の既存の連絡先を編集できるようにします。</span><span class="sxs-lookup"><span data-stu-id="6da98-147">Create controller actions and a view that enables us to edit an existing contact in the database</span></span>
7. <span data-ttu-id="6da98-148">コントローラーアクションとビューを作成して、データベース内の既存の連絡先を削除できるようにします。</span><span class="sxs-lookup"><span data-stu-id="6da98-148">Create controller actions and a view that enables us to delete an existing contact in the database</span></span>

## <a name="software-prerequisites"></a><span data-ttu-id="6da98-149">ソフトウェアの必要なコンポーネント</span><span class="sxs-lookup"><span data-stu-id="6da98-149">Software Prerequisites</span></span>

<span data-ttu-id="6da98-150">ASP.NET MVC アプリケーションでは、Visual Studio 2008 または Visual Web Developer 2008 がコンピューターにインストールされている必要があります (visual Web Developer は visual studio の無料版で、visual Studio のすべての高度な機能が含まれているわけではありません)。</span><span class="sxs-lookup"><span data-stu-id="6da98-150">In ASP.NET MVC applications, you must have either Visual Studio 2008 or Visual Web Developer 2008 installed on your computer (Visual Web Developer is a free version of Visual Studio that does not include all of the advanced features of Visual Studio).</span></span> <span data-ttu-id="6da98-151">Visual Studio 2008 または Visual Web Developer の試用版は、次のアドレスからダウンロードできます。</span><span class="sxs-lookup"><span data-stu-id="6da98-151">You can download either the trial version of Visual Studio 2008 or Visual Web Developer from the following address:</span></span>

[https://www.asp.net/downloads/essential/](https://www.asp.net/downloads/essential)

> [!NOTE] 
> 
> <span data-ttu-id="6da98-152">Visual Web Developer で ASP.NET MVC アプリケーションを使用するには、Visual Web Developer Service Pack 1 がインストールされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-152">For ASP.NET MVC applications with Visual Web Developer, you must have Visual Web Developer Service Pack 1 installed.</span></span> <span data-ttu-id="6da98-153">Service Pack 1 を適用していない場合、Web アプリケーションプロジェクトを作成することはできません。</span><span class="sxs-lookup"><span data-stu-id="6da98-153">Without Service Pack 1, you cannot create Web Application Projects.</span></span>

<span data-ttu-id="6da98-154">ASP.NET MVC フレームワーク。</span><span class="sxs-lookup"><span data-stu-id="6da98-154">ASP.NET MVC framework.</span></span> <span data-ttu-id="6da98-155">ASP.NET MVC フレームワークは、次のアドレスからダウンロードできます。</span><span class="sxs-lookup"><span data-stu-id="6da98-155">You can download the ASP.NET MVC framework from the following address:</span></span>

[https://www.asp.net/mvc](../../../index.md)

<span data-ttu-id="6da98-156">このチュートリアルでは、Microsoft Entity Framework を使用してデータベースにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="6da98-156">In this tutorial, we use the Microsoft Entity Framework to access a database.</span></span> <span data-ttu-id="6da98-157">Entity Framework は .NET Framework 3.5 Service Pack 1 に含まれています。</span><span class="sxs-lookup"><span data-stu-id="6da98-157">The Entity Framework is included with .NET Framework 3.5 Service Pack 1.</span></span> <span data-ttu-id="6da98-158">この Service Pack は次の場所からダウンロードできます。</span><span class="sxs-lookup"><span data-stu-id="6da98-158">You can download this service pack from the following location:</span></span>

[<span data-ttu-id="6da98-159">https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;d isplaylang = en</span><span class="sxs-lookup"><span data-stu-id="6da98-159">https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang=en</span></span>](https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang=en)

<span data-ttu-id="6da98-160">これらの各ダウンロードを1つずつ実行する代わりに、Web Platform Installer (Web PI) を利用することもできます。</span><span class="sxs-lookup"><span data-stu-id="6da98-160">As an alternative to performing each of these downloads one by one, you can take advantage of the Web Platform Installer (Web PI).</span></span> <span data-ttu-id="6da98-161">Web PI は、次のアドレスからダウンロードできます。</span><span class="sxs-lookup"><span data-stu-id="6da98-161">You can download the Web PI from the following address:</span></span>

[https://www.asp.net/downloads/essential/](https://www.asp.net/downloads/essential)

## <a name="aspnet-mvc-project"></a><span data-ttu-id="6da98-162">ASP.NET MVC プロジェクト</span><span class="sxs-lookup"><span data-stu-id="6da98-162">ASP.NET MVC Project</span></span>

<span data-ttu-id="6da98-163">ASP.NET MVC Web アプリケーションプロジェクト。</span><span class="sxs-lookup"><span data-stu-id="6da98-163">ASP.NET MVC Web Application Project.</span></span> <span data-ttu-id="6da98-164">Visual Studio を起動し、メニューオプション**ファイル [新しいプロジェクト**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-164">Launch Visual Studio and select the menu option **File, New Project**.</span></span> <span data-ttu-id="6da98-165">**[新しいプロジェクト]** ダイアログボックスが表示されます (図1を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-165">The **New Project** dialog appears (see Figure 1).</span></span> <span data-ttu-id="6da98-166">**[Web]** プロジェクトの種類 と **[ASP.NET MVC web アプリケーション]** テンプレートを選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-166">Select the **Web** project type and the **ASP.NET MVC Web Application** template.</span></span> <span data-ttu-id="6da98-167">新しいプロジェクトに「 *Contactmanager* 」という名前を指定し、[OK] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="6da98-167">Name your new project *ContactManager* and click the OK button.</span></span>

<span data-ttu-id="6da98-168">**[新しいプロジェクト]** ダイアログボックスの右上にあるドロップダウンリストから .NET Framework 3.5 が選択されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6da98-168">Make sure that you have .NET Framework 3.5 selected from the dropdown list at the top right of the **New Project** dialog.</span></span> <span data-ttu-id="6da98-169">それ以外の場合、ASP.NET MVC Web アプリケーションテンプレートは表示されません。</span><span class="sxs-lookup"><span data-stu-id="6da98-169">Otherwise, the ASP.NET MVC Web Application template won't appear.</span></span>

<span data-ttu-id="6da98-170">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image1.jpg)](iteration-1-create-the-application-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-170">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image1.jpg)](iteration-1-create-the-application-cs/_static/image1.png)</span></span>

<span data-ttu-id="6da98-171">**図 01**: [新しいプロジェクト] ダイアログボックス ([クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image2.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-171">**Figure 01**: The New Project dialog([Click to view full-size image](iteration-1-create-the-application-cs/_static/image2.png))</span></span>

<span data-ttu-id="6da98-172">ASP.NET MVC アプリケーションでは、 **[単体テストプロジェクトの作成]** ダイアログボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-172">ASP.NET MVC application, the **Create Unit Test Project** dialog appears.</span></span> <span data-ttu-id="6da98-173">このダイアログボックスを使用すると、ASP.NET MVC アプリケーションを作成するときに、単体テストプロジェクトを作成してソリューションに追加することを指定できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-173">You can use this dialog to indicate that you want to create and add a unit test project to your solution when you create your ASP.NET MVC application.</span></span> <span data-ttu-id="6da98-174">このイテレーションでは単体テストを作成しませんが、後のイテレーションで単体テストを追加する予定のため、 **[はい、単体テストプロジェクトを作成**する] オプションを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-174">Although we won't be building unit tests in this iteration, you should select the option **Yes, create a unit test project** because we plan to add unit tests in a later iteration.</span></span> <span data-ttu-id="6da98-175">新しい ASP.NET MVC プロジェクトを初めて作成するときにテストプロジェクトを追加する方が、ASP.NET MVC プロジェクトの作成後にテストプロジェクトを追加するよりもはるかに簡単です。</span><span class="sxs-lookup"><span data-stu-id="6da98-175">Adding a Test project when you first create a new ASP.NET MVC project is much easier than adding a Test project after the ASP.NET MVC project has been created.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6da98-176">Visual Web Developer はテストプロジェクトをサポートしていないため、Visual Web Developer を使用する場合、[単体テストプロジェクトの作成] ダイアログボックスは表示されません。</span><span class="sxs-lookup"><span data-stu-id="6da98-176">Because Visual Web Developer does not support Test projects, you do not get the Create Unit Test Project dialog when using Visual Web Developer.</span></span>

<span data-ttu-id="6da98-177">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image2.jpg)](iteration-1-create-the-application-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-177">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image2.jpg)](iteration-1-create-the-application-cs/_static/image3.png)</span></span>

<span data-ttu-id="6da98-178">**図 02**: [単体テストプロジェクトの作成] ダイアログ ([クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image4.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-178">**Figure 02**: The Create Unit Test Project dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image4.png))</span></span>

<span data-ttu-id="6da98-179">ASP.NET MVC アプリケーションが Visual Studio のソリューションエクスプローラーウィンドウに表示されます (図3を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-179">ASP.NET MVC application appears in the Visual Studio Solution Explorer window (see Figure 3).</span></span> <span data-ttu-id="6da98-180">[ソリューションエクスプローラー] ウィンドウが表示されない場合は、このウィンドウを開くには、メニューオプションの [**表示]、[ソリューションエクスプローラー**] の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-180">If you don t see the Solution Explorer window then you can open this window by selecting the menu option **View, Solution Explorer**.</span></span> <span data-ttu-id="6da98-181">ソリューションには、ASP.NET MVC プロジェクトとテストプロジェクトという2つのプロジェクトが含まれていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6da98-181">Notice that the solution contains two projects: the ASP.NET MVC project and the Test project.</span></span> <span data-ttu-id="6da98-182">ASP.NET MVC プロジェクトには ContactManager という名前が付けられ、テストプロジェクトの名前は ContactManager. テストになります。</span><span class="sxs-lookup"><span data-stu-id="6da98-182">The ASP.NET MVC project is named ContactManager and the Test project is named ContactManager.Tests.</span></span>

<span data-ttu-id="6da98-183">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image3.jpg)](iteration-1-create-the-application-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-183">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image3.jpg)](iteration-1-create-the-application-cs/_static/image5.png)</span></span>

<span data-ttu-id="6da98-184">**図 03**: ソリューションエクスプローラーウィンドウ ([クリックしてフルサイズの画像を表示する](iteration-1-create-the-application-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="6da98-184">**Figure 03**: The Solution Explorer window ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image6.png))</span></span>

## <a name="deleting-the-project-sample-files"></a><span data-ttu-id="6da98-185">プロジェクトサンプルファイルを削除しています</span><span class="sxs-lookup"><span data-stu-id="6da98-185">Deleting the Project Sample Files</span></span>

<span data-ttu-id="6da98-186">ASP.NET MVC プロジェクトテンプレートには、コントローラーとビューのサンプルファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="6da98-186">The ASP.NET MVC project template includes sample files for controllers and views.</span></span> <span data-ttu-id="6da98-187">新しい ASP.NET MVC アプリケーションを作成する前に、これらのファイルを削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-187">Before creating a new ASP.NET MVC application, you should delete these files.</span></span> <span data-ttu-id="6da98-188">ファイルまたはフォルダーを右クリックし、**削除** メニューオプションを選択すると、ソリューションエクスプローラー ウィンドウでファイルやフォルダーを削除できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-188">You can delete files and folders in the Solution Explorer window by right-clicking a file or folder and selecting the menu option **Delete**.</span></span>

<span data-ttu-id="6da98-189">ASP.NET MVC プロジェクトから次のファイルを削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-189">You need to delete the following files from the ASP.NET MVC project:</span></span>

- <span data-ttu-id="6da98-190">\Controllers\HomeController.cs</span><span class="sxs-lookup"><span data-stu-id="6da98-190">\Controllers\HomeController.cs</span></span>

- <span data-ttu-id="6da98-191">\Views\Home\About.aspx</span><span class="sxs-lookup"><span data-stu-id="6da98-191">\Views\Home\About.aspx</span></span>

- <span data-ttu-id="6da98-192">\Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="6da98-192">\Views\Home\Index.aspx</span></span>

<span data-ttu-id="6da98-193">また、テストプロジェクトから次のファイルを削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-193">And, you need to delete the following file from the Test project:</span></span>

<span data-ttu-id="6da98-194">\Controllers\HomeControllerTest.cs</span><span class="sxs-lookup"><span data-stu-id="6da98-194">\Controllers\HomeControllerTest.cs</span></span>

## <a name="creating-the-database"></a><span data-ttu-id="6da98-195">データベースの作成</span><span class="sxs-lookup"><span data-stu-id="6da98-195">Creating the Database</span></span>

<span data-ttu-id="6da98-196">Contact Manager アプリケーションは、データベース主導の web アプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="6da98-196">The Contact Manager application is a database-driven web application.</span></span> <span data-ttu-id="6da98-197">連絡先情報を格納するためにデータベースを使用します。</span><span class="sxs-lookup"><span data-stu-id="6da98-197">We use a database to store the contact information.</span></span>

<span data-ttu-id="6da98-198">Microsoft SQL Server、Oracle、MySQL、および IBM DB2 データベースを含む最新のデータベースを備えた ASP.NET MVC フレームワーク。</span><span class="sxs-lookup"><span data-stu-id="6da98-198">The ASP.NET MVC framework with any modern database including Microsoft SQL Server, Oracle, MySQL, and IBM DB2 databases.</span></span> <span data-ttu-id="6da98-199">このチュートリアルでは、Microsoft SQL Server データベースを使用します。</span><span class="sxs-lookup"><span data-stu-id="6da98-199">In this tutorial, we use a Microsoft SQL Server database.</span></span> <span data-ttu-id="6da98-200">Visual Studio をインストールすると、無料版の Microsoft SQL Server データベースである Microsoft SQL Server Express をインストールするオプションが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-200">When you install Visual Studio, you are provided with the option of installing Microsoft SQL Server Express which is a free version of the Microsoft SQL Server database.</span></span>

<span data-ttu-id="6da98-201">[ソリューションエクスプローラー] ウィンドウで [App\_Data] フォルダーを右クリックし、[**追加]、[新しい項目**] の順に選択して、新しいデータベースを作成します。</span><span class="sxs-lookup"><span data-stu-id="6da98-201">Create a new database by right-clicking the App\_Data folder in the Solution Explorer window and selecting the menu option **Add, New Item**.</span></span> <span data-ttu-id="6da98-202">**[新しい項目の追加]** ダイアログで、 **[データ]** カテゴリと **[SQL Server データベース]** テンプレートを選択します (図4を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-202">In the **Add New Item** dialog, select the **Data** category and the **SQL Server Database** template (see Figure 4).</span></span> <span data-ttu-id="6da98-203">新しいデータベースに「ContactManagerDB .mdf」という名前を指定し、[OK] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="6da98-203">Name the new database ContactManagerDB.mdf and click the OK button.</span></span>

<span data-ttu-id="6da98-204">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image4.jpg)](iteration-1-create-the-application-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-204">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image4.jpg)](iteration-1-create-the-application-cs/_static/image7.png)</span></span>

<span data-ttu-id="6da98-205">**図 04**: 新しい Microsoft SQL Server Express データベースを作成する ([クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image8.png)される)</span><span class="sxs-lookup"><span data-stu-id="6da98-205">**Figure 04**: Creating a new Microsoft SQL Server Express database ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image8.png))</span></span>

<span data-ttu-id="6da98-206">新しいデータベースを作成すると、[ソリューションエクスプローラー] ウィンドウの [アプリ\_データ] フォルダーにデータベースが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-206">After you create the new database, the database appears in the App\_Data folder in the Solution Explorer window.</span></span> <span data-ttu-id="6da98-207">ContactManager .mdf ファイルをダブルクリックして [サーバーエクスプローラー] ウィンドウを開き、データベースに接続します。</span><span class="sxs-lookup"><span data-stu-id="6da98-207">Double-click the ContactManager.mdf file to open the Server Explorer window and connect to the database.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6da98-208">Microsoft Visual Web Developer の場合は、[サーバーエクスプローラー] ウィンドウを [データベースエクスプローラー] ウィンドウと呼びます。</span><span class="sxs-lookup"><span data-stu-id="6da98-208">The Server Explorer window is called the Database Explorer window in the case of Microsoft Visual Web Developer.</span></span>

<span data-ttu-id="6da98-209">[サーバーエクスプローラー] ウィンドウを使用すると、データベーステーブル、ビュー、トリガー、ストアドプロシージャなどの新しいデータベースオブジェクトを作成できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-209">You can use the Server Explorer window to create new database objects such as database tables, views, triggers, and stored procedures.</span></span> <span data-ttu-id="6da98-210">テーブル フォルダーを右クリックし、**新しいテーブルの追加** メニューオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-210">Right-click the Tables folder and select the menu option **Add New Table**.</span></span> <span data-ttu-id="6da98-211">データベーステーブルデザイナーが表示されます (図5を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-211">The Database Table Designer appears (see Figure 5).</span></span>

<span data-ttu-id="6da98-212">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image5.jpg)](iteration-1-create-the-application-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-212">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image5.jpg)](iteration-1-create-the-application-cs/_static/image9.png)</span></span>

<span data-ttu-id="6da98-213">**図 05**: データベーステーブルデザイナー ([クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image10.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-213">**Figure 05**: The Database Table Designer ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image10.png))</span></span>

<span data-ttu-id="6da98-214">次の列を含むテーブルを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-214">We need to create a table that contains the following columns:</span></span>

<a id="0.1_table01"></a>

| <span data-ttu-id="6da98-215">**列名**</span><span class="sxs-lookup"><span data-stu-id="6da98-215">**Column Name**</span></span> | <span data-ttu-id="6da98-216">**[データ型]**</span><span class="sxs-lookup"><span data-stu-id="6da98-216">**Data Type**</span></span> | <span data-ttu-id="6da98-217">**[NULL を許容]**</span><span class="sxs-lookup"><span data-stu-id="6da98-217">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="6da98-218">Id</span><span class="sxs-lookup"><span data-stu-id="6da98-218">Id</span></span> | <span data-ttu-id="6da98-219">INT</span><span class="sxs-lookup"><span data-stu-id="6da98-219">int</span></span> | <span data-ttu-id="6da98-220">false</span><span class="sxs-lookup"><span data-stu-id="6da98-220">false</span></span> |
| <span data-ttu-id="6da98-221">FirstName</span><span class="sxs-lookup"><span data-stu-id="6da98-221">FirstName</span></span> | <span data-ttu-id="6da98-222">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="6da98-222">nvarchar(50)</span></span> | <span data-ttu-id="6da98-223">false</span><span class="sxs-lookup"><span data-stu-id="6da98-223">false</span></span> |
| <span data-ttu-id="6da98-224">LastName</span><span class="sxs-lookup"><span data-stu-id="6da98-224">LastName</span></span> | <span data-ttu-id="6da98-225">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="6da98-225">nvarchar(50)</span></span> | <span data-ttu-id="6da98-226">false</span><span class="sxs-lookup"><span data-stu-id="6da98-226">false</span></span> |
| <span data-ttu-id="6da98-227">Phone</span><span class="sxs-lookup"><span data-stu-id="6da98-227">Phone</span></span> | <span data-ttu-id="6da98-228">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="6da98-228">nvarchar(50)</span></span> | <span data-ttu-id="6da98-229">false</span><span class="sxs-lookup"><span data-stu-id="6da98-229">false</span></span> |
| <span data-ttu-id="6da98-230">Email</span><span class="sxs-lookup"><span data-stu-id="6da98-230">Email</span></span> | <span data-ttu-id="6da98-231">nvarchar(255)</span><span class="sxs-lookup"><span data-stu-id="6da98-231">nvarchar(255)</span></span> | <span data-ttu-id="6da98-232">false</span><span class="sxs-lookup"><span data-stu-id="6da98-232">false</span></span> |

<span data-ttu-id="6da98-233">最初の列である Id 列は特殊です。</span><span class="sxs-lookup"><span data-stu-id="6da98-233">The first column, the Id column, is special.</span></span> <span data-ttu-id="6da98-234">Id 列を Id 列および主キー列としてマークする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-234">You need to mark the Id column as an Identity column and a Primary Key column.</span></span> <span data-ttu-id="6da98-235">列が Id 列であることを示すには、列のプロパティを展開し (図6の下部を参照)、[Identity Specification] プロパティまでスクロールします。</span><span class="sxs-lookup"><span data-stu-id="6da98-235">You indicate that a column is an Identity column by expanding Column Properties (look at the bottom of Figure 6) and scrolling down to the Identity Specification property.</span></span> <span data-ttu-id="6da98-236">**(Is id)** プロパティを **[はい]** に設定します。</span><span class="sxs-lookup"><span data-stu-id="6da98-236">Set the **(Is Identity)** property to the value **Yes**.</span></span>

<span data-ttu-id="6da98-237">列を選択し、キーのアイコンの付いたボタンをクリックすることで、列を主キー列としてマークします。</span><span class="sxs-lookup"><span data-stu-id="6da98-237">You mark a column as a Primary Key column by selecting the column and clicking the button with the icon of a key.</span></span> <span data-ttu-id="6da98-238">列を主キー列としてマークすると、その列の横にキーのアイコンが表示されます (図6を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-238">After a column is marked as a Primary Key column, an icon of a key appears next to the column (see Figure 6).</span></span>

<span data-ttu-id="6da98-239">テーブルの作成が完了したら、[保存] ボタン (フロッピーのアイコンが付いたボタン) をクリックして、新しいテーブルを保存します。</span><span class="sxs-lookup"><span data-stu-id="6da98-239">After you finish creating the table, click the Save button (the button with an icon of a floppy) to save the new table.</span></span> <span data-ttu-id="6da98-240">新しいテーブル*に名前を付けます*。</span><span class="sxs-lookup"><span data-stu-id="6da98-240">Give your new table the name *Contacts*.</span></span>

<span data-ttu-id="6da98-241">Contacts データベーステーブルの作成が完了したら、いくつかのレコードをテーブルに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-241">After finish creating the Contacts database table, you should add some records to the table.</span></span> <span data-ttu-id="6da98-242">サーバーエクスプローラーウィンドウで Contacts テーブルを右クリックし、 **[テーブルデータの表示]** メニューオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-242">Right-click the Contacts table in the Server Explorer window and select the menu option **Show Table Data**.</span></span> <span data-ttu-id="6da98-243">表示されるグリッドに1つ以上の連絡先を入力します。</span><span class="sxs-lookup"><span data-stu-id="6da98-243">Enter one or more contacts in the grid that appears.</span></span>

## <a name="creating-the-data-model"></a><span data-ttu-id="6da98-244">データモデルの作成</span><span class="sxs-lookup"><span data-stu-id="6da98-244">Creating the Data Model</span></span>

<span data-ttu-id="6da98-245">ASP.NET MVC アプリケーションは、モデル、ビュー、およびコントローラーで構成されています。</span><span class="sxs-lookup"><span data-stu-id="6da98-245">The ASP.NET MVC application consists of Models, Views, and Controllers.</span></span> <span data-ttu-id="6da98-246">最初に、前のセクションで作成した Contacts テーブルを表すモデルクラスを作成します。</span><span class="sxs-lookup"><span data-stu-id="6da98-246">We start by creating a Model class that represents the Contacts table that we created in the previous section.</span></span>

<span data-ttu-id="6da98-247">このチュートリアルでは、Microsoft Entity Framework を使用して、データベースからモデルクラスを自動的に生成します。</span><span class="sxs-lookup"><span data-stu-id="6da98-247">In this tutorial, we use the Microsoft Entity Framework to generate a model class from the database automatically.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6da98-248">ASP.NET MVC フレームワークは、どのような方法でも Microsoft Entity Framework に関連付けられていません。</span><span class="sxs-lookup"><span data-stu-id="6da98-248">The ASP.NET MVC framework is not tied to the Microsoft Entity Framework in any way.</span></span> <span data-ttu-id="6da98-249">ASP.NET MVC は、NHibernate、LINQ to SQL、ADO.NET などの別のデータベースアクセステクノロジと共に使用できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-249">You can use ASP.NET MVC with alternative database access technologies including NHibernate, LINQ to SQL, or ADO.NET.</span></span>

<span data-ttu-id="6da98-250">データモデルクラスを作成するには、次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="6da98-250">Follow these steps to create the data model classes:</span></span>

1. <span data-ttu-id="6da98-251">ソリューションエクスプローラーウィンドウで [モデル] フォルダーを右クリックし、[**追加]、[新しい項目**] の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-251">Right-click the Models folder in the Solution Explorer window and select **Add, New Item**.</span></span> <span data-ttu-id="6da98-252">**[新しい項目の追加]** ダイアログボックスが表示されます (図6を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-252">The **Add New Item** dialog appears (see Figure 6).</span></span>
2. <span data-ttu-id="6da98-253">**[データ]** カテゴリと **[ADO.NET Entity Data Model]** テンプレートを選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-253">Select the **Data** category and the **ADO.NET Entity Data Model** template.</span></span> <span data-ttu-id="6da98-254">データモデルに「 *Contactmanagermodel. .edmx* 」という名前を指定し、 **[追加]** ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="6da98-254">Name your data model *ContactManagerModel.edmx* and click the **Add** button.</span></span> <span data-ttu-id="6da98-255">Entity Data Model ウィザードが表示されます (図7を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-255">The Entity Data Model wizard appears (see Figure 7).</span></span>
3. <span data-ttu-id="6da98-256">**[モデルの内容の選択]** ステップで、 **[データベースから生成]** を選択します (図7を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-256">In the **Choose Model Contents** step, select **Generate from database** (see Figure 7).</span></span>
4. <span data-ttu-id="6da98-257">**[データ接続の選択]** ステップで、ContactManagerDB .mdf データベースを選択し、エンティティ接続設定の名前として*Contactmanagerdbentities*を入力します (図8を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-257">In the **Choose Your Data Connection** step, select the ContactManagerDB.mdf database and enter the name *ContactManagerDBEntities* for the Entity Connection Settings (see Figure 8).</span></span>
5. <span data-ttu-id="6da98-258">**データベースオブジェクトの選択** ステップで、テーブル チェックボックスをオンにします (図9を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-258">In the **Choose Your Database Objects** step, select the checkbox labeled Tables (see Figure 9).</span></span> <span data-ttu-id="6da98-259">データモデルには、データベースに格納されているすべてのテーブルが含まれます (Contacts テーブルは1つだけです)。</span><span class="sxs-lookup"><span data-stu-id="6da98-259">The data model will include all tables contained in your database (there is just one, the Contacts table).</span></span> <span data-ttu-id="6da98-260">名前空間*モデル*を入力します。</span><span class="sxs-lookup"><span data-stu-id="6da98-260">Enter the namespace *Models*.</span></span> <span data-ttu-id="6da98-261">ウィザードを完了するには、[完了] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="6da98-261">Click the Finish button to complete the wizard.</span></span>

<span data-ttu-id="6da98-262">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image6.jpg)](iteration-1-create-the-application-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-262">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image6.jpg)](iteration-1-create-the-application-cs/_static/image11.png)</span></span>

<span data-ttu-id="6da98-263">**図 06**: [新しい項目の追加] ダイアログ ([クリックしてフルサイズのイメージを表示](iteration-1-create-the-application-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="6da98-263">**Figure 06**: The Add New Item dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image12.png))</span></span>

<span data-ttu-id="6da98-264">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image7.jpg)](iteration-1-create-the-application-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-264">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image7.jpg)](iteration-1-create-the-application-cs/_static/image13.png)</span></span>

<span data-ttu-id="6da98-265">**図 07**: モデルのコンテンツを選択[する (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image14.png)される)</span><span class="sxs-lookup"><span data-stu-id="6da98-265">**Figure 07**: Choose Model Contents ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image14.png))</span></span>

<span data-ttu-id="6da98-266">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image8.jpg)](iteration-1-create-the-application-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-266">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image8.jpg)](iteration-1-create-the-application-cs/_static/image15.png)</span></span>

<span data-ttu-id="6da98-267">**図 08**: データ接続を選択[する (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image16.png)される)</span><span class="sxs-lookup"><span data-stu-id="6da98-267">**Figure 08**: Choose Your Data Connection ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image16.png))</span></span>

<span data-ttu-id="6da98-268">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image9.jpg)](iteration-1-create-the-application-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-268">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image9.jpg)](iteration-1-create-the-application-cs/_static/image17.png)</span></span>

<span data-ttu-id="6da98-269">**図 09**: データベースオブジェクトを選択[する (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image18.png)される)</span><span class="sxs-lookup"><span data-stu-id="6da98-269">**Figure 09**: Choose Your Database Objects ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image18.png))</span></span>

<span data-ttu-id="6da98-270">Entity Data Model ウィザードを完了すると、Entity Data Model デザイナーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-270">After you complete the Entity Data Model Wizard, the Entity Data Model Designer appears.</span></span> <span data-ttu-id="6da98-271">デザイナーには、モデル化されている各テーブルに対応するクラスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-271">The designer displays a class that corresponds to each table being modeled.</span></span> <span data-ttu-id="6da98-272">Contact という名前のクラスが1つ表示できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-272">You should see one class named Contacts.</span></span>

<span data-ttu-id="6da98-273">Entity Data Model ウィザードでは、データベーステーブル名に基づいてクラス名が生成されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-273">The Entity Data Model wizard generates class names based on database table names.</span></span> <span data-ttu-id="6da98-274">ほとんどの場合、ウィザードによって生成されるクラスの名前を変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-274">You almost always need to change the name of the class generated by the wizard.</span></span> <span data-ttu-id="6da98-275">デザイナーで Contacts クラスを右クリックし、メニューオプション [名前の**変更**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-275">Right-click the Contacts class in the designer and select the menu option **Rename**.</span></span> <span data-ttu-id="6da98-276">クラスの名前を [Contacts (複数形)] から [Contact] (単数形) に変更します。</span><span class="sxs-lookup"><span data-stu-id="6da98-276">Change the name of the class from Contacts (plural) to Contact (singular).</span></span> <span data-ttu-id="6da98-277">クラス名を変更すると、図10のようにクラスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-277">After you change the class name, the class should appear like Figure 10.</span></span>

<span data-ttu-id="6da98-278">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image10.jpg)](iteration-1-create-the-application-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-278">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image10.jpg)](iteration-1-create-the-application-cs/_static/image19.png)</span></span>

<span data-ttu-id="6da98-279">**図 10**: Contact クラス ([クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image20.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-279">**Figure 10**: The Contact class ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image20.png))</span></span>

<span data-ttu-id="6da98-280">この時点で、データベースモデルが作成されました。</span><span class="sxs-lookup"><span data-stu-id="6da98-280">At this point, we have created our database model.</span></span> <span data-ttu-id="6da98-281">Contact クラスを使用して、データベース内の特定の連絡先レコードを表すことができます。</span><span class="sxs-lookup"><span data-stu-id="6da98-281">We can use the Contact class to represent a particular contact record in our database.</span></span>

## <a name="creating-the-home-controller"></a><span data-ttu-id="6da98-282">Home コントローラーの作成</span><span class="sxs-lookup"><span data-stu-id="6da98-282">Creating the Home Controller</span></span>

<span data-ttu-id="6da98-283">次の手順では、Home コントローラーを作成します。</span><span class="sxs-lookup"><span data-stu-id="6da98-283">The next step is to create our Home controller.</span></span> <span data-ttu-id="6da98-284">Home コントローラーは、ASP.NET MVC アプリケーションで呼び出される既定のコントローラーです。</span><span class="sxs-lookup"><span data-stu-id="6da98-284">The Home controller is the default controller invoked in an ASP.NET MVC application.</span></span>

<span data-ttu-id="6da98-285">Home コントローラークラスを作成するには、[ソリューションエクスプローラー] ウィンドウで Controllers フォルダーを右クリックし、[**追加]、[コントローラー** ] の順に選択します (図11を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-285">Create the Home controller class by right-clicking the Controllers folder in the Solution Explorer window and selecting the menu option **Add, Controller** (see Figure 11).</span></span> <span data-ttu-id="6da98-286">**作成、更新、詳細の各シナリオの [アクションメソッドの追加] と**いうラベルのチェックボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-286">Notice the checkbox labeled **Add action methods for Create, Update, and Details scenarios**.</span></span> <span data-ttu-id="6da98-287">**[追加]** ボタンをクリックする前に、このチェックボックスがオンになっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6da98-287">Make sure that this checkbox is checked before clicking the **Add** button.</span></span>

<span data-ttu-id="6da98-288">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image11.jpg)](iteration-1-create-the-application-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-288">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image11.jpg)](iteration-1-create-the-application-cs/_static/image21.png)</span></span>

<span data-ttu-id="6da98-289">**図 11**: ホームコントローラーを追加[する (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image22.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-289">**Figure 11**: Adding the Home controller ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image22.png))</span></span>

<span data-ttu-id="6da98-290">Home コントローラーを作成すると、リスト1のクラスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-290">When you create the Home controller, you get the class in Listing 1.</span></span>

<span data-ttu-id="6da98-291">**リスト 1-Controllers\ homecontroller.cs**</span><span class="sxs-lookup"><span data-stu-id="6da98-291">**Listing 1 - Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample1.cs)]

## <a name="listing-the-contacts"></a><span data-ttu-id="6da98-292">連絡先を一覧表示する</span><span class="sxs-lookup"><span data-stu-id="6da98-292">Listing the Contacts</span></span>

<span data-ttu-id="6da98-293">Contacts データベーステーブルのレコードを表示するには、Index () アクションとインデックスビューを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-293">In order to display the records in the Contacts database table, we need to create an Index() action and an Index view.</span></span>

<span data-ttu-id="6da98-294">Home コントローラーには既に Index () アクションが含まれています。</span><span class="sxs-lookup"><span data-stu-id="6da98-294">The Home controller already contains an Index() action.</span></span> <span data-ttu-id="6da98-295">リスト2のようにこのメソッドを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-295">We need to modify this method so that it looks like Listing 2.</span></span>

<span data-ttu-id="6da98-296">**リスト 2-Controllers\ homecontroller.cs**</span><span class="sxs-lookup"><span data-stu-id="6da98-296">**Listing 2 - Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample2.cs)]

<span data-ttu-id="6da98-297">リスト2の Home controller クラスに \_エンティティという名前のプライベートフィールドが含まれていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6da98-297">Notice that the Home controller class in Listing 2 contains a private field named \_entities.</span></span> <span data-ttu-id="6da98-298">[\_エンティティ] フィールドは、データモデルのエンティティを表します。</span><span class="sxs-lookup"><span data-stu-id="6da98-298">The \_entities field represents the entities from the data model.</span></span> <span data-ttu-id="6da98-299">データベースとの通信には、\_エンティティフィールドを使用します。</span><span class="sxs-lookup"><span data-stu-id="6da98-299">We use the \_entities field to communicate with the database.</span></span>

<span data-ttu-id="6da98-300">Index () メソッドは、Contacts データベーステーブルのすべての連絡先を表すビューを返します。</span><span class="sxs-lookup"><span data-stu-id="6da98-300">The Index() method returns a view that represents all of the contacts from the Contacts database table.</span></span> <span data-ttu-id="6da98-301">エンティティ \_式。ContactSet。 ToList () は、連絡先のリストをジェネリックリストとして返します。</span><span class="sxs-lookup"><span data-stu-id="6da98-301">The expression \_entities.ContactSet.ToList() returns the list of contacts as a generic list.</span></span>

<span data-ttu-id="6da98-302">インデックスコントローラーを作成したので、次にインデックスビューを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-302">Now that we ve created the Index controller, we next need to create the Index view.</span></span> <span data-ttu-id="6da98-303">インデックスビューを作成する前に、ビルド メニューの **ソリューションのビルド** を選択して、アプリケーションをコンパイルします。</span><span class="sxs-lookup"><span data-stu-id="6da98-303">Before creating the Index view, compile your application by selecting the menu option **Build, Build Solution**.</span></span> <span data-ttu-id="6da98-304">**[ビューの追加]** ダイアログでモデルクラスの一覧が表示されるようにするには、ビューを追加する前にプロジェクトをコンパイルする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-304">You should always compile your project before adding a view in order for the list of model classes to be displayed in the **Add View** dialog.</span></span>

<span data-ttu-id="6da98-305">インデックスビューを作成するには、Index () メソッドを右クリックし、 **[ビューの追加]** メニューオプションを選択します (図12を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-305">You create the Index view by right-clicking the Index() method and selecting the menu option **Add View** (see Figure 12).</span></span> <span data-ttu-id="6da98-306">このメニューオプションを選択すると、 **[ビューの追加]** ダイアログボックスが開きます (図13を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-306">Selecting this menu option opens the **Add View** dialog (see Figure 13).</span></span>

<span data-ttu-id="6da98-307">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image12.jpg)](iteration-1-create-the-application-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-307">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image12.jpg)](iteration-1-create-the-application-cs/_static/image23.png)</span></span>

<span data-ttu-id="6da98-308">**図 12**: インデックスビュー[を追加する (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image24.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-308">**Figure 12**: Adding the Index view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image24.png))</span></span>

<span data-ttu-id="6da98-309">**[ビューの追加]** ダイアログボックスで、 **[厳密に型指定されたビューを作成する]** チェックボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="6da98-309">In the **Add View** dialog, check the checkbox labeled **Create a strongly-typed view**.</span></span> <span data-ttu-id="6da98-310">ビューのデータクラス ContactManager. モデルとビューコンテンツの一覧を選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-310">Select the View data class ContactManager.Models.Contact and the View content List.</span></span> <span data-ttu-id="6da98-311">これらのオプションを選択すると、連絡先レコードの一覧を表示するビューが生成されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-311">Selecting these options generates a view that displays a list of Contact records.</span></span>

<span data-ttu-id="6da98-312">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image13.jpg)](iteration-1-create-the-application-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-312">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image13.jpg)](iteration-1-create-the-application-cs/_static/image25.png)</span></span>

<span data-ttu-id="6da98-313">**図 13**: [ビューの追加] ダイアログボックス ([クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image26.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-313">**Figure 13**: The Add View dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image26.png))</span></span>

<span data-ttu-id="6da98-314">**[追加]** ボタンをクリックすると、リスト3のインデックスビューが生成されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-314">When you click the **Add** button, the Index view in Listing 3 is generated.</span></span> <span data-ttu-id="6da98-315">ファイルの先頭に表示される &lt;% @ Page%&gt; ディレクティブに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6da98-315">Notice the &lt;%@ Page %&gt; directive that appears at the top of the file.</span></span> <span data-ttu-id="6da98-316">インデックスビューは、ViewPage&lt;IEnumerable&lt;ContactManager. モデル&gt;&gt; クラスから継承されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-316">The Index view inherits from the ViewPage&lt;IEnumerable&lt;ContactManager.Models.Contact&gt;&gt; class.</span></span> <span data-ttu-id="6da98-317">言い換えると、ビューのモデルクラスは、連絡先エンティティの一覧を表します。</span><span class="sxs-lookup"><span data-stu-id="6da98-317">In other words, the Model class in the view represents a list of Contact entities.</span></span>

<span data-ttu-id="6da98-318">インデックスビューの本文には、モデルクラスによって表される各連絡先を反復処理する foreach ループが含まれています。</span><span class="sxs-lookup"><span data-stu-id="6da98-318">The body of the Index view contains a foreach loop that iterates through each of the contacts represented by the Model class.</span></span> <span data-ttu-id="6da98-319">Contact クラスの各プロパティの値は、HTML テーブル内に表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-319">The value of each property of the Contact class is displayed within an HTML table.</span></span>

<span data-ttu-id="6da98-320">**リスト 3-Views\Home\Index.aspx (未変更)**</span><span class="sxs-lookup"><span data-stu-id="6da98-320">**Listing 3 - Views\Home\Index.aspx (unmodified)**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample3.aspx)]

<span data-ttu-id="6da98-321">インデックスビューに1つの変更を加える必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-321">We need to make one modification to the Index view.</span></span> <span data-ttu-id="6da98-322">詳細ビューを作成していないので、[詳細] リンクを削除できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-322">Because we are not creating a Details view, we can remove the Details link.</span></span> <span data-ttu-id="6da98-323">インデックスビューから次のコードを見つけて削除します。</span><span class="sxs-lookup"><span data-stu-id="6da98-323">Find and remove the following code from the Index view:</span></span>

<span data-ttu-id="6da98-324">{id = item。Id})%&gt;</span><span class="sxs-lookup"><span data-stu-id="6da98-324">{ id=item.Id })%&gt;</span></span>

<span data-ttu-id="6da98-325">インデックスビューを変更した後、Contact Manager アプリケーションを実行できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-325">After you modify the Index view, you can run the Contact Manager application.</span></span> <span data-ttu-id="6da98-326">メニューオプション [デバッグ]、[デバッグ開始] のいずれかを選択するか、F5 キーを押します。</span><span class="sxs-lookup"><span data-stu-id="6da98-326">Select the menu option Debug, Start Debugging or simply press F5.</span></span> <span data-ttu-id="6da98-327">アプリケーションを初めて実行するときに、図14のダイアログが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-327">The first time you run the application, you get the dialog in Figure 14.</span></span> <span data-ttu-id="6da98-328">**Web.config ファイルを変更してデバッグを有効にする** オプションを選択し、OK ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="6da98-328">Select the option **Modify the Web.config file to enable debugging** and click the OK button.</span></span>

<span data-ttu-id="6da98-329">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image14.jpg)](iteration-1-create-the-application-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-329">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image14.jpg)](iteration-1-create-the-application-cs/_static/image27.png)</span></span>

<span data-ttu-id="6da98-330">**図 14**: デバッグを有効[にする (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image28.png)される)</span><span class="sxs-lookup"><span data-stu-id="6da98-330">**Figure 14**: Enabling debugging ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image28.png))</span></span>

<span data-ttu-id="6da98-331">既定では、インデックスビューが返されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-331">The Index view is returned by default.</span></span> <span data-ttu-id="6da98-332">このビューには、Contacts データベーステーブルのすべてのデータが一覧表示されます (図15を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-332">This view lists all of the data from the Contacts database table (see Figure 15).</span></span>

<span data-ttu-id="6da98-333">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image15.jpg)](iteration-1-create-the-application-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-333">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image15.jpg)](iteration-1-create-the-application-cs/_static/image29.png)</span></span>

<span data-ttu-id="6da98-334">**図 15**: インデックスビュー ([クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image30.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-334">**Figure 15**: The Index view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image30.png))</span></span>

<span data-ttu-id="6da98-335">ビューの下部に [新規作成] というラベルのリンクが表示されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6da98-335">Notice that the Index view includes a link labeled Create New at the bottom of the view.</span></span> <span data-ttu-id="6da98-336">次のセクションでは、新しい連絡先を作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="6da98-336">In the next section, you learn how to create new contacts.</span></span>

## <a name="creating-new-contacts"></a><span data-ttu-id="6da98-337">新しい連絡先の作成</span><span class="sxs-lookup"><span data-stu-id="6da98-337">Creating New Contacts</span></span>

<span data-ttu-id="6da98-338">ユーザーが新しい連絡先を作成できるようにするには、Home コントローラーに2つの Create () アクションを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-338">To enable users to create new contacts, we need to add two Create() actions to the Home controller.</span></span> <span data-ttu-id="6da98-339">新しい連絡先を作成するための HTML フォームを返す Create () アクションを1つ作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-339">We need to create one Create() action that returns an HTML form for creating a new contact.</span></span> <span data-ttu-id="6da98-340">新しい連絡先の実際のデータベース挿入を実行する2つ目の Create () アクションを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-340">We need to create a second Create() action that performs the actual database insert of the new contact.</span></span>

<span data-ttu-id="6da98-341">Home コントローラーに追加する必要がある新しい Create () メソッドは、リスト4に含まれています。</span><span class="sxs-lookup"><span data-stu-id="6da98-341">The new Create() methods that we need to add to the Home controller are contained in Listing 4.</span></span>

<span data-ttu-id="6da98-342">**リスト 4-Controllers\ homecontroller.cs (Create メソッドを含む)**</span><span class="sxs-lookup"><span data-stu-id="6da98-342">**Listing 4 - Controllers\HomeController.cs (with Create methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample4.cs)]

<span data-ttu-id="6da98-343">最初の Create () メソッドは、http GET を使用して呼び出すことができますが、2番目の Create () メソッドは HTTP POST によってのみ呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="6da98-343">The first Create() method can be invoked with an HTTP GET while the second Create() method can be invoked only by an HTTP POST.</span></span> <span data-ttu-id="6da98-344">つまり、2番目の Create () メソッドは、HTML フォームを投稿するときにのみ呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="6da98-344">In other words, the second Create() method can be invoked only when posting an HTML form.</span></span> <span data-ttu-id="6da98-345">最初の Create () メソッドは、新しい連絡先を作成するための HTML フォームを含むビューを返します。</span><span class="sxs-lookup"><span data-stu-id="6da98-345">The first Create() method simply returns a view that contains the HTML form for creating a new contact.</span></span> <span data-ttu-id="6da98-346">2番目の Create () メソッドは、データベースに新しい連絡先を追加することでさらに興味深いものです。</span><span class="sxs-lookup"><span data-stu-id="6da98-346">The second Create() method is much more interesting: it adds the new contact to the database.</span></span>

<span data-ttu-id="6da98-347">Contact クラスのインスタンスを受け入れるように、2番目の Create () メソッドが変更されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6da98-347">Notice that the second Create() method has been modified to accept an instance of the Contact class.</span></span> <span data-ttu-id="6da98-348">HTML フォームからポストされたフォーム値は、ASP.NET MVC フレームワークによって自動的にこの Contact クラスにバインドされます。</span><span class="sxs-lookup"><span data-stu-id="6da98-348">The form values posted from the HTML form are bound to this Contact class by the ASP.NET MVC framework automatically.</span></span> <span data-ttu-id="6da98-349">HTML 作成フォームの各フォームフィールドは、Contact パラメーターのプロパティに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="6da98-349">Each form field from the HTML Create form is assigned to a property of the Contact parameter.</span></span>

<span data-ttu-id="6da98-350">Contact パラメーターが [Bind] 属性で修飾されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6da98-350">Notice that the Contact parameter is decorated with a [Bind] attribute.</span></span> <span data-ttu-id="6da98-351">[Bind] 属性は、"Contact Id" プロパティをバインドから除外するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-351">The [Bind] attribute is used to exclude the Contact Id property from binding.</span></span> <span data-ttu-id="6da98-352">Id プロパティは id プロパティを表すので、Id プロパティを設定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="6da98-352">Because the Id property represents an Identity property, we don t want to set the Id property.</span></span>

<span data-ttu-id="6da98-353">Create () メソッドの本体では、データベースに新しい連絡先を挿入するために Entity Framework が使用されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-353">In the body of the Create() method, the Entity Framework is used to insert the new Contact into the database.</span></span> <span data-ttu-id="6da98-354">新しい連絡先が既存の連絡先のセットに追加され、SaveChanges () メソッドが呼び出され、基になるデータベースにこれらの変更が反映されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-354">The new Contact is added to the existing set of Contacts and the SaveChanges() method is called to push these changes back to the underlying database.</span></span>

<span data-ttu-id="6da98-355">新しい連絡先を作成するための HTML フォームを生成するには、2つの Create () メソッドのいずれかを右クリックし、 **[ビューの追加]** メニューオプションを選択します (図16を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-355">You can generate an HTML form for creating new Contacts by right-clicking either of the two Create() methods and selecting the menu option **Add View** (see Figure 16).</span></span>

<span data-ttu-id="6da98-356">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image16.jpg)](iteration-1-create-the-application-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-356">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image16.jpg)](iteration-1-create-the-application-cs/_static/image31.png)</span></span>

<span data-ttu-id="6da98-357">**図 16**: 作成ビュー[を追加する (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image32.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-357">**Figure 16**: Adding the Create view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image32.png))</span></span>

<span data-ttu-id="6da98-358">**[ビューの追加]** ダイアログボックスで、 **Contactmanager. モデルの contact**クラスを選択し、 **[作成]** オプションでコンテンツを表示します (図17を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-358">In the **Add View** dialog, select the **ContactManager.Models.Contact** class and the **Create** option for view content (see Figure 17).</span></span> <span data-ttu-id="6da98-359">**[追加]** ボタンをクリックすると、作成ビューが自動的に生成されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-359">When you click the **Add** button, a Create view is generated automatically.</span></span>

<span data-ttu-id="6da98-360">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image17.jpg)](iteration-1-create-the-application-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-360">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image17.jpg)](iteration-1-create-the-application-cs/_static/image33.png)</span></span>

<span data-ttu-id="6da98-361">**図 17**: ページの爆発を[確認する (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image34.png)される)</span><span class="sxs-lookup"><span data-stu-id="6da98-361">**Figure 17**: Seeing a page explode ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image34.png))</span></span>

<span data-ttu-id="6da98-362">Create ビューには、Contact クラスの各プロパティのフォームフィールドが含まれています。</span><span class="sxs-lookup"><span data-stu-id="6da98-362">The Create view contains form fields for each of the properties of the Contact class.</span></span> <span data-ttu-id="6da98-363">リスト5には、Create ビューのコードが含まれています。</span><span class="sxs-lookup"><span data-stu-id="6da98-363">The code for the Create view is included in Listing 5.</span></span>

<span data-ttu-id="6da98-364">**リスト 5-Views\Home\Create.aspx**</span><span class="sxs-lookup"><span data-stu-id="6da98-364">**Listing 5 - Views\Home\Create.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample5.aspx)]

<span data-ttu-id="6da98-365">Create () メソッドを変更し、Create ビューを追加した後、Contact manager アプリケーションを実行して新しい連絡先を作成できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-365">After you modify the Create() methods and add the Create view, you can run the Contact Manger application and create new contacts.</span></span> <span data-ttu-id="6da98-366">インデックスビューに表示される **新規作成** リンクをクリックして、作成 ビューに移動します。</span><span class="sxs-lookup"><span data-stu-id="6da98-366">Click the **Create New** link that appears in the Index view to navigate to the Create view.</span></span> <span data-ttu-id="6da98-367">図18にビューが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-367">You should see the view in Figure 18.</span></span>

<span data-ttu-id="6da98-368">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image18.jpg)](iteration-1-create-the-application-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-368">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image18.jpg)](iteration-1-create-the-application-cs/_static/image35.png)</span></span>

<span data-ttu-id="6da98-369">**図 18**: [作成] ビュー ([クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image36.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-369">**Figure 18**: The Create View ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image36.png))</span></span>

## <a name="editing-contacts"></a><span data-ttu-id="6da98-370">連絡先の編集</span><span class="sxs-lookup"><span data-stu-id="6da98-370">Editing Contacts</span></span>

<span data-ttu-id="6da98-371">連絡先レコードを編集する機能を追加することは、新しい連絡先レコードを作成する機能を追加することとよく似ています。</span><span class="sxs-lookup"><span data-stu-id="6da98-371">Adding the functionality for editing a contact record is very similar to adding the functionality for creating new contact records.</span></span> <span data-ttu-id="6da98-372">まず、Home controller クラスに2つの新しい Edit メソッドを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-372">First, we need to add two new Edit methods to the Home controller class.</span></span> <span data-ttu-id="6da98-373">これらの新しい Edit () メソッドは、リスト6に含まれています。</span><span class="sxs-lookup"><span data-stu-id="6da98-373">These new Edit() methods are contained in Listing 6.</span></span>

<span data-ttu-id="6da98-374">**リスト 6-Controllers\ homecontroller.cs (Edit メソッドを含む)**</span><span class="sxs-lookup"><span data-stu-id="6da98-374">**Listing 6 - Controllers\HomeController.cs (with Edit methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample6.cs)]

<span data-ttu-id="6da98-375">最初の Edit () メソッドは、HTTP の GET 操作によって呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-375">The first Edit() method is invoked by an HTTP GET operation.</span></span> <span data-ttu-id="6da98-376">このメソッドには、編集する連絡先レコードの Id を表す Id パラメーターが渡されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-376">An Id parameter is passed to this method which represents the Id of the contact record being edited.</span></span> <span data-ttu-id="6da98-377">Entity Framework は、Id と一致する連絡先を取得するために使用されます。レコードを編集するための HTML フォームを含むビューが返されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-377">The Entity Framework is used to retrieve a contact that matches the Id. A view that contains an HTML form for editing a record is returned.</span></span>

<span data-ttu-id="6da98-378">2番目の Edit () メソッドは、実際の更新をデータベースに対して実行します。</span><span class="sxs-lookup"><span data-stu-id="6da98-378">The second Edit() method performs the actual update to the database.</span></span> <span data-ttu-id="6da98-379">このメソッドは、Contact クラスのインスタンスをパラメーターとして受け取ります。</span><span class="sxs-lookup"><span data-stu-id="6da98-379">This method accepts an instance of the Contact class as a parameter.</span></span> <span data-ttu-id="6da98-380">ASP.NET MVC フレームワークは、フォームフィールドを編集フォームからこのクラスに自動的にバインドします。</span><span class="sxs-lookup"><span data-stu-id="6da98-380">The ASP.NET MVC framework binds the form fields from the Edit form to this class automatically.</span></span> <span data-ttu-id="6da98-381">連絡先を編集するときは、[Bind] 属性を含めないことに注意してください (Id プロパティの値が必要です)。</span><span class="sxs-lookup"><span data-stu-id="6da98-381">Notice that you don t include the[Bind] attribute when editing a Contact (we need the value of the Id property).</span></span>

<span data-ttu-id="6da98-382">Entity Framework は、変更された連絡先をデータベースに保存するために使用します。</span><span class="sxs-lookup"><span data-stu-id="6da98-382">The Entity Framework is used to save the modified Contact to the database.</span></span> <span data-ttu-id="6da98-383">最初に、元の連絡先をデータベースから取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-383">The original Contact must be retrieved from the database first.</span></span> <span data-ttu-id="6da98-384">次に、Entity Framework ApplyPropertyChanges () メソッドを呼び出して、連絡先への変更を記録します。</span><span class="sxs-lookup"><span data-stu-id="6da98-384">Next, the Entity Framework ApplyPropertyChanges() method is called to record the changes to the Contact.</span></span> <span data-ttu-id="6da98-385">最後に、Entity Framework SaveChanges () メソッドを呼び出して、基になるデータベースへの変更を保持します。</span><span class="sxs-lookup"><span data-stu-id="6da98-385">Finally, the Entity Framework SaveChanges() method is called to persist the changes to the underlying database.</span></span>

<span data-ttu-id="6da98-386">Edit () メソッドを右クリックして [ビューの追加] メニューオプションを選択すると、編集フォームを含むビューを生成できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-386">You can generate the view that contains the Edit form by right-clicking the Edit() method and selecting the menu option Add View.</span></span> <span data-ttu-id="6da98-387">[ビューの追加] ダイアログで、 **Contactmanager. モデルの連絡先**クラスと**編集**ビューのコンテンツを選択します (図19を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-387">In the Add View dialog, select the **ContactManager.Models.Contact** class and the **Edit** view content (see Figure 19).</span></span>

<span data-ttu-id="6da98-388">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image19.jpg)](iteration-1-create-the-application-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-388">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image19.jpg)](iteration-1-create-the-application-cs/_static/image37.png)</span></span>

<span data-ttu-id="6da98-389">**図 19**: 編集ビュー[を追加する (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image38.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-389">**Figure 19**: Adding an Edit View ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image38.png))</span></span>

<span data-ttu-id="6da98-390">[追加] ボタンをクリックすると、新しい編集ビューが自動的に生成されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-390">When you click the Add button, a new Edit view is generated automatically.</span></span> <span data-ttu-id="6da98-391">生成される HTML フォームには、Contact クラスの各プロパティに対応するフィールドが含まれています (リスト7を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-391">The HTML form that is generated contains fields that correspond to each of the properties of the Contact class (see Listing 7).</span></span>

<span data-ttu-id="6da98-392">**リスト 7-Views\Home\Edit.aspx**</span><span class="sxs-lookup"><span data-stu-id="6da98-392">**Listing 7 - Views\Home\Edit.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample7.aspx)]

## <a name="deleting-contacts"></a><span data-ttu-id="6da98-393">連絡先の削除</span><span class="sxs-lookup"><span data-stu-id="6da98-393">Deleting Contacts</span></span>

<span data-ttu-id="6da98-394">連絡先を削除する場合は、Home コントローラークラスに2つの Delete () アクションを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-394">If you want to delete contacts then you need to add two Delete() actions to the Home controller class.</span></span> <span data-ttu-id="6da98-395">最初の Delete () アクションでは、削除の確認フォームが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-395">The first Delete() action displays a delete confirmation form.</span></span> <span data-ttu-id="6da98-396">2番目の Delete () アクションは、実際の削除を実行します。</span><span class="sxs-lookup"><span data-stu-id="6da98-396">The second Delete() action performs the actual delete.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6da98-397">その後、イテレーション #7 で Contact Manager を変更して、Ajax の1ステップの削除をサポートするようにします。</span><span class="sxs-lookup"><span data-stu-id="6da98-397">Later, in Iteration #7, we modify the Contact Manager so that it supports a one step Ajax delete.</span></span>

<span data-ttu-id="6da98-398">2つの新しい Delete () メソッドは、リスト8に含まれています。</span><span class="sxs-lookup"><span data-stu-id="6da98-398">The two new Delete() methods are contained in Listing 8.</span></span>

<span data-ttu-id="6da98-399">**Controllers\ homecontroller.cs の一覧表示 (Delete メソッド)**</span><span class="sxs-lookup"><span data-stu-id="6da98-399">**Listing 8 - Controllers\HomeController.cs (Delete methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample8.cs)]

<span data-ttu-id="6da98-400">最初の Delete () メソッドでは、データベースから連絡先レコードを削除するための確認フォームが返されます (「Figure20」を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="6da98-400">The first Delete() method returns a confirmation form for deleting a contact record from the database (see Figure20).</span></span> <span data-ttu-id="6da98-401">2番目の Delete () メソッドは、データベースに対して実際の削除操作を実行します。</span><span class="sxs-lookup"><span data-stu-id="6da98-401">The second Delete() method performs the actual delete operation against the database.</span></span> <span data-ttu-id="6da98-402">データベースから元の連絡先を取得した後、Entity Framework の DeleteObject () メソッドと SaveChanges () メソッドを呼び出して、データベースの削除を実行します。</span><span class="sxs-lookup"><span data-stu-id="6da98-402">After the original contact has been retrieved from the database, the Entity Framework DeleteObject() and SaveChanges() methods are called to perform the database delete.</span></span>

<span data-ttu-id="6da98-403">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image20.jpg)](iteration-1-create-the-application-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-403">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image20.jpg)](iteration-1-create-the-application-cs/_static/image39.png)</span></span>

<span data-ttu-id="6da98-404">**図 20**: 削除の確認ビュー ([クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image40.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-404">**Figure 20**: The delete confirmation view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image40.png))</span></span>

<span data-ttu-id="6da98-405">連絡先レコードを削除するためのリンクが含まれるように、インデックスビューを変更する必要があります (図21を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-405">We need to modify the Index view so that it contains a link for deleting contact records (see Figure 21).</span></span> <span data-ttu-id="6da98-406">編集リンクを含む同じテーブルセルに次のコードを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-406">You need to add the following code to the same table cell that contains the Edit link:</span></span>

<span data-ttu-id="6da98-407">Html.actionlink ({id = item.Id})%&gt;</span><span class="sxs-lookup"><span data-stu-id="6da98-407">Html.ActionLink( { id=item.Id }) %&gt;</span></span>

<span data-ttu-id="6da98-408">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image21.jpg)](iteration-1-create-the-application-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-408">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image21.jpg)](iteration-1-create-the-application-cs/_static/image41.png)</span></span>

<span data-ttu-id="6da98-409">**図 21**: 編集リンクがあるインデックスビュー ([クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image42.png)される)</span><span class="sxs-lookup"><span data-stu-id="6da98-409">**Figure 21**: Index view with Edit link ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image42.png))</span></span>

<span data-ttu-id="6da98-410">次に、削除の確認ビューを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-410">Next, we need to create the delete confirmation view.</span></span> <span data-ttu-id="6da98-411">Home コントローラークラスで Delete () メソッドを右クリックし、メニューオプション [ビューの追加] を選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-411">Right-click the Delete() method in the Home controller class and select the menu option Add View.</span></span> <span data-ttu-id="6da98-412">[ビューの追加] ダイアログボックスが表示されます (図22を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-412">The Add View dialog appears (see Figure 22).</span></span>

<span data-ttu-id="6da98-413">リスト、作成、および編集ビューの場合とは異なり、[ビューの追加] ダイアログには、削除ビューを作成するオプションがありません。</span><span class="sxs-lookup"><span data-stu-id="6da98-413">Unlike in the case of the List, Create, and Edit views, the Add View dialog does not contain an option to create a Delete view.</span></span> <span data-ttu-id="6da98-414">代わりに、 **Contactmanager. モデルの contact**データクラスと**空**のビューコンテンツを選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-414">Instead, select the **ContactManager.Models.Contact** data class and the **Empty** view content.</span></span> <span data-ttu-id="6da98-415">空のビューコンテンツオプションを選択するには、自分でビューを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-415">Selecting the Empty view content option will require us to create the view ourselves.</span></span>

<span data-ttu-id="6da98-416">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image22.jpg)](iteration-1-create-the-application-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-416">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image22.jpg)](iteration-1-create-the-application-cs/_static/image43.png)</span></span>

<span data-ttu-id="6da98-417">**図 22**: 削除確認ビュー[を追加する (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image44.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-417">**Figure 22**: Adding the delete confirmation view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image44.png))</span></span>

<span data-ttu-id="6da98-418">削除ビューの内容は、リスト9に含まれています。</span><span class="sxs-lookup"><span data-stu-id="6da98-418">The content of the Delete view is contained in Listing 9.</span></span> <span data-ttu-id="6da98-419">このビューには、特定の連絡先を削除する必要があるかどうかを確認するフォームが含まれています (図21を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-419">This view contains a form that confirms whether or not a particular contact should be deleted (see Figure 21).</span></span>

<span data-ttu-id="6da98-420">**リスト 9-Views\Home\Delete.aspx**</span><span class="sxs-lookup"><span data-stu-id="6da98-420">**Listing 9 - Views\Home\Delete.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample9.aspx)]

## <a name="changing-the-name-of-the-default-controller"></a><span data-ttu-id="6da98-421">既定のコントローラーの名前を変更する</span><span class="sxs-lookup"><span data-stu-id="6da98-421">Changing the Name of the Default Controller</span></span>

<span data-ttu-id="6da98-422">連絡先を操作するためのコントローラークラスの名前は、HomeController クラスという名前になることがあります。</span><span class="sxs-lookup"><span data-stu-id="6da98-422">It might bother you that the name of our controller class for working with contacts is named the HomeController class.</span></span> <span data-ttu-id="6da98-423">コントローラーに ContactController という名前を付けないでください。</span><span class="sxs-lookup"><span data-stu-id="6da98-423">Shouldn't the controller be named ContactController?</span></span>

<span data-ttu-id="6da98-424">この問題は、簡単に修正できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-424">This issue is easy enough to fix.</span></span> <span data-ttu-id="6da98-425">まず、Home コントローラーの名前をリファクターする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-425">First, we need to refactor the name of the Home controller.</span></span> <span data-ttu-id="6da98-426">Visual Studio Code エディターで HomeController クラスを開き、クラスの名前を右クリックして、メニューオプション [**リファクター]、[名前の変更**] の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="6da98-426">Open the HomeController class in the Visual Studio Code Editor, right click the name of the class and select the menu option **Refactor, Rename**.</span></span> <span data-ttu-id="6da98-427">このメニューオプションを選択すると、[名前の変更] ダイアログボックスが開きます。</span><span class="sxs-lookup"><span data-stu-id="6da98-427">Selecting this menu option opens the Rename dialog.</span></span>

<span data-ttu-id="6da98-428">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image23.jpg)](iteration-1-create-the-application-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-428">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image23.jpg)](iteration-1-create-the-application-cs/_static/image45.png)</span></span>

<span data-ttu-id="6da98-429">**図 23**: コントローラー名をリファクタリング[する (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image46.png)される)</span><span class="sxs-lookup"><span data-stu-id="6da98-429">**Figure 23**: Refactoring a controller name ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image46.png))</span></span>

<span data-ttu-id="6da98-430">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image24.jpg)](iteration-1-create-the-application-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-430">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image24.jpg)](iteration-1-create-the-application-cs/_static/image47.png)</span></span>

<span data-ttu-id="6da98-431">**図 24**: [名前の変更] ダイアログを使用[する (クリックすると、フルサイズの画像が表示](iteration-1-create-the-application-cs/_static/image48.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6da98-431">**Figure 24**: Using the Rename dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image48.png))</span></span>

<span data-ttu-id="6da98-432">コントローラークラスの名前を変更すると、Visual Studio によって Views フォルダー内のフォルダーの名前も更新されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-432">If you rename your controller class, Visual Studio will update the name of the folder in the Views folder as well.</span></span> <span data-ttu-id="6da98-433">Visual Studio は、\Views\Home フォルダーの名前を \Views\Contact フォルダーに変更します。</span><span class="sxs-lookup"><span data-stu-id="6da98-433">Visual Studio will rename the \Views\Home folder to the \Views\Contact folder.</span></span>

<span data-ttu-id="6da98-434">この変更を行った後、アプリケーションにはホームコントローラーがなくなります。</span><span class="sxs-lookup"><span data-stu-id="6da98-434">After you make this change, your application will no longer have a Home controller.</span></span> <span data-ttu-id="6da98-435">アプリケーションを実行すると、図25のエラーページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-435">When you run your application, you'll get the error page in Figure 25.</span></span>

<span data-ttu-id="6da98-436">[[新しいプロジェクト] ダイアログボックスの ![](iteration-1-create-the-application-cs/_static/image25.jpg)](iteration-1-create-the-application-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="6da98-436">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image25.jpg)](iteration-1-create-the-application-cs/_static/image49.png)</span></span>

<span data-ttu-id="6da98-437">**図 25**: 既定のコントローラーがない ([クリックしてフルサイズのイメージを表示する](iteration-1-create-the-application-cs/_static/image50.png))</span><span class="sxs-lookup"><span data-stu-id="6da98-437">**Figure 25**: No default controller ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image50.png))</span></span>

<span data-ttu-id="6da98-438">Global.asax ファイルの既定のルートを更新して、Home コントローラーではなく Contact controller を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-438">We need to update the default route in the Global.asax file to use the Contact controller instead of the Home controller.</span></span> <span data-ttu-id="6da98-439">Global.asax ファイルを開き、既定のルートで使用される既定のコントローラーを変更します (一覧10を参照)。</span><span class="sxs-lookup"><span data-stu-id="6da98-439">Open the Global.asax file and modify the default controller used by the default route (see Listing 10).</span></span>

<span data-ttu-id="6da98-440">**一覧 10-Global.asax.cs**</span><span class="sxs-lookup"><span data-stu-id="6da98-440">**Listing 10 - Global.asax.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample10.cs)]

<span data-ttu-id="6da98-441">これらの変更を行った後、連絡先マネージャーが正常に実行されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-441">After you make these changes, the Contact Manager will run correctly.</span></span> <span data-ttu-id="6da98-442">これで、Contact controller クラスが既定のコントローラーとして使用されます。</span><span class="sxs-lookup"><span data-stu-id="6da98-442">Now, it will use the Contact controller class as the default controller.</span></span>

## <a name="summary"></a><span data-ttu-id="6da98-443">まとめ</span><span class="sxs-lookup"><span data-stu-id="6da98-443">Summary</span></span>

<span data-ttu-id="6da98-444">この最初のイテレーションでは、最も迅速な方法で基本的な Contact Manager アプリケーションを作成しました。</span><span class="sxs-lookup"><span data-stu-id="6da98-444">In this first iteration, we created a basic Contact Manager application in the fastest way possible.</span></span> <span data-ttu-id="6da98-445">Visual Studio を利用して、コントローラーとビューの初期コードを自動的に生成しました。</span><span class="sxs-lookup"><span data-stu-id="6da98-445">We took advantage of Visual Studio to generate the initial code for our controllers and views automatically.</span></span> <span data-ttu-id="6da98-446">また、Entity Framework を利用して、データベースモデルクラスを自動的に生成しました。</span><span class="sxs-lookup"><span data-stu-id="6da98-446">We also took advantage of the Entity Framework to generate our database model classes automatically.</span></span>

<span data-ttu-id="6da98-447">現在、連絡先マネージャーアプリケーションを使用して、連絡先レコードの一覧表示、作成、編集、および削除を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="6da98-447">Currently, we can list, create, edit, and delete contact records with the Contact Manager application.</span></span> <span data-ttu-id="6da98-448">言い換えると、データベース駆動型 web アプリケーションで必要な基本的なデータベース操作をすべて実行できます。</span><span class="sxs-lookup"><span data-stu-id="6da98-448">In other words, we can perform all of the basic database operations required by a database-driven web application.</span></span>

<span data-ttu-id="6da98-449">残念ながら、アプリケーションにはいくつかの問題があります。</span><span class="sxs-lookup"><span data-stu-id="6da98-449">Unfortunately, our application has some problems.</span></span> <span data-ttu-id="6da98-450">まず、連絡先マネージャーアプリケーションは最も魅力的なアプリケーションではありません。</span><span class="sxs-lookup"><span data-stu-id="6da98-450">First and I hesitate to admit this, the Contact Manager application is not the most attractive application.</span></span> <span data-ttu-id="6da98-451">いくつかのデザイン作業が必要です。</span><span class="sxs-lookup"><span data-stu-id="6da98-451">It needs some design work.</span></span> <span data-ttu-id="6da98-452">次のイテレーションでは、アプリケーションの外観を向上させるために、既定のビューマスターページとカスケードスタイルシートをどのように変更できるかを見ていきます。</span><span class="sxs-lookup"><span data-stu-id="6da98-452">In the next iteration, we'll look at how we can change the default view master page and cascading style sheet to improve the appearance of the application.</span></span>

<span data-ttu-id="6da98-453">2つ目は、フォーム検証を実装していないことです。</span><span class="sxs-lookup"><span data-stu-id="6da98-453">Second, we have not implemented any form validation.</span></span> <span data-ttu-id="6da98-454">たとえば、フォームのフィールドに値を入力することなく、Create contact フォームを送信できないようにすることはできません。</span><span class="sxs-lookup"><span data-stu-id="6da98-454">For example, there is nothing to prevent you from submitting the Create contact form without entering values for any of the form fields.</span></span> <span data-ttu-id="6da98-455">また、無効な電話番号と電子メールアドレスを入力することもできます。</span><span class="sxs-lookup"><span data-stu-id="6da98-455">Furthermore, you can enter invalid phone numbers and email addresses.</span></span> <span data-ttu-id="6da98-456">イテレーション #3 でのフォーム検証の問題に取り組むことを開始します。</span><span class="sxs-lookup"><span data-stu-id="6da98-456">We start to tackle the problem of form validation in iteration #3.</span></span>

<span data-ttu-id="6da98-457">最後に、最も重要なのは、Contact Manager アプリケーションの現在のイテレーションを簡単に変更または管理できないことです。</span><span class="sxs-lookup"><span data-stu-id="6da98-457">Finally, and most importantly, the current iteration of the Contact Manager application cannot be easily modified or maintained.</span></span> <span data-ttu-id="6da98-458">たとえば、データベースアクセスロジックはコントローラーアクションに組み込まれています。</span><span class="sxs-lookup"><span data-stu-id="6da98-458">For example, the database access logic is baked right into the controller actions.</span></span> <span data-ttu-id="6da98-459">つまり、コントローラーを変更することなくデータアクセスコードを変更することはできません。</span><span class="sxs-lookup"><span data-stu-id="6da98-459">This means that we cannot modify our data access code without modifying our controllers.</span></span> <span data-ttu-id="6da98-460">後のイテレーションでは、連絡先マネージャーがより柔軟に変更できるように実装できるソフトウェア設計パターンについて説明します。</span><span class="sxs-lookup"><span data-stu-id="6da98-460">In later iterations, we explore software design patterns that we can implement to make the Contact Manager more resilient to change.</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="6da98-461">Next</span><span class="sxs-lookup"><span data-stu-id="6da98-461">Next</span></span>](iteration-2-make-the-application-look-nice-cs.md)
