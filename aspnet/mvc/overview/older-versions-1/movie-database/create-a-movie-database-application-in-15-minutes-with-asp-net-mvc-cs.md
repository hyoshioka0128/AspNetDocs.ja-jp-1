---
uid: mvc/overview/older-versions-1/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs
title: ASP.NET MVC (C#) を使用して、15分でムービーデータベースアプリケーションを作成します。Microsoft Docs
author: StephenWalther
description: Stephen Walther は、データベース主導型の ASP.NET MVC アプリケーション全体を最初から最後までビルドします。 このチュートリアルは、新たに導入されたユーザーのためのすばらしい概要です...
ms.author: riande
ms.date: 01/27/2009
ms.assetid: dd1be137-91c5-47a8-8137-fecf0789c7f5
msc.legacyurl: /mvc/overview/older-versions-1/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs
msc.type: authoredcontent
ms.openlocfilehash: 1be5d135a44feb27626dd26a544b64cfb57b18a9
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78435862"
---
# <a name="create-a-movie-database-application-in-15-minutes-with-aspnet-mvc-c"></a><span data-ttu-id="5d932-104">ASP.NET MVC を使用し、映画データベース アプリケーションを 15 分で作成する (C#)</span><span class="sxs-lookup"><span data-stu-id="5d932-104">Create a Movie Database Application in 15 Minutes with ASP.NET MVC (C#)</span></span>

<span data-ttu-id="5d932-105">[Stephen Walther](https://github.com/StephenWalther)</span><span class="sxs-lookup"><span data-stu-id="5d932-105">by [Stephen Walther](https://github.com/StephenWalther)</span></span>

[<span data-ttu-id="5d932-106">コードのダウンロード</span><span class="sxs-lookup"><span data-stu-id="5d932-106">Download Code</span></span>](https://download.microsoft.com/download/7/2/8/728F8794-E59A-4D18-9A56-7AD2DB05BD9D/MovieApp_CS.zip)

> <span data-ttu-id="5d932-107">Stephen Walther は、データベース主導型の ASP.NET MVC アプリケーション全体を最初から最後までビルドします。</span><span class="sxs-lookup"><span data-stu-id="5d932-107">Stephen Walther builds an entire database-driven ASP.NET MVC application from start to finish.</span></span> <span data-ttu-id="5d932-108">このチュートリアルは、ASP.NET MVC フレームワークを初めて使用し、ASP.NET MVC アプリケーションを構築するプロセスを理解したい方を対象とした、すばらしい概要です。</span><span class="sxs-lookup"><span data-stu-id="5d932-108">This tutorial is a great introduction for people who are new to the ASP.NET MVC Framework and who want to get a sense of the process of building an ASP.NET MVC application.</span></span>

<span data-ttu-id="5d932-109">このチュートリアルの目的は、ASP.NET MVC アプリケーションを構築するための "何がいいか" という意味を持つことです。</span><span class="sxs-lookup"><span data-stu-id="5d932-109">The purpose of this tutorial is to give you a sense of "what it is like" to build an ASP.NET MVC application.</span></span> <span data-ttu-id="5d932-110">このチュートリアルでは、ASP.NET MVC アプリケーション全体を最初から最後まで構築します。</span><span class="sxs-lookup"><span data-stu-id="5d932-110">In this tutorial, I blast through building an entire ASP.NET MVC application from start to finish.</span></span> <span data-ttu-id="5d932-111">ここでは、データベースレコードを一覧表示、作成、および編集する方法を示す単純なデータベースドリブンアプリケーションを構築する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="5d932-111">I show you how to build a simple database-driven application that illustrates how you can list, create, and edit database records.</span></span>

<span data-ttu-id="5d932-112">アプリケーションの構築プロセスを簡略化するために、Visual Studio 2008 のスキャフォールディング機能を活用します。</span><span class="sxs-lookup"><span data-stu-id="5d932-112">To simplify the process of building our application, we'll take advantage of the scaffolding features of Visual Studio 2008.</span></span> <span data-ttu-id="5d932-113">ここでは、コントローラー、モデル、およびビューの初期コードとコンテンツを Visual Studio で生成します。</span><span class="sxs-lookup"><span data-stu-id="5d932-113">We'll let Visual Studio generate the initial code and content for our controllers, models, and views.</span></span>

<span data-ttu-id="5d932-114">Active Server のページや ASP.NET を使用していた場合は、ASP.NET MVC が非常に使い慣れていることがわかります。</span><span class="sxs-lookup"><span data-stu-id="5d932-114">If you have worked with Active Server Pages or ASP.NET, then you should find ASP.NET MVC very familiar.</span></span> <span data-ttu-id="5d932-115">ASP.NET MVC ビューは、Active Server Pages アプリケーションのページとよく似ています。</span><span class="sxs-lookup"><span data-stu-id="5d932-115">ASP.NET MVC views are very much like the pages in an Active Server Pages application.</span></span> <span data-ttu-id="5d932-116">また、従来の ASP.NET Web フォームアプリケーションと同様に、ASP.NET MVC では、.NET framework に用意されている豊富な言語およびクラスのセットへのフルアクセスを提供しています。</span><span class="sxs-lookup"><span data-stu-id="5d932-116">And, just like a traditional ASP.NET Web Forms application, ASP.NET MVC provides you with full access to the rich set of languages and classes provided by the .NET framework.</span></span>

<span data-ttu-id="5d932-117">このチュートリアルでは、ASP.NET MVC アプリケーションの構築エクスペリエンスが、Active Server ページまたは ASP.NET Web フォームアプリケーションを構築する場合と似ているかどうかについての理解を深めることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="5d932-117">My hope is that this tutorial will give you a sense of how the experience of building an ASP.NET MVC application is both similar and different than the experience of building an Active Server Pages or ASP.NET Web Forms application.</span></span>

## <a name="overview-of-the-movie-database-application"></a><span data-ttu-id="5d932-118">ムービーデータベースアプリケーションの概要</span><span class="sxs-lookup"><span data-stu-id="5d932-118">Overview of the Movie Database Application</span></span>

<span data-ttu-id="5d932-119">私たちの目標は単純なものを保持することであるため、非常に単純なムービーデータベースアプリケーションを構築します。</span><span class="sxs-lookup"><span data-stu-id="5d932-119">Because our goal is to keep things simple, we'll build a very simple Movie Database application.</span></span> <span data-ttu-id="5d932-120">この単純なムービーデータベースアプリケーションでは、次の3つのことを実行できます。</span><span class="sxs-lookup"><span data-stu-id="5d932-120">Our simple Movie Database application will allow us to do three things:</span></span>

1. <span data-ttu-id="5d932-121">一連のムービーデータベースレコードを一覧表示する</span><span class="sxs-lookup"><span data-stu-id="5d932-121">List a set of movie database records</span></span>
2. <span data-ttu-id="5d932-122">新しいムービーデータベースレコードを作成する</span><span class="sxs-lookup"><span data-stu-id="5d932-122">Create a new movie database record</span></span>
3. <span data-ttu-id="5d932-123">既存のムービーデータベースレコードを編集する</span><span class="sxs-lookup"><span data-stu-id="5d932-123">Edit an existing movie database record</span></span>

<span data-ttu-id="5d932-124">ここでも、単純なものを保持する必要があるため、アプリケーションの構築に必要な ASP.NET MVC フレームワークの最小限の機能を活用します。</span><span class="sxs-lookup"><span data-stu-id="5d932-124">Again, because we want to keep things simple, we'll take advantage of the minimum number of features of the ASP.NET MVC framework needed to build our application.</span></span> <span data-ttu-id="5d932-125">たとえば、テスト駆動開発を利用することはできません。</span><span class="sxs-lookup"><span data-stu-id="5d932-125">For example, we won't be taking advantage of Test-Driven Development.</span></span>

<span data-ttu-id="5d932-126">アプリケーションを作成するには、次の各手順を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-126">In order to create our application, we need to complete each of the following steps:</span></span>

1. <span data-ttu-id="5d932-127">ASP.NET MVC Web アプリケーションプロジェクトを作成する</span><span class="sxs-lookup"><span data-stu-id="5d932-127">Create the ASP.NET MVC Web Application Project</span></span>
2. <span data-ttu-id="5d932-128">データベースの作成</span><span class="sxs-lookup"><span data-stu-id="5d932-128">Create the database</span></span>
3. <span data-ttu-id="5d932-129">データベースモデルを作成する</span><span class="sxs-lookup"><span data-stu-id="5d932-129">Create the database model</span></span>
4. <span data-ttu-id="5d932-130">ASP.NET MVC コントローラーを作成する</span><span class="sxs-lookup"><span data-stu-id="5d932-130">Create the ASP.NET MVC controller</span></span>
5. <span data-ttu-id="5d932-131">ASP.NET MVC ビューを作成する</span><span class="sxs-lookup"><span data-stu-id="5d932-131">Create the ASP.NET MVC views</span></span>

## <a name="preliminaries"></a><span data-ttu-id="5d932-132">準備</span><span class="sxs-lookup"><span data-stu-id="5d932-132">Preliminaries</span></span>

<span data-ttu-id="5d932-133">ASP.NET MVC アプリケーションをビルドするには、Visual Studio 2008 または Visual Web Developer 2008 Express が必要です。</span><span class="sxs-lookup"><span data-stu-id="5d932-133">You'll need either Visual Studio 2008 or Visual Web Developer 2008 Express to build an ASP.NET MVC application.</span></span> <span data-ttu-id="5d932-134">また、ASP.NET MVC フレームワークをダウンロードする必要もあります。</span><span class="sxs-lookup"><span data-stu-id="5d932-134">You also need to download the ASP.NET MVC framework.</span></span>

<span data-ttu-id="5d932-135">Visual Studio 2008 を所有していない場合は、この web サイトから Visual Studio 2008 の90日の試用版をダウンロードできます。</span><span class="sxs-lookup"><span data-stu-id="5d932-135">If you don't own Visual Studio 2008, then you can download a 90 day trial version of Visual Studio 2008 from this website:</span></span>

[https://msdn.microsoft.com/vs2008/products/cc268305.aspx](https://msdn.microsoft.com/vs2008/products/cc268305.aspx)

<span data-ttu-id="5d932-136">または、Visual Web Developer Express 2008 を使用して ASP.NET MVC アプリケーションを作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="5d932-136">Alternatively, you can create ASP.NET MVC applications with Visual Web Developer Express 2008.</span></span> <span data-ttu-id="5d932-137">Visual Web Developer Express を使用する場合は、Service Pack 1 がインストールされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-137">If you decide to use Visual Web Developer Express then you must have Service Pack 1 installed.</span></span> <span data-ttu-id="5d932-138">Visual Web Developer 2008 Express with Service Pack 1 は、次の web サイトからダウンロードできます。</span><span class="sxs-lookup"><span data-stu-id="5d932-138">You can download Visual Web Developer 2008 Express with Service Pack 1 from this website:</span></span>

[<span data-ttu-id="5d932-139">https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;d isplaylang = en</span><span class="sxs-lookup"><span data-stu-id="5d932-139">https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;displaylang=en</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;displaylang=en)

<span data-ttu-id="5d932-140">Visual Studio 2008 または Visual Web Developer 2008 をインストールした後、ASP.NET MVC フレームワークをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-140">After you install either Visual Studio 2008 or Visual Web Developer 2008, you need to install the ASP.NET MVC framework.</span></span> <span data-ttu-id="5d932-141">ASP.NET MVC フレームワークは、次の web サイトからダウンロードできます。</span><span class="sxs-lookup"><span data-stu-id="5d932-141">You can download the ASP.NET MVC framework from the following website:</span></span>

[https://www.asp.net/mvc/](../../../index.md)

> [!NOTE] 
> 
> <span data-ttu-id="5d932-142">ASP.NET framework と ASP.NET MVC フレームワークを個別にダウンロードするのではなく、Web Platform Installer を利用できます。</span><span class="sxs-lookup"><span data-stu-id="5d932-142">Instead of downloading the ASP.NET framework and the ASP.NET MVC framework individually, you can take advantage of the Web Platform Installer.</span></span> <span data-ttu-id="5d932-143">Web Platform Installer は、インストールされているアプリケーションをコンピューターで簡単に管理できるようにするアプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="5d932-143">The Web Platform Installer is an application that enables you to easily manage the installed applications are your computer:</span></span>
> 
> [https://www.microsoft.com/web/gallery/Install.aspx](https://www.microsoft.com/web/gallery/Install.aspx)

## <a name="creating-an-aspnet-mvc-web-application-project"></a><span data-ttu-id="5d932-144">ASP.NET MVC Web アプリケーションプロジェクトの作成</span><span class="sxs-lookup"><span data-stu-id="5d932-144">Creating an ASP.NET MVC Web Application Project</span></span>

<span data-ttu-id="5d932-145">まず、Visual Studio 2008 で新しい ASP.NET MVC Web アプリケーションプロジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="5d932-145">Let's start by creating a new ASP.NET MVC Web Application project in Visual Studio 2008.</span></span> <span data-ttu-id="5d932-146">メニューオプションファイル **新しいプロジェクト** を選択すると、図1の 新しいプロジェクト ダイアログボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-146">Select the menu option **File, New Project** and you will see the New Project dialog box in Figure 1.</span></span> <span data-ttu-id="5d932-147">プログラミング言語として C# を選択し、ASP.NET MVC Web アプリケーション プロジェクト テンプレートを選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-147">Select C# as the programming language and select the ASP.NET MVC Web Application project template.</span></span> <span data-ttu-id="5d932-148">プロジェクトに名前を付け、[OK] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="5d932-148">Give your project the name MovieApp and click the OK button.</span></span>

<span data-ttu-id="5d932-149">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-149">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.png)</span></span>

<span data-ttu-id="5d932-150">**図 01**: [新しいプロジェクト] ダイアログボックス ([クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5d932-150">**Figure 01**: The New Project dialog box ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.png))</span></span>

<span data-ttu-id="5d932-151">[新しいプロジェクト] ダイアログボックスの上部にあるドロップダウンリストから .NET Framework 3.5 を選択したことを確認してください。そうしないと、ASP.NET MVC Web アプリケーションプロジェクトテンプレートが表示されません。</span><span class="sxs-lookup"><span data-stu-id="5d932-151">Make sure that you select .NET Framework 3.5 from the dropdown list at the top of the New Project dialog or the ASP.NET MVC Web Application project template won't appear.</span></span>

<span data-ttu-id="5d932-152">新しい MVC Web アプリケーションプロジェクトを作成するたびに、Visual Studio によって個別の単体テストプロジェクトを作成するよう求められます。</span><span class="sxs-lookup"><span data-stu-id="5d932-152">Whenever you create a new MVC Web Application project, Visual Studio prompts you to create a separate unit test project.</span></span> <span data-ttu-id="5d932-153">図2のダイアログが表示されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-153">The dialog in Figure 2 appears.</span></span> <span data-ttu-id="5d932-154">このチュートリアルでは時間の制約があるためテストを作成しないので、このことには少しの問題があるので、 **[いいえ]** オプションを選択し、 **[OK]** ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="5d932-154">Because we won't be creating tests in this tutorial because of time constraints (and, yes, we should feel a little guilty about this) select the **No** option and click the **OK** button.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="5d932-155">Visual Web Developer では、テストプロジェクトはサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="5d932-155">Visual Web Developer does not support test projects.</span></span>

<span data-ttu-id="5d932-156">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-156">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.png)</span></span>

<span data-ttu-id="5d932-157">**図 02**: [単体テストプロジェクトの作成] ダイアログ ([クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5d932-157">**Figure 02**: The Create Unit Test Project dialog ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.png))</span></span>

<span data-ttu-id="5d932-158">ASP.NET MVC アプリケーションには、モデル、ビュー、およびコントローラーフォルダーという標準のフォルダーセットがあります。</span><span class="sxs-lookup"><span data-stu-id="5d932-158">An ASP.NET MVC application has a standard set of folders: a Models, Views, and Controllers folder.</span></span> <span data-ttu-id="5d932-159">この標準のフォルダーセットは、[ソリューションエクスプローラー] ウィンドウに表示されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-159">You can see this standard set of folders in the Solution Explorer window.</span></span> <span data-ttu-id="5d932-160">ムービーデータベースアプリケーションをビルドするには、各モデル、ビュー、およびコントローラーフォルダーにファイルを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-160">We'll need to add files to each of the Models, Views, and Controllers folders in order to build our Movie Database application.</span></span>

<span data-ttu-id="5d932-161">Visual Studio で新しい MVC アプリケーションを作成すると、サンプルアプリケーションが取得されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-161">When you create a new MVC application with Visual Studio, you get a sample application.</span></span> <span data-ttu-id="5d932-162">最初から開始する必要があるため、このサンプルアプリケーションのコンテンツを削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-162">Because we want to start from scratch, we need to delete the content for this sample application.</span></span> <span data-ttu-id="5d932-163">次のファイルとフォルダーを削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-163">You need to delete the following file and the following folder:</span></span>

- <span data-ttu-id="5d932-164">Controllers\HomeController.cs</span><span class="sxs-lookup"><span data-stu-id="5d932-164">Controllers\HomeController.cs</span></span>
- <span data-ttu-id="5d932-165">Views\Home</span><span class="sxs-lookup"><span data-stu-id="5d932-165">Views\Home</span></span>

## <a name="creating-the-database"></a><span data-ttu-id="5d932-166">データベースの作成</span><span class="sxs-lookup"><span data-stu-id="5d932-166">Creating the Database</span></span>

<span data-ttu-id="5d932-167">ムービーデータベースレコードを保持するデータベースを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-167">We need to create a database to hold our movie database records.</span></span> <span data-ttu-id="5d932-168">さいわい、Visual Studio には、SQL Server Express という名前の無料のデータベースが含まれています。</span><span class="sxs-lookup"><span data-stu-id="5d932-168">Luckily, Visual Studio includes a free database named SQL Server Express.</span></span> <span data-ttu-id="5d932-169">データベースを作成するには、次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="5d932-169">Follow these steps to create the database:</span></span>

1. <span data-ttu-id="5d932-170">ソリューションエクスプローラーウィンドウで App\_Data フォルダーを右クリックし、メニューオプション 追加、**新しい項目** の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-170">Right-click the App\_Data folder in the Solution Explorer window and select the menu option **Add, New Item**.</span></span>
2. <span data-ttu-id="5d932-171">**[データ]** カテゴリを選択し、 **[SQL Server データベース]** テンプレートを選択します (図3を参照)。</span><span class="sxs-lookup"><span data-stu-id="5d932-171">Select the **Data** category and select the **SQL Server Database** template (see Figure 3).</span></span>
3. <span data-ttu-id="5d932-172">新しいデータベースに*MoviesDB*という名前を指定し、 **[追加]** ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="5d932-172">Name your new database *MoviesDB.mdf* and click the **Add** button.</span></span>

<span data-ttu-id="5d932-173">データベースを作成したら、[App\_Data] フォルダーにある MoviesDB ファイルをダブルクリックしてデータベースに接続できます。</span><span class="sxs-lookup"><span data-stu-id="5d932-173">After you create your database, you can connect to the database by double-clicking the MoviesDB.mdf file located in the App\_Data folder.</span></span> <span data-ttu-id="5d932-174">MoviesDB ファイルをダブルクリックすると、[サーバーエクスプローラー] ウィンドウが開きます。</span><span class="sxs-lookup"><span data-stu-id="5d932-174">Double-clicking the MoviesDB.mdf file opens the Server Explorer window.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="5d932-175">Visual Web Developer の場合、[サーバーエクスプローラー] ウィンドウには [データベースエクスプローラー] ウィンドウという名前が付けられます。</span><span class="sxs-lookup"><span data-stu-id="5d932-175">The Server Explorer window is named the Database Explorer window in the case of Visual Web Developer.</span></span>

<span data-ttu-id="5d932-176">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-176">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.png)</span></span>

<span data-ttu-id="5d932-177">**図 03**: Microsoft SQL Server データベースの作成 ([クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.png)される)</span><span class="sxs-lookup"><span data-stu-id="5d932-177">**Figure 03**: Creating a Microsoft SQL Server Database ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.png))</span></span>

<span data-ttu-id="5d932-178">次に、新しいデータベーステーブルを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-178">Next, we need to create a new database table.</span></span> <span data-ttu-id="5d932-179">サーバーエクスプローラー ウィンドウで、テーブル フォルダーを右クリックし、**新しいテーブルの追加** メニューオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-179">From within the Sever Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span> <span data-ttu-id="5d932-180">このメニューオプションを選択すると、データベーステーブルデザイナーが開きます。</span><span class="sxs-lookup"><span data-stu-id="5d932-180">Selecting this menu option opens the database table designer.</span></span> <span data-ttu-id="5d932-181">次のデータベース列を作成します。</span><span class="sxs-lookup"><span data-stu-id="5d932-181">Create the following database columns:</span></span>

<a id="0.1_table01"></a>

| <span data-ttu-id="5d932-182">**列名**</span><span class="sxs-lookup"><span data-stu-id="5d932-182">**Column Name**</span></span> | <span data-ttu-id="5d932-183">**[データ型]**</span><span class="sxs-lookup"><span data-stu-id="5d932-183">**Data Type**</span></span> | <span data-ttu-id="5d932-184">**[NULL を許容]**</span><span class="sxs-lookup"><span data-stu-id="5d932-184">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="5d932-185">Id</span><span class="sxs-lookup"><span data-stu-id="5d932-185">Id</span></span> | <span data-ttu-id="5d932-186">int</span><span class="sxs-lookup"><span data-stu-id="5d932-186">Int</span></span> | <span data-ttu-id="5d932-187">False</span><span class="sxs-lookup"><span data-stu-id="5d932-187">False</span></span> |
| <span data-ttu-id="5d932-188">タイトル</span><span class="sxs-lookup"><span data-stu-id="5d932-188">Title</span></span> | <span data-ttu-id="5d932-189">Nvarchar (100)</span><span class="sxs-lookup"><span data-stu-id="5d932-189">Nvarchar(100)</span></span> | <span data-ttu-id="5d932-190">False</span><span class="sxs-lookup"><span data-stu-id="5d932-190">False</span></span> |
| <span data-ttu-id="5d932-191">ディレクター</span><span class="sxs-lookup"><span data-stu-id="5d932-191">Director</span></span> | <span data-ttu-id="5d932-192">Nvarchar (100)</span><span class="sxs-lookup"><span data-stu-id="5d932-192">Nvarchar(100)</span></span> | <span data-ttu-id="5d932-193">False</span><span class="sxs-lookup"><span data-stu-id="5d932-193">False</span></span> |
| <span data-ttu-id="5d932-194">DateReleased</span><span class="sxs-lookup"><span data-stu-id="5d932-194">DateReleased</span></span> | <span data-ttu-id="5d932-195">DateTime</span><span class="sxs-lookup"><span data-stu-id="5d932-195">DateTime</span></span> | <span data-ttu-id="5d932-196">False</span><span class="sxs-lookup"><span data-stu-id="5d932-196">False</span></span> |

<span data-ttu-id="5d932-197">最初の列である Id 列には、2つの特殊なプロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="5d932-197">The first column, the Id column, has two special properties.</span></span> <span data-ttu-id="5d932-198">まず、Id 列を主キー列としてマークする必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-198">First, you need to mark the Id column as the primary key column.</span></span> <span data-ttu-id="5d932-199">Id 列を選択したら、**主キーの設定** ボタンをクリックします (これは、キーのようなアイコンです)。</span><span class="sxs-lookup"><span data-stu-id="5d932-199">After selecting the Id column, click the **Set Primary Key** button (it is the icon that looks like a key).</span></span> <span data-ttu-id="5d932-200">次に、Id 列を Id 列としてマークする必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-200">Second, you need to mark the Id column as an Identity column.</span></span> <span data-ttu-id="5d932-201">列プロパティウィンドウで、[Identity Specification] セクションまで下にスクロールし、それを展開します。</span><span class="sxs-lookup"><span data-stu-id="5d932-201">In the Column Properties window, scroll down to the Identity Specification section and expand it.</span></span> <span data-ttu-id="5d932-202">**[Id]** プロパティを **[はい]** に変更します。</span><span class="sxs-lookup"><span data-stu-id="5d932-202">Change the **Is Identity** property to the value **Yes**.</span></span> <span data-ttu-id="5d932-203">完了すると、テーブルは図4のようになります。</span><span class="sxs-lookup"><span data-stu-id="5d932-203">When you are finished, the table should look like Figure 4.</span></span>

<span data-ttu-id="5d932-204">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-204">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.png)</span></span>

<span data-ttu-id="5d932-205">**図 04**: ムービーデータベーステーブル ([クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5d932-205">**Figure 04**: The Movies database table ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.png))</span></span>

<span data-ttu-id="5d932-206">最後の手順では、新しいテーブルを保存します。</span><span class="sxs-lookup"><span data-stu-id="5d932-206">The final step is to save the new table.</span></span> <span data-ttu-id="5d932-207">[保存] ボタン (フロッピーのアイコン) をクリックし、新しいテーブルに「映画」という名前を付けます。</span><span class="sxs-lookup"><span data-stu-id="5d932-207">Click the Save button (the icon of the floppy) and give the new table the name Movies.</span></span>

<span data-ttu-id="5d932-208">テーブルの作成が完了したら、いくつかのムービーレコードをテーブルに追加します。</span><span class="sxs-lookup"><span data-stu-id="5d932-208">After you finish creating the table, add some movie records to the table.</span></span> <span data-ttu-id="5d932-209">サーバーエクスプローラーウィンドウで 映画 テーブルを右クリックし、**テーブルデータの表示** メニューオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-209">Right-click the Movies table in the Server Explorer window and select the menu option **Show Table Data**.</span></span> <span data-ttu-id="5d932-210">お気に入りのムービーの一覧を入力します (図5を参照)。</span><span class="sxs-lookup"><span data-stu-id="5d932-210">Enter a list of your favorite movies (see Figure 5).</span></span>

<span data-ttu-id="5d932-211">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-211">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.png)</span></span>

<span data-ttu-id="5d932-212">**図 05**: ムービーレコードを入力[する (クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.png)される)</span><span class="sxs-lookup"><span data-stu-id="5d932-212">**Figure 05**: Entering movie records ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.png))</span></span>

## <a name="creating-the-model"></a><span data-ttu-id="5d932-213">モデルの作成</span><span class="sxs-lookup"><span data-stu-id="5d932-213">Creating the Model</span></span>

<span data-ttu-id="5d932-214">次に、データベースを表す一連のクラスを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-214">We next need to create a set of classes to represent our database.</span></span> <span data-ttu-id="5d932-215">データベースモデルを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-215">We need to create a database model.</span></span> <span data-ttu-id="5d932-216">Microsoft Entity Framework を利用して、データベースモデルのクラスを自動的に生成します。</span><span class="sxs-lookup"><span data-stu-id="5d932-216">We'll take advantage of the Microsoft Entity Framework to generate the classes for our database model automatically.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="5d932-217">ASP.NET MVC フレームワークは、Microsoft Entity Framework に関連付けられていません。</span><span class="sxs-lookup"><span data-stu-id="5d932-217">The ASP.NET MVC framework is not tied to the Microsoft Entity Framework.</span></span> <span data-ttu-id="5d932-218">LINQ to SQL、Subsonic、NHibernate などのさまざまなオブジェクトリレーショナルマッピング (または/M) ツールを利用して、データベースモデルクラスを作成できます。</span><span class="sxs-lookup"><span data-stu-id="5d932-218">You can create your database model classes by taking advantage of a variety of Object Relational Mapping (OR/M) tools including LINQ to SQL, Subsonic, and NHibernate.</span></span>

<span data-ttu-id="5d932-219">Entity Data Model ウィザードを起動するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="5d932-219">Follow these steps to launch the Entity Data Model Wizard:</span></span>

1. <span data-ttu-id="5d932-220">ソリューションエクスプローラーウィンドウで モデル フォルダーを右クリックし、メニューオプション 追加、**新しい項目** の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-220">Right-click the Models folder in the Solution Explorer window and the select the menu option **Add, New Item**.</span></span>
2. <span data-ttu-id="5d932-221">**[データ]** カテゴリを選択し、 **[ADO.NET Entity Data Model]** テンプレートを選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-221">Select the **Data** category and select the **ADO.NET Entity Data Model** template.</span></span>
3. <span data-ttu-id="5d932-222">データモデルに*MoviesDBModel*という名前を付け、 **[追加]** ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="5d932-222">Give your data model the name *MoviesDBModel.edmx* and click the **Add** button.</span></span>

<span data-ttu-id="5d932-223">[追加] ボタンをクリックすると、Entity Data Model ウィザードが表示されます (図6を参照)。</span><span class="sxs-lookup"><span data-stu-id="5d932-223">After you click the Add button, the Entity Data Model Wizard appears (see Figure 6).</span></span> <span data-ttu-id="5d932-224">ウィザードを完了するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="5d932-224">Follow these steps to complete the wizard:</span></span>

1. <span data-ttu-id="5d932-225">**[モデルの内容の選択]** ステップで、 **[データベースから生成]** オプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-225">In the **Choose Model Contents** step, select the **Generate from database** option.</span></span>
2. <span data-ttu-id="5d932-226">**[データ接続の選択]** 手順で、 *MoviesDB*データ接続を使用し、接続設定に*MoviesDBEntities*という名前を使用します。</span><span class="sxs-lookup"><span data-stu-id="5d932-226">In the **Choose Your Data Connection** step, use the *MoviesDB.mdf* data connection and the name *MoviesDBEntities* for the connection settings.</span></span> <span data-ttu-id="5d932-227">**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="5d932-227">Click the **Next** button.</span></span>
3. <span data-ttu-id="5d932-228">**データベースオブジェクトの選択** ステップで、テーブル ノードを展開し、映画 テーブルを選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-228">In the **Choose Your Database Objects** step, expand the Tables node, select the Movies table.</span></span> <span data-ttu-id="5d932-229">名前空間を入力し、 **[完了]** ボタンをクリックし*ます。*</span><span class="sxs-lookup"><span data-stu-id="5d932-229">Enter the namespace *MovieApp.Models* and click the **Finish** button.</span></span>

<span data-ttu-id="5d932-230">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-230">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.png)</span></span>

<span data-ttu-id="5d932-231">**図 06**: Entity Data Model ウィザードを使用してデータベースモデルを生成[する (クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5d932-231">**Figure 06**: Generating a database model with the Entity Data Model Wizard ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.png))</span></span>

<span data-ttu-id="5d932-232">Entity Data Model ウィザードを完了すると、Entity Data Model デザイナーが開きます。</span><span class="sxs-lookup"><span data-stu-id="5d932-232">After you complete the Entity Data Model Wizard, the Entity Data Model Designer opens.</span></span> <span data-ttu-id="5d932-233">デザイナーに、ムービーデータベーステーブルが表示されます (図7を参照)。</span><span class="sxs-lookup"><span data-stu-id="5d932-233">The Designer should display the Movies database table (see Figure 7).</span></span>

<span data-ttu-id="5d932-234">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-234">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.png)</span></span>

<span data-ttu-id="5d932-235">**図 07**: Entity Data Model デザイナー ([クリックしてフルサイズのイメージを表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="5d932-235">**Figure 07**: The Entity Data Model Designer ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.png))</span></span>

<span data-ttu-id="5d932-236">続行する前に、1つの変更を加える必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-236">We need to make one change before we continue.</span></span> <span data-ttu-id="5d932-237">Entity Data Wizard では、ムービーデータベーステーブルを表す、*ムービー*という名前のモデルクラスが生成されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-237">The Entity Data Wizard generates a model class named *Movies* that represents the Movies database table.</span></span> <span data-ttu-id="5d932-238">映画クラスを使用して特定の映画を表現するため、クラスの名前を *、ムービーで*はなく*ムービー* (複数形ではなく単数形) に変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-238">Because we'll use the Movies class to represent a particular movie, we need to modify the name of the class to be *Movie* instead of *Movies* (singular rather than plural).</span></span>

<span data-ttu-id="5d932-239">デザイナー画面でクラスの名前をダブルクリックし、ムービーからムービーにクラスの名前を変更します。</span><span class="sxs-lookup"><span data-stu-id="5d932-239">Double-click the name of the class on the designer surface and change the name of the class from Movies to Movie.</span></span> <span data-ttu-id="5d932-240">この変更を行った後、 **[保存]** ボタン (フロッピーディスクのアイコン) をクリックして、Movie クラスを生成します。</span><span class="sxs-lookup"><span data-stu-id="5d932-240">After making this change, click the **Save** button (the icon of the floppy disk) to generate the Movie class.</span></span>

## <a name="creating-the-aspnet-mvc-controller"></a><span data-ttu-id="5d932-241">ASP.NET MVC コントローラーの作成</span><span class="sxs-lookup"><span data-stu-id="5d932-241">Creating the ASP.NET MVC Controller</span></span>

<span data-ttu-id="5d932-242">次の手順では、ASP.NET MVC コントローラーを作成します。</span><span class="sxs-lookup"><span data-stu-id="5d932-242">The next step is to create the ASP.NET MVC controller.</span></span> <span data-ttu-id="5d932-243">コントローラーは、ユーザーが ASP.NET MVC アプリケーションと対話する方法を制御する役割を担います。</span><span class="sxs-lookup"><span data-stu-id="5d932-243">A controller is responsible for controlling how a user interacts with an ASP.NET MVC application.</span></span>

<span data-ttu-id="5d932-244">次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="5d932-244">Follow these steps:</span></span>

1. <span data-ttu-id="5d932-245">[ソリューションエクスプローラー] ウィンドウで、Controllers フォルダーを右クリックし、[追加] **、[コントローラー**] の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-245">In the Solution Explorer window, right-click the Controllers folder and select the menu option **Add, Controller**.</span></span>
2. <span data-ttu-id="5d932-246">[コントローラーの追加] ダイアログボックスで、「 *HomeController* 」という名前を入力し、[**作成、更新、詳細のシナリオのアクションメソッドを追加**する] のチェックボックスをオンにします (図8を参照)。</span><span class="sxs-lookup"><span data-stu-id="5d932-246">In the Add Controller dialog, enter the name *HomeController* and check the checkbox labeled **Add action methods for Create, Update, and Details scenarios** (see Figure 8).</span></span>
3. <span data-ttu-id="5d932-247">**[追加]** ボタンをクリックして、プロジェクトに新しいコントローラーを追加します。</span><span class="sxs-lookup"><span data-stu-id="5d932-247">Click the **Add** button to add the new controller to your project.</span></span>

<span data-ttu-id="5d932-248">これらの手順を完了すると、リスト1のコントローラーが作成されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-248">After you complete these steps, the controller in Listing 1 is created.</span></span> <span data-ttu-id="5d932-249">これには、Index、Details、Create、および Edit という名前のメソッドが含まれていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="5d932-249">Notice that it contains methods named Index, Details, Create, and Edit.</span></span> <span data-ttu-id="5d932-250">以下のセクションでは、これらのメソッドを機能させるために必要なコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="5d932-250">In the following sections, we'll add the necessary code to get these methods to work.</span></span>

<span data-ttu-id="5d932-251">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-251">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image15.png)</span></span>

<span data-ttu-id="5d932-252">**図 08**: 新しい ASP.NET MVC コントローラーを追加[する (クリックすると、フルサイズのイメージが表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image16.png)される)</span><span class="sxs-lookup"><span data-stu-id="5d932-252">**Figure 08**: Adding a new ASP.NET MVC Controller ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image16.png))</span></span>

<span data-ttu-id="5d932-253">**リスト1– Controllers\ homecontroller.cs**</span><span class="sxs-lookup"><span data-stu-id="5d932-253">**Listing 1 – Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample1.cs)]

## <a name="listing-database-records"></a><span data-ttu-id="5d932-254">データベースレコードの一覧表示</span><span class="sxs-lookup"><span data-stu-id="5d932-254">Listing Database Records</span></span>

<span data-ttu-id="5d932-255">Home コントローラーの Index () メソッドは、ASP.NET MVC アプリケーションの既定のメソッドです。</span><span class="sxs-lookup"><span data-stu-id="5d932-255">The Index() method of the Home controller is the default method for an ASP.NET MVC application.</span></span> <span data-ttu-id="5d932-256">ASP.NET MVC アプリケーションを実行すると、Index () メソッドが最初に呼び出されたコントローラーメソッドになります。</span><span class="sxs-lookup"><span data-stu-id="5d932-256">When you run an ASP.NET MVC application, the Index() method is the first controller method that is called.</span></span>

<span data-ttu-id="5d932-257">Index () メソッドを使用して、映画データベーステーブルのレコードの一覧を表示します。</span><span class="sxs-lookup"><span data-stu-id="5d932-257">We'll use the Index() method to display the list of records from the Movies database table.</span></span> <span data-ttu-id="5d932-258">先ほど作成したデータベースモデルクラスを利用して、Index () メソッドを使用してムービーデータベースレコードを取得します。</span><span class="sxs-lookup"><span data-stu-id="5d932-258">We'll take advantage of the database model classes that we created earlier to retrieve the movie database records with the Index() method.</span></span>

<span data-ttu-id="5d932-259">リスト2の HomeController クラスを変更して、\_db という名前の新しいプライベートフィールドが含まれるようにしました。</span><span class="sxs-lookup"><span data-stu-id="5d932-259">I've modified the HomeController class in Listing 2 so that it contains a new private field named \_db.</span></span> <span data-ttu-id="5d932-260">MoviesDBEntities クラスはデータベースモデルを表し、このクラスを使用してデータベースと通信します。</span><span class="sxs-lookup"><span data-stu-id="5d932-260">The MoviesDBEntities class represents our database model and we'll use this class to communicate with our database.</span></span>

<span data-ttu-id="5d932-261">また、リスト2の Index () メソッドも変更しました。</span><span class="sxs-lookup"><span data-stu-id="5d932-261">I've also modified the Index() method in Listing 2.</span></span> <span data-ttu-id="5d932-262">Index () メソッドは、MoviesDBEntities クラスを使用して、映画データベーステーブルからすべてのムービーレコードを取得します。</span><span class="sxs-lookup"><span data-stu-id="5d932-262">The Index() method uses the MoviesDBEntities class to retrieve all of the movie records from the Movies database table.</span></span> <span data-ttu-id="5d932-263">式 *\_db です。Moを設定します。 ToList ()* は、ムービーデータベーステーブルのすべてのムービーレコードの一覧を返します。</span><span class="sxs-lookup"><span data-stu-id="5d932-263">The expression *\_db.MovieSet.ToList()* returns a list of all of the movie records from the Movies database table.</span></span>

<span data-ttu-id="5d932-264">ムービーの一覧がビューに渡されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-264">The list of movies is passed to the view.</span></span> <span data-ttu-id="5d932-265">View () メソッドに渡されるすべてのものがビューデータとしてビューに渡されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-265">Anything that gets passed to the View() method gets passed to the view as view data.</span></span>

<span data-ttu-id="5d932-266">**リスト2– Controllers/HomeController (変更されたインデックスメソッド)**</span><span class="sxs-lookup"><span data-stu-id="5d932-266">**Listing 2 – Controllers/HomeController.cs (modified Index method)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample2.cs)]

<span data-ttu-id="5d932-267">Index () メソッドは、Index という名前のビューを返します。</span><span class="sxs-lookup"><span data-stu-id="5d932-267">The Index() method returns a view named Index.</span></span> <span data-ttu-id="5d932-268">ムービーデータベースレコードの一覧を表示するには、このビューを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-268">We need to create this view to display the list of movie database records.</span></span> <span data-ttu-id="5d932-269">次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="5d932-269">Follow these steps:</span></span>

<span data-ttu-id="5d932-270">**ビューの追加** ダイアログを開く前にプロジェクトをビルドし (メニューオプション ビルド、**ソリューションのビルド**)、**ビューデータクラス** ボックスの一覧に クラス が表示されないようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-270">You should build your project (select the menu option **Build, Build Solution**) before opening the **Add View** dialog or no classes will appear in the **View data class** dropdown list.</span></span>

1. <span data-ttu-id="5d932-271">コードエディターで Index () メソッドを右クリックし、 **[ビューの追加]** メニューオプションを選択します (図9を参照)。</span><span class="sxs-lookup"><span data-stu-id="5d932-271">Right-click the Index() method in the code editor and select the menu option **Add View** (see Figure 9).</span></span>
2. <span data-ttu-id="5d932-272">[ビューの追加] ダイアログで、[厳密に**型指定されたビューを作成する**] チェックボックスがオンになっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="5d932-272">In the Add View dialog, verify that the checkbox labeled **Create a strongly-typed view** is checked.</span></span>
3. <span data-ttu-id="5d932-273">**[ビューコンテンツ]** ボックスの一覧で、[値 *] ボックスの一覧*を選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-273">From the **View content** dropdown list, select the value *List*.</span></span>
4. <span data-ttu-id="5d932-274">**[データクラスの表示]** ドロップダウンリストから、*値を*選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-274">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="5d932-275">[追加] ボタンをクリックして、新しいビューを作成します (図10を参照)。</span><span class="sxs-lookup"><span data-stu-id="5d932-275">Click the Add button to create the new view (see Figure 10).</span></span>

<span data-ttu-id="5d932-276">これらの手順を完了すると、Views\Home フォルダーに Index .aspx という名前の新しいビューが追加されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-276">After you complete these steps, a new view named Index.aspx is added to the Views\Home folder.</span></span> <span data-ttu-id="5d932-277">インデックスビューの内容は、リスト3に含まれています。</span><span class="sxs-lookup"><span data-stu-id="5d932-277">The contents of the Index view are included in Listing 3.</span></span>

<span data-ttu-id="5d932-278">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-278">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image17.png)</span></span>

<span data-ttu-id="5d932-279">**図 09**: コントローラーアクションからビューを追加する ([クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image18.png)される)</span><span class="sxs-lookup"><span data-stu-id="5d932-279">**Figure 09**: Adding a view from a controller action ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image18.png))</span></span>

<span data-ttu-id="5d932-280">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-280">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image19.png)</span></span>

<span data-ttu-id="5d932-281">**図 10**: [ビューの追加] ダイアログボックスを使用して新しいビューを作成する ([クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image20.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5d932-281">**Figure 10**: Creating a new view with the Add View dialog ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image20.png))</span></span>

<span data-ttu-id="5d932-282">**リスト3– Views\Home\Index.aspx**</span><span class="sxs-lookup"><span data-stu-id="5d932-282">**Listing 3 – Views\Home\Index.aspx**</span></span>

[!code-aspx[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample3.aspx)]

<span data-ttu-id="5d932-283">インデックスビューには、ムービーデータベーステーブルのすべてのムービーレコードが HTML テーブル内に表示されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-283">The Index view displays all of the movie records from the Movies database table within an HTML table.</span></span> <span data-ttu-id="5d932-284">ビューには、ViewData プロパティによって表される各ムービーを反復処理する foreach ループが含まれています。</span><span class="sxs-lookup"><span data-stu-id="5d932-284">The view contains a foreach loop that iterates through each movie represented by the ViewData.Model property.</span></span> <span data-ttu-id="5d932-285">F5 キーを押してアプリケーションを実行すると、図11の web ページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-285">If you run your application by hitting the F5 key, then you'll see the web page in Figure 11.</span></span>

<span data-ttu-id="5d932-286">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-286">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image21.png)</span></span>

<span data-ttu-id="5d932-287">**図 11**: インデックスビュー ([クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image22.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5d932-287">**Figure 11**: The Index view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image22.png))</span></span>

## <a name="creating-new-database-records"></a><span data-ttu-id="5d932-288">新しいデータベースレコードの作成</span><span class="sxs-lookup"><span data-stu-id="5d932-288">Creating New Database Records</span></span>

<span data-ttu-id="5d932-289">前のセクションで作成したインデックスビューには、新しいデータベースレコードを作成するためのリンクが含まれています。</span><span class="sxs-lookup"><span data-stu-id="5d932-289">The Index view that we created in the previous section includes a link for creating new database records.</span></span> <span data-ttu-id="5d932-290">ロジックを実装し、新しいムービーデータベースレコードを作成するために必要なビューを作成してみましょう。</span><span class="sxs-lookup"><span data-stu-id="5d932-290">Let's go ahead and implement the logic and create the view necessary for creating new movie database records.</span></span>

<span data-ttu-id="5d932-291">Home コントローラーには、Create () という名前の2つのメソッドが含まれています。</span><span class="sxs-lookup"><span data-stu-id="5d932-291">The Home controller contains two methods named Create().</span></span> <span data-ttu-id="5d932-292">最初の Create () メソッドにはパラメーターがありません。</span><span class="sxs-lookup"><span data-stu-id="5d932-292">The first Create() method has no parameters.</span></span> <span data-ttu-id="5d932-293">Create () メソッドのこのオーバーロードは、新しいムービーデータベースレコードを作成するための HTML フォームを表示するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-293">This overload of the Create() method is used to display the HTML form for creating a new movie database record.</span></span>

<span data-ttu-id="5d932-294">2番目の Create () メソッドには、FormCollection パラメーターがあります。</span><span class="sxs-lookup"><span data-stu-id="5d932-294">The second Create() method has a FormCollection parameter.</span></span> <span data-ttu-id="5d932-295">Create () メソッドのこのオーバーロードは、新しいムービーを作成するための HTML フォームがサーバーにポストされるときに呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-295">This overload of the Create() method is called when the HTML form for creating a new movie is posted to the server.</span></span> <span data-ttu-id="5d932-296">この2番目の Create () メソッドには、HTTP POST 操作が実行されない限りメソッドが呼び出されないようにする AcceptVerbs 属性があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="5d932-296">Notice that this second Create() method has an AcceptVerbs attribute that prevents the method from being called unless an HTTP POST operation is performed.</span></span>

<span data-ttu-id="5d932-297">この2番目の Create () メソッドは、リスト4の更新された HomeController クラスで変更されています。</span><span class="sxs-lookup"><span data-stu-id="5d932-297">This second Create() method has been modified in the updated HomeController class in Listing 4.</span></span> <span data-ttu-id="5d932-298">新しいバージョンの Create () メソッドは、Movie パラメーターを受け取り、ムービーデータベーステーブルに新しいムービーを挿入するためのロジックを含んでいます。</span><span class="sxs-lookup"><span data-stu-id="5d932-298">The new version of the Create() method accepts a Movie parameter and contains the logic for inserting a new movie into the Movies database table.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="5d932-299">Bind 属性に注意してください。</span><span class="sxs-lookup"><span data-stu-id="5d932-299">Notice the Bind attribute.</span></span> <span data-ttu-id="5d932-300">ムービー Id プロパティを HTML フォームから更新したくないので、このプロパティを明示的に除外する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-300">Because we don't want to update the Movie Id property from HTML form, we need to explicitly exclude this property.</span></span>

<span data-ttu-id="5d932-301">**リスト4– Controllers\ homecontroller.cs (変更された Create メソッド)**</span><span class="sxs-lookup"><span data-stu-id="5d932-301">**Listing 4 – Controllers\HomeController.cs (modified Create method)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample4.cs)]

<span data-ttu-id="5d932-302">Visual Studio を使用すると、新しいムービーデータベースレコードを作成するためのフォームを簡単に作成できます (図12を参照)。</span><span class="sxs-lookup"><span data-stu-id="5d932-302">Visual Studio makes it easy to create the form for creating a new movie database record (see Figure 12).</span></span> <span data-ttu-id="5d932-303">次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="5d932-303">Follow these steps:</span></span>

1. <span data-ttu-id="5d932-304">コードエディターで Create () メソッドを右クリックし、 **[ビューの追加]** メニューオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-304">Right-click the Create() method in the code editor and select the menu option **Add View**.</span></span>
2. <span data-ttu-id="5d932-305">[**厳密に型指定されたビューを作成**する] チェックボックスがオンになっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="5d932-305">Verify that the checkbox labeled **Create a strongly-typed view** is checked.</span></span>
3. <span data-ttu-id="5d932-306">**[ビューコンテンツ]** ドロップダウンリストから、[*作成*] の値を選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-306">From the **View content** dropdown list, select the value *Create*.</span></span>
4. <span data-ttu-id="5d932-307">**[データクラスの表示]** ドロップダウンリストから、*値を*選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-307">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="5d932-308">**[追加]** ボタンをクリックして、新しいビューを作成します。</span><span class="sxs-lookup"><span data-stu-id="5d932-308">Click the **Add** button to create the new view.</span></span>

<span data-ttu-id="5d932-309">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-309">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image23.png)</span></span>

<span data-ttu-id="5d932-310">**図 12**: 作成ビュー[を追加する (クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image24.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5d932-310">**Figure 12**: Adding the Create view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image24.png))</span></span>

<span data-ttu-id="5d932-311">Visual Studio によって、リスト5に自動的にビューが生成されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-311">Visual Studio generates the view in Listing 5 automatically.</span></span> <span data-ttu-id="5d932-312">このビューには、Movie クラスの各プロパティに対応するフィールドを含む HTML フォームが含まれています。</span><span class="sxs-lookup"><span data-stu-id="5d932-312">This view contains an HTML form that includes fields that correspond to each of the properties of the Movie class.</span></span>

<span data-ttu-id="5d932-313">**リスト5– Views\Home\Create.aspx**</span><span class="sxs-lookup"><span data-stu-id="5d932-313">**Listing 5 – Views\Home\Create.aspx**</span></span>

[!code-aspx[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample5.aspx)]

> [!NOTE] 
> 
> <span data-ttu-id="5d932-314">[ビューの追加] ダイアログで生成された HTML フォームは、Id フォームフィールドを生成します。</span><span class="sxs-lookup"><span data-stu-id="5d932-314">The HTML form generated by the Add View dialog generates an Id form field.</span></span> <span data-ttu-id="5d932-315">Id 列は Id 列であるため、このフォームフィールドは不要であり、安全に削除できます。</span><span class="sxs-lookup"><span data-stu-id="5d932-315">Because the Id column is an Identity column, we don't need this form field and you can safely remove it.</span></span>

<span data-ttu-id="5d932-316">[作成] ビューを追加した後、新しいムービーレコードをデータベースに追加できます。</span><span class="sxs-lookup"><span data-stu-id="5d932-316">After you add the Create view, you can add new Movie records to the database.</span></span> <span data-ttu-id="5d932-317">F5 キーを押してアプリケーションを実行し、[新規作成] リンクをクリックして、図13のフォームを表示します。</span><span class="sxs-lookup"><span data-stu-id="5d932-317">Run your application by pressing the F5 key and click the Create New link to see the form in Figure 13.</span></span> <span data-ttu-id="5d932-318">フォームを完了して送信すると、新しいムービーデータベースレコードが作成されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-318">If you complete and submit the form, a new movie database record is created.</span></span>

<span data-ttu-id="5d932-319">フォームの検証は自動的に行われることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="5d932-319">Notice that you get form validation automatically.</span></span> <span data-ttu-id="5d932-320">ムービーのリリース日を入力しなかった場合、または無効なリリース日を入力した場合は、フォームが再表示され、リリース日フィールドが強調表示されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-320">If you neglect to enter a release date for a movie, or you enter an invalid release date, then the form is redisplayed and the release date field is highlighted.</span></span>

<span data-ttu-id="5d932-321">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-321">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image25.png)</span></span>

<span data-ttu-id="5d932-322">**図 13**: 新しいムービーデータベースレコードを作成[する (クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image26.png)される)</span><span class="sxs-lookup"><span data-stu-id="5d932-322">**Figure 13**: Creating a new movie database record ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image26.png))</span></span>

## <a name="editing-existing-database-records"></a><span data-ttu-id="5d932-323">既存のデータベースレコードの編集</span><span class="sxs-lookup"><span data-stu-id="5d932-323">Editing Existing Database Records</span></span>

<span data-ttu-id="5d932-324">前のセクションでは、新しいデータベースレコードを一覧表示し、作成する方法について説明しました。</span><span class="sxs-lookup"><span data-stu-id="5d932-324">In the previous sections, we discussed how you can list and create new database records.</span></span> <span data-ttu-id="5d932-325">この最後のセクションでは、既存のデータベースレコードを編集する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="5d932-325">In this final section, we discuss how you can edit existing database records.</span></span>

<span data-ttu-id="5d932-326">まず、編集フォームを生成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-326">First, we need to generate the Edit form.</span></span> <span data-ttu-id="5d932-327">この手順は、Visual Studio によって自動的に編集フォームが生成されるため、簡単です。</span><span class="sxs-lookup"><span data-stu-id="5d932-327">This step is easy since Visual Studio will generate the Edit form for us automatically.</span></span> <span data-ttu-id="5d932-328">Visual Studio コードエディターで HomeController.cs クラスを開き、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="5d932-328">Open the HomeController.cs class in the Visual Studio code editor and follow these steps:</span></span>

1. <span data-ttu-id="5d932-329">コードエディターで Edit () メソッドを右クリックし、 **[ビューの追加]** メニューオプションを選択します (図14を参照)。</span><span class="sxs-lookup"><span data-stu-id="5d932-329">Right-click the Edit() method in the code editor and select the menu option **Add View** (see Figure 14).</span></span>
2. <span data-ttu-id="5d932-330">**[厳密に型指定されたビューを作成する]** チェックボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="5d932-330">Check the checkbox labeled **Create a strongly-typed view**.</span></span>
3. <span data-ttu-id="5d932-331">**[ビューコンテンツ]** ドロップダウンリストから、[値の*編集*] を選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-331">From the **View content** dropdown list, select the value *Edit*.</span></span>
4. <span data-ttu-id="5d932-332">**[データクラスの表示]** ドロップダウンリストから、*値を*選択します。</span><span class="sxs-lookup"><span data-stu-id="5d932-332">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="5d932-333">**[追加]** ボタンをクリックして、新しいビューを作成します。</span><span class="sxs-lookup"><span data-stu-id="5d932-333">Click the **Add** button to create the new view.</span></span>

<span data-ttu-id="5d932-334">これらの手順を完了すると、Views\Home フォルダーに、エディット .aspx という名前の新しいビューが追加されます。</span><span class="sxs-lookup"><span data-stu-id="5d932-334">Completing these steps adds a new view named Edit.aspx to the Views\Home folder.</span></span> <span data-ttu-id="5d932-335">このビューには、ムービーレコードを編集するための HTML フォームが含まれています。</span><span class="sxs-lookup"><span data-stu-id="5d932-335">This view contains an HTML form for editing a movie record.</span></span>

<span data-ttu-id="5d932-336">[[新しいプロジェクト] ダイアログボックスの ![](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="5d932-336">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image27.png)</span></span>

<span data-ttu-id="5d932-337">**図 14**: 編集ビュー[を追加する (クリックすると、フルサイズの画像が表示](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image28.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5d932-337">**Figure 14**: Adding the Edit view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image28.png))</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="5d932-338">[編集] ビューには、"ムービー Id" プロパティに対応する HTML フォームフィールドがあります。</span><span class="sxs-lookup"><span data-stu-id="5d932-338">The Edit view contains an HTML form field that corresponds to the Movie Id property.</span></span> <span data-ttu-id="5d932-339">Id プロパティの値を編集しないようにするには、このフォームフィールドを削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-339">Because you don't want people editing the value of the Id property, you should remove this form field.</span></span>

<span data-ttu-id="5d932-340">最後に、データベースレコードの編集をサポートするように Home コントローラーを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5d932-340">Finally, we need to modify the Home controller so that it supports editing a database record.</span></span> <span data-ttu-id="5d932-341">更新された HomeController クラスは、リスト6に含まれています。</span><span class="sxs-lookup"><span data-stu-id="5d932-341">The updated HomeController class is contained in Listing 6.</span></span>

<span data-ttu-id="5d932-342">**リスト6– Controllers\ homecontroller.cs (メソッドの編集)**</span><span class="sxs-lookup"><span data-stu-id="5d932-342">**Listing 6 – Controllers\HomeController.cs (Edit methods)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample6.cs)]

<span data-ttu-id="5d932-343">リスト6では、Edit () メソッドの両方のオーバーロードにロジックを追加しました。</span><span class="sxs-lookup"><span data-stu-id="5d932-343">In Listing 6, I've added additional logic to both overloads of the Edit() method.</span></span> <span data-ttu-id="5d932-344">最初の Edit () メソッドは、メソッドに渡された Id パラメーターに対応するムービーデータベースレコードを返します。</span><span class="sxs-lookup"><span data-stu-id="5d932-344">The first Edit() method returns the movie database record that corresponds to the Id parameter passed to the method.</span></span> <span data-ttu-id="5d932-345">2番目のオーバーロードは、データベース内のムービーレコードの更新を実行します。</span><span class="sxs-lookup"><span data-stu-id="5d932-345">The second overload performs the updates to a movie record in the database.</span></span>

<span data-ttu-id="5d932-346">元のムービーを取得し、ApplyPropertyChanges () を呼び出して、データベース内の既存のムービーを更新する必要があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="5d932-346">Notice that you must retrieve the original movie, and then call ApplyPropertyChanges(), to update the existing movie in the database.</span></span>

## <a name="summary"></a><span data-ttu-id="5d932-347">まとめ</span><span class="sxs-lookup"><span data-stu-id="5d932-347">Summary</span></span>

<span data-ttu-id="5d932-348">このチュートリアルの目的は、ASP.NET MVC アプリケーションを構築する経験を理解することでした。</span><span class="sxs-lookup"><span data-stu-id="5d932-348">The purpose of this tutorial was to give you a sense of the experience of building an ASP.NET MVC application.</span></span> <span data-ttu-id="5d932-349">ASP.NET MVC web アプリケーションを構築することは、Active Server ページまたは ASP.NET アプリケーションを構築する場合とよく似ていると思います。</span><span class="sxs-lookup"><span data-stu-id="5d932-349">I hope that you discovered that building an ASP.NET MVC web application is very similar to the experience of building an Active Server Pages or ASP.NET application.</span></span>

<span data-ttu-id="5d932-350">このチュートリアルでは、ASP.NET MVC フレームワークの最も基本的な機能のみを検討しています。</span><span class="sxs-lookup"><span data-stu-id="5d932-350">In this tutorial, we examined only the most basic features of the ASP.NET MVC framework.</span></span> <span data-ttu-id="5d932-351">今後のチュートリアルでは、コントローラー、コントローラーアクション、ビュー、ビューデータ、HTML ヘルパーなどのトピックについて詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="5d932-351">In future tutorials, we dive deeper into topics such as controllers, controller actions, views, view data, and HTML helpers.</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="5d932-352">Next</span><span class="sxs-lookup"><span data-stu-id="5d932-352">Next</span></span>](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-vb.md)
