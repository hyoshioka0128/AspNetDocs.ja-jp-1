---
uid: mvc/overview/older-versions/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4
title: HTML5 と jQuery UI Datepicker ポップアップ カレンダーを使用して、ASP.NET MVC - パート 4 |Microsoft Docs
author: Rick-Anderson
description: このチュートリアルでは、ASP.NET MV... でエディターテンプレート、表示テンプレート、jQuery UI datepicker popup カレンダーを操作する方法の基本について説明します。
ms.author: riande
ms.date: 08/29/2011
ms.assetid: 57666c69-2b0f-423a-a61d-be49547fa585
msc.legacyurl: /mvc/overview/older-versions/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4
msc.type: authoredcontent
ms.openlocfilehash: 583e782641efea9a9517edb31f7718b28203d756
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78433252"
---
# <a name="using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc---part-4"></a><span data-ttu-id="6e8a9-103">ASP.NET MVC での HTML5 と jQuery UI Datepicker ポップアップカレンダーの使用-パート4</span><span class="sxs-lookup"><span data-stu-id="6e8a9-103">Using the HTML5 and jQuery UI Datepicker Popup Calendar with ASP.NET MVC - Part 4</span></span>

<span data-ttu-id="6e8a9-104">[Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="6e8a9-104">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> <span data-ttu-id="6e8a9-105">このチュートリアルでは、ASP.NET MVC Web アプリケーションでエディターテンプレート、表示テンプレート、jQuery UI datepicker popup カレンダーを操作する方法の基本について説明します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-105">This tutorial will teach you the basics of how to work with editor templates, display templates, and the jQuery UI datepicker popup calendar in an ASP.NET MVC Web application.</span></span>

### <a name="adding-a-template-for-editing-dates"></a><span data-ttu-id="6e8a9-106">日付を編集するためのテンプレートの追加</span><span class="sxs-lookup"><span data-stu-id="6e8a9-106">Adding a Template for Editing Dates</span></span>

<span data-ttu-id="6e8a9-107">このセクションでは、 [DataType](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.datatype.aspx)属性の**日付**列挙でマークされたモデルプロパティを編集するために ASP.NET MVC が UI を表示するときに適用される編集日のテンプレートを作成します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-107">In this section you'll create a template for editing dates that will be applied when ASP.NET MVC displays UI for editing model properties that are marked with the **Date** enumeration of the [DataType](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.datatype.aspx) attribute.</span></span> <span data-ttu-id="6e8a9-108">テンプレートでは、日付のみが表示されます。時刻は表示されません。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-108">The template will render only the date; time will not be displayed.</span></span> <span data-ttu-id="6e8a9-109">このテンプレートでは、 [JQUERY UI Datepicker](http://jqueryui.com/demos/datepicker/)ポップアップカレンダーを使用して、日付を編集する方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-109">In the template you'll use the [jQuery UI Datepicker](http://jqueryui.com/demos/datepicker/) popup calendar to provide a way to edit dates.</span></span>

<span data-ttu-id="6e8a9-110">まず、次のコードに示すように、 *Movie.cs*ファイルを開き、 **Date**列挙[型の DataType](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.datatypeattribute.aspx)属性を `ReleaseDate` プロパティに追加します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-110">To begin, open the *Movie.cs* file and add the [DataType](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.datatypeattribute.aspx) attribute with the **Date** enumeration to the `ReleaseDate` property, as shown in the following code:</span></span>

[!code-csharp[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample1.cs)]

<span data-ttu-id="6e8a9-111">このコードを実行すると、表示テンプレートと編集テンプレートの両方に時間を指定せずに `ReleaseDate` フィールドが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-111">This code causes the `ReleaseDate` field to be displayed without the time in both display templates and edit templates.</span></span> <span data-ttu-id="6e8a9-112">アプリケーションに*Views\Shared\EditorTemplates*フォルダーまたは*Views\Movies\EditorTemplates*フォルダーにある*日付の cshtml*テンプレートが含まれている場合は、編集中にそのテンプレートを使用して `DateTime` プロパティが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-112">If your application contains a *date.cshtml* template in the *Views\Shared\EditorTemplates* folder or in the *Views\Movies\EditorTemplates* folder, that template will be used to render any `DateTime` property while editing.</span></span> <span data-ttu-id="6e8a9-113">それ以外の場合は、組み込みの ASP.NET テンプレートシステムによって、プロパティが日付として表示されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-113">Otherwise the built-in ASP.NET templating system will display the property as a date.</span></span>

<span data-ttu-id="6e8a9-114">Ctrl キーを押しながら F5 キーを押してアプリケーションを実行します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-114">Press CTRL+F5 to run the application.</span></span> <span data-ttu-id="6e8a9-115">[編集] リンクを選択して、リリース日の入力フィールドに日付のみが表示されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-115">Select an edit link to verify that the input field for the release date is showing only the date.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image1.png)

<span data-ttu-id="6e8a9-116">**ソリューションエクスプローラー**で、 *Views*フォルダーを展開し、*共有*フォルダーを展開して、 *Views\Shared\EditorTemplates*フォルダーを右クリックします。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-116">In **Solution Explorer**, expand the *Views* folder, expand the *Shared* folder, and then right-click the *Views\Shared\EditorTemplates* folder.</span></span>

<span data-ttu-id="6e8a9-117">**[追加]** をクリックし、 **[表示]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-117">Click **Add**, and then click **View**.</span></span> <span data-ttu-id="6e8a9-118">**[ビューの追加]** ダイアログボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-118">The **Add View** dialog box is displayed.</span></span>

<span data-ttu-id="6e8a9-119">**[ビュー名]** ボックスに、「&quot;Date&quot;」と入力します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-119">In the **View name** box, type &quot;Date&quot;.</span></span>

<span data-ttu-id="6e8a9-120">**[部分ビューとして作成]** チェックボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-120">Select the **Create as a partial view** check box.</span></span> <span data-ttu-id="6e8a9-121">[**レイアウトまたはマスターページを使用**し、**厳密に型指定されたビューを作成**する] チェックボックスがオフになっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-121">Make sure that the **Use a layout or master page** and **Create a strongly-typed view** check boxes are not selected.</span></span>

<span data-ttu-id="6e8a9-122">**[追加]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-122">Click **Add**.</span></span> <span data-ttu-id="6e8a9-123">*Views\Shared\EditorTemplates\Date.cshtml*テンプレートが作成されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-123">The *Views\Shared\EditorTemplates\Date.cshtml* template is created.</span></span>

<span data-ttu-id="6e8a9-124">*Views\Shared\EditorTemplates\Date.cshtml*テンプレートに次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-124">Add the following code to the *Views\Shared\EditorTemplates\Date.cshtml* template.</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample2.cshtml)]

<span data-ttu-id="6e8a9-125">最初の行では、モデルを `DateTime` 型として宣言します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-125">The first line declares the model to be a `DateTime` type.</span></span> <span data-ttu-id="6e8a9-126">編集および表示テンプレートでモデルの型を宣言する必要はありませんが、ビューに渡されるモデルのコンパイル時チェックを行うことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-126">Although you don't need to declare the model type in edit and display templates, it's a best practice so that you get compile-time checking of the model being passed to the view.</span></span> <span data-ttu-id="6e8a9-127">(もう1つの利点は、Visual Studio のビューでモデルの IntelliSense を取得することです)。モデルの型が宣言されていない場合、ASP.NET MVC はそれを[動的](https://msdn.microsoft.com/library/dd264741.aspx)な型と見なし、コンパイル時の型チェックは行われません。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-127">(Another benefit is that you then get IntelliSense for the model in the view in Visual Studio.) If the model type is not declared, ASP.NET MVC considers it a [dynamic](https://msdn.microsoft.com/library/dd264741.aspx) type and there's no compile-time type checking.</span></span> <span data-ttu-id="6e8a9-128">モデルを `DateTime` 型として宣言すると、厳密に型指定された型になります。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-128">If you declare the model to be a `DateTime` type, it becomes strongly typed.</span></span>

<span data-ttu-id="6e8a9-129">2行目は、日付フィールドの前&quot; 日付テンプレートを使用して &quot;を表示するリテラル HTML マークアップにすぎません。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-129">The second line is just literal HTML markup that displays &quot;Using Date Template&quot; before a date field.</span></span> <span data-ttu-id="6e8a9-130">この行を一時的に使用して、この日付テンプレートが使用されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-130">You'll use this line temporarily to verify that this date template is being used.</span></span>

<span data-ttu-id="6e8a9-131">次の行は、テキストボックスである `input` フィールドを表示する[Html テキスト](https://msdn.microsoft.com/library/system.web.mvc.html.inputextensions.textbox.aspx)ボックスヘルパーです。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-131">The next line is an [Html.TextBox](https://msdn.microsoft.com/library/system.web.mvc.html.inputextensions.textbox.aspx) helper that renders an `input` field that's a text box.</span></span> <span data-ttu-id="6e8a9-132">ヘルパーの3番目のパラメーターは、匿名型を使用して、テキストボックスのクラスを `datefield` に、型を `date`に設定します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-132">The third parameter for the helper uses an anonymous type to set the class for the text box to `datefield` and the type to `date`.</span></span> <span data-ttu-id="6e8a9-133">(`class` はでC#予約されているので、`@` 文字を使用してC#パーサーの `class` 属性をエスケープする必要があります)。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-133">(Because `class` is a reserved in C#, you need to use the `@` character to escape the `class` attribute in the C# parser.)</span></span>

<span data-ttu-id="6e8a9-134">`date` 型は html5 の入力型で、html5 対応のブラウザーは html5 カレンダーコントロールをレンダリングできます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-134">The `date` type is an HTML5 input type that enables HTML5-aware browsers to render a HTML5 calendar control.</span></span> <span data-ttu-id="6e8a9-135">後で、`datefield` クラスを使用して、`Html.TextBox` 要素に jQuery datepicker をフックする JavaScript をいくつか追加します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-135">Later on you'll add some JavaScript to hook up the jQuery datepicker to the `Html.TextBox` element using the `datefield` class.</span></span>

<span data-ttu-id="6e8a9-136">Ctrl キーを押しながら F5 キーを押してアプリケーションを実行します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-136">Press CTRL+F5 to run the application.</span></span> <span data-ttu-id="6e8a9-137">次の図に示すように、[編集] ビューの [`ReleaseDate`] プロパティが [編集] テンプレートを使用していることを確認できます。これは、この図に示すように、テンプレートは `ReleaseDate` テキスト入力ボックスの直前に&quot; 日付テンプレートを使用して &quot;表示されるためです。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-137">You can verify that the `ReleaseDate` property in the edit view is using the edit template because the template displays &quot;Using Date Template&quot; just before the `ReleaseDate` text input box, as shown in this image:</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image2.png)

<span data-ttu-id="6e8a9-138">ブラウザーで、ページのソースを表示します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-138">In your browser, view the source of the page.</span></span> <span data-ttu-id="6e8a9-139">(たとえば、ページを右クリックし、 **[ソースの表示]** を選択します)。次の例は、表示されている HTML の `class` と `type` 属性を示す、ページのマークアップの一部を示しています。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-139">(For example, right-click the page and select **View source**.) The following example shows some of the markup for the page, illustrating the `class` and `type` attributes in the rendered HTML.</span></span>

[!code-html[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample3.html)]

<span data-ttu-id="6e8a9-140">*Views\Shared\EditorTemplates\Date.cshtml*テンプレートに戻り、日付テンプレート&quot; マークアップを使用して &quot;を削除します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-140">Return to the *Views\Shared\EditorTemplates\Date.cshtml* template and remove the &quot;Using Date Template&quot; markup.</span></span> <span data-ttu-id="6e8a9-141">完成したテンプレートは次のようになります。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-141">Now the completed template looks like this:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample4.cshtml)]

### <a name="adding-a-jquery-ui-datepicker-popup-calendar-using-nuget"></a><span data-ttu-id="6e8a9-142">NuGet を使用した jQuery UI Datepicker ポップアップカレンダーの追加</span><span class="sxs-lookup"><span data-stu-id="6e8a9-142">Adding a jQuery UI Datepicker Popup Calendar using NuGet</span></span>

<span data-ttu-id="6e8a9-143">このセクションでは、 [JQUERY UI datepicker](http://jqueryui.com/demos/datepicker/) popup カレンダーを日付編集テンプレートに追加します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-143">In this section you'll add the [jQuery UI datepicker](http://jqueryui.com/demos/datepicker/) popup calendar to the date-edit template.</span></span> <span data-ttu-id="6e8a9-144">[JQUERY UI](http://jqueryui.com/)ライブラリは、アニメーション、高度な効果、およびカスタマイズ可能なウィジェットのサポートを提供します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-144">The [jQuery UI](http://jqueryui.com/) library provides support for animation, advanced effects, and customizable widgets.</span></span> <span data-ttu-id="6e8a9-145">これは、jQuery JavaScript ライブラリ上に構築されています。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-145">It's built on top of the jQuery JavaScript library.</span></span> <span data-ttu-id="6e8a9-146">Datepicker ポップアップカレンダーを使用すると、文字列を入力する代わりに、カレンダーを使用して日付を簡単かつ自然に入力できます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-146">The datepicker popup calendar makes it easy and natural to enter dates using a calendar instead of entering a string.</span></span> <span data-ttu-id="6e8a9-147">また、ポップアップカレンダーでは、ユーザーに法的な日付が制限されています。日付の通常のテキスト入力では、`2/33/1999` (1999 年2月3日) などのように入力できますが、 [JQUERY UI datepicker](http://jqueryui.com/demos/datepicker/)ポップアップカレンダーでは許可されません。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-147">The popup calendar also limits users to legal dates — ordinary text entry for a date would let you enter something like `2/33/1999` ( February 33rd, 1999), but the [jQuery UI datepicker](http://jqueryui.com/demos/datepicker/) popup calendar won't allow that.</span></span>

<span data-ttu-id="6e8a9-148">まず、jQuery UI ライブラリをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-148">First, you have to install the jQuery UI libraries.</span></span> <span data-ttu-id="6e8a9-149">これを行うには、Visual Studio 2010 および Visual Web Developer の SP1 バージョンに含まれているパッケージマネージャーである NuGet を使用します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-149">To do that, you'll use NuGet, which is a package manager that's included in SP1 versions of Visual Studio 2010 and Visual Web Developer.</span></span>

<span data-ttu-id="6e8a9-150">Visual Web Developer で、 **[ツール]** メニューの **[nuget パッケージマネージャー]** を選択し、 **[nuget パッケージの管理]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-150">In Visual Web Developer, from the **Tools** menu, select **NuGet Package Manager** and then select **Manage NuGet Packages**.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image3.png)

<span data-ttu-id="6e8a9-151">注: **[ツール]** メニューに **[nuget パッケージマネージャー]** コマンドが表示されない場合は、nuget web サイトの nuget の[インストール](http://docs.nuget.org/docs/start-here/installing-nuget)に関するページの手順に従って nuget をインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-151">Note: If the **Tools** menu doesn't display the **NuGet Package Manager** command, you need to install NuGet by following the instructions on the [Installing NuGet](http://docs.nuget.org/docs/start-here/installing-nuget) page of the NuGet website.</span></span>   
  
<span data-ttu-id="6e8a9-152">Visual Web Developer ではなく Visual Studio を使用している場合は、 **[ツール]** メニューの **[NuGet パッケージマネージャー]** を選択し、 **[ライブラリパッケージ参照の追加]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-152">If you're using Visual Studio instead of Visual Web Developer, from the **Tools** menu, select **NuGet Package Manager** and then select **Add Library Package Reference**.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image4.png)

<span data-ttu-id="6e8a9-153">**[Mvcmovie-NuGet パッケージの管理]** ダイアログボックスで、左側の **[オンライン]** タブをクリックし、検索ボックスに「&quot;jQuery&quot;」と入力します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-153">In the **MVCMovie - Manage NuGet Packages** dialog box, click the **Online** tab on the left and then enter &quot;jQuery.UI&quot; in the search box.</span></span> <span data-ttu-id="6e8a9-154">J **[QUERY UI ウィジェット: Datepicker]** を選択し、 **[インストール]** ボタンを選択します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-154">Select j **Query UI Widgets:Datepicker**, then select the **Install** button.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image5.png)

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image6.png)

<span data-ttu-id="6e8a9-155">NuGet では、次のデバッグバージョンが追加され、jQuery UI Core と jQuery UI 日付選択のバージョンがプロジェクトに追加されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-155">NuGet adds these debug versions and minified versions of jQuery UI Core and the jQuery UI date picker to your project:</span></span>

- <span data-ttu-id="6e8a9-156">*jquery. ui. node.js*</span><span class="sxs-lookup"><span data-stu-id="6e8a9-156">*jquery.ui.core.js*</span></span>
- <span data-ttu-id="6e8a9-157">*jquery. ui. node.js*</span><span class="sxs-lookup"><span data-stu-id="6e8a9-157">*jquery.ui.core.min.js*</span></span>
- <span data-ttu-id="6e8a9-158">*jquery. ui. datepicker*</span><span class="sxs-lookup"><span data-stu-id="6e8a9-158">*jquery.ui.datepicker.js*</span></span>
- <span data-ttu-id="6e8a9-159">*datepicker... .js*</span><span class="sxs-lookup"><span data-stu-id="6e8a9-159">*jquery.ui.datepicker.min.js*</span></span>

<span data-ttu-id="6e8a9-160">注: デバッグバージョン ( *...* . 拡張子のないファイル) はデバッグに役立ちますが、実稼働サイトでは、縮小版のみを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-160">Note: The debug versions (the files without the *.min.js* extension) are useful for debugging, but in a production site, you'd include only the minified versions.</span></span>

<span data-ttu-id="6e8a9-161">JQuery 日付の選択を実際に使用するには、カレンダーウィジェットを編集テンプレートにフックする jQuery スクリプトを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-161">To actually use the jQuery date picker, you need to create a jQuery script that will hook up the calendar widget to the edit template.</span></span> <span data-ttu-id="6e8a9-162">**ソリューションエクスプローラー**で、 *Scripts*フォルダーを右クリックし、 **[追加]** 、 **[新しい項目]** 、 **[JScript ファイル]** の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-162">In **Solution Explorer**, right-click the *Scripts* folder and select **Add**, then **New Item**, and then **JScript File**.</span></span> <span data-ttu-id="6e8a9-163">ファイルに*DatePickerReady*という名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-163">Name the file *DatePickerReady.js*.</span></span>

<span data-ttu-id="6e8a9-164">*DatePickerReady*ファイルに次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-164">Add the following code to the *DatePickerReady.js* file:</span></span>

[!code-javascript[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample5.js)]

<span data-ttu-id="6e8a9-165">JQuery に慣れていない場合は、この機能について簡単に説明します。最初の行は &quot;jQuery ready&quot; 関数です。これは、ページ内のすべての DOM 要素が読み込まれたときに呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-165">If you're not familiar with jQuery, here's a brief explanation of what this does: the first line is the &quot;jQuery ready&quot; function, which is called when all the DOM elements in a page have loaded.</span></span> <span data-ttu-id="6e8a9-166">2行目では、`datefield`クラス名を持つすべての DOM 要素を選択し、それぞれに対して `datepicker` 関数を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-166">The second line selects all DOM elements that have the class name `datefield`, then invokes the `datepicker` function for each of them.</span></span> <span data-ttu-id="6e8a9-167">(前のチュートリアルでは、 *Views\Shared\EditorTemplates\Date.cshtml*テンプレートに `datefield` クラスを追加したことに注意してください)。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-167">(Remember that you added the `datefield` class to the *Views\Shared\EditorTemplates\Date.cshtml* template earlier in the tutorial.)</span></span>

<span data-ttu-id="6e8a9-168">次に、 *Views\Shared\\_Layout*ファイルを開きます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-168">Next, open the *Views\Shared\\_Layout.cshtml* file.</span></span> <span data-ttu-id="6e8a9-169">次のファイルへの参照を追加する必要があります。これらのファイルはすべて、日付の選択を使用できるようにするために必要です。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-169">You need to add references to the following files, which are all required so that you can use the date picker:</span></span>

- <span data-ttu-id="6e8a9-170">*Content/theme/base/jquery. ui. css*</span><span class="sxs-lookup"><span data-stu-id="6e8a9-170">*Content/themes/base/jquery.ui.core.css*</span></span>
- <span data-ttu-id="6e8a9-171">*Content/theme/base/jquery. datepicker*</span><span class="sxs-lookup"><span data-stu-id="6e8a9-171">*Content/themes/base/jquery.ui.datepicker.css*</span></span>
- <span data-ttu-id="6e8a9-172">*Content/theme/base/jquery. .css*</span><span class="sxs-lookup"><span data-stu-id="6e8a9-172">*Content/themes/base/jquery.ui.theme.css*</span></span>
- <span data-ttu-id="6e8a9-173">*jquery. ui. node.js*</span><span class="sxs-lookup"><span data-stu-id="6e8a9-173">*jquery.ui.core.min.js*</span></span>
- <span data-ttu-id="6e8a9-174">*datepicker... .js*</span><span class="sxs-lookup"><span data-stu-id="6e8a9-174">*jquery.ui.datepicker.min.js*</span></span>
- <span data-ttu-id="6e8a9-175">*DatePickerReady*</span><span class="sxs-lookup"><span data-stu-id="6e8a9-175">*DatePickerReady.js*</span></span>

<span data-ttu-id="6e8a9-176">次の例は、 *Views\Shared\\_Layout*ファイルの `head` 要素の末尾に追加する実際のコードを示しています。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-176">The following example shows the actual code that you should add at the bottom of the `head` element in the *Views\Shared\\_Layout.cshtml* file.</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample6.cshtml)]

<span data-ttu-id="6e8a9-177">完全な `head` のセクションを次に示します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-177">The complete `head` section is shown here:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample7.cshtml)]

<span data-ttu-id="6e8a9-178">[URL コンテンツヘルパー](https://msdn.microsoft.com/library/system.web.mvc.urlhelper.content.aspx)メソッドは、リソースパスを絶対パスに変換します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-178">The [URL content helper](https://msdn.microsoft.com/library/system.web.mvc.urlhelper.content.aspx) method converts the resource path to an absolute path.</span></span> <span data-ttu-id="6e8a9-179">アプリケーションが IIS で実行されているときにこれらのリソースを正しく参照するには、`@URL.Content` を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-179">You must use `@URL.Content` to correctly reference these resources when the application is running on IIS.</span></span>

<span data-ttu-id="6e8a9-180">Ctrl キーを押しながら F5 キーを押してアプリケーションを実行します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-180">Press CTRL+F5 to run the application.</span></span> <span data-ttu-id="6e8a9-181">編集 リンクを選択し、 **Releasedate** フィールドに挿入ポイントを配置します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-181">Select an edit link, then put the insertion point into the **ReleaseDate** field.</span></span> <span data-ttu-id="6e8a9-182">JQuery UI ポップアップカレンダーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-182">The jQuery UI popup calendar is displayed.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image7.png)

<span data-ttu-id="6e8a9-183">ほとんどの jQuery コントロールと同様に、datepicker を使用すると、広範囲にカスタマイズすることができます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-183">Like most jQuery controls, the datepicker lets you customize it extensively.</span></span> <span data-ttu-id="6e8a9-184">詳細については、「ビジュアルのカスタマイズ: [jquery ui サイトで](http://learn.jquery.com/jquery-ui/getting-started/)の[jquery Ui テーマの設計](http://learn.jquery.com/jquery-ui/getting-started/#visual-customization-designing-a-jquery-ui-theme)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-184">For information, see [Visual Customization: Designing a jQuery UI theme](http://learn.jquery.com/jquery-ui/getting-started/#visual-customization-designing-a-jquery-ui-theme) on the [jQuery UI](http://learn.jquery.com/jquery-ui/getting-started/) site.</span></span>

### <a name="supporting-the-html5-date-input-control"></a><span data-ttu-id="6e8a9-185">HTML5 日付入力コントロールのサポート</span><span class="sxs-lookup"><span data-stu-id="6e8a9-185">Supporting the HTML5 Date Input Control</span></span>

<span data-ttu-id="6e8a9-186">HTML5 をサポートするブラウザーが増えるにつれて、`date` input 要素などのネイティブ HTML5 入力を使用して、jQuery UI カレンダーを使用しないようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-186">As more browsers support HTML5, you'll want to use the native HTML5 input, such as the `date` input element, and not use the jQuery UI calendar.</span></span> <span data-ttu-id="6e8a9-187">アプリケーションにロジックを追加して、ブラウザーが HTML5 コントロールをサポートしている場合は、自動的に HTML5 コントロールを使用できます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-187">You can add logic to your application to automatically use HTML5 controls if the browser supports them.</span></span> <span data-ttu-id="6e8a9-188">これを行うには、 *DatePickerReady*ファイルの内容を次のように置き換えます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-188">To do this, replace the contents of the *DatePickerReady.js* file with the following:</span></span>

[!code-javascript[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample8.js)]

<span data-ttu-id="6e8a9-189">このスクリプトの最初の行では、Modernizr を使用して、HTML5 の日付入力がサポートされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-189">The first line of this script uses Modernizr to verify that HTML5 date input is supported.</span></span> <span data-ttu-id="6e8a9-190">サポートされていない場合は、代わりに jQuery UI の日付の選択がフックされます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-190">If it's not supported, the jQuery UI date picker is hooked up instead.</span></span> <span data-ttu-id="6e8a9-191">([Modernizr](http://www.modernizr.com/docs/)は、HTML5 と CSS3 のネイティブ実装の可用性を検出するオープンソースの JavaScript ライブラリです。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-191">([Modernizr](http://www.modernizr.com/docs/) is an open-source JavaScript library that detects the availability of native implementations of HTML5 and CSS3.</span></span> <span data-ttu-id="6e8a9-192">Modernizr は、作成するすべての新しい ASP.NET MVC プロジェクトに含まれています)。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-192">Modernizr is included in any new ASP.NET MVC projects that you create.)</span></span>

<span data-ttu-id="6e8a9-193">この変更を行った後、Opera 11 などの HTML5 をサポートするブラウザーを使用してテストできます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-193">After you've made this change, you can test it by using a browser that supports HTML5, such as Opera 11.</span></span> <span data-ttu-id="6e8a9-194">HTML5 と互換性のあるブラウザーを使用してアプリケーションを実行し、ムービーエントリを編集します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-194">Run the application using an HTML5-compatible browser and edit a movie entry.</span></span> <span data-ttu-id="6e8a9-195">次のように、jQuery UI ポップアップカレンダーの代わりに HTML5 日付コントロールが使用されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-195">The HTML5 date control is used instead of the jQuery UI popup calendar:</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image8.png)

<span data-ttu-id="6e8a9-196">新しいバージョンのブラウザーは HTML5 を段階的に実装しているため、現時点では、さまざまな HTML5 サポートを利用できるコードを web サイトに追加することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-196">Because new versions of browsers are implementing HTML5 incrementally, a good approach for now is to add code to your website that accommodates a wide variety of HTML5 support.</span></span> <span data-ttu-id="6e8a9-197">たとえば、より堅牢な*DatePickerReady*スクリプトを以下に示します。これにより、HTML5 日付コントロールのみを部分的にサポートするブラウザーがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-197">For example, a more robust *DatePickerReady.js* script is shown below that lets your site support browsers that only partially support the HTML5 date control.</span></span>

[!code-javascript[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample9.js)]

<span data-ttu-id="6e8a9-198">このスクリプトは、HTML5 日付コントロールを完全にサポートしていない `date` 型の HTML5 `input` の要素を選択します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-198">This script selects HTML5 `input` elements of type `date` that don't fully support the HTML5 date control.</span></span> <span data-ttu-id="6e8a9-199">これらの要素については、jQuery UI ポップアップカレンダーをフックし、`type` 属性を `date` から `text`に変更します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-199">For those elements, it hooks up the jQuery UI popup calendar and then changes the `type` attribute from `date` to `text`.</span></span> <span data-ttu-id="6e8a9-200">`type` 属性を `date` から `text`に変更することにより、部分的な HTML5 日付のサポートは削除されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-200">By changing the `type` attribute from `date` to `text`, partial HTML5 date support is eliminated.</span></span> <span data-ttu-id="6e8a9-201">さらに堅牢な*DatePickerReady*スクリプトは[JSFIDDLE](http://jsfiddle.net/XSTK8/15/)にあります。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-201">An even more robust *DatePickerReady.js* script can be found at [JSFIDDLE](http://jsfiddle.net/XSTK8/15/).</span></span>

### <a name="adding-nullable-dates-to-the-templates"></a><span data-ttu-id="6e8a9-202">テンプレートに Null 許容の日付を追加する</span><span class="sxs-lookup"><span data-stu-id="6e8a9-202">Adding Nullable Dates to the Templates</span></span>

<span data-ttu-id="6e8a9-203">既存の日付テンプレートのいずれかを使用して null 日付を渡すと、実行時エラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-203">If you use one of the existing date templates and pass a null date, you'll get a run-time error.</span></span> <span data-ttu-id="6e8a9-204">日付テンプレートの堅牢性を高めるために、null 値を処理するように変更します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-204">To make the date templates more robust, you'll change them to handle null values.</span></span> <span data-ttu-id="6e8a9-205">Null 許容の日付をサポートするには、 *Views\Shared\DisplayTemplates\DateTime.cshtml*のコードを次のように変更します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-205">To support nullable dates, change the code in the *Views\Shared\DisplayTemplates\DateTime.cshtml* to the following:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample10.cshtml)]

<span data-ttu-id="6e8a9-206">モデルが**null**の場合、コードは空の文字列を返します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-206">The code returns an empty string when the model is **null**.</span></span>

<span data-ttu-id="6e8a9-207">*Views\Shared\EditorTemplates\Date.cshtml*ファイルのコードを次のように変更します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-207">Change the code in the *Views\Shared\EditorTemplates\Date.cshtml* file to the following:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample11.cshtml)]

<span data-ttu-id="6e8a9-208">このコードを実行するときに、モデルが null でない場合は、モデルの `DateTime` 値が使用されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-208">When this code runs, if the model is not null, the model's `DateTime` value is used.</span></span> <span data-ttu-id="6e8a9-209">モデルが null の場合は、現在の日付が代わりに使用されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-209">If the model is null, the current date is used instead.</span></span>

### <a name="wrapup"></a><span data-ttu-id="6e8a9-210">Wrapup</span><span class="sxs-lookup"><span data-stu-id="6e8a9-210">Wrapup</span></span>

<span data-ttu-id="6e8a9-211">このチュートリアルでは、ASP.NET テンプレートヘルパーの基本について説明し、ASP.NET MVC アプリケーションで jQuery UI datepicker popup カレンダーを使用する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-211">This tutorial has covered the basics of ASP.NET templated helpers and shows you how to use the jQuery UI datepicker popup calendar in an ASP.NET MVC application.</span></span> <span data-ttu-id="6e8a9-212">詳細については、次のリソースを参照してください。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-212">For more information, try these resources:</span></span>

- <span data-ttu-id="6e8a9-213">ローカライズの詳細については、「Rajeesh's blog [Jqueryui Datepicker in ASP.NET MVC](http://www.rajeeshcv.com/2010/02/jqueryui-datepicker-in-asp-net-mvc/)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-213">For information on localization, see Rajeesh's blog [JQueryUI Datepicker in ASP.NET MVC](http://www.rajeeshcv.com/2010/02/jqueryui-datepicker-in-asp-net-mvc/).</span></span>
- <span data-ttu-id="6e8a9-214">JQuery UI の詳細については、「 [JQUERY ui](http://docs.jquery.com/UI)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-214">For information about jQuery UI, see [jQuery UI](http://docs.jquery.com/UI).</span></span>
- <span data-ttu-id="6e8a9-215">Datepicker コントロールをローカライズする方法の詳細については、「 [UI/datepicker/ローカリゼーション](http://docs.jquery.com/UI/Datepicker/Localization)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-215">For information about how to localize the datepicker control, see [UI/Datepicker/Localization](http://docs.jquery.com/UI/Datepicker/Localization).</span></span>
- <span data-ttu-id="6e8a9-216">ASP.NET MVC テンプレートの詳細については、 [ASP.NET mvc 2 テンプレート](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)の Brad Wilson のブログシリーズを参照してください。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-216">For more information about the ASP.NET MVC templates, see Brad Wilson's blog series on [ASP.NET MVC 2 Templates](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html).</span></span> <span data-ttu-id="6e8a9-217">シリーズは ASP.NET MVC 2 用に書かれていますが、この資料は現在のバージョンの ASP.NET MVC にも適用されます。</span><span class="sxs-lookup"><span data-stu-id="6e8a9-217">Although the series was written for ASP.NET MVC 2, the material still applies for the current version of ASP.NET MVC.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="6e8a9-218">[[戻る]](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-3.md)</span><span class="sxs-lookup"><span data-stu-id="6e8a9-218">[Previous](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-3.md)</span></span>
