---
uid: identity/overview/getting-started/introduction-to-aspnet-identity
title: Asp.net - ASP.NET の概要 4.x
author: jongalloway
description: ASP.NET メンバーシップ システムで導入された ASP.NET 2.0 のバックしているので 2005年では、方法は web アプリケーションの場合に多くの変更されているし、.
ms.author: riande
ms.date: 01/22/2019
ms.assetid: 38717fc1-5989-43cf-952d-4007cc1dd923
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/getting-started/introduction-to-aspnet-identity
msc.type: authoredcontent
ms.openlocfilehash: 0268dfc16cd2cfb1e79ee14997a4c5eb247af950
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2019
ms.locfileid: "65121564"
---
# <a name="introduction-to-aspnet-identity"></a><span data-ttu-id="59421-103">ASP.NET Identity 入門</span><span class="sxs-lookup"><span data-stu-id="59421-103">Introduction to ASP.NET Identity</span></span>

> <span data-ttu-id="59421-104">ASP.NET メンバーシップ システムで導入された ASP.NET 2.0 のバックしているので 2005年では、web アプリケーションは、通常は認証と承認に処理の方法で多くの変更されているし。</span><span class="sxs-lookup"><span data-stu-id="59421-104">The ASP.NET membership system was introduced with ASP.NET 2.0 back in 2005, and since then there have been many changes in the ways web applications typically handle authentication and authorization.</span></span> <span data-ttu-id="59421-105">ASP.NET Identity では、メンバーシップ システムべきは、web、電話、またはタブレット向けのモダン アプリケーションを作成するときに改めて注目です。</span><span class="sxs-lookup"><span data-stu-id="59421-105">ASP.NET Identity is a fresh look at what the membership system should be when you are building modern applications for the web, phone, or tablet.</span></span>

## <a name="background-membership-in-aspnet"></a><span data-ttu-id="59421-106">背景: ASP.NET のメンバーシップ</span><span class="sxs-lookup"><span data-stu-id="59421-106">Background: Membership in ASP.NET</span></span>

### <a name="aspnet-membership"></a><span data-ttu-id="59421-107">ASP.NET メンバーシップ</span><span class="sxs-lookup"><span data-stu-id="59421-107">ASP.NET Membership</span></span>

<span data-ttu-id="59421-108">[ASP.NET メンバーシップ](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx)が 2005 で、フォーム認証、およびユーザー名、パスワード、およびプロファイル データの SQL Server データベースに関連する一般的なサイト メンバーシップの要件を解決するために設計されました。</span><span class="sxs-lookup"><span data-stu-id="59421-108">[ASP.NET Membership](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) was designed to solve site membership requirements that were common in 2005, which involved Forms Authentication, and a SQL Server database for user names, passwords, and profile data.</span></span> <span data-ttu-id="59421-109">現在、web アプリケーションのデータ ストレージ オプションのはるかに広範な配列があるし、ほとんどの開発者が認証と承認の機能のソーシャル id プロバイダーを使用するには、そのサイトを有効にします。</span><span class="sxs-lookup"><span data-stu-id="59421-109">Today there is a much broader array of data storage options for web applications, and most developers want to enable their sites to use social identity providers for authentication and authorization functionality.</span></span> <span data-ttu-id="59421-110">ASP.NET メンバーシップの設計の制限事項は、困難な移行を行います。</span><span class="sxs-lookup"><span data-stu-id="59421-110">The limitations of ASP.NET Membership's design make this transition difficult:</span></span>

- <span data-ttu-id="59421-111">データベース スキーマは、SQL Server 用に設計された、変更することはできません。</span><span class="sxs-lookup"><span data-stu-id="59421-111">The database schema was designed for SQL Server and you can't change it.</span></span> <span data-ttu-id="59421-112">プロファイル情報を追加することができますが、追加のデータが困難にアクセスする以外で、プロファイル プロバイダーの API を介して、別のテーブルにまとめられます。</span><span class="sxs-lookup"><span data-stu-id="59421-112">You can add profile information, but the additional data is packed into a different table, which makes it difficult to access by any means except through the Profile Provider API.</span></span>
- <span data-ttu-id="59421-113">プロバイダーのシステムでは、バックアップ データ ストアを変更することができますが、システムが、リレーショナル データベースの適切な前提条件の周囲に設計されています。</span><span class="sxs-lookup"><span data-stu-id="59421-113">The provider system enables you to change the backing data store, but the system is designed around assumptions appropriate for a relational database.</span></span> <span data-ttu-id="59421-114">Azure Storage のテーブルなどの非リレーショナル ストレージ メカニズムにメンバーシップ情報を格納するプロバイダーを作成することができますが、多くのコードとの多くを記述することでリレーショナル設計を回避する必要がある、`System.NotImplementedException`そうでないメソッドの例外NoSQL データベースに適用されます。</span><span class="sxs-lookup"><span data-stu-id="59421-114">You can write a provider to store membership information in a non-relational storage mechanism, such as Azure Storage Tables, but then you have to work around the relational design by writing much code and a lot of `System.NotImplementedException` exceptions for methods that don't apply to NoSQL databases.</span></span>
- <span data-ttu-id="59421-115">ログ/ログ アウト機能は、フォーム認証に基づいているため、メンバーシップ システムは使用できません[OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md)します。</span><span class="sxs-lookup"><span data-stu-id="59421-115">Since the log-in/log-out functionality is based on Forms Authentication, the membership system can't use [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span></span> <span data-ttu-id="59421-116">OWIN にはミドルウェア コンポーネント (Microsoft アカウント、Facebook、Google、Twitter) などの外部 id プロバイダーを使用してログインのサポートを含む、認証が含まれていますから組織のアカウントを使用してログをオンプレミス Active Directory またはAzure Active Directory。</span><span class="sxs-lookup"><span data-stu-id="59421-116">OWIN includes middleware components for authentication, including support for log-ins using external identity providers (like Microsoft Accounts, Facebook, Google, Twitter), and log-ins using organizational accounts from on-premises Active Directory or Azure Active Directory.</span></span> <span data-ttu-id="59421-117">OWIN には、OAuth 2.0 JWT、CORS のサポートも含まれています。</span><span class="sxs-lookup"><span data-stu-id="59421-117">OWIN also includes support for OAuth 2.0, JWT and CORS.</span></span>

### <a name="aspnet-simple-membership"></a><span data-ttu-id="59421-118">単純な ASP.NET メンバーシップ</span><span class="sxs-lookup"><span data-stu-id="59421-118">ASP.NET Simple Membership</span></span>

<span data-ttu-id="59421-119">[ASP.NET の簡易なメンバーシップ](../../../web-pages/overview/security/16-adding-security-and-membership.md)ASP.NET Web Pages のメンバーシップ システムとして開発されました。</span><span class="sxs-lookup"><span data-stu-id="59421-119">[ASP.NET simple membership](../../../web-pages/overview/security/16-adding-security-and-membership.md) was developed as a membership system for ASP.NET Web Pages.</span></span> <span data-ttu-id="59421-120">WebMatrix と Visual Studio 2010 SP1 がリリースされました。</span><span class="sxs-lookup"><span data-stu-id="59421-120">It was released with WebMatrix and Visual Studio 2010 SP1.</span></span> <span data-ttu-id="59421-121">簡易なメンバーシップの目標は、Web Pages アプリケーションにメンバーシップ機能を追加するが簡単でした。</span><span class="sxs-lookup"><span data-stu-id="59421-121">The goal of Simple Membership was to make it easy to add membership functionality to a Web Pages application.</span></span>

<span data-ttu-id="59421-122">簡易なメンバーシップが容易にできるように、ユーザー プロファイル情報をカスタマイズして、ASP.NET のメンバーシップを持つその他の問題をまだ共有しますが、いくつかの制限があります。</span><span class="sxs-lookup"><span data-stu-id="59421-122">Simple Membership did make it easier to customize user profile information, but it still shares the other problems with ASP.NET Membership, and it has some limitations:</span></span>

- <span data-ttu-id="59421-123">非リレーショナル ストアでのメンバーシップ システムのデータを保持する難しかったです。</span><span class="sxs-lookup"><span data-stu-id="59421-123">It was hard to persist membership system data in a non-relational store.</span></span>
- <span data-ttu-id="59421-124">これは、OWIN を使用できません。</span><span class="sxs-lookup"><span data-stu-id="59421-124">You can't use it with OWIN.</span></span>
- <span data-ttu-id="59421-125">既存の ASP.NET メンバーシップ プロバイダーともうまくいかないし、は拡張できません。</span><span class="sxs-lookup"><span data-stu-id="59421-125">It doesn't work well with existing ASP.NET Membership providers, and it's not extensible.</span></span>

### <a name="aspnet-universal-providers"></a><span data-ttu-id="59421-126">ASP.NET ユニバーサル プロバイダー</span><span class="sxs-lookup"><span data-stu-id="59421-126">ASP.NET Universal Providers</span></span>

<span data-ttu-id="59421-127">[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) 、Azure SQL Database と SQL Server Compact の操作も Microsoft でのメンバーシップ情報を保持できるようにして開発されました。</span><span class="sxs-lookup"><span data-stu-id="59421-127">[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) were developed to make it possible to persist membership information in Microsoft Azure SQL Database, and they also work with SQL Server Compact.</span></span> <span data-ttu-id="59421-128">ユニバーサル プロバイダーは、Entity Framework Code First、EF でサポートされている任意のストアにデータを保持するユニバーサル プロバイダーを使用できることを意味するでビルドされていました。</span><span class="sxs-lookup"><span data-stu-id="59421-128">The Universal Providers were built on Entity Framework Code First, which means that the Universal Providers can be used to persist data in any store supported by EF.</span></span> <span data-ttu-id="59421-129">ユニバーサルのプロバイダーを使用したデータベースのスキーマはも非常に多くをクリーンアップされました。</span><span class="sxs-lookup"><span data-stu-id="59421-129">With the Universal Providers, the database schema was cleaned up quite a lot as well.</span></span>

<span data-ttu-id="59421-130">ユニバーサル プロバイダーは、まだ SqlMembership プロバイダーと同じ制限を実行するために、ASP.NET メンバーシップ インフラストラクチャに基づいて構築されます。</span><span class="sxs-lookup"><span data-stu-id="59421-130">The Universal Providers are built on the ASP.NET Membership infrastructure, so they still carry the same limitations as the SqlMembership Provider.</span></span> <span data-ttu-id="59421-131">つまり、リレーショナル データベース用に設計された、およびプロファイルとユーザーの情報をカスタマイズすることは困難です。</span><span class="sxs-lookup"><span data-stu-id="59421-131">That is, they were designed for relational databases and it's hard to customize profile and user information.</span></span> <span data-ttu-id="59421-132">これらのプロバイダーは、サインインとサインアウト機能もフォーム認証を使用します。</span><span class="sxs-lookup"><span data-stu-id="59421-132">These providers also still use Forms Authentication for sign-in and sign-out functionality.</span></span>

## <a name="aspnet-identity"></a><span data-ttu-id="59421-133">ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="59421-133">ASP.NET Identity</span></span>

<span data-ttu-id="59421-134">メンバーシップと ASP.NET でのストーリーは進化しました、長年にわたって ASP.NET チームがお客様からのフィードバックから多くについて説明しました。</span><span class="sxs-lookup"><span data-stu-id="59421-134">As the membership story in ASP.NET has evolved over the years, the ASP.NET team has learned a lot from feedback from customers.</span></span>

<span data-ttu-id="59421-135">ユーザー名と、独自のアプリケーションに登録されている、パスワードを入力して、ユーザーがサインインしていることを想定は有効ではなくなりました。</span><span class="sxs-lookup"><span data-stu-id="59421-135">The assumption that users will sign in by entering a user name and password that they have registered in your own application is no longer valid.</span></span> <span data-ttu-id="59421-136">Web は、その他のソーシャルになっています。</span><span class="sxs-lookup"><span data-stu-id="59421-136">The web has become more social.</span></span> <span data-ttu-id="59421-137">ユーザーは、Facebook、Twitter、およびその他のソーシャル web サイトなどのソーシャル チャンネルにリアルタイムで相互作用します。</span><span class="sxs-lookup"><span data-stu-id="59421-137">Users are interacting with each other in real time through social channels such as Facebook, Twitter, and other social web sites.</span></span> <span data-ttu-id="59421-138">開発者は、ユーザーが web サイトで豊富なエクスペリエンスができるように、ソーシャル id でサインインできるようにします。</span><span class="sxs-lookup"><span data-stu-id="59421-138">Developers want users to be able to sign in with their social identities so that they can have a rich experience on their web sites.</span></span> <span data-ttu-id="59421-139">最新のメンバーシップ システムには、リダイレクトに基づくログインなど、Facebook、Twitter、およびその他のユーザーの認証プロバイダーが有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="59421-139">A modern membership system must enable redirection-based log-ins to authentication providers such as Facebook, Twitter, and others.</span></span>

<span data-ttu-id="59421-140">Web 開発の進化と web 開発のパターンをくれました。</span><span class="sxs-lookup"><span data-stu-id="59421-140">As web development evolved, so did the patterns of web development.</span></span> <span data-ttu-id="59421-141">ユニット アプリケーション開発者向けの大きな懸念テスト アプリケーション コードのようになりました。</span><span class="sxs-lookup"><span data-stu-id="59421-141">Unit testing of application code became a core concern for application developers.</span></span> <span data-ttu-id="59421-142">2008 では、ASP.NET は、単体テストが容易な ASP.NET アプリケーションをビルドする開発者のために、モデル-ビュー-コント ローラー (MVC) パターンに基づいて新しいフレームワークを追加します。</span><span class="sxs-lookup"><span data-stu-id="59421-142">In 2008 ASP.NET added a new framework based on the Model-View-Controller (MVC) pattern, in part to help developers build unit testable ASP.NET applications.</span></span> <span data-ttu-id="59421-143">単位たい開発者にとっては、することができるメンバーシップ システムにする必要も、アプリケーション ロジックをテストします。</span><span class="sxs-lookup"><span data-stu-id="59421-143">Developers who wanted to unit test their application logic also wanted to be able to do that with the membership system.</span></span>

<span data-ttu-id="59421-144">Web アプリケーションの開発でこれらの変更では、考慮すると、ASP.NET Identity は、次の目的で開発されました。</span><span class="sxs-lookup"><span data-stu-id="59421-144">Considering these changes in web application development, ASP.NET Identity was developed with the following goals:</span></span>

- <span data-ttu-id="59421-145">**1 つの ASP.NET の Id システム**</span><span class="sxs-lookup"><span data-stu-id="59421-145">**One ASP.NET Identity system**</span></span>

    - <span data-ttu-id="59421-146">ASP.NET MVC、Web フォーム、Web ページ、Web API や SignalR など、ASP.NET フレームワークのすべてでは、ASP.NET Identity を使用できます。</span><span class="sxs-lookup"><span data-stu-id="59421-146">ASP.NET Identity can be used with all of the ASP.NET frameworks, such as ASP.NET MVC, Web Forms, Web Pages, Web API, and SignalR.</span></span>
    - <span data-ttu-id="59421-147">ASP.NET Identity は、web、phone、ストア、またはハイブリッド アプリケーションを作成するときに使用できます。</span><span class="sxs-lookup"><span data-stu-id="59421-147">ASP.NET Identity can be used when you are building web, phone, store, or hybrid applications.</span></span>
- <span data-ttu-id="59421-148">**ユーザーに関するプロファイル データに接続性**</span><span class="sxs-lookup"><span data-stu-id="59421-148">**Ease of plugging in profile data about the user**</span></span>

    - <span data-ttu-id="59421-149">ユーザーおよびプロファイル情報のスキーマに制御があります。</span><span class="sxs-lookup"><span data-stu-id="59421-149">You have control over the schema of user and profile information.</span></span> <span data-ttu-id="59421-150">たとえば、アプリケーションでアカウントを登録するときに、ユーザーが入力した生年月日を格納するシステムを簡単に実現できます。</span><span class="sxs-lookup"><span data-stu-id="59421-150">For example, you can easily enable the system to store birth dates entered by users when they register an account in your application.</span></span>

- <span data-ttu-id="59421-151">**永続化の制御**</span><span class="sxs-lookup"><span data-stu-id="59421-151">**Persistence control**</span></span>

    - <span data-ttu-id="59421-152">既定では、ASP.NET Identity システムは、データベースのすべてのユーザー情報を格納します。</span><span class="sxs-lookup"><span data-stu-id="59421-152">By default, the ASP.NET Identity system stores all the user information in a database.</span></span> <span data-ttu-id="59421-153">ASP.NET Identity は、すべての永続化メカニズムを実装するために、Entity Framework Code First を使用します。</span><span class="sxs-lookup"><span data-stu-id="59421-153">ASP.NET Identity uses Entity Framework Code First to implement all of its persistence mechanism.</span></span>
    - <span data-ttu-id="59421-154">データベース スキーマ、テーブル名の変更や変更などの一般的なタスクを制御するための主キーのデータ型は簡単に実行します。</span><span class="sxs-lookup"><span data-stu-id="59421-154">Since you control the database schema, common tasks such as changing table names or changing the data type of primary keys is simple to do.</span></span>
    - <span data-ttu-id="59421-155">スローすることがなくなど、SharePoint や Azure Storage Table Service、NoSQL データベースなどの別のストレージ メカニズムを接続するは簡単`System.NotImplementedExceptions`例外。</span><span class="sxs-lookup"><span data-stu-id="59421-155">It's easy to plug in different storage mechanisms such as SharePoint, Azure Storage Table Service, NoSQL databases, etc., without having to throw `System.NotImplementedExceptions` exceptions.</span></span>
- <span data-ttu-id="59421-156">**単体テストの容易性**</span><span class="sxs-lookup"><span data-stu-id="59421-156">**Unit testability**</span></span>

    - <span data-ttu-id="59421-157">ASP.NET Identity によって、web アプリケーションのさらに単体テスト可能です。</span><span class="sxs-lookup"><span data-stu-id="59421-157">ASP.NET Identity makes the web application more unit testable.</span></span> <span data-ttu-id="59421-158">ASP.NET Identity を使用するアプリケーションの部品用の単体テストを記述することができます。</span><span class="sxs-lookup"><span data-stu-id="59421-158">You can write unit tests for the parts of your application that use ASP.NET Identity.</span></span>
- <span data-ttu-id="59421-159">**ロール プロバイダー**</span><span class="sxs-lookup"><span data-stu-id="59421-159">**Role provider**</span></span>

    - <span data-ttu-id="59421-160">ロールによって、アプリケーションの部分へのアクセスを制限できるロール プロバイダーがあります。</span><span class="sxs-lookup"><span data-stu-id="59421-160">There is a role provider which lets you restrict access to parts of your application by roles.</span></span> <span data-ttu-id="59421-161">"Admin"などのロールを作成し、ロールにユーザーを追加することができます簡単にします。</span><span class="sxs-lookup"><span data-stu-id="59421-161">You can easily create roles such as "Admin" and add users to roles.</span></span>
- <span data-ttu-id="59421-162">**クレーム ベース**</span><span class="sxs-lookup"><span data-stu-id="59421-162">**Claims Based**</span></span>

    - <span data-ttu-id="59421-163">ASP.NET Identity では、ユーザーの id が要求のセットとして表される、クレーム ベースの認証をサポートします。</span><span class="sxs-lookup"><span data-stu-id="59421-163">ASP.NET Identity supports claims-based authentication, where the user's identity is represented as a set of claims.</span></span> <span data-ttu-id="59421-164">クレームは、開発者がのロールを使用するよりも、ユーザーの id を記述するよりずっと表現力豊かなを許可します。</span><span class="sxs-lookup"><span data-stu-id="59421-164">Claims allow developers to be a lot more expressive in describing a user's identity than roles allow.</span></span> <span data-ttu-id="59421-165">ロールのメンバーシップが (メンバーまたはメンバーではない)、ブールだけの場合は、クレームは、ユーザーの id とメンバーシップに関する豊富な情報を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="59421-165">Whereas role membership is just a boolean (member or non-member), a claim can include rich information about the user's identity and membership.</span></span>
- <span data-ttu-id="59421-166">**ソーシャル ログイン プロバイダー**</span><span class="sxs-lookup"><span data-stu-id="59421-166">**Social Login Providers**</span></span>

    - <span data-ttu-id="59421-167">簡単にアプリケーションには、ソーシャル ログインなどの Microsoft アカウント、Facebook、Twitter、Google、および他のユーザーを追加し、アプリケーションでユーザーに固有のデータを格納できます。</span><span class="sxs-lookup"><span data-stu-id="59421-167">You can easily add social log-ins such as Microsoft Account, Facebook, Twitter, Google, and others to your application, and store the user-specific data in your application.</span></span>

- <span data-ttu-id="59421-168">**OWIN の統合**</span><span class="sxs-lookup"><span data-stu-id="59421-168">**OWIN Integration**</span></span>

    - <span data-ttu-id="59421-169">ASP.NET 認証は、任意の OWIN ベースのホストで使用できる、OWIN ミドルウェアに基づいています。</span><span class="sxs-lookup"><span data-stu-id="59421-169">ASP.NET authentication is now based on OWIN middleware that can be used on any OWIN-based host.</span></span> <span data-ttu-id="59421-170">ASP.NET Identity には、System.Web のすべての依存関係がありません。</span><span class="sxs-lookup"><span data-stu-id="59421-170">ASP.NET Identity does not have any dependency on System.Web.</span></span> <span data-ttu-id="59421-171">OWIN フレームワークを完全に準拠し、OWIN ホストされているアプリケーションで使用できます。</span><span class="sxs-lookup"><span data-stu-id="59421-171">It is a fully compliant OWIN framework and can be used in any OWIN hosted application.</span></span>
    - <span data-ttu-id="59421-172">ASP.NET Identity は、ログ/ログ出し、web サイト内のユーザーのための OWIN 認証を使用します。</span><span class="sxs-lookup"><span data-stu-id="59421-172">ASP.NET Identity uses OWIN Authentication for log-in/log-out of users in the web site.</span></span> <span data-ttu-id="59421-173">つまり、クッキーを生成する FormsAuthentication を使用する代わりに、アプリケーションが使用する OWIN CookieAuthentication そのためには。</span><span class="sxs-lookup"><span data-stu-id="59421-173">This means that instead of using FormsAuthentication to generate the cookie, the application uses OWIN CookieAuthentication to do that.</span></span>
- <span data-ttu-id="59421-174">**NuGet パッケージ**</span><span class="sxs-lookup"><span data-stu-id="59421-174">**NuGet package**</span></span>

    - <span data-ttu-id="59421-175">ASP.NET Identity は、Visual Studio 2017 に付属する ASP.NET MVC、Web フォームおよび Web API テンプレートにインストールされている NuGet パッケージとして再配分されます。</span><span class="sxs-lookup"><span data-stu-id="59421-175">ASP.NET Identity is redistributed as a NuGet package which is installed in the ASP.NET MVC, Web Forms and Web API templates that ship with Visual Studio 2017.</span></span> <span data-ttu-id="59421-176">この NuGet パッケージは、NuGet ギャラリーからダウンロードできます。</span><span class="sxs-lookup"><span data-stu-id="59421-176">You can download this NuGet package from the NuGet gallery.</span></span>
    - <span data-ttu-id="59421-177">NuGet として ASP.NET Identity を解放するパッケージを簡単で新機能とバグ修正、反復処理をアジャイルの方法で開発者に提供するための ASP.NET チーム。</span><span class="sxs-lookup"><span data-stu-id="59421-177">Releasing ASP.NET Identity as a NuGet package makes it easier for the ASP.NET team to iterate on new features and bug fixes, and deliver these to developers in an agile manner.</span></span>

## <a name="get-started-with-aspnet-identity"></a><span data-ttu-id="59421-178">ASP.NET Identity を概要します。</span><span class="sxs-lookup"><span data-stu-id="59421-178">Get started with ASP.NET Identity</span></span>

<span data-ttu-id="59421-179">ASP.NET Identity は、ASP.NET MVC、Web フォーム、Web API、SPA の Visual Studio 2017 のプロジェクト テンプレートに使用されます。</span><span class="sxs-lookup"><span data-stu-id="59421-179">ASP.NET Identity is used in the Visual Studio 2017 project templates for ASP.NET MVC, Web Forms, Web API and SPA.</span></span> <span data-ttu-id="59421-180">このチュートリアルでは、プロジェクト テンプレートが ASP.NET Identity を使用して、登録、サインイン、およびユーザーのサインアウトの機能を追加する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="59421-180">In this walkthrough, we'll illustrate how the project templates use ASP.NET Identity to add functionality to register, sign in and sign out a user.</span></span>

<span data-ttu-id="59421-181">ASP.NET Identity は、次の手順を使用して実装されます。</span><span class="sxs-lookup"><span data-stu-id="59421-181">ASP.NET Identity is implemented using the following procedure.</span></span> <span data-ttu-id="59421-182">この記事の目的は、ASP.NET Identity; の高レベルな概要を表示するには次の手順に従ってまたは詳細を読み取るだけできます。</span><span class="sxs-lookup"><span data-stu-id="59421-182">The purpose of this article is to give you a high level overview of ASP.NET Identity; you can follow it step by step or just read the details.</span></span> <span data-ttu-id="59421-183">新しい API を使用して、ユーザー、ロールおよびプロファイル情報を追加するなど、ASP.NET Identity を使用してアプリを作成する方法の詳細な手順については、この記事の最後に次の手順を参照してください。</span><span class="sxs-lookup"><span data-stu-id="59421-183">For more detailed instructions on creating apps using ASP.NET Identity, including using the new API to add users, roles and profile information, see the Next Steps section at the end of this article.</span></span>

1. <span data-ttu-id="59421-184">個々 のアカウントを使用して、ASP.NET MVC アプリケーションを作成します。</span><span class="sxs-lookup"><span data-stu-id="59421-184">Create an ASP.NET MVC application with Individual Accounts.</span></span> <span data-ttu-id="59421-185">ASP.NET MVC、Web フォーム、Web API、SignalR などの ASP.NET Identity を使用することができます。この記事では、ASP.NET MVC アプリケーションで開始します。</span><span class="sxs-lookup"><span data-stu-id="59421-185">You can use ASP.NET Identity in ASP.NET MVC, Web Forms, Web API, SignalR etc. In this article we will start with an ASP.NET MVC application.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image1.png)
2. <span data-ttu-id="59421-186">作成したプロジェクトには、ASP.NET Identity の次の 3 つのパッケージが含まれています。</span><span class="sxs-lookup"><span data-stu-id="59421-186">The created project contains the following three packages for ASP.NET Identity.</span></span>

    - [`Microsoft.AspNet.Identity.EntityFramework`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/)  
   <span data-ttu-id="59421-187">このパッケージには、ASP.NET Identity のデータと SQL Server へのスキーマに保持される ASP.NET Identity の Entity Framework の実装があります。</span><span class="sxs-lookup"><span data-stu-id="59421-187">This package has the Entity Framework implementation of ASP.NET Identity which will persist the ASP.NET Identity data and schema to SQL Server.</span></span>
    - [`Microsoft.AspNet.Identity.Core`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Core/)  
   <span data-ttu-id="59421-188">このパッケージには、ASP.NET Identity に core インターフェイスがあります。</span><span class="sxs-lookup"><span data-stu-id="59421-188">This package has the core interfaces for ASP.NET Identity.</span></span> <span data-ttu-id="59421-189">このパッケージは、データベースなどの Azure Table Storage、NoSQL など別の永続化のターゲットが格納 ASP.NET Identity の実装を記述する使用できます。</span><span class="sxs-lookup"><span data-stu-id="59421-189">This package can be used to write an implementation for ASP.NET Identity that targets different persistence stores such as Azure Table Storage, NoSQL databases etc.</span></span>
    - [`Microsoft.AspNet.Identity.OWIN`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Owin/)  
   <span data-ttu-id="59421-190">このパッケージには、ASP.NET アプリケーションで ASP.NET Identity で OWIN 認証で接続するために使用する機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="59421-190">This package contains functionality that is used to plug in OWIN authentication with ASP.NET Identity in ASP.NET applications.</span></span> <span data-ttu-id="59421-191">これは、機能で cookie を生成する OWIN クッキー認証ミドルウェアに呼び出し、アプリケーションにサインインを追加するときに使用されます。</span><span class="sxs-lookup"><span data-stu-id="59421-191">This is used when you add sign in functionality to your application and call into OWIN Cookie Authentication middleware to generate a cookie.</span></span>
3. <span data-ttu-id="59421-192">ユーザーを作成します。</span><span class="sxs-lookup"><span data-stu-id="59421-192">Creating a user.</span></span>  
   <span data-ttu-id="59421-193">アプリケーションを起動し、をクリックして、**登録**ユーザーを作成するリンク。</span><span class="sxs-lookup"><span data-stu-id="59421-193">Launch the application and then click on the **Register** link to create a user.</span></span> <span data-ttu-id="59421-194">次の図は、ユーザー名とパスワードを収集する登録ページを示します。</span><span class="sxs-lookup"><span data-stu-id="59421-194">The following image shows the Register page that collects the user name and password.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image2.png)  
  
   <span data-ttu-id="59421-195">ユーザーが選択すると、**登録**ボタン、`Register`アカウント コント ローラーのアクションは、以下の強調表示されている、ASP.NET Identity API を呼び出すことによって、ユーザーを作成します。</span><span class="sxs-lookup"><span data-stu-id="59421-195">When the user selects the **Register** button, the `Register` action of the Account controller creates the user by calling the ASP.NET Identity API, as highlighted below:</span></span>

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample1.cs?highlight=8-9)]
4. <span data-ttu-id="59421-196">サインイン。</span><span class="sxs-lookup"><span data-stu-id="59421-196">Sign in.</span></span>  
   <span data-ttu-id="59421-197">によって署名彼女は、ユーザーが正常に作成された場合、`SignInAsync`メソッド。</span><span class="sxs-lookup"><span data-stu-id="59421-197">If the user was successfully created, she is signed in by the `SignInAsync` method.</span></span>  

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample6.cs?highlight=12)]

   <span data-ttu-id="59421-198">`SignInManager.SignInAsync`メソッドを生成、 [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="59421-198">The `SignInManager.SignInAsync` method generates a [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span></span> <span data-ttu-id="59421-199">ASP.NET Identity と OWIN クッキー認証は要求ベースのシステムであるため、フレームワークには、ユーザーの ClaimsIdentity を生成するアプリが必要です。</span><span class="sxs-lookup"><span data-stu-id="59421-199">Since ASP.NET Identity and OWIN Cookie Authentication are claims-based system, the framework requires the app to generate a ClaimsIdentity for the user.</span></span> <span data-ttu-id="59421-200">ClaimsIdentity には、ユーザーが属するロールなど、ユーザーのすべての要求についての情報があります。</span><span class="sxs-lookup"><span data-stu-id="59421-200">ClaimsIdentity has information about all the claims for the user, such as what roles the user belongs to.</span></span>   
 
5. <span data-ttu-id="59421-201">ログオフします。</span><span class="sxs-lookup"><span data-stu-id="59421-201">Log off.</span></span>  
   <span data-ttu-id="59421-202">選択、**ログオフ**ログオフ操作を呼び出して、account コント ローラーへのリンク。</span><span class="sxs-lookup"><span data-stu-id="59421-202">Select the **Log off** link to call the LogOff action in the account controller.</span></span> 

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample5.cs?highlight=6)]

   <span data-ttu-id="59421-203">OWIN に示す、強調表示されたコード`AuthenticationManager.SignOut`メソッド。</span><span class="sxs-lookup"><span data-stu-id="59421-203">The highlighted code above shows the OWIN `AuthenticationManager.SignOut` method.</span></span> <span data-ttu-id="59421-204">これは、メソッドは[FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx)メソッドで使用される、 [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) Web フォームでのモジュール。</span><span class="sxs-lookup"><span data-stu-id="59421-204">This is analogous to [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) method used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module in Web Forms.</span></span>

## <a name="components-of-aspnet-identity"></a><span data-ttu-id="59421-205">ASP.NET Identity のコンポーネント</span><span class="sxs-lookup"><span data-stu-id="59421-205">Components of ASP.NET Identity</span></span>

<span data-ttu-id="59421-206">次の図は、ASP.NET Identity のシステムのコンポーネントを示します (に対する select[この](introduction-to-aspnet-identity/_static/image3.png)または拡大するダイアグラムで)。</span><span class="sxs-lookup"><span data-stu-id="59421-206">The diagram below shows the components of the ASP.NET Identity system (select on [this](introduction-to-aspnet-identity/_static/image3.png) or on the diagram to enlarge it).</span></span> <span data-ttu-id="59421-207">緑色のパッケージは、ASP.NET の Id システムを構成します。</span><span class="sxs-lookup"><span data-stu-id="59421-207">The packages in green make up the ASP.NET Identity system.</span></span> <span data-ttu-id="59421-208">その他のすべてのパッケージは、ASP.NET アプリケーションで ASP.NET の Id システムを使用するために必要な依存関係です。</span><span class="sxs-lookup"><span data-stu-id="59421-208">All the other packages are dependencies which are needed to use the ASP.NET Identity system in ASP.NET applications.</span></span>

[![](introduction-to-aspnet-identity/_static/image5.png)](introduction-to-aspnet-identity/_static/image4.png)

<span data-ttu-id="59421-209">いない前に説明した NuGet パッケージの簡単な説明を次に示します。</span><span class="sxs-lookup"><span data-stu-id="59421-209">The following is a brief description of the NuGet packages not mentioned previously:</span></span>

- [<span data-ttu-id="59421-210">Microsoft.Owin.Security.Cookies</span><span class="sxs-lookup"><span data-stu-id="59421-210">Microsoft.Owin.Security.Cookies</span></span>](http://www.nuget.org/packages/Microsoft.Owin.Security.Cookies/)  
 <span data-ttu-id="59421-211">Cookie を使用するアプリケーションをできるようにするミドルウェア ベースの認証、ASP に似ています。NET のフォーム認証です。</span><span class="sxs-lookup"><span data-stu-id="59421-211">Middleware that enables an application to use cookie based authentication, similar to ASP.NET's Forms Authentication.</span></span>
- [<span data-ttu-id="59421-212">EntityFramework</span><span class="sxs-lookup"><span data-stu-id="59421-212">EntityFramework</span></span>](http://www.nuget.org/packages/EntityFramework/)  
 <span data-ttu-id="59421-213">Entity Framework は、リレーショナル データベース用の Microsoft の推奨されるデータ アクセス テクノロジです。</span><span class="sxs-lookup"><span data-stu-id="59421-213">Entity Framework is Microsoft's recommended data access technology for relational databases.</span></span>

## <a name="migrating-from-membership-to-aspnet-identity"></a><span data-ttu-id="59421-214">メンバーシップから ASP.NET Identity に移行します。</span><span class="sxs-lookup"><span data-stu-id="59421-214">Migrating from Membership to ASP.NET Identity</span></span>

<span data-ttu-id="59421-215">すぐに新しい ASP.NET Identity システムへの ASP.NET メンバーシップまたは簡易なメンバーシップを使用する既存のアプリの移行に関するガイダンスを提供することと思います。</span><span class="sxs-lookup"><span data-stu-id="59421-215">We hope to soon provide guidance on migrating your existing apps that use ASP.NET Membership or Simple Membership to the new ASP.NET Identity system.</span></span>

## <a name="next-steps"></a><span data-ttu-id="59421-216">次の手順</span><span class="sxs-lookup"><span data-stu-id="59421-216">Next Steps</span></span>

- [<span data-ttu-id="59421-217">Facebook と Google の OAuth2 や OpenID サインオンで ASP.NET MVC 5 アプリを作成します。</span><span class="sxs-lookup"><span data-stu-id="59421-217">Create an ASP.NET MVC 5 App with Facebook and Google OAuth2 and OpenID Sign-on</span></span>](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md)  
 <span data-ttu-id="59421-218">このチュートリアルでは、ASP.NET Identity API を使用して、プロファイル情報をユーザー データベース、および Google と Facebook を認証する方法を追加します。</span><span class="sxs-lookup"><span data-stu-id="59421-218">The tutorial uses the ASP.NET Identity API to add profile information to the user database, and how to authenticate with Google and Facebook.</span></span>
- [<span data-ttu-id="59421-219">Auth と SQL DB を使って、ASP.NET MVC アプリを作成し、Azure App Service にデプロイ</span><span class="sxs-lookup"><span data-stu-id="59421-219">Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service</span></span>](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data)  
 <span data-ttu-id="59421-220">このチュートリアルでは、Id API を使用して、ユーザーとロールを追加する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="59421-220">This tutorial shows how to use the Identity API to add users and roles.</span></span>
- [https://github.com/rustd/AspnetIdentitySample](https://github.com/rustd/AspnetIdentitySample)  
 <span data-ttu-id="59421-221">基本的なロールとユーザーのサポートを追加する方法、およびロールとユーザー管理を行う方法を示すサンプル アプリケーション。</span><span class="sxs-lookup"><span data-stu-id="59421-221">Sample application that shows how to add basic roles and user support and how to do roles and user management.</span></span>
