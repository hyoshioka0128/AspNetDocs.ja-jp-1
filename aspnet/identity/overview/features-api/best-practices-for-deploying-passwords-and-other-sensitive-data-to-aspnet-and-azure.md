---
uid: identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure
title: ASP.NET と Azure App Service - ASP.NET にパスワードやその他の機密データを展開する 4.x
author: Rick-Anderson
description: このチュートリアルでは、どのようにコードに安全に格納してセキュリティで保護された情報にアクセスします。 最も重要な点は、パスワードやその他の送信を保存しないでください.
ms.author: riande
ms.date: 05/21/2015
ms.assetid: 97902c66-cb61-4d11-be52-73f962f2db0a
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure
msc.type: authoredcontent
ms.openlocfilehash: 0e02df967df8acf346b9fcd1c75dbe304cc5407b
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2019
ms.locfileid: "65121560"
---
# <a name="best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure-app-service"></a><span data-ttu-id="0a0b9-104">ASP.NET と Azure App Service にパスワードやその他の機密データを配置するためのベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="0a0b9-104">Best practices for deploying passwords and other sensitive data to ASP.NET and Azure App Service</span></span>

<span data-ttu-id="0a0b9-105">によって[Rick Anderson]((https://twitter.com/RickAndMSFT))</span><span class="sxs-lookup"><span data-stu-id="0a0b9-105">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span></span>

> <span data-ttu-id="0a0b9-106">このチュートリアルでは、どのようにコードに安全に格納してセキュリティで保護された情報にアクセスします。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-106">This tutorial shows how your code can securely store and access secure information.</span></span> <span data-ttu-id="0a0b9-107">最も重要な点は、ソース コードで、パスワードや他の機密データを格納する必要がありますしないと、開発およびテスト モードでは運用シークレットを使用しないでください。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-107">The most important point is you should never store passwords or other sensitive data in source code, and you shouldn't use production secrets in development and test mode.</span></span>
> 
> <span data-ttu-id="0a0b9-108">サンプル コードは、単純な web ジョブ コンソール アプリと、データベース接続文字列パスワード、Twilio、Google と SendGrid セキュリティで保護されたキーへのアクセスが必要な ASP.NET MVC アプリです。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-108">The sample code is a simple WebJob console app and a ASP.NET MVC app that needs access to a database connection string password, Twilio, Google and SendGrid secure keys.</span></span>
> 
> <span data-ttu-id="0a0b9-109">オンプレミスでの設定と PHP も説明します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-109">On premise settings and PHP is also mentioned.</span></span>

- [<span data-ttu-id="0a0b9-110">開発環境でパスワードを使用</span><span class="sxs-lookup"><span data-stu-id="0a0b9-110">Working with passwords in the development environment</span></span>](#pwd)
- [<span data-ttu-id="0a0b9-111">開発環境での接続文字列の使用</span><span class="sxs-lookup"><span data-stu-id="0a0b9-111">Working with connection strings in the development environment</span></span>](#con)
- [<span data-ttu-id="0a0b9-112">Web ジョブのコンソール アプリ</span><span class="sxs-lookup"><span data-stu-id="0a0b9-112">WebJobs console apps</span></span>](#wj)
- [<span data-ttu-id="0a0b9-113">シークレットを Azure に展開します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-113">Deploying secrets to Azure</span></span>](#da)
- [<span data-ttu-id="0a0b9-114">オンプレミスおよび PHP 向けのノート</span><span class="sxs-lookup"><span data-stu-id="0a0b9-114">Notes for On-Premise and PHP</span></span>](#not)
- [<span data-ttu-id="0a0b9-115">その他のリソース</span><span class="sxs-lookup"><span data-stu-id="0a0b9-115">Additional Resources</span></span>](#addRes)

<a id="pwd"></a>
## <a name="working-with-passwords-in-the-development-environment"></a><span data-ttu-id="0a0b9-116">開発環境でパスワードを使用</span><span class="sxs-lookup"><span data-stu-id="0a0b9-116">Working with passwords in the development environment</span></span>

<span data-ttu-id="0a0b9-117">チュートリアルは、ソース コードで機密データを格納する必要がありますしないことに注意をうまくいけば、ソース コードで頻繁に機密データを説明します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-117">Tutorials frequently show sensitive data in source code, hopefully with a caveat that you should never store sensitive data in source code.</span></span> <span data-ttu-id="0a0b9-118">たとえば、マイ[SMS と電子メール 2 fa での ASP.NET MVC 5 アプリ](../../../mvc/overview/security/aspnet-mvc-5-app-with-sms-and-email-two-factor-authentication.md)チュートリアルでは、次に示します、 *web.config*ファイル。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-118">For example, my [ASP.NET MVC 5 app with SMS and email 2FA](../../../mvc/overview/security/aspnet-mvc-5-app-with-sms-and-email-two-factor-authentication.md) tutorial shows the following in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample1.xml)]

<span data-ttu-id="0a0b9-119">*Web.config*ファイルには、ソース コードがあるため、これらのシークレットは、そのファイルに保存することはありませんか。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-119">The *web.config* file is source code, so these secrets should never be stored in that file.</span></span> <span data-ttu-id="0a0b9-120">さいわい、`<appSettings>`要素には、`file`属性を機密性の高いアプリの構成設定を含む外部ファイルを指定することができます。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-120">Fortunately, the `<appSettings>` element has a `file` attribute that allows you to specify an external file that contains sensitive app config settings.</span></span> <span data-ttu-id="0a0b9-121">外部ファイルは、ソース ツリーにチェックしない限り、外部ファイルに、すべてのシークレットを移動できます。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-121">You can move all your secrets to an external file as long as the external file is not checked into your source tree.</span></span> <span data-ttu-id="0a0b9-122">たとえば、次のマークアップ ファイルで*AppSettingsSecrets.config*すべてのアプリ シークレットが含まれています。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-122">For example, in the following markup, the file *AppSettingsSecrets.config* contains all the app secrets:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample2.xml)]

<span data-ttu-id="0a0b9-123">外部ファイル内のマークアップ (*AppSettingsSecrets.config*このサンプルでは)、共通のマークアップで見つかった、 *web.config*ファイル。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-123">The markup in the external file (*AppSettingsSecrets.config* in this sample), is the same markup found in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample3.xml)]

<span data-ttu-id="0a0b9-124">ASP.NET ランタイム内のマークアップを含む外部ファイルの内容と結合&lt;appSettings&gt;要素。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-124">The ASP.NET runtime merges the contents of the external file with the markup in &lt;appSettings&gt; element.</span></span> <span data-ttu-id="0a0b9-125">ランタイムは、指定したファイルが見つからない場合に、ファイル属性を無視します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-125">The runtime ignores the file attribute if the specified file cannot be found.</span></span>

> [!WARNING]
> <span data-ttu-id="0a0b9-126">セキュリティ - 追加しないでください、*シークレット .config*をプロジェクトにファイルまたはソース管理にチェックインします。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-126">Security - Do not add your *secrets .config* file to your project or check it into source control.</span></span> <span data-ttu-id="0a0b9-127">既定では、Visual Studio の設定、`Build Action`に`Content`、つまり、ファイルが展開されています。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-127">By default, Visual Studio sets the `Build Action` to `Content`, which means the file is deployed.</span></span> <span data-ttu-id="0a0b9-128">詳細については、次を参照してください[理由はありませんすべてのプロジェクト フォルダーにファイルをデプロイしますか?。](https://msdn.microsoft.com/library/ee942158(v=vs.110).aspx#can_i_exclude_specific_files_or_folders_from_deployment)</span><span class="sxs-lookup"><span data-stu-id="0a0b9-128">For more information see [Why don't all of the files in my project folder get deployed?](https://msdn.microsoft.com/library/ee942158(v=vs.110).aspx#can_i_exclude_specific_files_or_folders_from_deployment)</span></span> <span data-ttu-id="0a0b9-129">任意の拡張機能を使用することができますが、*シークレット .config*ようにすることをお勧めファイル、 *.config*構成ファイルが IIS によって提供されないように、します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-129">Although you can use any extension for the *secrets .config* file, it's best to keep it *.config*, as config files are not served by IIS.</span></span> <span data-ttu-id="0a0b9-130">また、 *AppSettingsSecrets.config*ファイルは上からの 2 つのディレクトリ レベルでは、 *web.config*ファイル、ソリューションのディレクトリからは完全にします。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-130">Notice also that the *AppSettingsSecrets.config* file is two directory levels up from the *web.config* file, so it's completely out of the solution directory.</span></span> <span data-ttu-id="0a0b9-131">ソリューションのディレクトリからファイルを移動することによって&quot;git 追加\*&quot;リポジトリに追加されません。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-131">By moving the file out of the solution directory, &quot;git add \*&quot; won't add it to your repository.</span></span>

<a id="con"></a>
## <a name="working-with-connection-strings-in-the-development-environment"></a><span data-ttu-id="0a0b9-132">開発環境での接続文字列の使用</span><span class="sxs-lookup"><span data-stu-id="0a0b9-132">Working with connection strings in the development environment</span></span>

<span data-ttu-id="0a0b9-133">Visual Studio を使用する新しい ASP.NET プロジェクトを作成する[LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-133">Visual Studio creates new ASP.NET projects that use [LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx).</span></span> <span data-ttu-id="0a0b9-134">LocalDB は、具体的には、開発環境用に作成されました。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-134">LocalDB was created specifically for the development environment.</span></span> <span data-ttu-id="0a0b9-135">パスワードは必要ありません、ため、シークレットが、ソース コードにチェックインされていることを防ぐために何も実行する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-135">It doesn't require a password, therefore you don't need to do anything to prevent secrets from being checked into your source code.</span></span> <span data-ttu-id="0a0b9-136">一部の開発チームは、パスワードが必要な SQL Server (またはその他の DBMS) の完全なバージョンを使用します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-136">Some development teams use the full versions of SQL Server (or other DBMS) that require a password.</span></span>

<span data-ttu-id="0a0b9-137">使用することができます、`configSource`全体を置き換える`<connectionStrings>`マークアップ。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-137">You can use the `configSource` attribute to replace the entire `<connectionStrings>` markup.</span></span> <span data-ttu-id="0a0b9-138">異なり、 `<appSettings>` `file` 、マークアップをマージする属性、`configSource`属性のマークアップに置き換えられます。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-138">Unlike the `<appSettings>` `file` attribute that merges the markup, the `configSource` attribute replaces the markup.</span></span> <span data-ttu-id="0a0b9-139">次のマークアップに示す、`configSource`属性、 *web.config*ファイル。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-139">The following markup shows the `configSource` attribute in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample4.xml?highlight=1)]

> [!NOTE]
> <span data-ttu-id="0a0b9-140">使用する場合、`configSource`接続文字列を外部ファイルに移動する前に示した属性し Visual studio で新しい web サイトを作成、データベースを使用しているし、データベースを構成するオプションが表示されなくを検出するために行うことはできませんとする puVisual Studio から Azure への blish します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-140">If you use the `configSource` attribute as shown above to move your connection strings to an external file, and have Visual Studio create a new web site, it won't be able to detect you are using a database, and you won't get the option of configuring the database when you publish to Azure from Visual Studio.</span></span> <span data-ttu-id="0a0b9-141">使用する場合、`configSource`属性、PowerShell を使用するには、web サイトとデータベースを作成して展開するまたはを作成、web サイトと、データベース、ポータルで発行する前にします。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-141">If you are using the `configSource` attribute, you can use PowerShell to create and deploy your web site and database, or you can create the web site and the database in the portal before you publish.</span></span> <span data-ttu-id="0a0b9-142">[新規 AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3)スクリプトが新しい web サイトおよびデータベースに作成されます。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-142">The [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) script will create a new web site and database.</span></span>

> [!WARNING]
> <span data-ttu-id="0a0b9-143">セキュリティ - とは異なり、 *AppSettingsSecrets.config*ファイル、外部接続文字列のファイルは、ルートと同じディレクトリである必要があります*web.config*ファイル、対策を講じることを確認する必要がありますソース リポジトリにチェックインしません。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-143">Security - Unlike the *AppSettingsSecrets.config* file, the external connection strings file must be in the same directory as the root *web.config* file, so you'll have to take precautions to ensure you don't check it into your source repository.</span></span>

> [!NOTE]
> <span data-ttu-id="0a0b9-144">**シークレット ファイルのセキュリティ警告:** テストと開発における運用シークレットを使用しないことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-144">**Security Warning on secrets file:** A best practice is to not use production secrets in test and development.</span></span> <span data-ttu-id="0a0b9-145">テストまたは開発での運用環境のパスワードを使用すると、これらの機密情報がリークします。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-145">Using production passwords in test or development leaks those secrets.</span></span>

<a id="wj"></a>
## <a name="webjobs-console-apps"></a><span data-ttu-id="0a0b9-146">Web ジョブのコンソール アプリ</span><span class="sxs-lookup"><span data-stu-id="0a0b9-146">WebJobs console apps</span></span>

<span data-ttu-id="0a0b9-147">*App.config* 、相対パスをサポートしていませんコンソール アプリで使用されるファイルが絶対パスをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-147">The *app.config* file used by a console app doesn't support relative paths, but it does support absolute paths.</span></span> <span data-ttu-id="0a0b9-148">絶対パスを使用して、プロジェクト ディレクトリから、シークレットを移動することができます。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-148">You can use an absolute path to move your secrets out of your project directory.</span></span> <span data-ttu-id="0a0b9-149">次のマークアップ内のシークレットを示しています、 *C:\secrets\AppSettingsSecrets.config*ファイル、および非機密データを*app.config*ファイル。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-149">The following markup shows the secrets in the *C:\secrets\AppSettingsSecrets.config* file, and non sensitive data in the *app.config* file.</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample5.xml?highlight=2)]

<a id="da"></a>
## <a name="deploying-secrets-to-azure"></a><span data-ttu-id="0a0b9-150">Azure へシークレットを展開</span><span class="sxs-lookup"><span data-stu-id="0a0b9-150">Deploying secrets to Azure</span></span>

<span data-ttu-id="0a0b9-151">Web アプリを Azure にデプロイするときに、 *AppSettingsSecrets.config* (つまり対象) ファイルはデプロイされません。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-151">When you deploy your web app to Azure, the *AppSettingsSecrets.config* file won't be deployed (that's what you want).</span></span> <span data-ttu-id="0a0b9-152">移動する可能性があります、 [Azure 管理ポータル](https://azure.microsoft.com/services/management-portal/)し、そのためには、それらを手動で設定します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-152">You could go to the [Azure Management Portal](https://azure.microsoft.com/services/management-portal/) and set them manually, to do that:</span></span>

1. <span data-ttu-id="0a0b9-153">移動して[ https://portal.azure.com ](https://portal.azure.com)、し、Azure 資格情報でサインインします。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-153">Go to [https://portal.azure.com](https://portal.azure.com), and sign in with your Azure credentials.</span></span>
2. <span data-ttu-id="0a0b9-154">をクリックして**参照&gt;Web Apps**、web アプリの名前をクリックします。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-154">Click **Browse &gt; Web Apps**, then click the name of your web app.</span></span>
3. <span data-ttu-id="0a0b9-155">クリックして**すべて設定&gt;アプリケーション設定**します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-155">Click **All settings &gt; Application settings**.</span></span>

<span data-ttu-id="0a0b9-156">**アプリ設定**と**接続文字列**値で同じ設定が上書き、 *web.config*ファイル。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-156">The **app settings** and **connection string** values override the same settings in the *web.config* file.</span></span> <span data-ttu-id="0a0b9-157">この例ではでしたいないこれらの設定を Azure にデプロイでこれらのキーがいた場合は、 *web.config*ファイル、設定をポータルに表示される優先順位。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-157">In our example, we did not deploy these settings to Azure, but if these keys were in the *web.config* file, the settings shown on the portal would take precedence.</span></span>

<span data-ttu-id="0a0b9-158">従うベスト プラクティスを[DevOps ワークフロー](../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything.md)して[Azure PowerShell](https://azure.microsoft.com/documentation/articles/install-configure-powershell/) (または別のフレームワークなど[Chef](http://www.opscode.com/chef/)または[Puppet](http://puppetlabs.com/puppet/what-is-puppet)) にAzure でのこれらの値の設定を自動化します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-158">A best practice is to follow a [DevOps workflow](../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything.md) and use [Azure PowerShell](https://azure.microsoft.com/documentation/articles/install-configure-powershell/) (or another framework such as [Chef](http://www.opscode.com/chef/) or [Puppet](http://puppetlabs.com/puppet/what-is-puppet)) to automate setting these values in Azure.</span></span> <span data-ttu-id="0a0b9-159">次の PowerShell スクリプトを使用して[Export-clixml](http://www.powershellcookbook.com/recipe/PukO/securely-store-credentials-on-disk)暗号化した機密情報をディスクにエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-159">The following PowerShell script uses [Export-CliXml](http://www.powershellcookbook.com/recipe/PukO/securely-store-credentials-on-disk) to export the encrypted secrets to disk:</span></span>

[!code-powershell[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample6.ps1)]

<span data-ttu-id="0a0b9-160">'上記のスクリプトで Name' は、秘密キーの名前など '&quot;FB\_AppSecret&quot;または「[twittersecret]」。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-160">In the script above, ‘Name' is the name of the secret key, such as ‘&quot;FB\_AppSecret&quot; or "TwitterSecret".</span></span> <span data-ttu-id="0a0b9-161">お使いのブラウザーでスクリプトによって作成された".credential"ファイルを表示できます。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-161">You can view the ".credential" file created by the script in your browser.</span></span> <span data-ttu-id="0a0b9-162">次のスニペットでは、各資格情報ファイルをテストし、名前付きの web アプリのシークレットを設定します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-162">The snippet below tests each of the credential files and sets the secrets for the named web app:</span></span>

[!code-powershell[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample7.ps1)]

> [!WARNING]
> <span data-ttu-id="0a0b9-163">セキュリティ - パスワードやその他のシークレットをそのララェホの PowerShell スクリプトを使用して機密データを展開する目的の実行、PowerShell スクリプトに含めないでください。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-163">Security - Don't include passwords or other secrets in the PowerShell script, doing so defeats the purpose of using a PowerShell script to deploy sensitive data.</span></span> <span data-ttu-id="0a0b9-164">[Get-credential](https://technet.microsoft.com/library/hh849815.aspx)コマンドレットは、パスワードを取得するセキュリティで保護されたメカニズムを提供します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-164">The [Get-Credential](https://technet.microsoft.com/library/hh849815.aspx) cmdlet provides a secure mechanism to obtain a password.</span></span> <span data-ttu-id="0a0b9-165">UI プロンプトを使用して、パスワードのリークを防止できます。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-165">Using a UI prompt can prevent leaking a password.</span></span>

### <a name="deploying-db-connection-strings"></a><span data-ttu-id="0a0b9-166">DB 接続文字列の展開</span><span class="sxs-lookup"><span data-stu-id="0a0b9-166">Deploying DB connection strings</span></span>

<span data-ttu-id="0a0b9-167">DB の接続文字列は、アプリの設定を同様に処理されます。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-167">DB connection strings are handled similarly to app settings.</span></span> <span data-ttu-id="0a0b9-168">Visual Studio から web アプリをデプロイする場合、接続文字列が構成します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-168">If you deploy your web app from Visual Studio, the connection string will be configured for you.</span></span> <span data-ttu-id="0a0b9-169">これは、ポータルで確認できます。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-169">You can verify this in the portal.</span></span> <span data-ttu-id="0a0b9-170">接続文字列を設定することをお勧めの方法は、PowerShell を使用したです。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-170">The recommended way to set the connection string is with PowerShell.</span></span> <span data-ttu-id="0a0b9-171">PowerShell スクリプトの例については、web サイトとデータベースを作成し、接続文字列を設定、web サイトでダウンロード[新規 AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3)から、 [Azure スクリプト ライブラリ](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure)します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-171">For an example of a PowerShell script the creates a website and database and sets the connection string in the website, download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) from the [Azure Script library](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span></span>

<a id="not"></a>
## <a name="notes-for-php"></a><span data-ttu-id="0a0b9-172">PHP における考慮事項</span><span class="sxs-lookup"><span data-stu-id="0a0b9-172">Notes for PHP</span></span>

<span data-ttu-id="0a0b9-173">両方のキーと値のペアから**アプリ設定**と**接続文字列**任意の web アプリ (PHP) などのフレームワークを簡単に使用する開発者で、Azure App Service 環境変数に格納されますこれらの値を取得します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-173">Since the key-value pairs for both **app settings** and **connection strings** are stored in environment variables on Azure App Service, developers that use any web app frameworks (such as PHP) can easily retrieve these values.</span></span> <span data-ttu-id="0a0b9-174">Stefan Schackow を参照してください。 [Windows Azure Web サイト。アプリケーション文字列と接続文字列の動作](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/)ブログの投稿がアプリの設定と接続文字列を読み取るための PHP スニペットが表示されます。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-174">See Stefan Schackow's [Windows Azure Web Sites: How Application Strings and Connection Strings Work](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) blog post which shows a PHP snippet to read app settings and connection strings.</span></span>

## <a name="notes-for-on-premises-servers"></a><span data-ttu-id="0a0b9-175">オンプレミス サーバーにおける考慮事項</span><span class="sxs-lookup"><span data-stu-id="0a0b9-175">Notes for on-premises servers</span></span>

<span data-ttu-id="0a0b9-176">オンプレミスの web サーバーを展開する場合は、によってセキュリティで保護された機密情報が役立つことができます[構成ファイルの構成セクションを暗号化](https://msdn.microsoft.com/library/ff647398.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-176">If you are deploying to on-premises web servers, you can help secure secrets by [encrypting the configuration sections of configuration files](https://msdn.microsoft.com/library/ff647398.aspx).</span></span> <span data-ttu-id="0a0b9-177">別の方法として、同じ方法で Azure Websites の推奨を使用することができます。 構成ファイルでの開発設定を保持し、運用環境の設定の環境変数の値を使用します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-177">As an alternative, you can use the same approach recommended for Azure Websites: keep development settings in configuration files, and use environment variable values for production settings.</span></span> <span data-ttu-id="0a0b9-178">機能には、Azure Websites では、自動のアプリケーション コードを記述する必要がただし、ここでは、: 環境変数から設定を取得し、構成ファイルの設定の代わりにそれらの値を使用して、または構成ファイルの設定を使用して、ときに環境変数が見つかりませんでした。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-178">In this case, however, you have to write application code for functionality that is automatic in Azure Websites: retrieve settings from environment variables and use those values in place of configuration file settings, or use configuration file settings when environment variables are not found.</span></span>

<a id="addRes"></a>
## <a name="additional-resources"></a><span data-ttu-id="0a0b9-179">その他のリソース</span><span class="sxs-lookup"><span data-stu-id="0a0b9-179">Additional Resources</span></span>

<span data-ttu-id="0a0b9-180">接続文字列 + アプリの設定、ダウンロード、PowerShell の例については、web アプリとデータベースを作成するスクリプトを設定[新規 AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3)から、 [Azure スクリプト ライブラリ](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure)します。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-180">For an example of a PowerShell script that creates a web app + database, sets the connection string + app settings, download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) from the [Azure Script library](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span></span> 

<span data-ttu-id="0a0b9-181">Stefan Schackow を参照してください。 [Windows Azure Web サイト。アプリケーション文字列と接続文字列のしくみ](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/)</span><span class="sxs-lookup"><span data-stu-id="0a0b9-181">See Stefan Schackow's [Windows Azure Web Sites: How Application Strings and Connection Strings Work](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/)</span></span>

<span data-ttu-id="0a0b9-182">Barry Dorrans 頂いた ( [ @blowdart ](https://twitter.com/blowdart) ) と Carlos Farre レビューします。</span><span class="sxs-lookup"><span data-stu-id="0a0b9-182">Special thanks to Barry Dorrans ( [@blowdart](https://twitter.com/blowdart) ) and Carlos Farre for reviewing.</span></span>
