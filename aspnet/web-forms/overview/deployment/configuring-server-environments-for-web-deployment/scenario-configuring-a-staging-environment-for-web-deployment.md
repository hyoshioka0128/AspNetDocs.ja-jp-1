---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/scenario-configuring-a-staging-environment-for-web-deployment
title: 'シナリオ: Web デプロイのステージング環境を構成する |Microsoft Docs'
author: jrjlee
description: このトピックでは、ステージング環境の一般的な web 配置シナリオについて説明し、同様の env を設定するために完了する必要があるタスクについて説明します。
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 5a8e49b7-5317-4125-b107-7e2466b47bb3
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/scenario-configuring-a-staging-environment-for-web-deployment
msc.type: authoredcontent
ms.openlocfilehash: eaa61ca850817f8dd98955b59e94be93389bf256
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78518008"
---
# <a name="scenario-configuring-a-staging-environment-for-web-deployment"></a><span data-ttu-id="cd6ea-103">シナリオ: Web 配置用のステージング環境の構成</span><span class="sxs-lookup"><span data-stu-id="cd6ea-103">Scenario: Configuring a Staging Environment for Web Deployment</span></span>

<span data-ttu-id="cd6ea-104">[Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="cd6ea-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

<span data-ttu-id="cd6ea-105">[[Download PDF]\(PDF をダウンロード\)](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span><span class="sxs-lookup"><span data-stu-id="cd6ea-105">[Download PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span></span>

> <span data-ttu-id="cd6ea-106">このトピックでは、ステージング環境の一般的な web 配置シナリオについて説明し、同様の環境をセットアップするために完了する必要があるタスクについて説明します。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-106">This topic describes a typical web deployment scenario for a staging environment and explains the tasks you need to complete in order to set up a similar environment.</span></span>

<span data-ttu-id="cd6ea-107">多くの組織では、ステージング環境を使用して、web アプリケーションまたは web サイトの更新をプレビューしています。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-107">Lots of organizations use staging environments to preview updates to web applications or websites.</span></span> <span data-ttu-id="cd6ea-108">これにより、組織内のメンバーは、サイトが "運用" される前に新しい機能やコンテンツを探索して確認できるようになります。また、その他の場合は、運用環境に展開されます。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-108">This gives people within the organization a chance to explore and review new functionality or content before the site "goes live," or in other words is deployed to a production environment.</span></span> <span data-ttu-id="cd6ea-109">ステージング環境は、実稼働環境を可能な限り忠実にレプリケートするように設計されており、現実的なプレビューを提供します。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-109">The staging environment is designed to replicate the production environment as closely as possible, in order to provide a realistic preview.</span></span> <span data-ttu-id="cd6ea-110">通常、この種類のステージング環境には次の特性があります。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-110">This kind of staging environment typically has these characteristics:</span></span>

- <span data-ttu-id="cd6ea-111">この環境は、負荷分散された複数の web サーバーと1つ以上のデータベースサーバーで構成されます。多くの場合、フェールオーバークラスタリングとデータベースミラーリングがあります。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-111">The environment consists of multiple load-balanced web servers and one or more database servers, often with failover clustering and database mirroring.</span></span>
- <span data-ttu-id="cd6ea-112">アプリケーションは、開発チームによって手動で配置することも、チームビルドサーバーによって自動的に配置することもできます。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-112">Applications may be deployed manually by a development team or automatically by a Team Build server.</span></span>
- <span data-ttu-id="cd6ea-113">アプリケーションを展開するユーザーまたはプロセスアカウントは、ステージングサーバーに対する管理者特権を持っていない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-113">The users or process accounts that deploy applications are unlikely to have administrator privileges on the staging servers.</span></span>
- <span data-ttu-id="cd6ea-114">アプリケーションに対する変更は頻繁に配置されるため、環境は単一ステップまたは自動のデプロイをサポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-114">Changes to applications are deployed on a frequent basis, so the environment needs to support single-step or automated deployment.</span></span>

> [!NOTE]
> <span data-ttu-id="cd6ea-115">複数のサーバーにまたがるデータベースの配置をスケールアウトする方法については、このチュートリアルでは扱いません。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-115">Scaling out a database deployment across multiple servers is beyond the scope of this tutorial.</span></span> <span data-ttu-id="cd6ea-116">この領域の詳細については、 [SQL Server オンラインブック](https://technet.microsoft.com/library/ms130214.aspx)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-116">For more information on this area, please consult [SQL Server Books Online](https://technet.microsoft.com/library/ms130214.aspx).</span></span>

<span data-ttu-id="cd6ea-117">たとえば、このチュートリアルの[シナリオ](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md)では、TEAM FOUNDATION SERVER (TFS) が Contact Manager ソリューションを管理します。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-117">For example, in our [tutorial scenario](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md), Team Foundation Server (TFS) manages the Contact Manager solution.</span></span> <span data-ttu-id="cd6ea-118">TFS 管理者である渡 Walters は、開発者が必要に応じてステージング環境へのデプロイをトリガーできるビルド定義を作成しました。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-118">The TFS administrator, Rob Walters, has created a build definition that lets developers trigger a deployment to the staging environment as required.</span></span>

![](scenario-configuring-a-staging-environment-for-web-deployment/_static/image1.png)

<span data-ttu-id="cd6ea-119">ほとんどの場合、必ずしも最新のビルドをステージング環境に配置する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-119">Note that in most cases, you won't necessarily want to deploy the latest build to the staging environment.</span></span> <span data-ttu-id="cd6ea-120">代わりに、テスト環境で検証と検証を行っている特定のビルドを配置する方がはるかに多くなります。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-120">Instead, you're a lot more likely to want to deploy a specific build that has already undergone validation and verification in the test environment.</span></span>

## <a name="solution-overview"></a><span data-ttu-id="cd6ea-121">ソリューションの概要</span><span class="sxs-lookup"><span data-stu-id="cd6ea-121">Solution Overview</span></span>

<span data-ttu-id="cd6ea-122">このシナリオでは、次のような展開要件を分析して、これらの事実を推測できます。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-122">In this scenario, you can deduce these facts from an analysis of the deployment requirements:</span></span>

- <span data-ttu-id="cd6ea-123">デプロイを実行するユーザーまたはプロセスアカウントには、ステージングサーバーに対する管理者特権がないため、ステージング web サーバーは管理者以外の展開をサポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-123">The user or process account that performs the deployment won't have administrator privileges on the staging servers, so the staging web servers must support non-administrator deployment.</span></span> <span data-ttu-id="cd6ea-124">そのため、リモートエージェントではなく、Web 配置ハンドラーを使用するようにステージング web サーバーを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-124">As such, you'll need to configure the staging web servers to use the Web Deploy Handler rather than the remote agent.</span></span>
- <span data-ttu-id="cd6ea-125">ステージング環境には複数の web サーバーが含まれていますが、1回のクリックまたは自動配置をサポートする必要があるため、サーバーファームを作成するには Web Farm Framework (WFF) を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-125">The staging environment includes multiple web servers, but it needs to support one-click or automated deployment, so you'll need to use the Web Farm Framework (WFF) to create a server farm.</span></span> <span data-ttu-id="cd6ea-126">この方法を使用すると、アプリケーションを1つの web サーバー (プライマリサーバー) に配置できます。 WFF は、ステージング環境内の他のすべての web サーバー上でデプロイをレプリケートします。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-126">Using this approach, you can deploy an application to one web server (the primary server), and WFF will replicate the deployment on all the other web servers in the staging environment.</span></span>
- <span data-ttu-id="cd6ea-127">配置を実行するユーザーまたはプロセスアカウントには、データベースを作成するためのアクセス許可が必要です。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-127">The user or process account that performs the deployment must have permissions to create databases.</span></span> <span data-ttu-id="cd6ea-128">そのため、リモートアクセスと配置をサポートするようにデータベースサーバーを構成するだけでなく、データベースサーバーの**dbcreator**サーバーロールにアカウントを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-128">As such, you'll need to add the account to the **dbcreator** server role on the database server, in addition to configuring the database server to support remote access and deployment.</span></span>

<span data-ttu-id="cd6ea-129">これらのトピックでは、これらのタスクを完了するために必要なすべての情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-129">These topics provide all the information you need in order to complete these tasks:</span></span>

- <span data-ttu-id="cd6ea-130">[Web ファームフレームワークを使用してサーバーファームを作成](creating-a-server-farm-with-the-web-farm-framework.md)します。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-130">[Create a Server Farm with the Web Farm Framework](creating-a-server-farm-with-the-web-farm-framework.md).</span></span> <span data-ttu-id="cd6ea-131">このトピックでは、WFF を使用してサーバーファームを作成および構成する方法について説明します。これにより、web platform 製品とコンポーネント、構成設定、および web サイトとアプリケーションが、負荷分散された複数の web サーバー間でレプリケートされます。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-131">This topic describes how to create and configure a server farm using WFF, so that web platform products and components, configuration settings, and websites and applications are replicated across multiple load-balanced web servers.</span></span>
- <span data-ttu-id="cd6ea-132">[Web 配置公開用に Web サーバーを構成します (Web 配置ハンドラー)](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md)。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-132">[Configure a Web Server for Web Deploy Publishing (Web Deploy Handler)](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span></span> <span data-ttu-id="cd6ea-133">このトピックでは、Windows Server 2008 R2 のクリーンビルドから開始するリモートエージェントアプローチを使用した Web 配置の発行をサポートする web サーバーを構築する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-133">This topic describes how to build a web server that supports Web Deploy publishing, using the remote agent approach, starting from a clean Windows Server 2008 R2 build.</span></span>
- <span data-ttu-id="cd6ea-134">[Web 配置パブリッシング用にデータベースサーバーを構成](configuring-a-database-server-for-web-deploy-publishing.md)します。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-134">[Configure a Database Server for Web Deploy Publishing](configuring-a-database-server-for-web-deploy-publishing.md).</span></span> <span data-ttu-id="cd6ea-135">このトピックでは、SQL Server 2008 R2 の既定のインストールから開始して、リモートアクセスと配置をサポートするようにデータベースサーバーを構成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-135">This topic describes how to configure a database server to support remote access and deployment, starting from a default installation of SQL Server 2008 R2.</span></span>

## <a name="further-reading"></a><span data-ttu-id="cd6ea-136">参考資料</span><span class="sxs-lookup"><span data-stu-id="cd6ea-136">Further Reading</span></span>

<span data-ttu-id="cd6ea-137">一般的な開発者テスト環境の構成に関するガイダンスについては、「[シナリオ: Web 配置用のテスト環境の構成](scenario-configuring-a-test-environment-for-web-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-137">For guidance on configuring a typical developer test environment, see [Scenario: Configuring a Test Environment for Web Deployment](scenario-configuring-a-test-environment-for-web-deployment.md).</span></span> <span data-ttu-id="cd6ea-138">一般的な運用環境の構成に関するガイダンスについては、「[シナリオ: Web 配置用の運用環境の構成](scenario-configuring-a-production-environment-for-web-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cd6ea-138">For guidance on configuring a typical production environment, see [Scenario: Configuring a Production Environment for Web Deployment](scenario-configuring-a-production-environment-for-web-deployment.md).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="cd6ea-139">[前へ](scenario-configuring-a-test-environment-for-web-deployment.md)
> [次へ](scenario-configuring-a-production-environment-for-web-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="cd6ea-139">[Previous](scenario-configuring-a-test-environment-for-web-deployment.md)
[Next](scenario-configuring-a-production-environment-for-web-deployment.md)</span></span>
