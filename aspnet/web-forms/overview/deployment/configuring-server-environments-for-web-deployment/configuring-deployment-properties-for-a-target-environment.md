---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: ターゲット環境の配置プロパティの構成 |Microsoft Docs
author: jrjlee
description: このトピックでは、サンプルの Contact Manager ソリューションを特定のターゲット環境にデプロイするために、環境固有のプロパティを構成する方法について説明します。
ms.author: riande
ms.date: 05/04/2012
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: 9742be7d718384c1b108d5f2c0c43e8e8d4fe8a9
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78516808"
---
# <a name="configuring-deployment-properties-for-a-target-environment"></a><span data-ttu-id="ccac5-103">ターゲット環境の配置プロパティを構成する</span><span class="sxs-lookup"><span data-stu-id="ccac5-103">Configuring Deployment Properties for a Target Environment</span></span>

<span data-ttu-id="ccac5-104">[Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="ccac5-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

<span data-ttu-id="ccac5-105">[[Download PDF]\(PDF をダウンロード\)](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span><span class="sxs-lookup"><span data-stu-id="ccac5-105">[Download PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span></span>

> <span data-ttu-id="ccac5-106">このトピックでは、サンプルの Contact Manager ソリューションを特定のターゲット環境にデプロイするために、環境固有のプロパティを構成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="ccac5-106">This topic describes how to configure environment-specific properties in order to deploy the sample Contact Manager solution to a specific target environment.</span></span>

<span data-ttu-id="ccac5-107">このトピックでは、Fabrikam, Inc. という架空の企業のエンタープライズ展開要件に基づいて、一連のチュートリアルの一部を説明します。このチュートリアルシリーズでは、&#x2014; [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)ソリューション&#x2014;のサンプルソリューションを使用して、ASP.NET MVC 3 アプリケーション、Windows Communication Foundation (WCF) サービス、データベースプロジェクトなど、現実的なレベルの複雑さを持つ web アプリケーションを表します。</span><span class="sxs-lookup"><span data-stu-id="ccac5-107">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) solution&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="ccac5-108">これらのチュートリアルの中核となる配置方法は、「ビルド[プロセスについ](../web-deployment-in-the-enterprise/understanding-the-build-process.md)て」で説明されている「プロジェクトファイルの分割」の方法に基づいて&#x2014;います。この方法では、ビルドプロセスは、各配置先環境に適用されるビルド命令を含む2つのプロジェクトファイルと、環境固有のビルドおよび配置設定を含んでいます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-108">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="ccac5-109">ビルド時に、環境固有のプロジェクトファイルが環境に依存しないプロジェクトファイルにマージされ、ビルド命令の完全なセットが形成されます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-109">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="process-overview"></a><span data-ttu-id="ccac5-110">プロセスの概要</span><span class="sxs-lookup"><span data-stu-id="ccac5-110">Process Overview</span></span>

<span data-ttu-id="ccac5-111">Contact Manager ソリューションのビルドと配置に使用するプロジェクトファイルは、次の2つの物理ファイルに分割されます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-111">The project file that you'll use to build and deploy the Contact Manager solution is split into two physical files:</span></span>

- <span data-ttu-id="ccac5-112">ユニバーサルビルド設定と命令 ( *Publish*ファイル) を含む1つ。</span><span class="sxs-lookup"><span data-stu-id="ccac5-112">One that contains universal build settings and instructions (the *Publish.proj* file).</span></span>
- <span data-ttu-id="ccac5-113">1つは、環境固有のビルド設定 (*env、proj*、 *env*など) を格納するものです。</span><span class="sxs-lookup"><span data-stu-id="ccac5-113">One that contains environment-specific build settings (*Env-Dev.proj*, *Env-Stage.proj*, and so on).</span></span>

<span data-ttu-id="ccac5-114">ビルド時に、適切な環境固有のプロジェクトファイルが universal *Publish. proj*ファイルにマージされ、ビルド命令の完全なセットが形成されます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-114">At build time, the appropriate environment-specific project file is merged into the universal *Publish.proj* file to form a complete set of build instructions.</span></span> <span data-ttu-id="ccac5-115">独自の配置シナリオを記述した設定を使用して、環境固有のプロジェクトファイルを作成またはカスタマイズすることにより、特定の宛先環境への配置を構成できます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-115">You can configure deployment to specific destination environments by creating or customizing environment-specific project files with settings that describe your own deployment scenario.</span></span>

<span data-ttu-id="ccac5-116">これらの値の多くは、宛先の環境が特に&#x2014;どのように構成されているかによって決定されます。対象の web サーバーが Web Deployment Agent サービス (リモートエージェント) と Web 配置ハンドラーのどちらを使用するように構成されているかによって決まります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-116">Lots of these values are determined by how your destination environment is configured&#x2014;in particular, whether your target web server is configured to use the Web Deployment Agent Service (the remote agent) or the Web Deploy Handler.</span></span> <span data-ttu-id="ccac5-117">これらの方法の詳細と、独自の環境に適したアプローチを選択するためのガイダンスについては、「 [Web 配置に適切なアプローチを選択する](choosing-the-right-approach-to-web-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-117">For more information on these approaches, and for guidance on choosing the right approach for your own environment, see [Choosing the Right Approach to Web Deployment](choosing-the-right-approach-to-web-deployment.md).</span></span>

<span data-ttu-id="ccac5-118">[Contact Manager のシナリオ](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md)には、次の2つの環境固有のプロジェクトファイルが必要です。</span><span class="sxs-lookup"><span data-stu-id="ccac5-118">The [Contact Manager scenario](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) requires two environment-specific project files:</span></span>

- <span data-ttu-id="ccac5-119">開発者テスト環境への配置 (*Env Dev. proj*)。</span><span class="sxs-lookup"><span data-stu-id="ccac5-119">Deployment to a developer test environment (*Env-Dev.proj*).</span></span> <span data-ttu-id="ccac5-120">開発者テスト環境は、リモートエージェントを使用したリモート配置を受け入れるように構成されています。詳細については、「[シナリオ: Web 配置用のテスト環境を構成](scenario-configuring-a-test-environment-for-web-deployment.md)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-120">The developer test environment is configured to accept remote deployments using the remote agent, as described in [Scenario: Configuring a Test Environment for Web Deployment](scenario-configuring-a-test-environment-for-web-deployment.md).</span></span> <span data-ttu-id="ccac5-121">このファイルには、リモートエージェントエンドポイントアドレスと、接続文字列やサービスエンドポイントなどの場所固有の設定を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-121">This file needs to provide the remote agent endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>
- <span data-ttu-id="ccac5-122">ステージング環境への配置 (*Env-Stage. proj*)。</span><span class="sxs-lookup"><span data-stu-id="ccac5-122">Deployment to a staging environment (*Env-Stage.proj*).</span></span> <span data-ttu-id="ccac5-123">ステージング環境は、Web 配置ハンドラーを使用したリモートデプロイを受け入れるように構成されています。詳細については、「[シナリオ: Web デプロイのステージング環境の構成](scenario-configuring-a-staging-environment-for-web-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-123">The staging environment is configured to accept remote deployments using the Web Deploy Handler, as described in [Scenario: Configuring a Staging Environment for Web Deployment](scenario-configuring-a-staging-environment-for-web-deployment.md).</span></span> <span data-ttu-id="ccac5-124">このファイルには、Web 配置ハンドラエンドポイントアドレスだけでなく、接続文字列やサービスエンドポイントなどの場所固有の設定も指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-124">This file needs to provide the Web Deploy Handler endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>

<span data-ttu-id="ccac5-125">環境固有のプロジェクトファイルで構成する設定は、web パッケージ自体&#x2014;の内容には影響しないことに注意してください。パッケージの配置方法と、パッケージの抽出時に提供されるパラメーター値を制御します。</span><span class="sxs-lookup"><span data-stu-id="ccac5-125">It's important to note that the settings you configure in the environment-specific project file don't affect the contents of the web package itself&#x2014;instead, they control how the package is deployed and what parameter values are provided when the package is extracted.</span></span> <span data-ttu-id="ccac5-126">「[シナリオ: Web 配置用に運用環境を構成](scenario-configuring-a-production-environment-for-web-deployment.md)する」および「 [Web パッケージを手動でインストール](../web-deployment-in-the-enterprise/manually-installing-web-packages.md)する」の説明に従って、web パッケージを運用環境に手動でインポートする場合は、パッケージの生成時に環境固有のプロジェクトファイルで使用した設定には関係ありません。</span><span class="sxs-lookup"><span data-stu-id="ccac5-126">You're importing the web package into the production environment manually, as described in [Scenario: Configuring a Production Environment for Web Deployment](scenario-configuring-a-production-environment-for-web-deployment.md) and [Manually Installing Web Packages](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), so it doesn't matter what settings you used in the environment-specific project file when you generated the package.</span></span> <span data-ttu-id="ccac5-127">インターネットインフォメーションサービス (IIS) マネージャーでは、パッケージをインポートするときに、接続文字列やサービスエンドポイントなどのパラメーター化された値を入力するように求められます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-127">Internet Information Services (IIS) Manager will prompt you for any parameterized values, like connection strings and service endpoints, when you import the package.</span></span>

<span data-ttu-id="ccac5-128">連絡先マネージャーソリューションを独自のターゲット環境に配置するには、このファイルをカスタマイズするか、テンプレートとして使用し、独自のファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="ccac5-128">To deploy the Contact Manager solution to your own target environment, you can either customize this file or use it as a template and create your own file.</span></span>

<span data-ttu-id="ccac5-129">**Contact Manager ソリューションの環境固有の配置設定を構成するには**</span><span class="sxs-lookup"><span data-stu-id="ccac5-129">**To configure environment-specific deployment settings for the Contact Manager solution**</span></span>

1. <span data-ttu-id="ccac5-130">Visual Studio 2010 で ContactManager-WCF ソリューションを開きます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-130">Open the ContactManager-WCF solution in Visual Studio 2010.</span></span>
2. <span data-ttu-id="ccac5-131">**[ソリューションエクスプローラー]** ウィンドウで、 **Publish**フォルダーを展開し、 **EnvConfig**フォルダーを展開して、 **[Env-Dev. proj]** をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="ccac5-131">In the **Solution Explorer** window, expand the **Publish** folder, expand the **EnvConfig** folder, and then double-click **Env-Dev.proj**.</span></span>

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. <span data-ttu-id="ccac5-132">*Env*ファイル内のプロパティ値を、独自のテスト環境の正しい値に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-132">Replace the property values in the *Env-Dev.proj* file with the correct values for your own test environment.</span></span>

    > [!NOTE]
    > <span data-ttu-id="ccac5-133">これらの各プロパティの詳細については、この手順の後の表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-133">The table that follows this procedure provides more information on each of these properties.</span></span>
4. <span data-ttu-id="ccac5-134">作業内容を保存し、 *Env Dev. proj*ファイルを閉じます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-134">Save your work, and then close the *Env-Dev.proj* file.</span></span>

## <a name="choosing-the-right-deployment-properties"></a><span data-ttu-id="ccac5-135">適切に展開するためのプロパティの選択</span><span class="sxs-lookup"><span data-stu-id="ccac5-135">Choosing the Right Deployment Properties</span></span>

<span data-ttu-id="ccac5-136">次の表で*は、環境*固有のサンプルプロジェクトファイルの各プロパティの目的について説明し、指定する必要のある値についていくつかのガイダンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="ccac5-136">This table describes the purpose of each property in the sample environment-specific project file, *Env-Dev.proj*, and provides some guidance on the values you should provide.</span></span>

|                                                        <span data-ttu-id="ccac5-137">プロパティ名</span><span class="sxs-lookup"><span data-stu-id="ccac5-137">Property Name</span></span>                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="ccac5-138">詳細</span><span class="sxs-lookup"><span data-stu-id="ccac5-138">Details</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              <span data-ttu-id="ccac5-139"><strong>Msdeploycomputername</strong>対象の web サーバーまたはサービスエンドポイントの名前。</span><span class="sxs-lookup"><span data-stu-id="ccac5-139"><strong>MSDeployComputerName</strong> The name of the destination web server or service endpoint.</span></span>               |                                                                                                                                                                                                                                              <span data-ttu-id="ccac5-140">対象の web サーバー上のリモートエージェントサービスにデプロイする場合は、ターゲットコンピューター名 (たとえば、 <strong>TESTWEB1</strong>または<strong>TESTWEB1.fabrikam.net</strong>) を指定するか、リモートエージェントエンドポイントを指定できます (たとえば、`http://TESTWEB1/MSDEPLOYAGENTSERVICE`)。</span><span class="sxs-lookup"><span data-stu-id="ccac5-140">If you're deploying to the remote agent service on the destination web server, you can specify the target computer name (for example, <strong>TESTWEB1</strong> or <strong>TESTWEB1.fabrikam.net</strong>), or you can specify the remote agent endpoint (for example, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`).</span></span> <span data-ttu-id="ccac5-141">各ケースでは、配置は同じように動作します。</span><span class="sxs-lookup"><span data-stu-id="ccac5-141">The deployment works the same way in each case.</span></span> <span data-ttu-id="ccac5-142">送信先 Web サーバーの Web 配置ハンドラーに配置する場合は、サービスエンドポイントを指定し、IIS web サイトの名前をクエリ文字列パラメーターとして含める必要があります (`https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`など)。</span><span class="sxs-lookup"><span data-stu-id="ccac5-142">If you're deploying to the Web Deploy Handler on the destination web server, you should specify the service endpoint and include the name of the IIS website as a query string parameter (for example, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).</span></span>                                                                                                                                                                                                                                              |
|         <span data-ttu-id="ccac5-143"><strong>Msdeployauth</strong>Web 配置がリモートコンピューターに対して認証を行うために使用するメソッド。</span><span class="sxs-lookup"><span data-stu-id="ccac5-143"><strong>MSDeployAuth</strong> The method that Web Deploy should use to authenticate to the remote computer.</span></span>          |                                                                                                                                                                                                                          <span data-ttu-id="ccac5-144">これは<strong>NTLM</strong>または<strong>Basic</strong>に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-144">This should be set to <strong>NTLM</strong> or <strong>Basic</strong>.</span></span> <span data-ttu-id="ccac5-145">通常、リモートエージェントサービスに配置している場合は<strong>NTLM</strong>を使用し、Web 配置ハンドラーに配置する場合は<strong>Basic</strong>を使用します。</span><span class="sxs-lookup"><span data-stu-id="ccac5-145">Typically, you'll use <strong>NTLM</strong> if you're deploying to the remote agent service and <strong>Basic</strong> if you're deploying to the Web Deploy Handler.</span></span> <span data-ttu-id="ccac5-146">基本認証を使用する場合は、展開を実行するために IIS Web 配置ツール (Web 配置) が偽装する必要があるユーザー名とパスワードも指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-146">If you use basic authentication, you also need to specify the user name and password that the IIS Web Deployment Tool (Web Deploy) should impersonate in order to perform the deployment.</span></span> <span data-ttu-id="ccac5-147">この例では、これらの値は、 <strong>Msdeployusername</strong>プロパティと<strong>MSDeployPassword</strong>プロパティを通じて提供されます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-147">In this example, these values are provided through the <strong>MSDeployUsername</strong> and <strong>MSDeployPassword</strong> properties.</span></span> <span data-ttu-id="ccac5-148">NTLM 認証を使用する場合は、これらのプロパティを省略するか、空白のままにしておくことができます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-148">If you use NTLM authentication, you can omit these properties or leave them blank.</span></span>                                                                                                                                                                                                                          |
| <span data-ttu-id="ccac5-149"><strong>Msdeployusername</strong>基本認証を使用する場合、Web 配置はリモートコンピューターでこのアカウントを使用します。</span><span class="sxs-lookup"><span data-stu-id="ccac5-149"><strong>MSDeployUsername</strong> If you use basic authentication, Web Deploy will use this account on the remote computer.</span></span>  |                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="ccac5-150">これは、<em>ドメイン</em>\*username \* (たとえば、 <strong>FABRIKAM\matt</strong>) の形式で指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-150">This should take the form <em>DOMAIN</em>\*username\* (for example, <strong>FABRIKAM\matt</strong>).</span></span> <span data-ttu-id="ccac5-151">この値は、基本認証を指定した場合にのみ使用されます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-151">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="ccac5-152">NTLM 認証を使用する場合は、プロパティを省略できます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-152">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="ccac5-153">値を指定した場合は無視されます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-153">If a value is supplied, it will be ignored.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="ccac5-154"><strong>MSDeployPassword</strong>基本認証を使用する場合、Web 配置はリモートコンピューターでこのパスワードを使用します。</span><span class="sxs-lookup"><span data-stu-id="ccac5-154"><strong>MSDeployPassword</strong> If you use basic authentication, Web Deploy will use this password on the remote computer.</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="ccac5-155">これは、 <strong>Msdeployusername</strong>プロパティで指定したユーザーアカウントのパスワードです。</span><span class="sxs-lookup"><span data-stu-id="ccac5-155">This is the password for the user account you specified in the <strong>MSDeployUsername</strong> property.</span></span> <span data-ttu-id="ccac5-156">この値は、基本認証を指定した場合にのみ使用されます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-156">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="ccac5-157">NTLM 認証を使用する場合は、プロパティを省略できます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-157">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="ccac5-158">値を指定した場合は無視されます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-158">If a value is supplied, it will be ignored.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     <span data-ttu-id="ccac5-159"><strong>ContactManagerIisPath</strong>Contact Manager MVC アプリケーションをデプロイする IIS パス。</span><span class="sxs-lookup"><span data-stu-id="ccac5-159"><strong>ContactManagerIisPath</strong> The IIS path on which you want to deploy the Contact Manager MVC application.</span></span>     |                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="ccac5-160">このパスは、IIS マネージャーに表示される [<em>iis web サイト名</em>]/[<em>web</em><em>アプリケーション名</em>] の形式で指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-160">This should be the path as it appears in IIS Manager, in the form [<em>IIS website name</em>]/[<em>web</em><em>application name</em>].</span></span> <span data-ttu-id="ccac5-161">アプリケーションを配置する前に、IIS web サイトが存在する必要があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-161">Remember that the IIS website needs to exist before you deploy your application.</span></span> <span data-ttu-id="ccac5-162">たとえば、DemoSite という名前の IIS web サイトを作成した場合は、MVC アプリケーションの IIS パスを DemoSite/ContactManager として指定できます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-162">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the MVC application as DemoSite/ContactManager.</span></span>                                                                                                                                                                                                                                                                                                                                                                        |
|   <span data-ttu-id="ccac5-163"><strong>ContactManagerServiceIisPath</strong>Contact Manager WCF サービスをデプロイする IIS パス。</span><span class="sxs-lookup"><span data-stu-id="ccac5-163"><strong>ContactManagerServiceIisPath</strong> The IIS path on which you want to deploy the Contact Manager WCF service.</span></span>    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="ccac5-164">たとえば、DemoSite という名前の IIS web サイトを作成した場合は、WCF サービスの IIS パスを<strong>demosite/ContactManagerService</strong>として指定できます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-164">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the WCF service as <strong>DemoSite/ContactManagerService</strong>.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                  <span data-ttu-id="ccac5-165"><strong>Contactmanagertargeturl</strong>WCF サービスに到達できる URL。</span><span class="sxs-lookup"><span data-stu-id="ccac5-165"><strong>ContactManagerTargetUrl</strong> The URL at which the WCF service can be reached.</span></span>                   |                                                                                                                                                     <span data-ttu-id="ccac5-166">これは、[<em>IIS web サイトのルート URL</em>]/[<em>サービスアプリケーション名</em>]/[<em>サービスエンドポイント</em>] の形式になります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-166">This will take the form [<em>IIS website root URL</em>]/[<em>service application name</em>]/[<em>service endpoint</em>].</span></span> <span data-ttu-id="ccac5-167">たとえば、ポート85で IIS web サイトを作成した場合、URL の形式は `http://localhost:85/ContactManagerService/ContactService.svc`になります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-167">For example, if you've created an IIS website on port 85, the URL would take the form `http://localhost:85/ContactManagerService/ContactService.svc`.</span></span> <span data-ttu-id="ccac5-168">MVC アプリケーションと WCF サービスは同じサーバーにデプロイされていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-168">Remember that the MVC application and the WCF service are deployed to the same server.</span></span> <span data-ttu-id="ccac5-169">このため、この URL は、インストールされているコンピューターからのみアクセスされます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-169">As a result, this URL is only ever accessed from the machine on which it's installed.</span></span> <span data-ttu-id="ccac5-170">このため、URL では localhost または IP アドレスを使用することをお勧めします。コンピューター名やホストヘッダーではなく、IP アドレスを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ccac5-170">Because of this, it's better to use localhost or the IP address, rather than the machine name or a host header, in the URL.</span></span> <span data-ttu-id="ccac5-171">コンピューター名またはホストヘッダーを使用する場合、IIS の[ループバックチェック](https://go.microsoft.com/?linkid=9805131)のセキュリティ機能によって URL がブロックされ、 <strong>HTTP 401.1-未承認</strong>のエラーが返されることがあります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-171">If you use the machine name or a host header, the [loopback check](https://go.microsoft.com/?linkid=9805131) security feature in IIS may block the URL and return an <strong>HTTP 401.1 - Unauthorized</strong> error.</span></span>                                                                                                                                                     |
|                  <span data-ttu-id="ccac5-172"><strong>CmDatabaseConnectionString</strong>データベースサーバーの接続文字列です。</span><span class="sxs-lookup"><span data-stu-id="ccac5-172"><strong>CmDatabaseConnectionString</strong> The connection string for the database server.</span></span>                  | <span data-ttu-id="ccac5-173">接続文字列は、VSDBCMD がデータベースサーバーへの接続に使用する資格情報と、データベースを作成するために使用する資格情報、およびデータベースサーバーへの接続とデータベースとの対話に web サーバーアプリケーションプールが使用する資格情報の両方を決定します。</span><span class="sxs-lookup"><span data-stu-id="ccac5-173">The connection string determines both the credentials that VSDBCMD will use to contact the database server and create the database and the credentials that the web server application pool will use to contact the database server and interact with the database.</span></span> <span data-ttu-id="ccac5-174">基本的に、ここでは2つの選択肢があります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-174">Essentially you have two choices here.</span></span> <span data-ttu-id="ccac5-175"><strong>Integrated security = true</strong>を指定できます。この場合、統合 Windows 認証が使用されます。 <strong>DATA Source = TESTDB1; integrated security = true</strong>の場合、VSDBCMD 実行可能ファイルを実行するユーザーの資格情報を使用してデータベースが作成され、アプリケーションは web サーバーコンピューターアカウントの id を使用してデータベースにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="ccac5-175">You can specify <strong>Integrated Security=true</strong>, in which case integrated Windows authentication is used: <strong>Data Source=TESTDB1;Integrated Security=true</strong> In this case, the database will be created using the credentials of the user who runs the VSDBCMD executable, and the application will access the database using the identity of the web server machine account.</span></span> <span data-ttu-id="ccac5-176">または、SQL Server アカウントのユーザー名とパスワードを指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-176">Alternatively, you can specify the user name and password of a SQL Server account.</span></span> <span data-ttu-id="ccac5-177">この場合、データベースを作成するための VSDBCMD と、データベースとの対話のためのアプリケーションプール ( <strong>Data Source = TESTDB1;) の両方で、SQL Server の資格情報が使用されます。ユーザー Id = ASqlUser;Password = Pa $ $w 0rd</strong>このトピックのチュートリアルでは、統合 Windows 認証を使用することを前提としています。</span><span class="sxs-lookup"><span data-stu-id="ccac5-177">In this case, the SQL Server credentials are used both by VSDBCMD to create the database and by the application pool to interact with the database: <strong>Data Source=TESTDB1;User Id=ASqlUser; Password=Pa$$w0rd</strong> The walkthroughs in this topic assume that you'll use integrated Windows authentication.</span></span> |
|        <span data-ttu-id="ccac5-178"><strong>Cmtargetdatabase</strong>データベースサーバーに作成するデータベースの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="ccac5-178"><strong>CmTargetDatabase</strong> The name you want to give the database you'll create on the database server.</span></span>        |                                                                                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="ccac5-179">ここで指定する値は、パラメーターとして VSDBCMD コマンドに追加されます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-179">The value you provide here is added to the VSDBCMD command as a parameter.</span></span> <span data-ttu-id="ccac5-180">また、web サーバー上のアプリケーションプールがデータベースとの対話に使用できる完全な接続文字列を作成するためにも使用されます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-180">It's also used to build a full connection string that the application pool on the web server can use to interact with the database.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

<span data-ttu-id="ccac5-181">これらの例は、特定の展開シナリオでこれらのプロパティを構成する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="ccac5-181">These examples show how you might configure these properties for specific deployment scenarios.</span></span>

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a><span data-ttu-id="ccac5-182">例 1&#x2014;リモートエージェントサービスへの展開</span><span class="sxs-lookup"><span data-stu-id="ccac5-182">Example 1&#x2014;Deployment to the Remote Agent Service</span></span>

<span data-ttu-id="ccac5-183">次の点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-183">In this example:</span></span>

- <span data-ttu-id="ccac5-184">TESTWEB1 のリモートエージェントサービスに配置しています。</span><span class="sxs-lookup"><span data-stu-id="ccac5-184">You're deploying to the remote agent service on TESTWEB1.</span></span>
- <span data-ttu-id="ccac5-185">NTLM 認証を使用する Web 配置を指示しています。</span><span class="sxs-lookup"><span data-stu-id="ccac5-185">You're instructing Web Deploy to use NTLM authentication.</span></span> <span data-ttu-id="ccac5-186">Microsoft Build Engine (MSBuild) の呼び出しに使用した資格情報を使用して Web 配置が実行されます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-186">Web Deploy will run using the credentials you used to invoke the Microsoft Build Engine (MSBuild).</span></span>
- <span data-ttu-id="ccac5-187">統合認証を使用して、 **Contactmanager**データベースを TESTDB1 にデプロイしています。</span><span class="sxs-lookup"><span data-stu-id="ccac5-187">You're using integrated authentication to deploy the **ContactManager** database to TESTDB1.</span></span> <span data-ttu-id="ccac5-188">データベースは、MSBuild を呼び出すために使用した資格情報を使用してデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-188">The database will be deployed using the credentials you used to invoke MSBuild.</span></span>

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]

### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a><span data-ttu-id="ccac5-189">例 2&#x2014;Web 配置ハンドラエンドポイントへの配置</span><span class="sxs-lookup"><span data-stu-id="ccac5-189">Example 2&#x2014;Deployment to the Web Deploy Handler Endpoint</span></span>

<span data-ttu-id="ccac5-190">次の点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-190">In this example:</span></span>

- <span data-ttu-id="ccac5-191">STAGEWEB1 の Web 配置 Handler サービスエンドポイントに配置しています。</span><span class="sxs-lookup"><span data-stu-id="ccac5-191">You're deploying to the Web Deploy Handler service endpoint on STAGEWEB1.</span></span>
- <span data-ttu-id="ccac5-192">基本認証を使用する Web 配置を指示しています。</span><span class="sxs-lookup"><span data-stu-id="ccac5-192">You're instructing Web Deploy to use basic authentication.</span></span>
- <span data-ttu-id="ccac5-193">リモートコンピューター上の FABRIKAM\stagingdeployer アカウントを偽装する Web 配置を指定しています。</span><span class="sxs-lookup"><span data-stu-id="ccac5-193">You're specifying that Web Deploy should impersonate the FABRIKAM\stagingdeployer account on the remote computer.</span></span>
- <span data-ttu-id="ccac5-194">SQL Server 認証を使用して、 **Contactmanager**データベースを STAGEDB1 にデプロイしています。</span><span class="sxs-lookup"><span data-stu-id="ccac5-194">You're using SQL Server authentication to deploy the **ContactManager** database to STAGEDB1.</span></span>

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]

## <a name="conclusion"></a><span data-ttu-id="ccac5-195">まとめ</span><span class="sxs-lookup"><span data-stu-id="ccac5-195">Conclusion</span></span>

<span data-ttu-id="ccac5-196">この時点で、プロジェクトファイルは、Contact Manager ソリューションをビルドして1つ以上の送信先環境に配置するように完全に構成されています。</span><span class="sxs-lookup"><span data-stu-id="ccac5-196">At this point, your project files are fully configured to build and deploy the Contact Manager solution to one or more destination environments.</span></span>

<span data-ttu-id="ccac5-197">このようなプロジェクトファイルを単一ステップの反復可能なデプロイプロセスの一部として使用するには、MSBuild を使用して*Publish*ファイルを実行し、環境固有のプロジェクトファイルの場所をパラメーターとして渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="ccac5-197">To use these project files as part of a single-step, repeatable deployment process, you need to execute the *Publish.proj* file using MSBuild and pass in the location of the environment-specific project file as a parameter.</span></span> <span data-ttu-id="ccac5-198">これは、さまざまな方法で行うことができます。</span><span class="sxs-lookup"><span data-stu-id="ccac5-198">You can do this in various ways:</span></span>

- <span data-ttu-id="ccac5-199">MSBuild の概要とカスタムプロジェクトファイルの概要については、「[プロジェクトファイルについ](../web-deployment-in-the-enterprise/understanding-the-project-file.md)て」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-199">For an overview of MSBuild and an introduction to custom project files, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="ccac5-200">カスタムプロジェクトファイルを実行する MSBuild コマンドを作成する方法の詳細については、「 [Web パッケージの配置](../web-deployment-in-the-enterprise/deploying-web-packages.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-200">For information on how to formulate an MSBuild command that executes your custom project files, see [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>
- <span data-ttu-id="ccac5-201">単一ステップの反復可能なデプロイのために MSBuild コマンドをコマンドファイルに組み込む方法については、「[配置コマンドファイルの作成と実行](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-201">For information on how to incorporate your MSBuild commands into a command file for single-step, repeatable deployments, see [Creating and Running a Deployment Command File](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).</span></span>
- <span data-ttu-id="ccac5-202">チームビルドからカスタムプロジェクトファイルを実行する方法については、「[配置をサポートするビルド定義の作成](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ccac5-202">For information on how to execute your custom project files from Team Build, see [Creating a Build Definition that Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ccac5-203">[[戻る]](creating-a-server-farm-with-the-web-farm-framework.md)</span><span class="sxs-lookup"><span data-stu-id="ccac5-203">[Previous](creating-a-server-farm-with-the-web-farm-framework.md)</span></span>
