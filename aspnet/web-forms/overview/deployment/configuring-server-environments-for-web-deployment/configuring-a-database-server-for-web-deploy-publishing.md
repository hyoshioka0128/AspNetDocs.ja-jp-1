---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-a-database-server-for-web-deploy-publishing
title: Web 配置 Publishing | のデータベースサーバーの構成Microsoft Docs
author: jrjlee
description: このトピックでは、web 配置と発行をサポートするように SQL Server 2008 R2 データベースサーバーを構成する方法について説明します。 このトピックで説明するタスクは次のとおりです。
ms.author: riande
ms.date: 05/04/2012
ms.assetid: e7c447f9-eddf-4bbe-9f18-3326d965d093
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-a-database-server-for-web-deploy-publishing
msc.type: authoredcontent
ms.openlocfilehash: ade3c1ba1c470092f512436f39b8831458408c2c
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78515242"
---
# <a name="configuring-a-database-server-for-web-deploy-publishing"></a><span data-ttu-id="bcc09-104">Web 配置発行のデータベース サーバーを構成する</span><span class="sxs-lookup"><span data-stu-id="bcc09-104">Configuring a Database Server for Web Deploy Publishing</span></span>

<span data-ttu-id="bcc09-105">[Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="bcc09-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

<span data-ttu-id="bcc09-106">[[Download PDF]\(PDF をダウンロード\)](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span><span class="sxs-lookup"><span data-stu-id="bcc09-106">[Download PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span></span>

> <span data-ttu-id="bcc09-107">このトピックでは、web 配置と発行をサポートするように SQL Server 2008 R2 データベースサーバーを構成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-107">This topic describes how to configure a SQL Server 2008 R2 database server to support web deployment and publishing.</span></span>
> 
> <span data-ttu-id="bcc09-108">このトピックで説明する&#x2014;タスクは、IIS Web 配置ツール (Web 配置) リモートエージェントサービスを使用するように web サーバーが構成されているかどうか、Web 配置ハンドラー、またはオフライン配置であるか、またはアプリケーションが1つの web サーバーまたはサーバーファームで実行されているかには関係ありません。</span><span class="sxs-lookup"><span data-stu-id="bcc09-108">The tasks described in this topic are common to every deployment scenario&#x2014;it doesn't matter whether your web servers are configured to use the IIS Web Deployment Tool (Web Deploy) Remote Agent Service, the Web Deploy Handler, or offline deployment or your application is running on a single web server or a server farm.</span></span> <span data-ttu-id="bcc09-109">データベースを配置する方法は、セキュリティ要件やその他の考慮事項によって変化する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-109">The way you deploy the database may change according to security requirements and other considerations.</span></span> <span data-ttu-id="bcc09-110">たとえば、サンプルデータを使用して、または使用せずにデータベースを配置する場合、ユーザーロールマッピングを展開するか、展開後に手動で構成することができます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-110">For example, you might deploy the database with or without sample data, and you might deploy user role mappings or configure them manually after deployment.</span></span> <span data-ttu-id="bcc09-111">ただし、データベースサーバーを構成する方法は変わりません。</span><span class="sxs-lookup"><span data-stu-id="bcc09-111">However, the way you configure the database server remains the same.</span></span>

<span data-ttu-id="bcc09-112">Web 配置をサポートするようにデータベースサーバーを構成するために、追加の製品やツールをインストールする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="bcc09-112">You don't have to install any additional products or tools to configuring a database server to support web deployment.</span></span> <span data-ttu-id="bcc09-113">データベースサーバーと web サーバーが異なるコンピューター上で実行されている場合は、次のことを行うだけで済みます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-113">Assuming that your database server and your web server run on different machines, you simply need to:</span></span>

- <span data-ttu-id="bcc09-114">SQL Server に TCP/IP を使用した通信を許可します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-114">Permit SQL Server to communicate using TCP/IP.</span></span>
- <span data-ttu-id="bcc09-115">ファイアウォール経由のトラフィックの SQL Server を許可します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-115">Allow SQL Server traffic through any firewalls.</span></span>
- <span data-ttu-id="bcc09-116">Web サーバーコンピューターアカウントに SQL Server ログインを指定します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-116">Give the web server machine account a SQL Server login.</span></span>
- <span data-ttu-id="bcc09-117">コンピューターアカウントのログインを必要なデータベースロールにマップします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-117">Map the machine account login to any required database roles.</span></span>
- <span data-ttu-id="bcc09-118">デプロイを実行するアカウントに、SQL Server ログインとデータベース作成者のアクセス許可を付与します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-118">Give the account that will run the deployment a SQL Server login and database creator permissions.</span></span>
- <span data-ttu-id="bcc09-119">繰り返しデプロイをサポートするには、デプロイアカウントのログインを**db\_所有者**データベースロールにマップします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-119">To support repeat deployments, map the deployment account login to the **db\_owner** database role.</span></span>

<span data-ttu-id="bcc09-120">このトピックでは、これらの各手順を実行する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-120">This topic will show you how to perform each of these procedures.</span></span> <span data-ttu-id="bcc09-121">このトピックのタスクとチュートリアルでは、Windows Server 2008 R2 で実行されている SQL Server 2008 R2 の既定のインスタンスを使用して作業を開始していることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="bcc09-121">The tasks and walkthroughs in this topic assume that you're starting with a default instance of SQL Server 2008 R2 running on Windows Server 2008 R2.</span></span> <span data-ttu-id="bcc09-122">続行する前に、次のことを確認してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-122">Before you continue, ensure that:</span></span>

- <span data-ttu-id="bcc09-123">Windows Server 2008 R2 Service Pack 1 および利用可能なすべての更新プログラムがインストールされています。</span><span class="sxs-lookup"><span data-stu-id="bcc09-123">Windows Server 2008 R2 Service Pack 1 and all available updates are installed.</span></span>
- <span data-ttu-id="bcc09-124">サーバーはドメインに参加しています。</span><span class="sxs-lookup"><span data-stu-id="bcc09-124">The server is domain-joined.</span></span>
- <span data-ttu-id="bcc09-125">サーバーには静的 IP アドレスがあります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-125">The server has a static IP address.</span></span>
- <span data-ttu-id="bcc09-126">SQL Server 2008 R2 Service Pack 1 および利用可能なすべての更新プログラムがインストールされていること。</span><span class="sxs-lookup"><span data-stu-id="bcc09-126">SQL Server 2008 R2 Service Pack 1 and all available updates are installed.</span></span>

<span data-ttu-id="bcc09-127">SQL Server インスタンスには、**データベースエンジンサービス**の役割のみを含める必要があります。これは、任意の SQL Server インストールに自動的に含まれます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-127">The SQL Server instance only needs to include the **Database Engine Services** role, which is included automatically in any SQL Server installation.</span></span> <span data-ttu-id="bcc09-128">ただし、構成とメンテナンスを容易にするために、[**管理ツール-基本]** と [**管理ツール-完全]** のサーバーロールを含めることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-128">However, for ease of configuration and maintenance, we recommend that you include the **Management Tools – Basic** and **Management Tools – Complete** server roles.</span></span>

> [!NOTE]
> <span data-ttu-id="bcc09-129">コンピューターをドメインに参加させる方法の詳細については、「[コンピューターをドメインに参加](https://technet.microsoft.com/library/cc725618(v=WS.10).aspx)させ、ログオンする」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-129">For more information on joining computers to a domain, see [Joining Computers to the Domain and Logging On](https://technet.microsoft.com/library/cc725618(v=WS.10).aspx).</span></span> <span data-ttu-id="bcc09-130">静的 IP アドレスの構成の詳細については、「[静的 Ip アドレスの構成](https://technet.microsoft.com/library/cc754203(v=ws.10).aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-130">For more information on configuring static IP addresses, see [Configure a Static IP Address](https://technet.microsoft.com/library/cc754203(v=ws.10).aspx).</span></span> <span data-ttu-id="bcc09-131">SQL Server のインストールの詳細については、「 [SQL Server 2008 R2 のインストール](https://technet.microsoft.com/library/bb500395.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-131">For more information on installing SQL Server, see [Installing SQL Server 2008 R2](https://technet.microsoft.com/library/bb500395.aspx).</span></span>

## <a name="enable-remote-access-to-sql-server"></a><span data-ttu-id="bcc09-132">SQL Server へのリモートアクセスを有効にする</span><span class="sxs-lookup"><span data-stu-id="bcc09-132">Enable Remote Access to SQL Server</span></span>

<span data-ttu-id="bcc09-133">SQL Server は、TCP/IP を使用してリモートコンピューターと通信します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-133">SQL Server uses TCP/IP to communicate with remote computers.</span></span> <span data-ttu-id="bcc09-134">データベースサーバーと web サーバーが異なるコンピューター上にある場合は、次のことを行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-134">If your database server and your web server are on different machines, you need to:</span></span>

- <span data-ttu-id="bcc09-135">TCP/IP 経由の通信を許可するように SQL Server ネットワーク設定を構成します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-135">Configure SQL Server networking settings to allow communication over TCP/IP.</span></span>
- <span data-ttu-id="bcc09-136">SQL Server インスタンスが使用するポートで TCP トラフィック (場合によってはユーザーデータグラムプロトコル (UDP) トラフィック) を許可するように、ハードウェアまたはソフトウェアのファイアウォールを構成します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-136">Configure any hardware or software firewalls to allow TCP traffic (and in some cases User Datagram Protocol (UDP) traffic) on the ports that the SQL Server instance uses.</span></span>

<span data-ttu-id="bcc09-137">SQL Server が TCP/IP 経由で通信できるようにするには、SQL Server 構成マネージャーを使用して、SQL Server インスタンスのネットワーク構成を変更します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-137">To enable SQL Server to communicate over TCP/IP, use SQL Server Configuration Manager to change the network configuration for your SQL Server instance.</span></span>

<span data-ttu-id="bcc09-138">**TCP/IP を使用して SQL Server が通信できるようにするには**</span><span class="sxs-lookup"><span data-stu-id="bcc09-138">**To enable SQL Server to communicate using TCP/IP**</span></span>

1. <span data-ttu-id="bcc09-139">**[スタート]** ボタンをクリックし、 **[すべてのプログラム]** をポイントし、 **[Microsoft SQL Server 2008 R2]** をクリックし、 **[構成ツール]** をクリックして、 **[SQL Server 構成マネージャー]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-139">On the **Start** menu, point to **All Programs**, click **Microsoft SQL Server 2008 R2**, click **Configuration Tools**, and then click **SQL Server Configuration Manager**.</span></span>
2. <span data-ttu-id="bcc09-140">ツリービューウィンドウで、 **[SQL Server ネットワークの構成]** を展開し、 **[MSSQLSERVER のプロトコル]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-140">In the tree view pane, expand **SQL Server Network Configuration**, and then click **Protocols for MSSQLSERVER**.</span></span>

   > [!NOTE]
   > <span data-ttu-id="bcc09-141">SQL Server の複数のインスタンスをインストールした場合は、各インスタンスの<em>[インスタンス名]</em>項目<strong>のプロトコル</strong>が表示されます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-141">If you have installed multiple instances of SQL Server, you'll see a <strong>Protocols for</strong><em>[instance name]</em> item for each instance.</span></span> <span data-ttu-id="bcc09-142">インスタンスごとにネットワーク設定を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-142">You need to configure network settings on an instance-by-instance basis.</span></span>
3. <span data-ttu-id="bcc09-143">詳細ペインで、 **[tcp/ip]** 行を右クリックし、 **[有効]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-143">In the details pane, right-click the **TCP/IP** row, and then click **Enable**.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image1.png)
4. <span data-ttu-id="bcc09-144">**[警告]** ダイアログボックスで、[ **OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-144">In the **Warning** dialog box, click **OK**.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image2.png)
5. <span data-ttu-id="bcc09-145">新しいネットワーク構成を有効にするには、MSSQLSERVER サービスを再起動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-145">You need to restart the MSSQLSERVER service before your new network configuration will take effect.</span></span> <span data-ttu-id="bcc09-146">これは、コマンドプロンプト、サービスコンソール、または SQL Server Management Studio で行うことができます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-146">You can do that at a command prompt, from the Services console, or from SQL Server Management Studio.</span></span> <span data-ttu-id="bcc09-147">この手順では、SQL Server Management Studio を使用します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-147">In this procedure, you'll use SQL Server Management Studio.</span></span>
6. <span data-ttu-id="bcc09-148">SQL Server 構成マネージャーを閉じます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-148">Close SQL Server Configuration Manager.</span></span>
7. <span data-ttu-id="bcc09-149">**[スタート]** ボタンをクリックし、 **[すべてのプログラム]** をポイントし、 **[Microsoft SQL Server 2008 R2]** をクリックして、 **[SQL Server Management Studio]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-149">On the **Start** menu, point to **All Programs**, click **Microsoft SQL Server 2008 R2**, and then click **SQL Server Management Studio**.</span></span>
8. <span data-ttu-id="bcc09-150">**[サーバーへの接続]** ダイアログボックスの **[サーバー名]** ボックスに、データベースサーバーの名前を入力し、 **[接続]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-150">In the **Connect to Server** dialog box, in the **Server name** box, type the name of the database server, and then click **Connect**.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image3.png)
9. <span data-ttu-id="bcc09-151">**オブジェクトエクスプローラー**ペインで、親サーバーノード ( **TESTDB1**など) を右クリックし、 **[再起動]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-151">In the **Object Explorer** pane, right-click the parent server node (for example, **TESTDB1**), and then click **Restart**.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image4.png)
10. <span data-ttu-id="bcc09-152">**[Microsoft SQL Server Management Studio]** ダイアログボックスで、 **[はい]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-152">In the **Microsoft SQL Server Management Studio** dialog box, click **Yes**.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image5.png)
11. <span data-ttu-id="bcc09-153">サービスが再起動したら、SQL Server Management Studio を閉じます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-153">When the service has restarted, close SQL Server Management Studio.</span></span>

<span data-ttu-id="bcc09-154">ファイアウォールを通過する SQL Server トラフィックを許可するには、まず、SQL Server インスタンスで使用されているポートを把握しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-154">To allow SQL Server traffic through a firewall, you first need to know which ports your SQL Server instance is using.</span></span> <span data-ttu-id="bcc09-155">これは、SQL Server インスタンスの作成方法と構成方法によって異なります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-155">This will depend on how the SQL Server instance was created and configured:</span></span>

- <span data-ttu-id="bcc09-156">SQL Server の*既定のインスタンス*は、TCP ポート1433で要求 (および応答) をリッスンします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-156">A *default instance* of SQL Server listens for (and responds to) requests on TCP port 1433.</span></span>
- <span data-ttu-id="bcc09-157">SQL Server の*名前付きインスタンス*は、動的に割り当てられた TCP ポートで要求をリッスンし、その要求に応答します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-157">A *named instance* of SQL Server listens for (and responds to) requests on a dynamically assigned TCP port.</span></span>
- <span data-ttu-id="bcc09-158">SQL Server Browser サービスが有効になっている場合、クライアントは、UDP ポート1434でサービスを照会して、特定の SQL Server インスタンスに使用する TCP ポートを調べることができます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-158">If the SQL Server Browser service is enabled, clients can query the service on UDP port 1434 to find out which TCP port to use for a particular SQL Server instance.</span></span> <span data-ttu-id="bcc09-159">ただし、多くの場合、このサービスはセキュリティ上の理由で無効になっています。</span><span class="sxs-lookup"><span data-stu-id="bcc09-159">However, this service is often disabled for security reasons.</span></span>

<span data-ttu-id="bcc09-160">SQL Server の既定のインスタンスを使用していると仮定した場合は、トラフィックを許可するようにファイアウォールを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-160">Assuming that you're using a default instance of SQL Server, you need to configure your firewall to allow traffic.</span></span>

| <span data-ttu-id="bcc09-161">Direction</span><span class="sxs-lookup"><span data-stu-id="bcc09-161">Direction</span></span> | <span data-ttu-id="bcc09-162">ポートから</span><span class="sxs-lookup"><span data-stu-id="bcc09-162">From Port</span></span> | <span data-ttu-id="bcc09-163">ポートへの</span><span class="sxs-lookup"><span data-stu-id="bcc09-163">To Port</span></span> | <span data-ttu-id="bcc09-164">ポートの種類</span><span class="sxs-lookup"><span data-stu-id="bcc09-164">Port Type</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="bcc09-165">受信</span><span class="sxs-lookup"><span data-stu-id="bcc09-165">Inbound</span></span> | <span data-ttu-id="bcc09-166">Any</span><span class="sxs-lookup"><span data-stu-id="bcc09-166">Any</span></span> | <span data-ttu-id="bcc09-167">1433</span><span class="sxs-lookup"><span data-stu-id="bcc09-167">1433</span></span> | <span data-ttu-id="bcc09-168">TCP</span><span class="sxs-lookup"><span data-stu-id="bcc09-168">TCP</span></span> |
| <span data-ttu-id="bcc09-169">送信</span><span class="sxs-lookup"><span data-stu-id="bcc09-169">Outbound</span></span> | <span data-ttu-id="bcc09-170">1433</span><span class="sxs-lookup"><span data-stu-id="bcc09-170">1433</span></span> | <span data-ttu-id="bcc09-171">Any</span><span class="sxs-lookup"><span data-stu-id="bcc09-171">Any</span></span> | <span data-ttu-id="bcc09-172">TCP</span><span class="sxs-lookup"><span data-stu-id="bcc09-172">TCP</span></span> |

> [!NOTE]
> <span data-ttu-id="bcc09-173">技術的には、クライアントコンピューターは、1024と5000の間にランダムに割り当てられた TCP ポートを使用して SQL Server と通信し、それに応じてファイアウォール規則を制限することができます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-173">Technically, a client computer will use a randomly assigned TCP port between 1024 and 5000 to communicate with SQL Server, and you can restrict your firewall rules accordingly.</span></span> <span data-ttu-id="bcc09-174">SQL Server ポートとファイアウォールの詳細については、「[ファイアウォール経由で SQL と通信するために必要な tcp/ip ポート番号](https://go.microsoft.com/?linkid=9805125)」と「[特定の Tcp ポートで受信待ちするようにサーバーを構成する方法 (SQL Server 構成マネージャー)](https://msdn.microsoft.com/library/ms177440.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-174">For more information on SQL Server ports and firewalls, see [TCP/IP port numbers required to communicate to SQL over a firewall](https://go.microsoft.com/?linkid=9805125) and [How to: Configure a Server to Listen on a Specific TCP Port (SQL Server Configuration Manager)](https://msdn.microsoft.com/library/ms177440.aspx).</span></span>

<span data-ttu-id="bcc09-175">ほとんどの Windows Server 環境では、データベースサーバーで Windows ファイアウォールを構成することが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-175">In most Windows Server environments, you'll likely have to configure Windows Firewall on the database server.</span></span> <span data-ttu-id="bcc09-176">既定では、Windows ファイアウォールは、規則によって明示的に禁止されていない限り、すべての送信トラフィックを許可します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-176">By default, Windows Firewall allows all outbound traffic unless a rule specifically prohibits it.</span></span> <span data-ttu-id="bcc09-177">Web サーバーがデータベースに接続できるようにするには、SQL Server インスタンスが使用するポート番号の TCP トラフィックを許可する受信規則を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-177">To enable your web server to reach your database, you need to configure an inbound rule that allows TCP traffic on the port number that the SQL Server instance uses.</span></span> <span data-ttu-id="bcc09-178">SQL Server の既定のインスタンスを使用している場合は、次の手順に従ってこの規則を構成できます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-178">If you're using a default instance of SQL Server, you can use the next procedure to configure this rule.</span></span>

<span data-ttu-id="bcc09-179">**既定の SQL Server インスタンスとの通信を許可するように Windows ファイアウォールを構成するには**</span><span class="sxs-lookup"><span data-stu-id="bcc09-179">**To configure Windows Firewall to allow communication with a default SQL Server instance**</span></span>

1. <span data-ttu-id="bcc09-180">データベースサーバーの **[スタート]** メニューで、 **[管理ツール]** をポイントし、 **[セキュリティが強化された Windows ファイアウォール]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-180">On the database server, on the **Start** menu, point to **Administrative Tools**, and then click **Windows Firewall with Advanced Security**.</span></span>
2. <span data-ttu-id="bcc09-181">ツリービューペインで、 **[受信の規則]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-181">In the tree view pane, click **Inbound Rules**.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image6.png)
3. <span data-ttu-id="bcc09-182">**操作**ウィンドウで、 **[受信の規則]** の **[新しい規則]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-182">In the **Actions** pane, under **Inbound Rules**, click **New Rule**.</span></span>
4. <span data-ttu-id="bcc09-183">新規の受信の規則ウィザードの **[規則の種類]** ページで、 **[ポート]** を選択し、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-183">In the New Inbound Rule Wizard, on the **Rule Type** page, select **Port**, and then click **Next**.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image7.png)
5. <span data-ttu-id="bcc09-184">**[プロトコルおよびポート]** ページで、 **[TCP]** が選択されていることを確認し、 **[特定のローカルポート]** ボックスに「 **1433**」と入力して、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-184">On the **Protocol and Ports** page, ensure that **TCP** is selected, and in the **Specific local ports** box, type **1433**, and then click **Next**.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image8.png)
6. <span data-ttu-id="bcc09-185">**[操作]** ページで、 **[接続を許可する]** をそのまま使用し、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-185">On the **Action** page, leave **Allow the connection** selected and click **Next**.</span></span>
7. <span data-ttu-id="bcc09-186">**[プロファイル]** ページで、 **[ドメイン]** を選択したままにして、 **[プライベート]** および **[パブリック]** チェックボックスをオフにし、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-186">On the **Profile** page, leave **Domain** selected, clear the **Private** and **Public** check boxes, and then click **Next**.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image9.png)
8. <span data-ttu-id="bcc09-187">**[名前]** ページで、規則にわかりやすい名前を付けます (たとえば、 **SQL Server 既定のインスタンス–ネットワークアクセス**)。次に、 **[完了]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-187">On the **Name** page, give the rule a suitably descriptive name (for example, **SQL Server default instance – network access**), and then click **Finish**.</span></span>

<span data-ttu-id="bcc09-188">SQL Server 用に Windows ファイアウォールを構成する方法の詳細については、特に、非標準ポートまたは動的ポート経由で SQL Server と通信する必要がある場合は、「[方法: データベースエンジンアクセスできるように Windows ファイアウォールを構成する](https://technet.microsoft.com/library/ms175043.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-188">For more information on configuring Windows Firewall for SQL Server, particularly if you need to communicate with SQL Server over non-standard or dynamic ports, see [How to: Configure a Windows Firewall for Database Engine Access](https://technet.microsoft.com/library/ms175043.aspx).</span></span>

## <a name="configure-logins-and-database-permissions"></a><span data-ttu-id="bcc09-189">ログインとデータベースのアクセス許可を構成する</span><span class="sxs-lookup"><span data-stu-id="bcc09-189">Configure Logins and Database Permissions</span></span>

<span data-ttu-id="bcc09-190">Web アプリケーションをインターネットインフォメーションサービス (IIS) に展開すると、アプリケーションはアプリケーションプールの id を使用して実行されます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-190">When you deploy a web application to Internet Information Services (IIS), the application runs using the identity of the application pool.</span></span> <span data-ttu-id="bcc09-191">ドメイン環境では、アプリケーションプール id は、それらが実行されているサーバーのコンピューターアカウントを使用して、ネットワークリソースにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-191">In a domain environment, application pool identities use the machine account of the server on which they run to access network resources.</span></span> <span data-ttu-id="bcc09-192">コンピューターアカウントは、 <em>[domain name]</em><strong>\</strong ><em>[コンピューター名]</em> <strong>$</strong> &#x2014;(たとえば、 <strong>FABRIKAM\TESTWEB1 $</strong>) という形式になります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-192">Machine accounts take the form <em>[domain name]</em><strong>\</strong><em>[machine name]</em><strong>$</strong>&#x2014;for example, <strong>FABRIKAM\TESTWEB1$</strong>.</span></span> <span data-ttu-id="bcc09-193">Web アプリケーションがネットワーク経由でデータベースにアクセスできるようにするには、次のことを行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-193">To allow your web application to access a database across the network, you need to:</span></span>

- <span data-ttu-id="bcc09-194">Web サーバーコンピューターアカウントのログインを SQL Server インスタンスに追加します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-194">Add a login for the web server machine account to the SQL Server instance.</span></span>
- <span data-ttu-id="bcc09-195">コンピューターアカウントのログインを必要なデータベースロールにマップします (通常は**db\_datareader**と**db\_datawriter**)。</span><span class="sxs-lookup"><span data-stu-id="bcc09-195">Map the machine account login to any required database roles (typically **db\_datareader** and **db\_datawriter**).</span></span>

<span data-ttu-id="bcc09-196">Web アプリケーションが単一サーバーではなくサーバーファームで実行されている場合は、サーバーファーム内のすべての web サーバーに対してこれらの手順を繰り返す必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-196">If your web application is running on a server farm, rather than a single server, you'll need to repeat these procedures for every web server in the server farm.</span></span>

> [!NOTE]
> <span data-ttu-id="bcc09-197">アプリケーションプール id とネットワークリソースへのアクセスの詳細については、「[アプリケーションプール id](https://go.microsoft.com/?linkid=9805123)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-197">For more information on application pool identities and accessing network resources, see [Application Pool Identities](https://go.microsoft.com/?linkid=9805123).</span></span>

<span data-ttu-id="bcc09-198">これらのタスクには、さまざまな方法でアプローチできます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-198">You can approach these tasks in various ways.</span></span> <span data-ttu-id="bcc09-199">ログインを作成するには、次のいずれかの方法を使用できます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-199">To create the login, you can either:</span></span>

- <span data-ttu-id="bcc09-200">Transact-sql または SQL Server Management Studio を使用して、データベースサーバーでログインを手動で作成します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-200">Create the login manually on the database server, using Transact-SQL or SQL Server Management Studio.</span></span>
- <span data-ttu-id="bcc09-201">Visual Studio で SQL Server 2008 サーバープロジェクトを使用して、ログインを作成および配置します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-201">Use a SQL Server 2008 Server Project in Visual Studio to create and deploy the login.</span></span>

<span data-ttu-id="bcc09-202">SQL Server ログインは、データベースレベルのオブジェクトではなく、サーバーレベルのオブジェクトであるため、配置するデータベースに依存しません。</span><span class="sxs-lookup"><span data-stu-id="bcc09-202">A SQL Server login is a server-level object, rather than a database-level object, so it's not dependent on the database you want to deploy.</span></span> <span data-ttu-id="bcc09-203">そのため、任意の時点でログインを作成できます。最も簡単な方法は、データベースの配置を開始する前に、データベースサーバーでログインを手動で作成することです。</span><span class="sxs-lookup"><span data-stu-id="bcc09-203">As such, you can create the login at any point, and the easiest approach is often to create the login manually on the database server before you start deploying databases.</span></span> <span data-ttu-id="bcc09-204">SQL Server Management Studio でログインを作成するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-204">You can use the next procedure to create a login in SQL Server Management Studio.</span></span>

<span data-ttu-id="bcc09-205">**Web サーバーコンピューターアカウントの SQL Server ログインを作成するには**</span><span class="sxs-lookup"><span data-stu-id="bcc09-205">**To create a SQL Server login for the web server machine account**</span></span>

1. <span data-ttu-id="bcc09-206">データベースサーバーで、 **[スタート]** メニューの すべての **[プログラム]** をポイントし、 **[Microsoft SQL Server 2008 R2]** をクリックして、 **[SQL Server Management Studio]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-206">On the database server, on the **Start** menu, point to **All Programs**, click **Microsoft SQL Server 2008 R2**, and then click **SQL Server Management Studio**.</span></span>
2. <span data-ttu-id="bcc09-207">**[サーバーへの接続]** ダイアログボックスの **[サーバー名]** ボックスに、データベースサーバーの名前を入力し、 **[接続]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-207">In the **Connect to Server** dialog box, in the **Server name** box, type the name of the database server, and then click **Connect**.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image10.png)
3. <span data-ttu-id="bcc09-208">**オブジェクトエクスプローラー**ペインで、 **[セキュリティ]** を右クリックし、 **[新規作成]** をポイントして、 **[ログイン]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-208">In the **Object Explorer** pane, right-click **Security**, point to **New**, and then click **Login**.</span></span>
4. <span data-ttu-id="bcc09-209">**[ログイン-新規作成]** ダイアログボックスの **[ログイン名]** ボックスに、web サーバーコンピューターアカウントの名前 (たとえば、 **FABRIKAM\TESTWEB1 $** ) を入力します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-209">In the **Login – New** dialog box, in the **Login name** box, type the name of your web server machine account (for example, **FABRIKAM\TESTWEB1$**).</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image11.png)
5. <span data-ttu-id="bcc09-210">**[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-210">Click **OK**.</span></span>

<span data-ttu-id="bcc09-211">この時点で、データベースサーバーは Web 配置パブリッシングの準備ができています。</span><span class="sxs-lookup"><span data-stu-id="bcc09-211">At this point, your database server is ready for Web Deploy publishing.</span></span> <span data-ttu-id="bcc09-212">ただし、必要なデータベースの役割にコンピューターアカウントのログインをマップするまで、展開するソリューションは機能しません。</span><span class="sxs-lookup"><span data-stu-id="bcc09-212">However, any solutions you deploy won't work until you map the machine account login to the required database roles.</span></span> <span data-ttu-id="bcc09-213">データベースロールへのログインのマッピングでは、データベースを配置した後にロールをマップできないため、さらに多くのことを検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-213">Mapping the login to database roles requires a lot more thought, as you can't map roles until after you've deployed the database.</span></span> <span data-ttu-id="bcc09-214">コンピューターアカウントのログインを必要なデータベースロールにマップするには、次のいずれかの方法を使用できます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-214">To map the machine account login to the required database roles, you can either:</span></span>

- <span data-ttu-id="bcc09-215">データベースを初めて配置した後、データベースロールをログインに手動で割り当てます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-215">Assign the database roles to the login manually, after you've deployed the database for the first time.</span></span>
- <span data-ttu-id="bcc09-216">配置後スクリプトを使用して、データベースロールをログインに割り当てます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-216">Use a post-deployment script to assign the database roles to the login.</span></span>

<span data-ttu-id="bcc09-217">ログインとデータベースロールマッピングの作成を自動化する方法の詳細については、「[テスト環境にデータベースロールメンバーシップを配置する](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-217">For more information on automating the creation of logins and database role mappings, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="bcc09-218">または、次の手順を使用して、コンピューターアカウントのログインを必要なデータベースの役割に手動でマップすることもできます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-218">Alternatively, you can use the next procedure to map the machine account login to the required database roles manually.</span></span> <span data-ttu-id="bcc09-219">データベースを配置*するまでは、この*手順を実行できないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-219">Remember that you can't perform this procedure until *after* you've deployed the database.</span></span>

<span data-ttu-id="bcc09-220">**データベースロールを web サーバーコンピューターアカウントログインにマップするには**</span><span class="sxs-lookup"><span data-stu-id="bcc09-220">**To map database roles to the web server machine account login**</span></span>

1. <span data-ttu-id="bcc09-221">以前と同じように SQL Server Management Studio を開きます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-221">Open SQL Server Management Studio as before.</span></span>
2. <span data-ttu-id="bcc09-222">**オブジェクトエクスプローラー**ウィンドウで、 **[セキュリティ]** ノードを展開し、 **[ログイン]** ノードを展開します。次に、コンピューターアカウントのログイン ( **FABRIKAM\TESTWEB1 $** など) をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-222">In the **Object Explorer** pane, expand the **Security** node, expand the **Logins** node, and then double-click the machine account login (for example, **FABRIKAM\TESTWEB1$**).</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image12.png)
3. <span data-ttu-id="bcc09-223">**[ログインのプロパティ]** ダイアログボックスで、 **[ユーザーマッピング]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-223">In the **Login Properties** dialog box, click **User Mapping**.</span></span>
4. <span data-ttu-id="bcc09-224">[**このログインにマップ**されたユーザー] テーブルで、データベースの名前を選択します ( **contactmanager**など)。</span><span class="sxs-lookup"><span data-stu-id="bcc09-224">In the **Users mapped to this login** table, select the name of your database (for example, **ContactManager**).</span></span>
5. <span data-ttu-id="bcc09-225">[**データベースロールのメンバーシップ:** *[データベース名]* ] 一覧で、必要なアクセス許可を選択します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-225">In the **Database role membership for:** *[database name]* list, select the permissions required.</span></span> <span data-ttu-id="bcc09-226">Contact Manager サンプルソリューションの場合は、 **db\_datareader**および**db\_datawriter**ロールを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-226">In the case of the Contact Manager sample solution, you must select the **db\_datareader** and **db\_datawriter** roles.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image13.png)
6. <span data-ttu-id="bcc09-227">**[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-227">Click **OK**.</span></span>

<span data-ttu-id="bcc09-228">データベースロールの手動マッピングはテスト環境にとっては十分ではありませんが、ステージング環境や運用環境に対する自動またはワンクリックでのデプロイには適していません。</span><span class="sxs-lookup"><span data-stu-id="bcc09-228">While manually mapping database roles is often more than adequate for test environments, it's less desirable for automated or one-click deployments to staging or production environments.</span></span> <span data-ttu-id="bcc09-229">この種類のタスクを自動化する方法の詳細については、「[テスト環境にデータベースロールメンバーシップを配置する](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md)」の配置後スクリプトを使用する方法に関する記事をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-229">You can find more information on automating this kind of task using post-deployment scripts in [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span>

> [!NOTE]
> <span data-ttu-id="bcc09-230">サーバープロジェクトとデータベースプロジェクトの詳細については、「 [Visual Studio 2010 SQL Server データベースプロジェクト](https://msdn.microsoft.com/library/ff678491.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-230">For more information on server projects and database projects, see [Visual Studio 2010 SQL Server Database Projects](https://msdn.microsoft.com/library/ff678491.aspx).</span></span>

## <a name="configure-permissions-for-the-deployment-account"></a><span data-ttu-id="bcc09-231">デプロイアカウントのアクセス許可を構成する</span><span class="sxs-lookup"><span data-stu-id="bcc09-231">Configure Permissions for the Deployment Account</span></span>

<span data-ttu-id="bcc09-232">展開の実行に使用するアカウントが SQL Server 管理者でない場合は、このアカウントのログインも作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-232">If the account that you'll use to run the deployment is not a SQL Server administrator, you'll also need to create a login for this account.</span></span> <span data-ttu-id="bcc09-233">データベースを作成するには、アカウントが**dbcreator**サーバーロールのメンバーであるか、同等の権限を持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-233">In order to create the database, the account must be a member of the **dbcreator** server role or have equivalent permissions.</span></span>

> [!NOTE]
> <span data-ttu-id="bcc09-234">Web 配置または VSDBCMD を使用してデータベースを配置する場合は、Windows 資格情報または SQL Server 資格情報を使用できます (SQL Server インスタンスが混合モード認証をサポートするように構成されている場合)。</span><span class="sxs-lookup"><span data-stu-id="bcc09-234">When you use Web Deploy or VSDBCMD to deploy a database, you can use Windows credentials or SQL Server credentials (if your SQL Server instance is configured to support mixed mode authentication).</span></span> <span data-ttu-id="bcc09-235">次の手順では、Windows 資格情報を使用することを前提としていますが、展開を構成するときに接続文字列で SQL Server ユーザー名とパスワードを指定することはできません。</span><span class="sxs-lookup"><span data-stu-id="bcc09-235">The next procedure assumes that you want to use Windows credentials, but there's nothing stopping you from specifying a SQL Server user name and password in your connection string when you configure the deployment.</span></span>

<span data-ttu-id="bcc09-236">**デプロイアカウントのアクセス許可を設定するには**</span><span class="sxs-lookup"><span data-stu-id="bcc09-236">**To set up permissions for the deployment account**</span></span>

1. <span data-ttu-id="bcc09-237">以前と同じように SQL Server Management Studio を開きます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-237">Open SQL Server Management Studio as before.</span></span>
2. <span data-ttu-id="bcc09-238">**オブジェクトエクスプローラー**ペインで、 **[セキュリティ]** を右クリックし、 **[新規作成]** をポイントして、 **[ログイン]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-238">In the **Object Explorer** pane, right-click **Security**, point to **New**, and then click **Login**.</span></span>
3. <span data-ttu-id="bcc09-239">**[ログイン-新規作成]** ダイアログボックスの **[ログイン名]** ボックスに、デプロイアカウントの名前 (たとえば、 **FABRIKAM\matt**) を入力します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-239">In the **Login – New** dialog box, in the **Login name** box, type the name of your deployment account (for example, **FABRIKAM\matt**).</span></span>
4. <span data-ttu-id="bcc09-240">**[ページの選択]** ペインで、 **[サーバーロール]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-240">In the **Select a page** pane, click **Server Roles**.</span></span>
5. <span data-ttu-id="bcc09-241">**Dbcreator**を選択し、 **[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-241">Select **dbcreator**, and then click **OK**.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image14.png)

<span data-ttu-id="bcc09-242">以降のデプロイをサポートするには、最初のデプロイ後に、データベースの**db\_所有者**ロールに展開アカウントを追加する必要もあります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-242">To support subsequent deployments, you'll also need to add the deploying account to the **db\_owner** role on the database after the first deployment.</span></span> <span data-ttu-id="bcc09-243">これは、以降の配置では、新しいデータベースを作成するのではなく、既存のデータベースのスキーマを変更するためです。</span><span class="sxs-lookup"><span data-stu-id="bcc09-243">This is because on subsequent deployments you're modifying the schema of an existing database, rather than creating a new database.</span></span> <span data-ttu-id="bcc09-244">前のセクションで説明したように、データベースを作成するまで、データベースロールにユーザーを追加することはできません。</span><span class="sxs-lookup"><span data-stu-id="bcc09-244">As described in the previous section, you can't add a user to a database role until you've created the database, for obvious reasons.</span></span>

<span data-ttu-id="bcc09-245">**デプロイアカウントのログインを db\_所有者データベースロールにマップするには**</span><span class="sxs-lookup"><span data-stu-id="bcc09-245">**To map the deployment account login to the db\_owner database role**</span></span>

1. <span data-ttu-id="bcc09-246">以前と同じように SQL Server Management Studio を開きます。</span><span class="sxs-lookup"><span data-stu-id="bcc09-246">Open SQL Server Management Studio as before.</span></span>
2. <span data-ttu-id="bcc09-247">**[オブジェクトエクスプローラー]** ウィンドウで、 **[セキュリティ]** ノードを展開し、 **[ログイン]** ノードを展開して、コンピューターアカウントのログイン (たとえば、 **FABRIKAM\matt**) をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-247">In the **Object Explorer** window, expand the **Security** node, expand the **Logins** node, and then double-click the machine account login (for example, **FABRIKAM\matt**).</span></span>
3. <span data-ttu-id="bcc09-248">**[ログインのプロパティ]** ダイアログボックスで、 **[ユーザーマッピング]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-248">In the **Login Properties** dialog box, click **User Mapping**.</span></span>
4. <span data-ttu-id="bcc09-249">[**このログインにマップ**されたユーザー] テーブルで、データベースの名前を選択します ( **contactmanager**など)。</span><span class="sxs-lookup"><span data-stu-id="bcc09-249">In the **Users mapped to this login** table, select the name of your database (for example, **ContactManager**).</span></span>
5. <span data-ttu-id="bcc09-250">[**データベースロールのメンバーシップ:** *[データベース名]* ] 一覧で、 **db\_所有者**ロールを選択します。</span><span class="sxs-lookup"><span data-stu-id="bcc09-250">In the **Database role membership for:** *[database name]* list, select the **db\_owner** role.</span></span>

    ![](configuring-a-database-server-for-web-deploy-publishing/_static/image15.png)
6. <span data-ttu-id="bcc09-251">**[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-251">Click **OK**.</span></span>

## <a name="conclusion"></a><span data-ttu-id="bcc09-252">まとめ</span><span class="sxs-lookup"><span data-stu-id="bcc09-252">Conclusion</span></span>

<span data-ttu-id="bcc09-253">これで、データベースサーバーは、リモートデータベースの配置を受け入れ、リモートの IIS web サーバーがデータベースにアクセスできるようになります。</span><span class="sxs-lookup"><span data-stu-id="bcc09-253">Your database server should now be ready to accept remote database deployments and to allow remote IIS web servers to access your databases.</span></span> <span data-ttu-id="bcc09-254">データベースの配置と使用を試行する前に、次のキーポイントを確認することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bcc09-254">Before you attempt to deploy and use databases, you may want to check these key points:</span></span>

- <span data-ttu-id="bcc09-255">リモート TCP/IP 接続を受け入れるように SQL Server を構成しましたか?</span><span class="sxs-lookup"><span data-stu-id="bcc09-255">Have you configured SQL Server to accept remote TCP/IP connections?</span></span>
- <span data-ttu-id="bcc09-256">SQL Server トラフィックを許可するようにファイアウォールを構成しましたか?</span><span class="sxs-lookup"><span data-stu-id="bcc09-256">Have you configured any firewalls to permit SQL Server traffic?</span></span>
- <span data-ttu-id="bcc09-257">SQL Server にアクセスするすべての web サーバーに対して、コンピューターアカウントのログインを作成しましたか?</span><span class="sxs-lookup"><span data-stu-id="bcc09-257">Have you created a machine account login for every web server that will access SQL Server?</span></span>
- <span data-ttu-id="bcc09-258">データベースの配置にユーザーロールマッピングを作成するスクリプトが含まれていますか。または、初めてデータベースを配置した後に手動で作成する必要がありますか。</span><span class="sxs-lookup"><span data-stu-id="bcc09-258">Does your database deployment include a script to create user role mappings, or do you need to create these manually after you deploy the database for the first time?</span></span>
- <span data-ttu-id="bcc09-259">デプロイアカウントのログインを作成し、 **dbcreator**サーバーロールに追加しましたか?</span><span class="sxs-lookup"><span data-stu-id="bcc09-259">Have you created a login for the deployment account and added it to the **dbcreator** server role?</span></span>

## <a name="further-reading"></a><span data-ttu-id="bcc09-260">参考資料</span><span class="sxs-lookup"><span data-stu-id="bcc09-260">Further Reading</span></span>

<span data-ttu-id="bcc09-261">データベースプロジェクトの配置のガイダンスについては、「[データベースプロジェクトの配置](../web-deployment-in-the-enterprise/deploying-database-projects.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-261">For guidance on deploying database projects, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="bcc09-262">配置後スクリプトを実行してデータベースロールのメンバーシップを作成する方法については、「[テスト環境へのデータベースロールのメンバーシップの配置](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-262">For guidance on creating database role memberships by running a post-deployment script, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="bcc09-263">メンバーシップデータベースによってもたらされる固有のデプロイの問題を満たす方法については、「[エンタープライズ環境へのメンバーシップデータベースの配置](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcc09-263">For guidance on how to meet the unique deployment challenges that membership databases pose, see [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="bcc09-264">[前へ](configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md)
> [次へ](creating-a-server-farm-with-the-web-farm-framework.md)</span><span class="sxs-lookup"><span data-stu-id="bcc09-264">[Previous](configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md)
[Next](creating-a-server-farm-with-the-web-farm-framework.md)</span></span>
