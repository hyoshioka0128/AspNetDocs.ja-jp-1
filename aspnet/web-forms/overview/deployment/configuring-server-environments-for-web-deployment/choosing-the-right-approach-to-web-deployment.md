---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment
title: Web 配置に適切なアプローチを選択する |Microsoft Docs
author: jrjlee
description: インターネットインフォメーションサービス (IIS) Web 配置ツール (Web 配置) 2.0 以降を使用する場合は、次の3つの主な方法で作業できます。
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 787a53fd-9901-4a11-9d58-61e0509cda45
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment
msc.type: authoredcontent
ms.openlocfilehash: 13f784dd8e6404806104d56b026b3c41ca178892
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78441424"
---
# <a name="choosing-the-right-approach-to-web-deployment"></a><span data-ttu-id="a25f3-103">適切な Web 配置手法を選択する</span><span class="sxs-lookup"><span data-stu-id="a25f3-103">Choosing the Right Approach to Web Deployment</span></span>

<span data-ttu-id="a25f3-104">[Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="a25f3-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

<span data-ttu-id="a25f3-105">[[Download PDF]\(PDF をダウンロード\)](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span><span class="sxs-lookup"><span data-stu-id="a25f3-105">[Download PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span></span>

> <span data-ttu-id="a25f3-106">インターネットインフォメーションサービス (IIS) Web 配置ツール (Web 配置) 2.0 以降を使用する場合、パッケージ化された web アプリケーションを web サーバーに取り込むために使用できる3つの主な方法があります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-106">When you work with the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) 2.0 or later, there are three main approaches you can use to get your packaged web applications onto a web server.</span></span> <span data-ttu-id="a25f3-107">次のいずれかを実行できます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-107">You can either:</span></span>
> 
> - <span data-ttu-id="a25f3-108">移行先サーバーで*Web Deployment Agent サービス*("リモートエージェント" とも呼ばれます) をターゲットにして、リモートの場所からアプリケーションを展開します。</span><span class="sxs-lookup"><span data-stu-id="a25f3-108">Deploy the application from a remote location by targeting the *Web Deployment Agent Service* (also known as the "remote agent") on the destination server.</span></span>
> - <span data-ttu-id="a25f3-109">必要に応じて Web 配置 ("一時エージェント" とも呼ばれます) を使用して、リモートの場所からアプリケーションをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="a25f3-109">Deploy the application from a remote location using Web Deploy On Demand (also known as the "temp agent").</span></span>
> - <span data-ttu-id="a25f3-110">移行先サーバーで*IIS Web 配置ハンドラー*をターゲットにして、リモートの場所からアプリケーションを展開します。</span><span class="sxs-lookup"><span data-stu-id="a25f3-110">Deploy the application from a remote location by targeting the *IIS Web Deploy Handler* on the destination server.</span></span>
> - <span data-ttu-id="a25f3-111">Web パッケージを移行先サーバーに手動でコピーし、IIS マネージャーを使用してインポートして、アプリケーションを展開します。</span><span class="sxs-lookup"><span data-stu-id="a25f3-111">Deploy the application by manually copying the web package to the destination server and importing it through IIS Manager.</span></span>
> 
> <span data-ttu-id="a25f3-112">移行先の web サーバーをどのように構成するかは、使用する展開方法によって異なります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-112">How you configure your destination web servers will depend on which approach to deployment you want to use.</span></span> <span data-ttu-id="a25f3-113">このトピックは、展開する方法を決定するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-113">This topic will help you decide which approach to deployment is right for you.</span></span>

<span data-ttu-id="a25f3-114">次の表は、各展開方法の主な利点と欠点と、各アプローチに最も適しているシナリオを示しています。</span><span class="sxs-lookup"><span data-stu-id="a25f3-114">This table shows the main advantages and disadvantages of each deployment approach, together with the scenarios that most typically suit each approach.</span></span>

| <span data-ttu-id="a25f3-115">アプローチ</span><span class="sxs-lookup"><span data-stu-id="a25f3-115">Approach</span></span> | <span data-ttu-id="a25f3-116">長所</span><span class="sxs-lookup"><span data-stu-id="a25f3-116">Advantages</span></span> | <span data-ttu-id="a25f3-117">短所</span><span class="sxs-lookup"><span data-stu-id="a25f3-117">Disadvantages</span></span> | <span data-ttu-id="a25f3-118">標準のシナリオ</span><span class="sxs-lookup"><span data-stu-id="a25f3-118">Typical Scenarios</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a25f3-119">リモートエージェント</span><span class="sxs-lookup"><span data-stu-id="a25f3-119">Remote Agent</span></span> | <span data-ttu-id="a25f3-120">セットアップは簡単です。</span><span class="sxs-lookup"><span data-stu-id="a25f3-120">It is easy to set up.</span></span> <span data-ttu-id="a25f3-121">これは、web アプリケーションおよびコンテンツに対する通常の更新に適しています。</span><span class="sxs-lookup"><span data-stu-id="a25f3-121">It is suitable for regular updates to web applications and content.</span></span> | <span data-ttu-id="a25f3-122">ユーザーは、対象サーバーの管理者である必要があります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-122">The user must be an administrator on the target server.</span></span> <span data-ttu-id="a25f3-123">ユーザーは代替の資格情報を指定できません。</span><span class="sxs-lookup"><span data-stu-id="a25f3-123">the user can't supply alternative credentials.</span></span> | <span data-ttu-id="a25f3-124">開発環境。</span><span class="sxs-lookup"><span data-stu-id="a25f3-124">Development environments.</span></span> <span data-ttu-id="a25f3-125">テスト環境。</span><span class="sxs-lookup"><span data-stu-id="a25f3-125">Test environments.</span></span> |
| <span data-ttu-id="a25f3-126">一時エージェント</span><span class="sxs-lookup"><span data-stu-id="a25f3-126">Temp Agent</span></span> | <span data-ttu-id="a25f3-127">ターゲットコンピューターに Web 配置をインストールする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a25f3-127">There is no need to install Web Deploy on the target computer.</span></span> <span data-ttu-id="a25f3-128">最新バージョンの Web 配置が自動的に使用されます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-128">The latest version of Web Deploy is automatically used.</span></span> | <span data-ttu-id="a25f3-129">ユーザーは、対象サーバーの管理者である必要があります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-129">The user must be an administrator on the target server.</span></span> <span data-ttu-id="a25f3-130">ユーザーは代替の資格情報を指定できません。</span><span class="sxs-lookup"><span data-stu-id="a25f3-130">The user can't supply alternative credentials.</span></span> | <span data-ttu-id="a25f3-131">開発環境。</span><span class="sxs-lookup"><span data-stu-id="a25f3-131">Development environments.</span></span> <span data-ttu-id="a25f3-132">テスト環境。</span><span class="sxs-lookup"><span data-stu-id="a25f3-132">Test environments.</span></span> |
| <span data-ttu-id="a25f3-133">Web 配置ハンドラー</span><span class="sxs-lookup"><span data-stu-id="a25f3-133">Web Deploy Handler</span></span> | <span data-ttu-id="a25f3-134">管理者以外のユーザーは、コンテンツを展開できます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-134">Non-administrator users can deploy content.</span></span> <span data-ttu-id="a25f3-135">これは、web アプリケーションおよびコンテンツに対する通常の更新に適しています。</span><span class="sxs-lookup"><span data-stu-id="a25f3-135">It is suitable for regular updates to web applications and content.</span></span> | <span data-ttu-id="a25f3-136">設定が複雑になります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-136">It is a lot more complex to set up.</span></span> | <span data-ttu-id="a25f3-137">ステージング環境。</span><span class="sxs-lookup"><span data-stu-id="a25f3-137">Staging environments.</span></span> <span data-ttu-id="a25f3-138">イントラネット運用環境。</span><span class="sxs-lookup"><span data-stu-id="a25f3-138">Intranet production environments.</span></span> <span data-ttu-id="a25f3-139">ホストされている環境。</span><span class="sxs-lookup"><span data-stu-id="a25f3-139">Hosted environments.</span></span> |
| <span data-ttu-id="a25f3-140">オフライン展開</span><span class="sxs-lookup"><span data-stu-id="a25f3-140">Offline Deployment</span></span> | <span data-ttu-id="a25f3-141">非常に簡単に設定できます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-141">It is very easy to set up.</span></span> <span data-ttu-id="a25f3-142">分離された環境に適しています。</span><span class="sxs-lookup"><span data-stu-id="a25f3-142">It is suitable for isolated environments.</span></span> | <span data-ttu-id="a25f3-143">サーバー管理者は、web パッケージを毎回手動でコピーしてインポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-143">The server administrator must manually copy and import the web package every time.</span></span> | <span data-ttu-id="a25f3-144">インターネットに接続する運用環境。</span><span class="sxs-lookup"><span data-stu-id="a25f3-144">Internet-facing production environments.</span></span> <span data-ttu-id="a25f3-145">分離されたネットワーク環境。</span><span class="sxs-lookup"><span data-stu-id="a25f3-145">Isolated network environments.</span></span> |

## <a name="using-the-remote-agent"></a><span data-ttu-id="a25f3-146">リモートエージェントの使用</span><span class="sxs-lookup"><span data-stu-id="a25f3-146">Using the Remote Agent</span></span>

<span data-ttu-id="a25f3-147">移行先サーバーで既定の設定を使用して Web 配置をインストールすると、Web Deployment Agent サービス ("リモートエージェント") が自動的にインストールされ、開始されます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-147">When you install Web Deploy using the default settings on a destination server, the Web Deployment Agent Service (the "remote agent") is automatically installed and started.</span></span> <span data-ttu-id="a25f3-148">既定では、リモートエージェントは、次のアドレスで HTTP エンドポイントを公開します。</span><span class="sxs-lookup"><span data-stu-id="a25f3-148">By default, the remote agent exposes an HTTP endpoint at this address:</span></span>

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample1.cmd)]

> [!NOTE]
> <span data-ttu-id="a25f3-149">[*Server*] を web サーバーのコンピューター名、web サーバーの IP アドレス、または web サーバーに解決されるホスト名に置き換えることができます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-149">You can replace [*server*] with the machine name of your web server, an IP address for your web server, or a hostname that resolves to your web server.</span></span>

<span data-ttu-id="a25f3-150">サーバー管理者は、このエンドポイントアドレスを指定することによって、開発者用コンピューターやビルドサーバーなどのリモートの場所から web パッケージを配置できます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-150">Server administrators can deploy web packages from a remote location, like a developer machine or a build server, by specifying this endpoint address.</span></span> <span data-ttu-id="a25f3-151">たとえば、Fabrikam, Inc. の jeff Hink によって開発者のコンピューターに ContactManager Mvc web アプリケーションプロジェクトがビルドされたとします。</span><span class="sxs-lookup"><span data-stu-id="a25f3-151">For example, suppose Matt Hink at Fabrikam, Inc. has built the ContactManager.Mvc web application project on his developer machine.</span></span> <span data-ttu-id="a25f3-152">ビルドプロセスでは、パッケージをインストールするために必要な Web 配置のコマンドを含む *.deploy*ファイルと共に、web パッケージが生成されます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-152">The build process generates a web package, together with a *.deploy.cmd* file that contains the Web Deploy commands required to install the package.</span></span> <span data-ttu-id="a25f3-153">TESTWEB1 サーバーのサーバー管理者である場合は、開発者のコンピューターで次のコマンドを実行して、web アプリケーションをテスト web サーバーにデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-153">If Matt is a server administrator on the TESTWEB1 server, he can deploy the web application to the test web server by running this command on his developer machine:</span></span>

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample2.cmd)]

<span data-ttu-id="a25f3-154">実際には、コンピューター名を指定した場合、Web 配置実行可能ファイルはリモートエージェントのエンドポイントアドレスを推測できます。そのため、次のように入力する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-154">In actual fact, the Web Deploy executable can infer the endpoint address of the remote agent if you provide the machine name, so Matt only needs to type this:</span></span>

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample3.cmd)]

> [!NOTE]
> <span data-ttu-id="a25f3-155">Web 配置のコマンドライン構文と .deploy ファイルの*展開*の詳細については、「[方法: .Deploy ファイルを使用して展開パッケージをインストール](https://msdn.microsoft.com/library/ff356104.aspx)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a25f3-155">For more information on Web Deploy command-line syntax and *.deploy.cmd* files, see [How to: Install a Deployment Package Using the deploy.cmd File](https://msdn.microsoft.com/library/ff356104.aspx).</span></span>

<span data-ttu-id="a25f3-156">リモートエージェントは、リモートの場所からコンテンツを簡単に展開できる方法を提供します。この方法は、ワンクリックまたは自動の展開で効果的に機能します。</span><span class="sxs-lookup"><span data-stu-id="a25f3-156">The remote agent offers a straightforward way to deploy content from a remote location, and this approach can work well with one-click or automated deployment.</span></span> <span data-ttu-id="a25f3-157">ただし、展開コマンドを実行するユーザーは、ドメイン管理者であるか、または移行先サーバーのローカル administrators グループのメンバーである必要があります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-157">However, the user who runs the deployment command must also be either a domain administrator or a member of the local administrators group on the destination server.</span></span> <span data-ttu-id="a25f3-158">また、リモートエージェントは基本認証をサポートしていないため、コマンドラインで代替資格情報を渡すことはできません。</span><span class="sxs-lookup"><span data-stu-id="a25f3-158">In addition, the remote agent doesn't support basic authentication, so you can't pass alternative credentials on the command line.</span></span>

<span data-ttu-id="a25f3-159">リモートエージェントは、開発またはテストシナリオでの配置に便利なアプローチを提供します。開発者がテストサーバー環境に対して完全な管理者権限を持つことは珍しくありません。アプリケーションは通常、再構築され、再展開されます。頻繁.</span><span class="sxs-lookup"><span data-stu-id="a25f3-159">The remote agent provides a useful approach to deployment in development or test scenarios, where it's not uncommon for developers to have full administrator control over a test server environment, and applications are typically rebuilt and redeployed very frequently.</span></span> <span data-ttu-id="a25f3-160">ただし、この方法は、通常、ステージング環境または運用環境では受け入れられません。</span><span class="sxs-lookup"><span data-stu-id="a25f3-160">However, this approach is usually less acceptable for staging or production environments.</span></span>

<span data-ttu-id="a25f3-161">リモートエージェントアプローチを使用するシナリオのエンドツーエンドの例については、「[シナリオ: Web 配置用のテスト環境を構成](scenario-configuring-a-test-environment-for-web-deployment.md)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a25f3-161">For an end-to-end example of a scenario that uses the remote agent approach, see [Scenario: Configuring a Test Environment for Web Deployment](scenario-configuring-a-test-environment-for-web-deployment.md).</span></span>

## <a name="using-the-temp-agent"></a><span data-ttu-id="a25f3-162">一時エージェントの使用</span><span class="sxs-lookup"><span data-stu-id="a25f3-162">Using the Temp Agent</span></span>

<span data-ttu-id="a25f3-163">一時エージェントの配置方法は、リモートエージェントのアプローチに似ています。</span><span class="sxs-lookup"><span data-stu-id="a25f3-163">The temp agent approach to deployment is similar to the remote agent approach.</span></span> <span data-ttu-id="a25f3-164">ただし、リモートエージェントの方法とは異なり、移行先の Web サーバーに Web 配置をインストールする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a25f3-164">However, in contrast to the remote agent approach, you don't need to install Web Deploy on the destination web server.</span></span> <span data-ttu-id="a25f3-165">代わりに、デプロイを実行すると、Web 配置によって移行先サーバーに Web 配置エージェントサービスの一時的なバージョンがインストールされ、これを使用してコンテンツが IIS に展開されます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-165">Instead, when you perform the deployment, Web Deploy will install a temporary version of the web deployment agent service on the destination server and will use this to deploy your content to IIS.</span></span> <span data-ttu-id="a25f3-166">デプロイが完了すると、すべての一時ファイルが削除されます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-166">When the deployment is complete, all temporary files are removed.</span></span>

<span data-ttu-id="a25f3-167">一時エージェントプロバイダーの設定を使用する場合は、展開コマンドに **/g**フラグを追加します。</span><span class="sxs-lookup"><span data-stu-id="a25f3-167">If you want to use the temp agent provider setting, add the **/g** flag to your deployment command:</span></span>

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample4.cmd)]

> [!NOTE]
> <span data-ttu-id="a25f3-168">サービスが実行されていない場合でも、対象のコンピューターに web 配置エージェントサービスがインストールされている場合、一時エージェントを使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="a25f3-168">You can't use the temp agent if the web deployment agent service is installed on the destination computer, even if the service is not running.</span></span>

<span data-ttu-id="a25f3-169">この方法の利点は、移行先サーバーに Web 配置のインストールを維持する必要がないことです。</span><span class="sxs-lookup"><span data-stu-id="a25f3-169">The advantage of this approach is that you don't need to maintain installations of Web Deploy on your destination servers.</span></span> <span data-ttu-id="a25f3-170">さらに、移行元と移行先のコンピューターで同じバージョンの Web 配置が実行されていることを確認する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a25f3-170">Furthermore, you don't need to ensure that the source and destination computers are running the same version of Web Deploy.</span></span> <span data-ttu-id="a25f3-171">ただし、この方法では、リモートエージェントアプローチと同じプリンシパル制限が適用されます。つまり、コンテンツを展開するためには、移行先サーバーのローカル管理者である必要があり、NTLM 認証のみがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-171">However, this approach suffers from the same principal limitations as the remote agent approach, namely that you must be a local administrator on the destination server in order to deploy content, and only NTLM authentication is supported.</span></span> <span data-ttu-id="a25f3-172">また、一時エージェントのアプローチでは、より多くの初期構成が必要になります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-172">The temp agent approach also requires a lot more initial configuration of the destination environment.</span></span>

<span data-ttu-id="a25f3-173">Temp エージェントの使用方法の詳細については、「[方法: .Deploy ファイルを使用して展開パッケージをインストール](https://msdn.microsoft.com/library/ff356104.aspx)し、[オンデマンドで Web 配置](https://technet.microsoft.com/library/ee517345(WS.10).aspx)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a25f3-173">For more information on using the temp agent, see [How to: Install a Deployment Package Using the deploy.cmd File](https://msdn.microsoft.com/library/ff356104.aspx) and [Web Deploy On Demand](https://technet.microsoft.com/library/ee517345(WS.10).aspx).</span></span>

## <a name="using-the-web-deploy-handler"></a><span data-ttu-id="a25f3-174">Web 配置ハンドラーの使用</span><span class="sxs-lookup"><span data-stu-id="a25f3-174">Using the Web Deploy Handler</span></span>

<span data-ttu-id="a25f3-175">IIS 7 以降では、Web 配置は IIS Web 配置ハンドラーを使用した代替の展開方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="a25f3-175">For IIS 7 onwards, Web Deploy offers an alternative deployment approach through the IIS Web Deploy Handler.</span></span> <span data-ttu-id="a25f3-176">Web 配置ハンドラーは、IIS Web 管理サービス (WMSvc) と密接に統合されています。このサービスは、ユーザーがリモートの場所から IIS web サイトを管理できるように設計されています。</span><span class="sxs-lookup"><span data-stu-id="a25f3-176">The Web Deploy Handler is closely integrated with the IIS Web Management Service (WMSvc), which is designed to allow users to manage IIS websites from remote locations.</span></span>

<span data-ttu-id="a25f3-177">既定では、リモートエージェントは、次のアドレスで HTTP エンドポイントを公開します。</span><span class="sxs-lookup"><span data-stu-id="a25f3-177">By default, the remote agent exposes an HTTP endpoint at this address:</span></span>

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample5.cmd)]

> [!NOTE]
> <span data-ttu-id="a25f3-178">[*Server*] を web サーバーのコンピューター名、web サーバーの IP アドレス、または web サーバーに解決されるホスト名に置き換えることができます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-178">You can replace [*server*] with the machine name of your web server, an IP address for your web server, or a hostname that resolves to your web server.</span></span>

<span data-ttu-id="a25f3-179">リモートエージェントと temp エージェントの Web 配置ハンドラーの大きな利点は、管理者以外のユーザーが特定の IIS web サイトにアプリケーションとコンテンツを展開することを許可するように IIS を構成できることです。</span><span class="sxs-lookup"><span data-stu-id="a25f3-179">The big advantage of the Web Deploy Handler over the remote agent, and the temp agent, is that you can configure IIS to allow non-administrator users to deploy applications and content to specific IIS websites.</span></span> <span data-ttu-id="a25f3-180">Web 配置ハンドラーは基本認証もサポートしているため、Web 配置コマンドのパラメーターとして代替資格情報を指定できます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-180">The Web Deploy Handler also supports basic authentication, so you can provide alternative credentials as parameters in your Web Deploy commands.</span></span> <span data-ttu-id="a25f3-181">主な欠点は、Web 配置ハンドラーの初期設定と構成が複雑になることです。</span><span class="sxs-lookup"><span data-stu-id="a25f3-181">The major drawback is that the Web Deploy Handler is initially a lot more complicated to set up and configure.</span></span>

<span data-ttu-id="a25f3-182">管理者以外のユーザーの場合、Web 管理サービス (WMSvc) は、ユーザーがサーバーレベルの接続ではなくサイトレベルの接続を使用して IIS に接続することのみを許可します。</span><span class="sxs-lookup"><span data-stu-id="a25f3-182">In the case of non-administrator users, the Web Management Service (WMSvc) will only allow the user to connect to IIS using a site-level connection, rather than a server-level connection.</span></span> <span data-ttu-id="a25f3-183">特定のサイトにアクセスするには、サイト固有のクエリ文字列をエンドポイントアドレスに含めることができます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-183">To access a particular site, you can include a site-specific query string in the endpoint address:</span></span>

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample6.cmd)]

<span data-ttu-id="a25f3-184">たとえば、ビルドが成功するたびに、ステージング環境に web アプリケーションを自動的にデプロイするようにビルドプロセスが構成されているとします。</span><span class="sxs-lookup"><span data-stu-id="a25f3-184">For example, suppose a build process is configured to automatically deploy a web application to a staging environment after every successful build.</span></span> <span data-ttu-id="a25f3-185">リモートエージェントの手法を使用した場合は、ビルドプロセスで対象サーバーの管理者を識別する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-185">If you used the remote agent approach, you'd need to make the build process identity an administrator on your destination servers.</span></span> <span data-ttu-id="a25f3-186">これに対し、Web 配置ハンドラーの手法を使用すると、管理者以外&#x2014;**のユーザーに特定の IIS** web サイトへの&#x2014;アクセス許可のみを与えることができます。また、ビルドプロセスでは、これらの資格情報を提供して Web パッケージを配置できます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-186">In contrast, using the Web Deploy Handler approach you can give a non-administrator user&#x2014;**FABRIKAM\stagingdeployer** in this case&#x2014;permission to a specific IIS website only, and the build process can provide these credentials to deploy the web package.</span></span>

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample7.cmd)]

> [!NOTE]
> <span data-ttu-id="a25f3-187">Web 配置のコマンドライン操作と構文の詳細については[Web 配置「コマンドラインリファレンス](https://technet.microsoft.com/library/dd568991(v=ws.10).aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a25f3-187">For more information on Web Deploy command-line operations and syntax, see [Web Deploy Command Line Reference](https://technet.microsoft.com/library/dd568991(v=ws.10).aspx).</span></span> <span data-ttu-id="a25f3-188">*.Deploy*ファイルの使用方法の詳細については、「[方法: .Deploy ファイルを使用して展開パッケージをインストール](https://msdn.microsoft.com/library/ff356104.aspx)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a25f3-188">For more information on using the *.deploy.cmd* file, see [How to: Install a Deployment Package Using the deploy.cmd File](https://msdn.microsoft.com/library/ff356104.aspx).</span></span>

<span data-ttu-id="a25f3-189">Web 配置ハンドラーは、ステージング環境、ホスト環境、およびイントラネットベースの運用環境での配置に便利なアプローチを提供します。この環境では、サーバーへのリモートアクセスは使用できますが、管理者の資格情報は使用できません。</span><span class="sxs-lookup"><span data-stu-id="a25f3-189">The Web Deploy Handler provides a useful approach to deployment in staging environments, hosted environments, and intranet-based production environments, where remote access to the server is available but administrator credentials are not.</span></span>

<span data-ttu-id="a25f3-190">Web 配置ハンドラアプローチを使用するシナリオのエンドツーエンドの例については、「[シナリオ: Web デプロイのステージング環境を構成](scenario-configuring-a-staging-environment-for-web-deployment.md)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a25f3-190">For an end-to-end example of a scenario that uses the Web Deploy Handler approach, see [Scenario: Configuring a Staging Environment for Web Deployment](scenario-configuring-a-staging-environment-for-web-deployment.md).</span></span>

## <a name="using-offline-deployment"></a><span data-ttu-id="a25f3-191">オフライン展開の使用</span><span class="sxs-lookup"><span data-stu-id="a25f3-191">Using Offline Deployment</span></span>

<span data-ttu-id="a25f3-192">場合によっては、リモートの場所から IIS web サイトにアプリケーションとコンテンツを展開することはできません。</span><span class="sxs-lookup"><span data-stu-id="a25f3-192">In some cases, it's not possible or practical to deploy applications and content to an IIS website from a remote location.</span></span> <span data-ttu-id="a25f3-193">たとえば、移行元と移行先のコンピューターが、分離されたネットワークまたはネットワークセグメントに存在する場合や、ファイアウォールポリシーによってリモートアクセスが許可されない場合があります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-193">For example, the source and destination computers may be in isolated networks or network segments, or firewall policy may not permit remote access.</span></span>

<span data-ttu-id="a25f3-194">このようなシナリオでは、Web 配置のパッケージ化機能と発行機能を引き続き使用できます。リモートの場所からは使用できません。</span><span class="sxs-lookup"><span data-stu-id="a25f3-194">In scenarios like these, you can still use the packaging and publishing capabilities of Web Deploy; you just can't use them from a remote location.</span></span> <span data-ttu-id="a25f3-195">代わりに、移行先サーバーの管理者が web パッケージをサーバーにコピーし、IIS マネージャーを使用してインポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a25f3-195">Instead, an administrator on the destination server must copy the web package onto the server and import it through IIS Manager.</span></span>

![](choosing-the-right-approach-to-web-deployment/_static/image1.png)

<span data-ttu-id="a25f3-196">オフライン展開方法は、通常、境界ネットワーク内のサーバーが内部ネットワーク内のコンピューターとの接続を制限している可能性がある、インターネットに接続された運用環境で役立ちます。</span><span class="sxs-lookup"><span data-stu-id="a25f3-196">The offline deployment approach is typically useful in Internet-facing production environments, where servers in a perimeter network may have restricted connectivity with computers in the internal network.</span></span>

<span data-ttu-id="a25f3-197">オフライン展開方法を使用するシナリオのエンドツーエンドの例については、「[シナリオ: Web 配置用の運用環境の構成](scenario-configuring-a-production-environment-for-web-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a25f3-197">For an end-to-end example of a scenario that uses the offline deployment approach, see [Scenario: Configuring a Production Environment for Web Deployment](scenario-configuring-a-production-environment-for-web-deployment.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="a25f3-198">参考資料</span><span class="sxs-lookup"><span data-stu-id="a25f3-198">Further Reading</span></span>

<span data-ttu-id="a25f3-199">Web 配置のコマンドライン操作と構文の詳細については[Web 配置「コマンドラインリファレンス](https://technet.microsoft.com/library/dd568991(v=ws.10).aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a25f3-199">For more information on Web Deploy command-line operations and syntax, see [Web Deploy Command Line Reference](https://technet.microsoft.com/library/dd568991(v=ws.10).aspx).</span></span> <span data-ttu-id="a25f3-200">*.Deploy*ファイルの使用方法の詳細については、「[方法: .Deploy ファイルを使用して展開パッケージをインストール](https://msdn.microsoft.com/library/ff356104.aspx)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a25f3-200">For more information on using the *.deploy.cmd* file, see [How to: Install a Deployment Package Using the deploy.cmd File](https://msdn.microsoft.com/library/ff356104.aspx).</span></span>

<span data-ttu-id="a25f3-201">リモートコンピューターから web パッケージを展開するさまざまな方法に関する一般的なガイダンスについては、「リモートでの[Web 配置の使用](https://technet.microsoft.com/library/ee461175(WS.10).aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a25f3-201">For more general guidance on the different ways in which you can deploy web packages from a remote computer, see [Using Web Deploy Remotely](https://technet.microsoft.com/library/ee461175(WS.10).aspx).</span></span> <span data-ttu-id="a25f3-202">オンデマンドでの Web 配置の使用の詳細については、「 [Web 配置オンデマンド](https://technet.microsoft.com/library/ee517345(WS.10).aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a25f3-202">For more information on using Web Deploy On Demand, see [Web Deploy On Demand](https://technet.microsoft.com/library/ee517345(WS.10).aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a25f3-203">[前へ](configuring-server-environments-for-web-deployment.md)
> [次へ](scenario-configuring-a-test-environment-for-web-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="a25f3-203">[Previous](configuring-server-environments-for-web-deployment.md)
[Next](scenario-configuring-a-test-environment-for-web-deployment.md)</span></span>
