---
uid: web-forms/overview/deployment/deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview
title: 'エンタープライズ Web 配置: シナリオの概要 |Microsoft Docs'
author: jrjlee
description: この一連のチュートリアルでは、架空のエンタープライズ展開シナリオと共に、現実的なレベルの複雑さを持つサンプルソリューションを使用して、参照...
ms.author: riande
ms.date: 05/03/2012
ms.assetid: aa862153-4cd8-4e33-beeb-abf502c6664f
msc.legacyurl: /web-forms/overview/deployment/deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview
msc.type: authoredcontent
ms.openlocfilehash: 9786879844da13c21e6a953b1ab24b29ca8121e2
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78463408"
---
# <a name="enterprise-web-deployment-scenario-overview"></a>エンタープライズ Web 展開: シナリオの概要

[Jason Lee](https://github.com/jrjlee)

[[Download PDF]\(PDF をダウンロード\)](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> この一連のチュートリアルでは、架空のエンタープライズ展開シナリオと共に、現実的な複雑さレベルのサンプルソリューションを使用して、参照実装を提供し、タスクとチュートリアルに共通のコンテキストを提供します。 このトピックでは、チュートリアルのシナリオについて説明し、サンプルソリューションを紹介します。

## <a name="scenario-description"></a>シナリオの説明

架空の企業である Fabrikam, Inc. は、リモート販売チームが web インターフェイスから連絡先情報を格納および取得できるようにするソリューションを作成しています。

Fabrikam, Inc. のアプリケーションライフサイクル管理 (ALM) プロセスでは、ソフトウェア開発プロセスのさまざまな段階で、次の3つのサーバー環境にソリューションを展開する必要があります。

- 開発者テストまたは "サンドボックス" 環境。
- イントラネットベースのステージング環境。
- インターネットに接続された運用環境。

これらの各環境にはさまざまな構成とセキュリティの要件があり、それぞれに固有のデプロイの課題があります。

### <a name="the-fabrikam-inc-server-infrastructure"></a>Fabrikam, Inc. のサーバーインフラストラクチャ

これは、Fabrikam, Inc. の高レベルの開発およびデプロイインフラストラクチャです。

![](enterprise-web-deployment-scenario-overview/_static/image1.png)

開発者ワークステーション、ソース管理インフラストラクチャ、開発者テスト環境、ステージング環境はすべて、Fabrikam.net ドメイン内のイントラネットネットワーク上に存在します。 実稼働環境は、境界ネットワーク (DMZ、非武装地帯、スクリーンサブネットとも呼ばれます) に存在します。これは、ファイアウォールによってイントラネットネットワークから分離されています。 これは一般的な展開シナリオです。通常は、ファイアウォールまたはゲートウェイサーバーを使用して、インターネットに接続された web サーバーを内部サーバーインフラストラクチャから分離します。

次の点に注意してください。

- 別個のビルドサーバーを使用する Team Foundation Server (TFS) 2010 サーバーは、ソース管理と継続的インテグレーション (CI) 機能を提供します。
- 開発者テスト環境には、インターネットインフォメーションサービス (IIS) 7.5 web サーバーと SQL Server 2008 R2 データベースサーバーが含まれています。
- 運用環境には、Web Farm Framework (WFF) コントローラーサーバーによって同期される複数の IIS 7.5 web サーバーと、SQL Server 2008 R2 データベースサーバーが含まれます。 実際には、データベースサーバーはクラスタリングまたはミラーリングを使用して、スケーラビリティと可用性を向上させることができます。
- ステージング環境は、運用環境の構成を可能な限り忠実にレプリケートするように設計されています。
- ファイアウォールとネットワーク分離のポリシーでは、イントラネットから境界ネットワークへの直接自動展開は許可されません。

これらの各環境の構成の詳細については、2番目のチュートリアル「 [Web 配置用のサーバー環境の構成](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md)」を参照してください。

### <a name="team-roles-for-alm"></a>ALM のチームロール

これらのユーザーは、Contact Manager ソリューションの作成、管理、ビルド、発行に関与します。

- 元は、Fabrikam, Inc. の web アプリケーション開発者です。Visual Studio 2010 を使用して Contact Manager ソリューションを開発したチームの一員です。 この開発者テスト環境では、サーバーに対する完全な管理者権限を持っています。これにより、自分のニーズに合わせて環境を構成できます。 また、Contact Manager ソリューションのソースコードが格納されている Visual Studio 2010 TFS インスタンスにユーザーがアクセスできるようにします。
- 渡 Walters は、Fabrikam, Inc. 開発チームのサーバー管理者です。 渡者は tfs サーバーに対する管理アクセス権を持っているので、TFS とチームビルドのすべての要素を構成できます。 また、テスト用およびステージング用の web サーバーへの管理アクセス権があり、テスト環境とステージング環境のデータベースサーバーのデータベース管理者 (DBA) として機能します。 次のタスクを実行するように、渡されるチームビルドを TFS サーバー上に構成しました。

    - ユーザーがファイルを TFS にチェックインするたびに、アプリケーションに対して単体テストをビルドして実行します。 これは CI と呼ばれます。
    - アプリケーションが単体テストに合格したら、連絡先マネージャーアプリケーションをテスト環境に自動的に配置します。 これには、初期配置時のテストサーバーへのデータベースの発行と、初期配置後のデータベースへの更新が含まれます。
    - シングルステップのプロセスで、コンタクトマネージャーアプリケーションをステージング環境にデプロイします。
    - Web サーバー管理者と DBA がアプリケーションを運用環境に発行するために使用できる Web パッケージを作成します。
- 根本アンドリュースは、Fabrikam, Inc. の実稼働サーバーにアプリケーションをデプロイするサーバー管理者です。 Alice は、連絡先マネージャーアプリケーションをビルドした後に、TFS チームのビルドによって web 配置パッケージが格納される共有に対する読み取りアクセス権を持っています。 また、運用 web サーバーへの管理アクセス権も持っているため、運用環境にアプリケーションをデプロイできます。 さらに、データベースおよびデータベースの更新を運用環境のデータベースサーバーに配置する DBA として機能します。

<a id="_The_Contact_Manager"></a>

### <a name="the-contact-manager-solution"></a>連絡先マネージャー ソリューション

Contact Manager ソリューションは、登録済みのログインユーザーが web インターフェイスを使用して連絡先情報を追加および編集できるように設計されています。 Contact Manager ソリューションは、次の4つのプロジェクトで構成されています。

![](enterprise-web-deployment-scenario-overview/_static/image2.png)

- **Contactmanager. Mvc**。 これは、ソリューションのエントリポイントを表す ASP.NET MVC3 web アプリケーションプロジェクトです。 これには、ユーザーが連絡先の詳細を作成して表示できるようにするなど、基本的な web アプリケーション機能がいくつか用意されています。 アプリケーションは、Windows Communication Foundation (WCF) サービスを利用して連絡先と ASP.NET アプリケーションサービスデータベースを管理し、認証と承認を管理します。
- **Contactmanager. データベース**。 これは、Visual Studio 2010 データベースプロジェクトです。 プロジェクトでは、連絡先の詳細を格納するデータベースのスキーマを定義します。
- **Contactmanager. サービス**。 これは、WCF web サービスプロジェクトです。 WCF は、呼び出し元が Contact Manager データベースに対して作成、取得、更新、削除 (CRUD) 操作を実行できるようにするエンドポイントを公開します。 サービスは、Contact Manager データベースと ContactManager. 共通 .dll アセンブリに依存します。
- **Contactmanager. 共通**。 これはクラスライブラリプロジェクトです。 WCF サービスは、このアセンブリで定義されている型に依存しています。

ソリューションとそのデプロイ要件の完全な確認については、このシリーズの最初のチュートリアル「[企業での Web 配置](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md)」を参照してください。

<a id="_Deployment_Tasks"></a>

## <a name="deployment-tasks"></a>配置タスク

大規模な組織のさまざまな環境へのアプリケーションの展開には、いくつかの異なるタスクが含まれています。 チュートリアルに含まれる主なタスクは次のとおりです。

![](enterprise-web-deployment-scenario-overview/_static/image3.png)

このドキュメントで既に説明したユーザーの観点から、デプロイプロセスの各手順の一覧を次に示します。

1. チームのすべてのメンバーは、Visual Studio 2010 の Contact Manager ソリューションをレビューして、デプロイの重要な要件と問題を確認します。
2. また、開発者のワークステーションから開発者テスト環境に直接 Contact Manager ソリューションをデプロイして、デプロイロジックの初期テストを実施することもできます。
3. このアプリケーションを TFS のソース管理に追加します。
4. 渡 Walters は、チームビルドの Contact Manager ソリューションに対してさまざまなビルド定義を作成します。 1つのビルド定義では、ユーザーが新しいコードをチェックインするたびに、CI を使用して開発者テスト環境にソリューションを配置します。 別のビルド定義によって、ユーザーは必要に応じてステージング環境へのデプロイをトリガーできます。
5. ユーザーが新しいコードをチェックインするたびに、チームビルドによって自動的にソリューションコンポーネントがビルドされ、単体テストが実行されます。ビルドが成功し、単体テストに合格した場合は、開発者テスト環境にソリューションが配置されます。
6. ユーザーがステージング環境への配置をトリガーすると、ソリューションがパッケージ化され、単一の手順で配置されます。 このプロセスでは、運用環境に手動で展開するためのパッケージも生成されます。
7. 根本アンドリュースは、手順 6. で作成した web パッケージを手動でインポートすることによって、アプリケーションを運用環境にデプロイします。

### <a name="key-deployment-issues"></a>主要な展開に関する問題

Contact Manager ソリューションと Fabrikam, Inc. のシナリオでは、複雑なエンタープライズ規模のソリューションをデプロイするときに発生する可能性がある、さまざまな一般的な問題と課題を取り上げています。 次に例を示します。

- 開発者やテスト環境、ステージングプラットフォーム、実稼働サーバーなど、複数の環境にプロジェクトを配置できる必要があります。 ソリューションは、環境ごとに異なる構成設定を使用して展開する必要があります。
- 単一ステップまたは自動化されたビルドおよび配置プロセスの一環として、複数の依存プロジェクトを同時に配置する必要があります。
- 自動プロセスから展開を促進できる必要があります。 たとえば、新しいコードがチェックインされたときに、CI プロセスを使用して、ステージング環境に web アプリケーションをデプロイするとします。
- 開発者は、デプロイプロセスを制御し、デプロイ変数を Visual Studio の外部から設定できる必要があります。これは、開発者がすべてのターゲット環境に対して適切な構成設定または必要な資格情報を持っていない可能性があるためです。
- スキーマベースのデータベースプロジェクトを配置し、後続の配置で既存のデータを保持する必要があります。
- ユーザーアカウントデータを展開せずに、メンバーシップデータベースをアドホックにデプロイする必要がある。 また、既存のユーザーアカウントデータを失うことなく、デプロイされたメンバーシップデータベースのスキーマを更新する必要がある場合もあります。
- さまざまなターゲット環境にコンテンツを展開する場合は、特定のファイルまたはフォルダーを除外する必要があります。

さらに、更新が頻繁に行われる場合にデプロイを管理すると、追加の課題がいくつかスローされます。 次に例を示します。

- 開発者が新しいコードをチェックインするたびに単体テストを実行します。 コードが単体テストに合格した場合にのみ、ソリューションを配置します。
- Web アプリケーションをステージング環境または運用環境に配置する場合は、展開プロセスの間、ユーザーを*オフライン .htm ファイル\_アプリ*にリダイレクトする必要があります。
- デプロイアクティビティをログに記録します。 展開プロセスでは、指定された受信者に展開が成功したか失敗したかを通知する電子メールが送信されます。
- 自動デプロイが失敗した場合は、展開プロセスで現在のデプロイを再試行するか、前の web パッケージを展開する必要があります。

> [!div class="step-by-step"]
> [前へ](deploying-web-applications-in-enterprise-scenarios.md)
> [次へ](application-lifecycle-management-from-development-to-production.md)
