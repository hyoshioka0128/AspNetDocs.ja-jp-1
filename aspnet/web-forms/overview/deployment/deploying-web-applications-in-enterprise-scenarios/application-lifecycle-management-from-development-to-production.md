---
uid: web-forms/overview/deployment/deploying-web-applications-in-enterprise-scenarios/application-lifecycle-management-from-development-to-production
title: 'アプリケーションライフサイクル管理: 開発から運用、Microsoft Docs'
author: jrjlee
description: このトピックでは、架空の企業が、テスト環境、ステージング環境、および運用環境を通じて ASP.NET web アプリケーションのデプロイを管理する方法について説明します。
ms.author: riande
ms.date: 05/04/2012
ms.assetid: f97a1145-6470-4bca-8f15-ccfb25fb903c
msc.legacyurl: /web-forms/overview/deployment/deploying-web-applications-in-enterprise-scenarios/application-lifecycle-management-from-development-to-production
msc.type: authoredcontent
ms.openlocfilehash: 230cf4393db0ee19cfc42ed54359d61e7926a49d
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78520426"
---
# <a name="application-lifecycle-management-from-development-to-production"></a><span data-ttu-id="fa9a2-103">アプリケーションライフサイクル管理: 開発から運用まで</span><span class="sxs-lookup"><span data-stu-id="fa9a2-103">Application Lifecycle Management: From Development to Production</span></span>

<span data-ttu-id="fa9a2-104">[Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="fa9a2-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

<span data-ttu-id="fa9a2-105">[[Download PDF]\(PDF をダウンロード\)](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span><span class="sxs-lookup"><span data-stu-id="fa9a2-105">[Download PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span></span>

> <span data-ttu-id="fa9a2-106">このトピックでは、架空の企業が、継続的な開発プロセスの一環として、テスト環境、ステージング環境、および運用環境を通じて ASP.NET web アプリケーションのデプロイを管理する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-106">This topic illustrates how a fictional company manages the deployment of an ASP.NET web application through test, staging, and production environments as part of a continuous development process.</span></span> <span data-ttu-id="fa9a2-107">トピック全体で、特定のタスクの実行方法に関する詳細情報とチュートリアルへのリンクが提供されています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-107">Throughout the topic, links are provided to further information and walkthroughs on how to perform specific tasks.</span></span>
> 
> <span data-ttu-id="fa9a2-108">このトピックは、企業での web 展開に関する[一連のチュートリアル](deploying-web-applications-in-enterprise-scenarios.md)の概要を説明することを目的としています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-108">The topic is designed to provide a high-level overview for a [series of tutorials](deploying-web-applications-in-enterprise-scenarios.md) on web deployment in the enterprise.</span></span> <span data-ttu-id="fa9a2-109">ここで&#x2014;説明するいくつかの概念を理解していない場合は、これらのすべてのタスクと手法について詳しく説明しているチュートリアルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-109">Don't worry if you're not familiar with some of the concepts described here&#x2014;the tutorials that follow provide detailed information on all of these tasks and techniques.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="fa9a2-110">わかりやすくするために、このトピックでは、配置プロセスの一部としてのデータベースの更新については説明しません。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-110">For the sake of simplicity, this topic doesn't discuss updating databases as part of the deployment process.</span></span> <span data-ttu-id="fa9a2-111">ただし、データベース機能の増分更新は、多くのエンタープライズ展開シナリオで必要とされます。この方法については、このチュートリアルシリーズの後の方で説明します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-111">However, making incremental updates to databases features is a requirement of many enterprise deployment scenarios, and you can find guidance on how to accomplish this later in this tutorial series.</span></span> <span data-ttu-id="fa9a2-112">詳細については、「[データベースプロジェクトの配置](../web-deployment-in-the-enterprise/deploying-database-projects.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-112">For more information, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span>

## <a name="overview"></a><span data-ttu-id="fa9a2-113">概要</span><span class="sxs-lookup"><span data-stu-id="fa9a2-113">Overview</span></span>

<span data-ttu-id="fa9a2-114">ここに示すデプロイプロセスは、「[エンタープライズ Web デプロイ: シナリオの概要](enterprise-web-deployment-scenario-overview.md)」で説明されている Fabrikam, inc. のデプロイシナリオに基づいています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-114">The deployment process illustrated here is based on the Fabrikam, Inc. deployment scenario described in [Enterprise Web Deployment: Scenario Overview](enterprise-web-deployment-scenario-overview.md).</span></span> <span data-ttu-id="fa9a2-115">このトピックを学習する前に、シナリオの概要をお読みください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-115">You should read the scenario overview before you study this topic.</span></span> <span data-ttu-id="fa9a2-116">基本的に、このシナリオでは、通常のエンタープライズ環境におけるさまざまなフェーズを通じて、適度に複雑な web アプリケーション ( [Contact Manager ソリューション](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)) の展開を組織が管理する方法を確認します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-116">Essentially, the scenario examines how an organization manages the deployment of a reasonably complex web application, the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md), through various phases in a typical enterprise environment.</span></span>

<span data-ttu-id="fa9a2-117">大まかに言えば、Contact Manager ソリューションは、開発とデプロイのプロセスの一部として、これらの段階を通過します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-117">At a high level, the Contact Manager solution goes through these stages as part of the development and deployment process:</span></span>

1. <span data-ttu-id="fa9a2-118">開発者は、一部のコードを Team Foundation Server (TFS) 2010 にチェックインします。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-118">A developer checks some code into Team Foundation Server (TFS) 2010.</span></span>
2. <span data-ttu-id="fa9a2-119">TFS は、コードをビルドし、チームプロジェクトに関連付けられているすべての単体テストを実行します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-119">TFS builds the code and runs any unit tests associated with the team project.</span></span>
3. <span data-ttu-id="fa9a2-120">TFS によって、ソリューションがテスト環境に配置されます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-120">TFS deploys the solution to the test environment.</span></span>
4. <span data-ttu-id="fa9a2-121">開発チームは、テスト環境でソリューションを検証し、検証します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-121">The developer team verifies and validates the solution in the test environment.</span></span>
5. <span data-ttu-id="fa9a2-122">ステージング環境の管理者は、ステージング環境への "what-if" 展開を実行して、デプロイで問題が発生するかどうかを確立します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-122">The staging environment administrator performs a "what if" deployment to the staging environment, to establish whether the deployment will cause any problems.</span></span>
6. <span data-ttu-id="fa9a2-123">ステージング環境の管理者は、ステージング環境へのライブデプロイを実行します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-123">The staging environment administrator performs a live deployment to the staging environment.</span></span>
7. <span data-ttu-id="fa9a2-124">このソリューションでは、ステージング環境でユーザー受け入れテストを実施します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-124">The solution undergoes user acceptance testing in the staging environment.</span></span>
8. <span data-ttu-id="fa9a2-125">Web 配置パッケージは、手動で運用環境にインポートされます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-125">The web deployment packages are manually imported into the production environment.</span></span>

<span data-ttu-id="fa9a2-126">これらのステージは、継続的な開発サイクルの一部を形成します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-126">These stages form part of a continuous development cycle.</span></span>

![](application-lifecycle-management-from-development-to-production/_static/image1.png)

<span data-ttu-id="fa9a2-127">実際には、各ステージについて詳しく説明しているように、このプロセスよりも少し複雑になります。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-127">In practice, the process is slightly more complicated than this, as you'll see when we look at each stage in more detail.</span></span> <span data-ttu-id="fa9a2-128">Fabrikam, Inc. は、ターゲット環境ごとに異なるアプローチを使用して配置を行います。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-128">Fabrikam, Inc. uses a different approach to deployment for each target environment.</span></span>

![](application-lifecycle-management-from-development-to-production/_static/image2.png)

<span data-ttu-id="fa9a2-129">このトピックの残りの部分では、このデプロイライフサイクルの次の主要な段階について説明します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-129">The rest of this topic examines these key stages of this deployment lifecycle:</span></span>

- <span data-ttu-id="fa9a2-130">**前提条件**: 配置ロジックを配置する前に、サーバーインフラストラクチャをどのように構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-130">**Prerequisites**: How you need to configure your server infrastructure before you put your deployment logic in place.</span></span>
- <span data-ttu-id="fa9a2-131">最初の**開発と配置**: ソリューションを初めて配置する前に行う必要があること。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-131">**Initial development and deployment**: What you need to do before you deploy your solution for the first time.</span></span>
- <span data-ttu-id="fa9a2-132">**テストへの配置**: 開発者が新しいコードをチェックインするときに、テスト環境にコンテンツをパッケージ化して配置する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-132">**Deployment to test**: How to package and deploy content to a test environment automatically when a developer checks in new code.</span></span>
- <span data-ttu-id="fa9a2-133">**ステージング環境への配置**: ステージング環境に特定のビルドを配置する方法と、"what-if" 配置を実行して問題が発生しないようにする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-133">**Deployment to staging**: How to deploy specific builds to a staging environment and how to perform "what if" deployments to ensure that a deployment won't cause any problems.</span></span>
- <span data-ttu-id="fa9a2-134">**運用環境への配置**: ネットワークインフラストラクチャがリモート展開を妨げている場合に、運用環境に web パッケージをインポートする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-134">**Deployment to production**: How to import web packages into a production environment when network infrastructure prevents remote deployment.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="fa9a2-135">前提条件</span><span class="sxs-lookup"><span data-stu-id="fa9a2-135">Prerequisites</span></span>

<span data-ttu-id="fa9a2-136">配置シナリオの最初のタスクは、サーバーインフラストラクチャが展開ツールと手法の要件を満たしていることを確認することです。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-136">The first task in any deployment scenario is to ensure that your server infrastructure meets the requirements of your deployment tools and techniques.</span></span> <span data-ttu-id="fa9a2-137">この場合、Fabrikam, Inc. は、次のようなサーバーインフラストラクチャを構成しています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-137">In this case, Fabrikam, Inc. has configured its server infrastructure like this:</span></span>

- <span data-ttu-id="fa9a2-138">TFS は、チームプロジェクトコレクション、ビルドコントローラー、およびビルドエージェントを含めるように構成されています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-138">TFS is configured to include a team project collection, build controllers, and build agents.</span></span> <span data-ttu-id="fa9a2-139">詳細については、「[自動 Web 展開の Team Foundation Server の構成](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-139">See [Configuring Team Foundation Server for Automated Web Deployment](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md) for more information.</span></span>
- <span data-ttu-id="fa9a2-140">テスト環境は、web Deployment Agent サービス ("リモートエージェント") を使用したリモート展開を受け入れるように構成されています。詳細については、「 [Web 配置用のテスト環境を構成](../configuring-server-environments-for-web-deployment/scenario-configuring-a-test-environment-for-web-deployment.md)する」および「 [Web 配置発行用に Web サーバーを構成する (リモートエージェント)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-140">The test environment is configured to accept remote deployments using the Web Deployment Agent Service (the "remote agent"), as described in [Scenario: Configuring a Test Environment for Web Deployment](../configuring-server-environments-for-web-deployment/scenario-configuring-a-test-environment-for-web-deployment.md) and [Configure a Web Server for Web Deploy Publishing (Remote Agent)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md).</span></span>
- <span data-ttu-id="fa9a2-141">ステージング環境は、Web 配置ハンドラエンドポイントを使用したリモートデプロイを受け入れるように構成されています。「[シナリオ: Web デプロイのステージング環境の構成](../configuring-server-environments-for-web-deployment/scenario-configuring-a-staging-environment-for-web-deployment.md)」および「 [Web 配置発行用の Web サーバーの構成 (Web 配置ハンドラー)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-141">The staging environment is configured to accept remote deployments using the Web Deploy Handler endpoint, as described in [Scenario: Configuring a Staging Environment for Web Deployment](../configuring-server-environments-for-web-deployment/scenario-configuring-a-staging-environment-for-web-deployment.md) and [Configure a Web Server for Web Deploy Publishing (Web Deploy Handler)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span></span>
- <span data-ttu-id="fa9a2-142">運用環境は、管理者が web 配置パッケージをインターネットインフォメーションサービス (IIS) に手動でインポートできるように構成されています。詳細については、「 [Web 配置用の運用環境の構成](../configuring-server-environments-for-web-deployment/scenario-configuring-a-production-environment-for-web-deployment.md)」および「 [Web 配置発行用に Web サーバーを構成する (オフライン展開)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-142">The production environment is configured to allow an administrator to manually import web deployment packages into Internet Information Services (IIS), as described in [Scenario: Configuring a Production Environment for Web Deployment](../configuring-server-environments-for-web-deployment/scenario-configuring-a-production-environment-for-web-deployment.md) and [Configure a Web Server for Web Deploy Publishing (Offline Deployment)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md).</span></span>

## <a name="initial-development-and-deployment"></a><span data-ttu-id="fa9a2-143">初期の開発と配置</span><span class="sxs-lookup"><span data-stu-id="fa9a2-143">Initial Development and Deployment</span></span>

<span data-ttu-id="fa9a2-144">Fabrikam 社の開発チームは、初めて Contact Manager ソリューションをデプロイする前に、次のタスクを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-144">Before the Fabrikam, Inc. development team can deploy the Contact Manager solution for the first time, it needs to perform these tasks:</span></span>

- <span data-ttu-id="fa9a2-145">TFS で新しいチームプロジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-145">Create a new team project in TFS.</span></span>
- <span data-ttu-id="fa9a2-146">配置ロジックを含む Microsoft Build Engine (MSBuild) プロジェクトファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-146">Create the Microsoft Build Engine (MSBuild) project files that contain the deployment logic.</span></span>
- <span data-ttu-id="fa9a2-147">デプロイプロセスをトリガーする TFS ビルド定義を作成します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-147">Create the TFS build definitions that trigger the deployment processes.</span></span>

### <a name="create-a-new-team-project"></a><span data-ttu-id="fa9a2-148">新しいチームプロジェクトの作成</span><span class="sxs-lookup"><span data-stu-id="fa9a2-148">Create a New Team Project</span></span>

- <span data-ttu-id="fa9a2-149">Tfs 管理者 Walters は、「 [tfs でのチームプロジェクトの作成](../configuring-team-foundation-server-for-web-deployment/creating-a-team-project-in-tfs.md)」の説明に従って、アプリケーションの新しいチームプロジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-149">The TFS administrator, Rob Walters, creates a new team project for the application, as described in [Creating a Team Project in TFS](../configuring-team-foundation-server-for-web-deployment/creating-a-team-project-in-tfs.md).</span></span> <span data-ttu-id="fa9a2-150">次に、リード開発者であるのは、スケルトンソリューションを作成します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-150">Next, the lead developer, Matt Hink, creates a skeleton solution.</span></span> <span data-ttu-id="fa9a2-151">彼は、「[ソース管理にコンテンツを追加する](../configuring-team-foundation-server-for-web-deployment/adding-content-to-source-control.md)」で説明されているように、TFS でファイルを新しいチームプロジェクトにチェックインします。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-151">He checks his files into the new team project in TFS, as described in [Adding Content to Source Control](../configuring-team-foundation-server-for-web-deployment/adding-content-to-source-control.md).</span></span>

### <a name="create-the-deployment-logic"></a><span data-ttu-id="fa9a2-152">配置ロジックを作成する</span><span class="sxs-lookup"><span data-stu-id="fa9a2-152">Create the Deployment Logic</span></span>

<span data-ttu-id="fa9a2-153">「[プロジェクトファイルについ](../web-deployment-in-the-enterprise/understanding-the-project-file.md)て」で説明されている「プロジェクトファイルの分割」の方法を使用して、さまざまなカスタム MSBuild プロジェクトファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-153">Matt Hink creates various custom MSBuild project files, using the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span> <span data-ttu-id="fa9a2-154">次のように作成します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-154">Matt creates:</span></span>

- <span data-ttu-id="fa9a2-155">配置プロセスを実行する*Publish. proj*という名前のプロジェクトファイル。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-155">A project file named *Publish.proj* that runs the deployment process.</span></span> <span data-ttu-id="fa9a2-156">このファイルには、ソリューション内のプロジェクトをビルドし、web パッケージを作成して、移行先サーバー環境にパッケージを配置する MSBuild ターゲットが含まれています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-156">This file contains MSBuild targets that build the projects in the solution, create web packages, and deploy the packages to a destination server environment.</span></span>
- <span data-ttu-id="fa9a2-157">*Env-Dev. proj*と*env*という名前の環境固有のプロジェクトファイル。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-157">Environment-specific project files named *Env-Dev.proj* and *Env-Stage.proj*.</span></span> <span data-ttu-id="fa9a2-158">これらの設定には、テスト環境とステージング環境に固有の設定 (接続文字列、サービスエンドポイント、web パッケージを受信するリモートサービスの詳細など) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-158">These contain settings that are specific to the test environment and the staging environment respectively, like connection strings, service endpoints, and the details of the remote service that will receive the web package.</span></span> <span data-ttu-id="fa9a2-159">特定の宛先環境に適した設定を選択するためのガイダンスについては、「[ターゲット環境の配置プロパティを構成する](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-159">For guidance on choosing the right settings for specific destination environments, see [Configure Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>

<span data-ttu-id="fa9a2-160">配置を実行するには、ユーザーが MSBuild またはチームビルドを使用して発行元の*proj*ファイルを実行し、コマンドライン引数として、関連する環境固有のプロジェクトファイル (*Env*または*env*) の場所を指定します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-160">To run the deployment, a user executes the *Publish.proj* file using MSBuild or Team Build and specifies the location of the relevant environment-specific project file (*Env-Dev.proj* or *Env-Stage.proj*) as a command-line argument.</span></span> <span data-ttu-id="fa9a2-161">次に、 *Publish*ファイルは環境固有のプロジェクトファイルをインポートして、各ターゲット環境に対して発行命令の完全なセットを作成します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-161">The *Publish.proj* file then imports the environment-specific project file to create a complete set of publishing instructions for each target environment.</span></span>

> [!NOTE]
> <span data-ttu-id="fa9a2-162">これらのカスタムプロジェクトファイルの動作は、MSBuild を呼び出すために使用するメカニズムに依存しません。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-162">The way these custom project files work is independent of the mechanism you use to invoke MSBuild.</span></span> <span data-ttu-id="fa9a2-163">たとえば、「[プロジェクトファイルについ](../web-deployment-in-the-enterprise/understanding-the-project-file.md)て」で説明されているように、MSBuild コマンドラインを直接使用することができます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-163">For example, you can use the MSBuild command line directly, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span> <span data-ttu-id="fa9a2-164">「[配置コマンドファイルを作成して実行](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md)する」の説明に従って、コマンドファイルからプロジェクトファイルを実行できます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-164">You can run the project files from a command file, as described in [Create and Run a Deployment Command File](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).</span></span> <span data-ttu-id="fa9a2-165">または、「[配置をサポートするビルド定義の作成](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md)」で説明されているように、TFS のビルド定義からプロジェクトファイルを実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-165">Alternatively, you can run the project files from a build definition in TFS, as described in [Creating a Build Definition that Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>  
> <span data-ttu-id="fa9a2-166">どちらの場合も、最終的には、&#x2014;同じ MSBuild がマージされたプロジェクトファイルを実行し、ソリューションをターゲット環境に配置します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-166">In each case the end result is the same&#x2014;MSBuild executes the merged project file and deploys your solution to the target environment.</span></span> <span data-ttu-id="fa9a2-167">これにより、発行プロセスをトリガーするための柔軟性が大幅に向上します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-167">This provides you with a great deal of flexibility in how you trigger your publishing process.</span></span>

<span data-ttu-id="fa9a2-168">カスタムプロジェクトファイルを作成したら、そのファイルをソリューションフォルダーに追加し、ソース管理にチェックインします。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-168">Once he has created the custom project files, Matt adds them to a solution folder and checks them into source control.</span></span>

### <a name="create-build-definitions"></a><span data-ttu-id="fa9a2-169">ビルド定義の作成</span><span class="sxs-lookup"><span data-stu-id="fa9a2-169">Create Build Definitions</span></span>

<span data-ttu-id="fa9a2-170">最終的な準備タスクとして、次のようにして、新しいチームプロジェクトの3つのビルド定義を作成します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-170">As a final preparation task, Matt and Rob work together to create three build definitions for the new team project:</span></span>

- <span data-ttu-id="fa9a2-171">**Deploytotest**。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-171">**DeployToTest**.</span></span> <span data-ttu-id="fa9a2-172">これにより、Contact Manager ソリューションがビルドされ、チェックインが行われるたびに、テスト環境に配置されます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-172">This builds the Contact Manager solution and deploys it to the test environment every time a check-in occurs.</span></span>
- <span data-ttu-id="fa9a2-173">**Deploytostaging**。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-173">**DeployToStaging**.</span></span> <span data-ttu-id="fa9a2-174">これにより、開発者がビルドをキューに配置するときに、指定した前のビルドからステージング環境にリソースがデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-174">This deploys resources from a specified previous build to the staging environment when a developer queues the build.</span></span>
- <span data-ttu-id="fa9a2-175">**Deploytostaging-WhatIf**。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-175">**DeployToStaging-WhatIf**.</span></span> <span data-ttu-id="fa9a2-176">これにより、開発者がビルドをキューに配置するときに、ステージング環境への "what-if" 配置が実行されます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-176">This performs a "what if" deployment to the staging environment when a developer queues the build.</span></span>

<span data-ttu-id="fa9a2-177">以下のセクションでは、これらの各ビルド定義の詳細について説明します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-177">The sections that follow provide more detail on each of these build definitions.</span></span>

## <a name="deployment-to-test"></a><span data-ttu-id="fa9a2-178">テストする配置</span><span class="sxs-lookup"><span data-stu-id="fa9a2-178">Deployment to Test</span></span>

<span data-ttu-id="fa9a2-179">Fabrikam, Inc. の開発チームは、テスト環境を管理して、検証と検証、ユーザビリティテスト、互換性テスト、アドホックテスト、探索的テストなど、さまざまなソフトウェアテストアクティビティを実施します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-179">The development team at Fabrikam, Inc. maintains test environments to conduct a variety of software testing activities, like verification and validation, usability testing, compatibility testing, and ad hoc or exploratory testing.</span></span>

<span data-ttu-id="fa9a2-180">開発チームは、 **Deploytotest**という名前の TFS でビルド定義を作成しました。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-180">The development team has created a build definition in TFS named **DeployToTest**.</span></span> <span data-ttu-id="fa9a2-181">このビルド定義は継続的インテグレーショントリガーを使用します。これは、Fabrikam, Inc. の開発チームのメンバーがチェックインを実行するたびにビルドプロセスが実行されることを意味します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-181">This build definition uses a continuous integration trigger, which means the build process runs every time a member of the Fabrikam, Inc. development team performs a check-in.</span></span> <span data-ttu-id="fa9a2-182">ビルドがトリガーされると、ビルド定義は次のようになります。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-182">When a build is triggered, the build definition will:</span></span>

- <span data-ttu-id="fa9a2-183">ContactManager .sln ソリューションをビルドします。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-183">Build the ContactManager.sln solution.</span></span> <span data-ttu-id="fa9a2-184">これにより、ソリューション内のすべてのプロジェクトがビルドされます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-184">This in turn builds every project within the solution.</span></span>
- <span data-ttu-id="fa9a2-185">ソリューションのフォルダー構造で単体テストを実行します (ソリューションが正常にビルドされた場合)。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-185">Run any unit tests in the solution folder structure (if the solution builds successfully).</span></span>
- <span data-ttu-id="fa9a2-186">配置プロセスを制御するカスタムプロジェクトファイルを実行します (ソリューションが正常にビルドされ、単体テストが成功した場合)。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-186">Run the custom project files that control the deployment process (if the solution builds successfully and passes any unit tests).</span></span>

<span data-ttu-id="fa9a2-187">最終的には、ソリューションが正常にビルドされ、単体テストに合格すると、web パッケージとその他のデプロイリソースがテスト環境に配置されます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-187">The end result is that if the solution builds successfully and passes unit tests, the web packages and any other deployment resources are deployed to the test environment.</span></span>

![](application-lifecycle-management-from-development-to-production/_static/image3.png)

### <a name="how-does-the-deployment-process-work"></a><span data-ttu-id="fa9a2-188">デプロイプロセスはどのように機能しますか。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-188">How Does the Deployment Process Work?</span></span>

<span data-ttu-id="fa9a2-189">**Deploytotest**ビルド定義は、次の引数を MSBuild に提供します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-189">The **DeployToTest** build definition supplies these arguments to MSBuild:</span></span>

[!code-console[Main](application-lifecycle-management-from-development-to-production/samples/sample1.cmd)]

<span data-ttu-id="fa9a2-190">**Deployonbuild = true**および**deploytarget = パッケージ**のプロパティは、チームビルドがソリューション内のプロジェクトをビルドするときに使用されます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-190">The **DeployOnBuild=true** and **DeployTarget=package** properties are used when Team Build builds the projects within the solution.</span></span> <span data-ttu-id="fa9a2-191">プロジェクトが web アプリケーションプロジェクトの場合、これらのプロパティは MSBuild に対してプロジェクトの web 配置パッケージを作成するように指示します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-191">When the project is a web application project, these properties instruct MSBuild to create a web deployment package for the project.</span></span> <span data-ttu-id="fa9a2-192">**TargetEnvPropsFile**プロパティは、インポートする環境固有のプロジェクトファイルを検索する場所を指定し*ます。*</span><span class="sxs-lookup"><span data-stu-id="fa9a2-192">The **TargetEnvPropsFile** property tells the *Publish.proj* file where to find the environment-specific project file to import.</span></span>

> [!NOTE]
> <span data-ttu-id="fa9a2-193">このようなビルド定義を作成する方法の詳細なチュートリアルについては、「[配置をサポートするビルド定義の作成](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-193">For a detailed walkthrough on how to create a build definition like this, see [Creating a Build Definition that Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>

<span data-ttu-id="fa9a2-194">*Publish*ファイルには、ソリューション内の各プロジェクトをビルドするターゲットが含まれています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-194">The *Publish.proj* file contains targets that build each project in the solution.</span></span> <span data-ttu-id="fa9a2-195">ただし、チームビルドでファイルを実行している場合は、これらのビルドターゲットをスキップする条件付きロジックも含まれます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-195">However, it also includes conditional logic that skips these build targets if you're executing the file in Team Build.</span></span> <span data-ttu-id="fa9a2-196">これにより、単体テストを実行する機能など、チームビルドが提供する追加のビルド機能を利用できます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-196">This lets you take advantage of the additional build functionality that Team Build offers, like the ability to run unit tests.</span></span> <span data-ttu-id="fa9a2-197">ソリューションのビルドまたは単体テストが失敗した場合、*発行の proj*ファイルは実行されず、アプリケーションは配置されません。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-197">If the solution build or the unit tests fail, the *Publish.proj* file will not be executed and the application will not be deployed.</span></span>

<span data-ttu-id="fa9a2-198">条件付きロジックは、 **BuildingInTeamBuild**プロパティを評価することによって実現されます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-198">The conditional logic is accomplished by evaluating the **BuildingInTeamBuild** property.</span></span> <span data-ttu-id="fa9a2-199">これは、チームビルドを使用してプロジェクトをビルドするときに自動的に**true**に設定される MSBuild プロパティです。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-199">This is an MSBuild property that is automatically set to **true** when you use Team Build to build your projects.</span></span>

## <a name="deployment-to-staging"></a><span data-ttu-id="fa9a2-200">ステージング環境へのデプロイ</span><span class="sxs-lookup"><span data-stu-id="fa9a2-200">Deployment to Staging</span></span>

<span data-ttu-id="fa9a2-201">ビルドがテスト環境で開発チームのすべての要件を満たしている場合、チームは同じビルドをステージング環境に配置することができます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-201">When a build meets all of the requirements of the developer team in the test environment, the team may want to deploy the same build to a staging environment.</span></span> <span data-ttu-id="fa9a2-202">ステージング環境は、通常、運用環境または "ライブ" 環境の特性 (サーバーの仕様、オペレーティングシステムとソフトウェア、ネットワーク構成など) と一致するように構成されています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-202">Staging environments are typically configured to match the characteristics of the production or "live" environment as closely as possible, for example, in terms of server specifications, operating systems and software, and network configuration.</span></span> <span data-ttu-id="fa9a2-203">ステージング環境は、ロードテスト、ユーザー受け入れテスト、および広範な内部レビューによく使用されます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-203">Staging environments are often used for load testing, user acceptance testing, and broader internal reviews.</span></span> <span data-ttu-id="fa9a2-204">ビルドは、ビルドサーバーから直接ステージング環境に配置されます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-204">Builds are deployed to the staging environment directly from the build server.</span></span>

![](application-lifecycle-management-from-development-to-production/_static/image4.png)

<span data-ttu-id="fa9a2-205">ソリューションをステージング環境に配置するために使用されるビルド定義 ( **deploytostaging-WhatIf**および**deploytostaging**) は、次の特性を共有します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-205">The build definitions used to deploy the solution to the staging environment, **DeployToStaging-WhatIf** and **DeployToStaging**, share these characteristics:</span></span>

- <span data-ttu-id="fa9a2-206">実際には何もビルドしません。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-206">They don't actually build anything.</span></span> <span data-ttu-id="fa9a2-207">渡されるソリューションをステージング環境にデプロイする場合、テスト環境で既に検証および検証済みの特定の既存のビルドを配置したいと考えています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-207">When Rob deploys the solution to the staging environment, he wants to deploy a specific, existing build that's already been verified and validated in the test environment.</span></span> <span data-ttu-id="fa9a2-208">ビルド定義では、配置プロセスを制御するカスタムプロジェクトファイルを実行するだけで済みます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-208">The build definitions just need to run the custom project files that control the deployment process.</span></span>
- <span data-ttu-id="fa9a2-209">渡されるビルドをトリガーする場合、ビルドパラメーターを使用して、ビルドサーバーから配置するリソースを含むビルドを指定します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-209">When Rob triggers a build, he uses the build parameters to specify which build contains the resources he wants to deploy from the build server.</span></span>
- <span data-ttu-id="fa9a2-210">ビルド定義は自動的にはトリガーされません。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-210">The build definitions are not triggered automatically.</span></span> <span data-ttu-id="fa9a2-211">ステージング環境にソリューションをデプロイする場合は、手動でビルドをキューに配置します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-211">Rob manually queues a build when he wants to deploy the solution to the staging environment.</span></span>

<span data-ttu-id="fa9a2-212">ステージング環境へのデプロイに関する大まかなプロセスは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-212">This is the high-level process for a deployment to the staging environment:</span></span>

1. <span data-ttu-id="fa9a2-213">ステージング環境管理者である渡 Walters は、 **Deploytostaging-WhatIf**ビルド定義を使用してビルドをキューに置いています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-213">The staging environment administrator, Rob Walters, queues a build using the **DeployToStaging-WhatIf** build definition.</span></span> <span data-ttu-id="fa9a2-214">渡されるビルド定義パラメーターを使用して、配置するビルドを指定します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-214">Rob uses the build definition parameters to specify which build he wants to deploy.</span></span>
2. <span data-ttu-id="fa9a2-215">**Deploytostaging-WhatIf**ビルド定義は、"what-if" モードでカスタムプロジェクトファイルを実行します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-215">The **DeployToStaging-WhatIf** build definition runs the custom project files in "what if" mode.</span></span> <span data-ttu-id="fa9a2-216">これにより、渡がライブデプロイを実行したかのようにログファイルが生成されますが、実際には移行先の環境が変更されることはありません。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-216">This generates log files as if Rob was performing a live deployment, but it doesn't actually make any changes to the destination environment.</span></span>
3. <span data-ttu-id="fa9a2-217">渡されるログファイルをレビューして、ステージング環境でのデプロイの影響を確認します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-217">Rob reviews the log files to ascertain the effects of the deployment on the staging environment.</span></span> <span data-ttu-id="fa9a2-218">具体的には、渡される内容、更新される内容、削除される内容を確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-218">In particular, Rob wants to check what will be added, what will be updated, and what will be deleted.</span></span>
4. <span data-ttu-id="fa9a2-219">配置によって既存のリソースやデータに対して望ましくない変更が行われないことを確認した場合は、 **Deploytostaging**ビルド定義を使用してビルドをキューに配置します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-219">If Rob is satisfied that the deployment won't make any undesirable changes to existing resources or data, he queues a build using the **DeployToStaging** build definition.</span></span>
5. <span data-ttu-id="fa9a2-220">**Deploytostaging**ビルド定義は、カスタムプロジェクトファイルを実行します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-220">The **DeployToStaging** build definition runs the custom project files.</span></span> <span data-ttu-id="fa9a2-221">これにより、ステージング環境のプライマリ web サーバーにデプロイリソースが発行されます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-221">These publish the deployment resources to the primary web server in the staging environment.</span></span>
6. <span data-ttu-id="fa9a2-222">Web Farm Framework (WFF) コントローラーは、ステージング環境の web サーバーを同期します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-222">The Web Farm Framework (WFF) controller synchronizes the web servers in the staging environment.</span></span> <span data-ttu-id="fa9a2-223">これにより、サーバーファーム内のすべての web サーバーでアプリケーションを使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-223">This makes the application available on all the web servers in the server farm.</span></span>

### <a name="how-does-the-deployment-process-work"></a><span data-ttu-id="fa9a2-224">デプロイプロセスはどのように機能しますか。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-224">How Does the Deployment Process Work?</span></span>

<span data-ttu-id="fa9a2-225">**Deploytostaging**ビルド定義は、次の引数を MSBuild に提供します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-225">The **DeployToStaging** build definition supplies these arguments to MSBuild:</span></span>

[!code-console[Main](application-lifecycle-management-from-development-to-production/samples/sample2.cmd)]

<span data-ttu-id="fa9a2-226">**TargetEnvPropsFile**プロパティは、インポートする環境固有のプロジェクトファイルを検索する場所を指定し*ます。*</span><span class="sxs-lookup"><span data-stu-id="fa9a2-226">The **TargetEnvPropsFile** property tells the *Publish.proj* file where to find the environment-specific project file to import.</span></span> <span data-ttu-id="fa9a2-227">**Outputroot**プロパティは、組み込みの値をオーバーライドし、デプロイするリソースを含むビルドフォルダーの場所を示します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-227">The **OutputRoot** property overrides the built-in value and indicates the location of the build folder that contains the resources you want to deploy.</span></span> <span data-ttu-id="fa9a2-228">渡がビルドをキューに置いたときに、 **[パラメーター]** タブを使用して**outputroot**プロパティの更新された値を指定します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-228">When Rob queues the build, he uses the **Parameters** tab to provide an updated value for the **OutputRoot** property.</span></span>

![](application-lifecycle-management-from-development-to-production/_static/image5.png)

> [!NOTE]
> <span data-ttu-id="fa9a2-229">このようなビルド定義を作成する方法の詳細については、「[特定のビルドを配置](../configuring-team-foundation-server-for-web-deployment/deploying-a-specific-build.md)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-229">For more information on how to create a build definition like this, see [Deploy a Specific Build](../configuring-team-foundation-server-for-web-deployment/deploying-a-specific-build.md).</span></span>

<span data-ttu-id="fa9a2-230">**Deploytostaging-WhatIf**ビルド定義には、 **deploytostaging**ビルド定義と同じ配置ロジックが含まれています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-230">The **DeployToStaging-WhatIf** build definition contains the same deployment logic as the **DeployToStaging** build definition.</span></span> <span data-ttu-id="fa9a2-231">ただし、追加の引数**WhatIf = true**が含まれています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-231">However, it includes the additional argument **WhatIf=true**:</span></span>

[!code-console[Main](application-lifecycle-management-from-development-to-production/samples/sample3.cmd)]

<span data-ttu-id="fa9a2-232">"WhatIf *" ファイル内*では、 **WhatIf**プロパティによって、すべてのデプロイリソースが "what-if" モードで公開される必要があることが示されます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-232">Within the *Publish.proj* file, the **WhatIf** property indicates that all deployment resources should be published in "what if" mode.</span></span> <span data-ttu-id="fa9a2-233">つまり、配置が先に進んでいるかのようにログファイルが生成されますが、移行先の環境では実際には何も変更されません。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-233">In other words, log files are generated as if the deployment had gone ahead, but nothing is actually changed in the destination environment.</span></span> <span data-ttu-id="fa9a2-234">これにより、提案された展開&#x2014;の影響、特に何が追加されるか、何が更新されるか、&#x2014;および実際に変更を行う前に何が削除されるかを評価できます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-234">This lets you evaluate the impact of a proposed deployment&#x2014;in particular, what will get added, what will get updated, and what will get deleted&#x2014;before you actually make any changes.</span></span>

> [!NOTE]
> <span data-ttu-id="fa9a2-235">"What-if" 展開を構成する方法の詳細については、「 ["What If" 展開の実行](../advanced-enterprise-web-deployment/performing-a-what-if-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-235">For more information on how to configure "what if" deployments, see [Performing a "What If" Deployment](../advanced-enterprise-web-deployment/performing-a-what-if-deployment.md).</span></span>

<span data-ttu-id="fa9a2-236">ステージング環境でプライマリ web サーバーにアプリケーションをデプロイすると、WFF はサーバーファーム内のすべてのサーバー間でアプリケーションを自動的に同期します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-236">Once you've deployed your application to the primary web server in the staging environment, the WFF will automatically synchronize the application across all the servers in the server farm.</span></span>

> [!NOTE]
> <span data-ttu-id="fa9a2-237">Web サーバーを同期するように WFF を構成する方法の詳細については、「 [Web ファームフレームワークを使用したサーバーファームの作成](../configuring-server-environments-for-web-deployment/creating-a-server-farm-with-the-web-farm-framework.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-237">For more information on configuring the WFF to synchronize web servers, see [Create a Server Farm with the Web Farm Framework](../configuring-server-environments-for-web-deployment/creating-a-server-farm-with-the-web-farm-framework.md).</span></span>

## <a name="deployment-to-production"></a><span data-ttu-id="fa9a2-238">運用環境への配置</span><span class="sxs-lookup"><span data-stu-id="fa9a2-238">Deployment to Production</span></span>

<span data-ttu-id="fa9a2-239">ステージング環境でビルドが承認されると、Fabrikam, Inc. チームはアプリケーションを運用環境に発行できます。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-239">When a build has been approved in the staging environment, the Fabrikam, Inc. team can publish the application to the production environment.</span></span> <span data-ttu-id="fa9a2-240">運用環境では、アプリケーションが "ライブ" になり、エンドユーザーの対象ユーザーに到達します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-240">The production environment is where the application goes "live" and reaches its target audience of end users.</span></span>

<span data-ttu-id="fa9a2-241">運用環境は、インターネットに接続された境界ネットワーク内にあります。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-241">The production environment is in an Internet-facing perimeter network.</span></span> <span data-ttu-id="fa9a2-242">これは、ビルドサーバーを含む内部ネットワークから分離されています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-242">This is isolated from the internal network that contains the build server.</span></span> <span data-ttu-id="fa9a2-243">実稼働環境管理者 (根本アンドリュース) は、web 配置パッケージをビルドサーバーから手動でコピーし、プライマリ運用 web サーバー上の IIS にインポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-243">The production environment administrator, Lisa Andrews, must manually copy the web deployment packages from the build server and import them into IIS on the primary production web server.</span></span>

![](application-lifecycle-management-from-development-to-production/_static/image6.png)

<span data-ttu-id="fa9a2-244">これは、運用環境へのデプロイの大まかなプロセスです。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-244">This is the high-level process for a deployment to the production environment:</span></span>

1. <span data-ttu-id="fa9a2-245">開発チームは、ビルドを運用環境にデプロイする準備ができていることを知らせるものとします。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-245">The developer team advises Lisa that a build is ready for deployment to production.</span></span> <span data-ttu-id="fa9a2-246">チームは、ビルドサーバーのドロップフォルダー内にある web 配置パッケージの場所を根本とします。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-246">The team advises Lisa of the location of the web deployment packages within the drop folder on the build server.</span></span>
2. <span data-ttu-id="fa9a2-247">リサは、ビルドサーバーから web パッケージを収集し、運用環境のプライマリ web サーバーにコピーします。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-247">Lisa collects the web packages from the build server and copies them to the primary web server in the production environment.</span></span>
3. <span data-ttu-id="fa9a2-248">リサは、IIS マネージャーを使用して、プライマリ web サーバー上に web パッケージをインポートおよび発行します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-248">Lisa uses IIS Manager to import and publish the web packages on the primary web server.</span></span>
4. <span data-ttu-id="fa9a2-249">WFF コントローラーは、運用環境の web サーバーを同期します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-249">The WFF controller synchronizes the web servers in the production environment.</span></span> <span data-ttu-id="fa9a2-250">これにより、サーバーファーム内のすべての web サーバーでアプリケーションを使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-250">This makes the application available on all the web servers in the server farm.</span></span>

### <a name="how-does-the-deployment-process-work"></a><span data-ttu-id="fa9a2-251">デプロイプロセスはどのように機能しますか。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-251">How Does the Deployment Process Work?</span></span>

<span data-ttu-id="fa9a2-252">IIS マネージャーには、IIS web サイトへの web パッケージの発行を容易にする、アプリケーションパッケージのインポートウィザードが含まれています。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-252">IIS Manager includes an Import Application Package Wizard that makes it easy to publish web packages to an IIS website.</span></span> <span data-ttu-id="fa9a2-253">この手順を実行する方法のチュートリアルについては、「 [Web パッケージを手動でインストール](../web-deployment-in-the-enterprise/manually-installing-web-packages.md)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-253">For a walkthrough on how to perform this procedure, see [Manually Installing Web Packages](../web-deployment-in-the-enterprise/manually-installing-web-packages.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="fa9a2-254">まとめ</span><span class="sxs-lookup"><span data-stu-id="fa9a2-254">Conclusion</span></span>

<span data-ttu-id="fa9a2-255">このトピックでは、一般的なエンタープライズ規模の web アプリケーションのデプロイライフサイクルについて説明しました。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-255">This topic provided an illustration of the deployment lifecycle for a typical enterprise-scale web application.</span></span>

<span data-ttu-id="fa9a2-256">このトピックでは、web アプリケーションの展開のさまざまな側面に関するガイダンスを提供する一連のチュートリアルの一部を示します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-256">This topic forms part of a series of tutorials that provide guidance on various aspects of web application deployment.</span></span> <span data-ttu-id="fa9a2-257">実際には、デプロイプロセスの各段階で、追加のタスクと考慮事項が多数あり、それらをすべて1つのチュートリアルで説明することはできません。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-257">In practice, there are lots of additional tasks and considerations at each stage of the deployment process, and it's not possible to cover them all in a single walkthrough.</span></span> <span data-ttu-id="fa9a2-258">詳細については、次のチュートリアルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-258">For more information, consult these tutorials:</span></span>

- <span data-ttu-id="fa9a2-259">[企業の Web 配置](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md)。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-259">[Web Deployment in the Enterprise](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md).</span></span> <span data-ttu-id="fa9a2-260">このチュートリアルでは、MSBuild と IIS Web 配置ツール (Web 配置) を使用した web 配置手法の概要について説明します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-260">This tutorial provides a comprehensive introduction to web deployment techniques using MSBuild and the IIS Web Deployment Tool (Web Deploy).</span></span>
- <span data-ttu-id="fa9a2-261">[Web 配置用のサーバー環境の構成](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md)。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-261">[Configuring Server Environments for Web Deployment](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md).</span></span> <span data-ttu-id="fa9a2-262">このチュートリアルでは、さまざまな展開シナリオをサポートするように Windows server 環境を構成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-262">This tutorial provides guidance on how to configure Windows server environments to support various deployment scenarios.</span></span>
- <span data-ttu-id="fa9a2-263">[自動 Web 展開用に Team Foundation Server を構成して](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md)います。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-263">[Configuring Team Foundation Server for Automated Web Deployment](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md).</span></span> <span data-ttu-id="fa9a2-264">このチュートリアルでは、配置ロジックを TFS ビルドプロセスに統合する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-264">This tutorial provides guidance on how to integrate deployment logic into TFS build processes.</span></span>
- <span data-ttu-id="fa9a2-265">[高度なエンタープライズ Web デプロイ](../advanced-enterprise-web-deployment/advanced-enterprise-web-deployment.md)。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-265">[Advanced Enterprise Web Deployment](../advanced-enterprise-web-deployment/advanced-enterprise-web-deployment.md).</span></span> <span data-ttu-id="fa9a2-266">このチュートリアルでは、組織が直面する複雑な展開の課題をいくつか満たす方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="fa9a2-266">This tutorial provides guidance on how to meet some of the more complex deployment challenges that organizations face.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="fa9a2-267">[[戻る]](enterprise-web-deployment-scenario-overview.md)</span><span class="sxs-lookup"><span data-stu-id="fa9a2-267">[Previous](enterprise-web-deployment-scenario-overview.md)</span></span>
