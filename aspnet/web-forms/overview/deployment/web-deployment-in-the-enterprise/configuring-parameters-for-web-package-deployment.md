---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/configuring-parameters-for-web-package-deployment
title: Web パッケージ配置のパラメーターの構成 |Microsoft Docs
author: jrjlee
description: このトピックでは、インターネットインフォメーションサービス (IIS) web アプリケーション名、接続文字列、サービスエンドポイントなどのパラメーター値を設定する方法について説明し,...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 37947d79-ab1e-4ba9-9017-52e7a2757414
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/configuring-parameters-for-web-package-deployment
msc.type: authoredcontent
ms.openlocfilehash: f04ace98d81a33053b10cab7e40dbd75a6c0992c
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78438400"
---
# <a name="configuring-parameters-for-web-package-deployment"></a><span data-ttu-id="403f4-103">Web パッケージ配置のパラメーターを構成する</span><span class="sxs-lookup"><span data-stu-id="403f4-103">Configuring Parameters for Web Package Deployment</span></span>

<span data-ttu-id="403f4-104">[Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="403f4-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

<span data-ttu-id="403f4-105">[[Download PDF]\(PDF をダウンロード\)](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span><span class="sxs-lookup"><span data-stu-id="403f4-105">[Download PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span></span>

> <span data-ttu-id="403f4-106">このトピックでは、リモート IIS web サーバーに web パッケージを展開するときに、インターネットインフォメーションサービス (IIS) web アプリケーション名、接続文字列、サービスエンドポイントなどのパラメーター値を設定する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="403f4-106">This topic describes how to set parameter values, like Internet Information Services (IIS) web application names, connection strings, and service endpoints, when you deploy a web package to a remote IIS web server.</span></span>

<span data-ttu-id="403f4-107">Web アプリケーションプロジェクトをビルドすると、ビルドおよびパッケージ化プロセスによって次の3つのキーファイルが生成されます。</span><span class="sxs-lookup"><span data-stu-id="403f4-107">When you build a web application project, the build and packaging process generates three key files:</span></span>

- <span data-ttu-id="403f4-108">*[プロジェクト名] .zip*ファイル。</span><span class="sxs-lookup"><span data-stu-id="403f4-108">A *[project name].zip* file.</span></span> <span data-ttu-id="403f4-109">これは、web アプリケーションプロジェクトの web 配置パッケージです。</span><span class="sxs-lookup"><span data-stu-id="403f4-109">This is the web deployment package for your web application project.</span></span> <span data-ttu-id="403f4-110">このパッケージには、リモート IIS web サーバーで web アプリケーションを再作成するために必要なすべてのアセンブリ、ファイル、データベーススクリプト、およびリソースが含まれています。</span><span class="sxs-lookup"><span data-stu-id="403f4-110">This package contains all the assemblies, files, database scripts, and resources required to recreate your web application on a remote IIS web server.</span></span>
- <span data-ttu-id="403f4-111">*[プロジェクト名]. .deploy*ファイルを指定します。</span><span class="sxs-lookup"><span data-stu-id="403f4-111">A *[project name].deploy.cmd* file.</span></span> <span data-ttu-id="403f4-112">これには、web 配置パッケージをリモート IIS web サーバーに発行するパラメーター化された Web 配置 (Msdeploy.exe) コマンドのセットが含まれます。</span><span class="sxs-lookup"><span data-stu-id="403f4-112">This contains a set of parameterized Web Deploy (MSDeploy.exe) commands that publish your web deployment package to a remote IIS web server.</span></span>
- <span data-ttu-id="403f4-113">*[プロジェクト名]。SetParameters .xml*ファイル。</span><span class="sxs-lookup"><span data-stu-id="403f4-113">A *[project name].SetParameters.xml* file.</span></span> <span data-ttu-id="403f4-114">これにより、Msdeploy.exe コマンドにパラメーター値のセットが提供されます。</span><span class="sxs-lookup"><span data-stu-id="403f4-114">This provides a set of parameter values to the MSDeploy.exe command.</span></span> <span data-ttu-id="403f4-115">このファイルの値を更新し、Web パッケージを配置するときにコマンドラインパラメーターとして Web 配置に渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="403f4-115">You can update the values in this file and pass it to Web Deploy as a command-line parameter when you deploy your web package.</span></span>

> [!NOTE]
> <span data-ttu-id="403f4-116">ビルドおよびパッケージ化のプロセスの詳細については、「 [Web アプリケーションプロジェクトのビルドおよびパッケージ化](building-and-packaging-web-application-projects.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="403f4-116">For more information on the build and packaging process, see [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span>

<span data-ttu-id="403f4-117">*Setparameters .xml*ファイルは、web アプリケーションプロジェクトファイルと、プロジェクト内の構成ファイルから動的に生成されます。</span><span class="sxs-lookup"><span data-stu-id="403f4-117">The *SetParameters.xml* file is dynamically generated from your web application project file and any configuration files within your project.</span></span> <span data-ttu-id="403f4-118">プロジェクトをビルドしてパッケージ化すると、Web 発行パイプライン (WPP) によって、配置先の IIS Web アプリケーションや任意のデータベース接続文字列などの配置環境間で変更される可能性のある多くの変数が自動的に検出されます。</span><span class="sxs-lookup"><span data-stu-id="403f4-118">When you build and package your project, the Web Publishing Pipeline (WPP) will automatically detect lots of the variables that are likely to change between deployment environments, like the destination IIS web application and any database connection strings.</span></span> <span data-ttu-id="403f4-119">これらの値は、web 配置パッケージで自動的にパラメーター化され、 *Setparameters .xml*ファイルに追加されます。</span><span class="sxs-lookup"><span data-stu-id="403f4-119">These values are automatically parameterized in the web deployment package and added to the *SetParameters.xml* file.</span></span> <span data-ttu-id="403f4-120">たとえば *、web アプリケーション*プロジェクトの web.config ファイルに接続文字列を追加すると、ビルドプロセスによってこの変更が検出され、それに応じて*setparameters .xml*ファイルにエントリが追加されます。</span><span class="sxs-lookup"><span data-stu-id="403f4-120">For example, if you add a connection string to the *web.config* file in your web application project, the build process will detect this change and will add an entry to the *SetParameters.xml* file accordingly.</span></span>

<span data-ttu-id="403f4-121">多くの場合、この自動パラメーター化は十分です。</span><span class="sxs-lookup"><span data-stu-id="403f4-121">In a lot of cases, this automatic parameterization will be sufficient.</span></span> <span data-ttu-id="403f4-122">ただし、ユーザーがアプリケーションの設定やサービスエンドポイントの Url など、デプロイ環境間で他の設定を変更する必要がある場合は、展開パッケージでこれらの値をパラメーター化し、対応するエントリを*Setparameters .xml*ファイルに追加するように WPP に指示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="403f4-122">However, if your users need to vary other settings between deployment environments, like application settings or service endpoint URLs, you need to tell the WPP to parameterize these values in the deployment package and add corresponding entries to the *SetParameters.xml* file.</span></span> <span data-ttu-id="403f4-123">次のセクションでは、その方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="403f4-123">The sections that follow explain how to do this.</span></span>

### <a name="automatic-parameterization"></a><span data-ttu-id="403f4-124">自動パラメーター化</span><span class="sxs-lookup"><span data-stu-id="403f4-124">Automatic Parameterization</span></span>

<span data-ttu-id="403f4-125">Web アプリケーションをビルドしてパッケージ化すると、WPP は自動的に次のようなパラメーター化を行います。</span><span class="sxs-lookup"><span data-stu-id="403f4-125">When you build and package a web application, the WPP will automatically parameterize these things:</span></span>

- <span data-ttu-id="403f4-126">宛先 IIS web アプリケーションのパスと名前。</span><span class="sxs-lookup"><span data-stu-id="403f4-126">The destination IIS web application path and name.</span></span>
- <span data-ttu-id="403f4-127">*Web.config ファイル内*の任意の接続文字列。</span><span class="sxs-lookup"><span data-stu-id="403f4-127">Any connection strings in your *web.config* file.</span></span>
- <span data-ttu-id="403f4-128">プロジェクトのプロパティページの **[パッケージ/発行]** タブに追加するすべてのデータベースの接続文字列。</span><span class="sxs-lookup"><span data-stu-id="403f4-128">Connection strings for any databases you add to the **Package/Publish SQL** tab in the project property pages.</span></span>

<span data-ttu-id="403f4-129">たとえば、パラメーター化プロセスに触れることなく[Contact manager](the-contact-manager-solution.md)サンプルソリューションをビルドしてパッケージ化する場合、次のように WPP によってこの*contactmanager*サンプルファイルが生成されます。</span><span class="sxs-lookup"><span data-stu-id="403f4-129">For example, if you were to build and package the [Contact Manager](the-contact-manager-solution.md) sample solution without touching the parameterization process in any way, the WPP would generate this *ContactManager.Mvc.SetParameters.xml* file:</span></span>

[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample1.xml)]

<span data-ttu-id="403f4-130">この場合、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="403f4-130">In this case:</span></span>

- <span data-ttu-id="403f4-131">**Iis Web アプリケーション名**パラメーターは、web アプリケーションを配置する iis パスです。</span><span class="sxs-lookup"><span data-stu-id="403f4-131">The **IIS Web Application Name** parameter is the IIS path where you want to deploy the web application.</span></span> <span data-ttu-id="403f4-132">既定値は、プロジェクトのプロパティページの [**パッケージ/発行] Web**ページから取得されます。</span><span class="sxs-lookup"><span data-stu-id="403f4-132">The default value is taken from the **Package/Publish Web** page in the project property pages.</span></span>
- <span data-ttu-id="403f4-133">**Applicationservices-Web.config 接続文字列**パラメーターは、 *Web.config ファイルの* **connectionStrings/add**要素から生成されました。</span><span class="sxs-lookup"><span data-stu-id="403f4-133">The **ApplicationServices-Web.config Connection String** parameter was generated from a **connectionStrings/add** element in the *web.config* file.</span></span> <span data-ttu-id="403f4-134">これは、アプリケーションがメンバーシップデータベースにアクセスするために使用する接続文字列を表します。</span><span class="sxs-lookup"><span data-stu-id="403f4-134">It represents the connection string that the application should use to contact the membership database.</span></span> <span data-ttu-id="403f4-135">ここで指定する値は、配置された*web.config*ファイルに置き換えられます。</span><span class="sxs-lookup"><span data-stu-id="403f4-135">The value you provide here will be substituted into the deployed *web.config* file.</span></span> <span data-ttu-id="403f4-136">既定値は *、配置前の web.config ファイル*から取得されます。</span><span class="sxs-lookup"><span data-stu-id="403f4-136">The default value is taken from the pre-deployment *web.config* file.</span></span>

<span data-ttu-id="403f4-137">また、WPP は、生成する展開パッケージでこれらのプロパティをパラメーター化します。</span><span class="sxs-lookup"><span data-stu-id="403f4-137">The WPP also parameterizes these properties in the deployment package it generates.</span></span> <span data-ttu-id="403f4-138">展開パッケージをインストールするときに、これらのプロパティの値を指定できます。</span><span class="sxs-lookup"><span data-stu-id="403f4-138">You can provide values for these properties when you install the deployment package.</span></span> <span data-ttu-id="403f4-139">IIS マネージャーを使用して手動でパッケージをインストールする場合、「 [Web パッケージを手動でインストール](manually-installing-web-packages.md)する」で説明されているように、インストールウィザードでは、任意のパラメーターの値を指定するように求められます。</span><span class="sxs-lookup"><span data-stu-id="403f4-139">If you install the package manually through IIS Manager, as described in [Manually Installing Web Packages](manually-installing-web-packages.md), the installation wizard prompts you to provide values for any parameters.</span></span> <span data-ttu-id="403f4-140">「 [Web パッケージの配置](deploying-web-packages.md)」で説明されているように、 *.deploy*ファイルを使用してパッケージをリモートでインストールした場合、Web 配置は、パラメーター値を提供するためにこの*setparameters .xml*ファイルを検索します。</span><span class="sxs-lookup"><span data-stu-id="403f4-140">If you install the package remotely using the *.deploy.cmd* file, as described in [Deploying Web Packages](deploying-web-packages.md), Web Deploy will look to this *SetParameters.xml* file to provide the parameter values.</span></span> <span data-ttu-id="403f4-141">*Setparameters .xml*ファイルの値は手動で編集できます。また、自動ビルドおよび配置プロセスの一環としてファイルをカスタマイズすることもできます。</span><span class="sxs-lookup"><span data-stu-id="403f4-141">You can edit the values in the *SetParameters.xml* file manually, or you can customize the file as part of an automated build and deployment process.</span></span> <span data-ttu-id="403f4-142">このプロセスの詳細については、このトピックの後半で説明します。</span><span class="sxs-lookup"><span data-stu-id="403f4-142">This process is described in more detail later in this topic.</span></span>

### <a name="custom-parameterization"></a><span data-ttu-id="403f4-143">カスタムパラメーター化</span><span class="sxs-lookup"><span data-stu-id="403f4-143">Custom Parameterization</span></span>

<span data-ttu-id="403f4-144">より複雑な配置シナリオでは、プロジェクトを配置する前に追加のプロパティをパラメーター化することが必要になることがよくあります。</span><span class="sxs-lookup"><span data-stu-id="403f4-144">In more complex deployment scenarios, you'll often want to parameterize additional properties before you deploy your project.</span></span> <span data-ttu-id="403f4-145">一般に、接続先の環境によって異なるプロパティと設定をパラメーター化する必要があります。</span><span class="sxs-lookup"><span data-stu-id="403f4-145">Generally speaking, you should parameterize any properties and settings that will vary between destination environments.</span></span> <span data-ttu-id="403f4-146">次のようなものがあります。</span><span class="sxs-lookup"><span data-stu-id="403f4-146">These can include:</span></span>

- <span data-ttu-id="403f4-147">*Web.config ファイル内*のサービスエンドポイント。</span><span class="sxs-lookup"><span data-stu-id="403f4-147">Service endpoints in the *web.config* file.</span></span>
- <span data-ttu-id="403f4-148">*Web.config ファイルの*アプリケーション設定。</span><span class="sxs-lookup"><span data-stu-id="403f4-148">Application settings in the *web.config* file.</span></span>
- <span data-ttu-id="403f4-149">ユーザーに指定を求めるその他の宣言プロパティ。</span><span class="sxs-lookup"><span data-stu-id="403f4-149">Any other declarative properties that you want to prompt users to specify.</span></span>

<span data-ttu-id="403f4-150">これらのプロパティをパラメーター化する最も簡単な方法は、web アプリケーションプロジェクトのルートフォルダーに*parameters .xml*ファイルを追加することです。</span><span class="sxs-lookup"><span data-stu-id="403f4-150">The easiest way to parameterize these properties is to add a *parameters.xml* file to the root folder of your web application project.</span></span> <span data-ttu-id="403f4-151">たとえば、Contact Manager ソリューションでは、ContactManager. Mvc プロジェクトには、ルートフォルダーに*parameters .xml*ファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="403f4-151">For example, in the Contact Manager solution, the ContactManager.Mvc project includes a *parameters.xml* file in the root folder.</span></span>

![](configuring-parameters-for-web-package-deployment/_static/image1.png)

<span data-ttu-id="403f4-152">このファイルを開くと、1つの**パラメーター**エントリが含まれていることがわかります。</span><span class="sxs-lookup"><span data-stu-id="403f4-152">If you open this file, you'll see that it contains a single **parameter** entry.</span></span> <span data-ttu-id="403f4-153">このエントリでは、XML パス言語 (XPath) クエリを使用して、 *web .config*ファイル内の contactservice WINDOWS COMMUNICATION FOUNDATION (WCF) サービスのエンドポイント URL を検索し、パラメーター化しています。</span><span class="sxs-lookup"><span data-stu-id="403f4-153">The entry uses an XML Path Language (XPath) query to locate and parameterize the endpoint URL of the ContactService Windows Communication Foundation (WCF) service in the *web.config* file.</span></span>

[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample2.xml)]

<span data-ttu-id="403f4-154">配置パッケージのエンドポイント URL をパラメーター化するだけでなく、WPP は、配置パッケージと共に生成される*Setparameters .xml*ファイルに対応するエントリも追加します。</span><span class="sxs-lookup"><span data-stu-id="403f4-154">In addition to parameterizing the endpoint URL in the deployment package, the WPP also adds a corresponding entry to the *SetParameters.xml* file that gets generated alongside the deployment package.</span></span>

[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample3.xml)]

<span data-ttu-id="403f4-155">展開パッケージを手動でインストールすると、自動的にパラメーター化されたプロパティと共に、IIS マネージャーによってサービスエンドポイントアドレスの入力が求められます。</span><span class="sxs-lookup"><span data-stu-id="403f4-155">If you install the deployment package manually, IIS Manager will prompt you for the service endpoint address alongside the properties that were parameterized automatically.</span></span> <span data-ttu-id="403f4-156">*.Deploy*ファイルを実行して配置パッケージをインストールする場合は、 *setparameters .xml*ファイルを編集して、自動的にパラメーター化されたプロパティの値と共にサービスエンドポイントアドレスの値を指定できます。</span><span class="sxs-lookup"><span data-stu-id="403f4-156">If you install the deployment package by running the *.deploy.cmd* file, you can edit the *SetParameters.xml* file to provide a value for the service endpoint address together with values for the properties that were parameterized automatically.</span></span>

<span data-ttu-id="403f4-157">*パラメーターの .xml*ファイルを作成する方法の詳細については、「[方法: パッケージのインストール時にパラメーターを使用して展開設定を構成](https://msdn.microsoft.com/library/ff398068.aspx)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="403f4-157">For full details on how to create a *parameters.xml* file, see [How to: Use Parameters to Configure Deployment Settings When a Package is Installed](https://msdn.microsoft.com/library/ff398068.aspx).</span></span> <span data-ttu-id="403f4-158">**「Web.config ファイル設定に展開パラメーターを使用する**」という名前の手順では、手順を追って説明します。</span><span class="sxs-lookup"><span data-stu-id="403f4-158">The procedure named **To use deployment parameters for Web.config file settings** provides step-by-step instructions.</span></span>

## <a name="modifying-the-setparametersxml-file"></a><span data-ttu-id="403f4-159">SetParameters .xml ファイルの変更</span><span class="sxs-lookup"><span data-stu-id="403f4-159">Modifying the SetParameters.xml File</span></span>

<span data-ttu-id="403f4-160">*.Deploy*ファイルを実行するか、コマンドライン&#x2014;から msdeploy.exe を実行して、web アプリケーションパッケージを手動で&#x2014;展開する予定がある場合は、配置前に*setparameters .xml*ファイルを手動で編集する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="403f4-160">If you plan to deploy the web application package manually&#x2014;either by running the *.deploy.cmd* file or by running MSDeploy.exe from the command line&#x2014;there's nothing to stop you manually editing the *SetParameters.xml* file prior to the deployment.</span></span> <span data-ttu-id="403f4-161">ただし、エンタープライズ規模のソリューションで作業している場合は、大規模で自動化されたビルドおよび配置プロセスの一部として、web アプリケーションパッケージをデプロイする必要があります。</span><span class="sxs-lookup"><span data-stu-id="403f4-161">However, if you're working on an enterprise-scale solution, you may need to deploy a web application package as part of a larger, automated build and deployment process.</span></span> <span data-ttu-id="403f4-162">このシナリオでは、Microsoft Build Engine (MSBuild) を使用して、 *Setparameters .xml*ファイルを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="403f4-162">In this scenario, you need the Microsoft Build Engine (MSBuild) to modify the *SetParameters.xml* file for you.</span></span> <span data-ttu-id="403f4-163">これを行うには、MSBuild **XmlPoke**タスクを使用します。</span><span class="sxs-lookup"><span data-stu-id="403f4-163">You can do this by using the MSBuild **XmlPoke** task.</span></span>

<span data-ttu-id="403f4-164">[Contact Manager サンプルソリューション](the-contact-manager-solution.md)では、このプロセスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="403f4-164">The [Contact Manager sample solution](the-contact-manager-solution.md) illustrates this process.</span></span> <span data-ttu-id="403f4-165">次のコード例は、この例に関連する詳細のみを表示するように編集されています。</span><span class="sxs-lookup"><span data-stu-id="403f4-165">The code examples that follow have been edited to show only the details that are relevant to this example.</span></span>

> [!NOTE]
> <span data-ttu-id="403f4-166">サンプルソリューションのプロジェクトファイルモデルの概要と、一般的なカスタムプロジェクトファイルの概要については、「[プロジェクトファイルについ](understanding-the-project-file.md)て」および「[ビルドプロセスについ](understanding-the-build-process.md)て」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="403f4-166">For a broader overview of the project file model in the sample solution, and an introduction to custom project files in general, see [Understanding the Project File](understanding-the-project-file.md) and [Understanding the Build Process](understanding-the-build-process.md).</span></span>

<span data-ttu-id="403f4-167">まず、対象のパラメーター値は、環境固有のプロジェクトファイルのプロパティとして定義されます (たとえば、 *Env Dev. proj*)。</span><span class="sxs-lookup"><span data-stu-id="403f4-167">First, the parameter values of interest are defined as properties in the environment-specific project file (for example, *Env-Dev.proj*).</span></span>

[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample4.xml)]

> [!NOTE]
> <span data-ttu-id="403f4-168">独自のサーバー環境用に環境固有のプロジェクトファイルをカスタマイズする方法については、「[ターゲット環境の配置プロパティを構成](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="403f4-168">For guidance on how to customize the environment-specific project files for your own server environments, see [Configure Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>

<span data-ttu-id="403f4-169">次に、このプロパティを*インポートします*。</span><span class="sxs-lookup"><span data-stu-id="403f4-169">Next, the *Publish.proj* file imports these properties.</span></span> <span data-ttu-id="403f4-170">各*Setparameters .xml*ファイルは *.deploy*ファイルに関連付けられているため、最終的にプロジェクトファイルで各 *.deploy*ファイルを呼び出す必要があります。プロジェクトファイルでは *、各 .deploy*ファイルの MSBuild*項目*を作成し、*項目メタデータ*として関心のあるプロパティを定義します。</span><span class="sxs-lookup"><span data-stu-id="403f4-170">Because each *SetParameters.xml* file is associated with a *.deploy.cmd* file, and we ultimately want the project file to invoke each *.deploy.cmd* file, the project file creates an MSBuild *item* for each *.deploy.cmd* file and defines the properties of interest as *item metadata*.</span></span>

[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample5.xml)]

<span data-ttu-id="403f4-171">この場合、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="403f4-171">In this case:</span></span>

- <span data-ttu-id="403f4-172">**ParametersXml**メタデータ値は、 *setparameters .xml*ファイルの場所を示します。</span><span class="sxs-lookup"><span data-stu-id="403f4-172">The **ParametersXml** metadata value indicates the location of the *SetParameters.xml* file.</span></span>
- <span data-ttu-id="403f4-173">**Iiswebappname**値は、web アプリケーションをデプロイする IIS パスです。</span><span class="sxs-lookup"><span data-stu-id="403f4-173">The **IisWebAppName** value is the IIS path to which you want to deploy the web application.</span></span>
- <span data-ttu-id="403f4-174">メンバーシップ**Dbconnectionstring**値はメンバーシップデータベースの接続文字列で、 **MembershipDBConnectionName**値は*setparameters .xml*ファイル内の対応するパラメーターの**name**属性です。</span><span class="sxs-lookup"><span data-stu-id="403f4-174">The **MembershipDBConnectionString** value is the connection string for the membership database, and the **MembershipDBConnectionName** value is the **name** attribute of the corresponding parameter in the *SetParameters.xml* file.</span></span>
- <span data-ttu-id="403f4-175">**Serviceendpointvalue**の値は、移行先サーバー上の WCF サービスのエンドポイントアドレスです。 **ServiceEndpointParamName**値は、 *setparameters .xml*ファイル内の対応するパラメーターの name 属性です。</span><span class="sxs-lookup"><span data-stu-id="403f4-175">The **ServiceEndpointValue** value is the endpoint address for the WCF service on the destination server, and the **ServiceEndpointParamName** value is the name attribute of the corresponding parameter in the *SetParameters.xml* file.</span></span>

<span data-ttu-id="403f4-176">最後に、 *Publish*ファイルの**publishwebpackages**ターゲットは、 **XmlPoke**タスクを使用して、 *setparameters .xml*ファイル内のこれらの値を変更します。</span><span class="sxs-lookup"><span data-stu-id="403f4-176">Finally, in the *Publish.proj* file, the **PublishWebPackages** target uses the **XmlPoke** task to modify these values in the *SetParameters.xml* file.</span></span>

[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample6.xml)]

<span data-ttu-id="403f4-177">各**XmlPoke**タスクでは、次の4つの属性値が指定されていることがわかります。</span><span class="sxs-lookup"><span data-stu-id="403f4-177">You'll notice that each **XmlPoke** task specifies four attribute values:</span></span>

- <span data-ttu-id="403f4-178">**XmlInputPath**属性は、変更するファイルを検索する場所をタスクに指示します。</span><span class="sxs-lookup"><span data-stu-id="403f4-178">The **XmlInputPath** attribute tells the task where to find the file you want to modify.</span></span>
- <span data-ttu-id="403f4-179">**Query**属性は、変更する XML ノードを識別する XPath クエリです。</span><span class="sxs-lookup"><span data-stu-id="403f4-179">The **Query** attribute is an XPath query that identifies the XML node you want to change.</span></span>
- <span data-ttu-id="403f4-180">**Value**属性は、選択した XML ノードに挿入する新しい値です。</span><span class="sxs-lookup"><span data-stu-id="403f4-180">The **Value** attribute is the new value you want to insert into the selected XML node.</span></span>
- <span data-ttu-id="403f4-181">**Condition**属性は、タスクを実行する条件、または実行しない条件です。</span><span class="sxs-lookup"><span data-stu-id="403f4-181">The **Condition** attribute is the criteria on which the task should run or not run.</span></span> <span data-ttu-id="403f4-182">このような場合、条件によって、 *Setparameters .xml*ファイルに null 値または空の値が挿入されないようにします。</span><span class="sxs-lookup"><span data-stu-id="403f4-182">In these cases, the condition ensures that you don't try to insert a null or empty value into the *SetParameters.xml* file.</span></span>

## <a name="conclusion"></a><span data-ttu-id="403f4-183">まとめ</span><span class="sxs-lookup"><span data-stu-id="403f4-183">Conclusion</span></span>

<span data-ttu-id="403f4-184">このトピックでは、 *Setparameters .xml*ファイルの役割について説明し、web アプリケーションプロジェクトをビルドするときに生成される方法について説明しました。</span><span class="sxs-lookup"><span data-stu-id="403f4-184">This topic described the role of the *SetParameters.xml* file and explained how it's generated when you build a web application project.</span></span> <span data-ttu-id="403f4-185">また、*パラメーター .xml*ファイルをプロジェクトに追加することで、追加の設定をパラメーター化する方法についても説明しました。</span><span class="sxs-lookup"><span data-stu-id="403f4-185">It explained how you can parameterize additional settings by adding a *parameters.xml* file to your project.</span></span> <span data-ttu-id="403f4-186">また、プロジェクトファイルの**XmlPoke**タスクを使用して、大きな自動化されたビルドプロセスの一部として*setparameters .xml*ファイルを変更する方法についても説明します。</span><span class="sxs-lookup"><span data-stu-id="403f4-186">It also described how you can modify the *SetParameters.xml* file as part of a larger, automated build process, by using the **XmlPoke** task in your project files.</span></span>

<span data-ttu-id="403f4-187">次のトピック「 [Web パッケージの配置](deploying-web-packages.md)」では、 *.deploy*ファイルを実行するか、msdeploy.exe コマンドを直接使用して、web パッケージを配置する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="403f4-187">The next topic, [Deploying Web Packages](deploying-web-packages.md), describes how you can deploy a web package either by running the *.deploy.cmd* file or by using MSDeploy.exe commands directly.</span></span> <span data-ttu-id="403f4-188">どちらの場合も、 *Setparameters .xml*ファイルを配置パラメーターとして指定できます。</span><span class="sxs-lookup"><span data-stu-id="403f4-188">In both cases, you can specify your *SetParameters.xml* file as a deployment parameter.</span></span>

## <a name="further-reading"></a><span data-ttu-id="403f4-189">参考資料</span><span class="sxs-lookup"><span data-stu-id="403f4-189">Further Reading</span></span>

<span data-ttu-id="403f4-190">Web パッケージの作成方法の詳細については、「 [Web アプリケーションプロジェクトのビルドおよびパッケージ化](building-and-packaging-web-application-projects.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="403f4-190">For information on how to create web packages, see [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span> <span data-ttu-id="403f4-191">実際に web パッケージを配置する方法のガイダンスについては、「 [Web パッケージの配置](deploying-web-packages.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="403f4-191">For guidance on how to actually deploy a web package, see [Deploying Web Packages](deploying-web-packages.md).</span></span> <span data-ttu-id="403f4-192">*パラメーター .xml*ファイルを作成する方法の詳細な手順については、「[方法: パッケージのインストール時にパラメーターを使用して展開設定を構成](https://msdn.microsoft.com/library/ff398068.aspx)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="403f4-192">For a step-by-step walkthrough on how to create a *parameters.xml* file, see [How to: Use Parameters to Configure Deployment Settings When a Package is Installed](https://msdn.microsoft.com/library/ff398068.aspx).</span></span>

<span data-ttu-id="403f4-193">Web 配置でのパラメーター化に関する全般的な情報については、「[アクションの Web 配置のパラメーター](https://go.microsoft.com/?linkid=9805119)化 (ブログの投稿)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="403f4-193">For more general information on parameterization in Web Deploy, see [Web Deploy Parameterization in Action](https://go.microsoft.com/?linkid=9805119) (blog post).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="403f4-194">[前へ](building-and-packaging-web-application-projects.md)
> [次へ](deploying-web-packages.md)</span><span class="sxs-lookup"><span data-stu-id="403f4-194">[Previous](building-and-packaging-web-application-projects.md)
[Next](deploying-web-packages.md)</span></span>
