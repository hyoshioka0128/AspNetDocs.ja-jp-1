---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-web-packages
title: Web パッケージの配置 |Microsoft Docs
author: jrjlee
description: このトピックでは、インターネットインフォメーションサービス (IIS) Web 配置ツール ([Web...] を使用して、web 配置パッケージをリモートサーバーに発行する方法について説明します。
ms.author: riande
ms.date: 05/04/2012
ms.assetid: a5c5eed2-8683-40a5-a2e1-35c9f8d17c29
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-web-packages
msc.type: authoredcontent
ms.openlocfilehash: 91b99e6e250342851aea6860164b6f6af54818d1
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78464968"
---
# <a name="deploying-web-packages"></a><span data-ttu-id="90b55-103">Web パッケージを配置する</span><span class="sxs-lookup"><span data-stu-id="90b55-103">Deploying Web Packages</span></span>

<span data-ttu-id="90b55-104">[Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="90b55-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

<span data-ttu-id="90b55-105">[[Download PDF]\(PDF をダウンロード\)](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span><span class="sxs-lookup"><span data-stu-id="90b55-105">[Download PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)</span></span>

> <span data-ttu-id="90b55-106">このトピックでは、インターネットインフォメーションサービス (IIS) Web 配置ツール (Web 配置) 2.0 を使用して、web 配置パッケージをリモートサーバーに発行する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="90b55-106">This topic describes how you can publish web deployment packages to a remote server by using the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) 2.0.</span></span>
> 
> <span data-ttu-id="90b55-107">Web パッケージをリモートサーバーに配置するには、主に次の2つの方法があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-107">There are two main ways in which you can deploy a web package to a remote server:</span></span>
> 
> - <span data-ttu-id="90b55-108">Msdeploy.exe コマンドラインユーティリティは直接使用できます。</span><span class="sxs-lookup"><span data-stu-id="90b55-108">You can use the MSDeploy.exe command-line utility directly.</span></span>
> - <span data-ttu-id="90b55-109">ビルドプロセスによって生成される *[project name]. .deploy*ファイルを実行できます。</span><span class="sxs-lookup"><span data-stu-id="90b55-109">You can run the *[project name].deploy.cmd* file that the build process generates.</span></span>
> 
> <span data-ttu-id="90b55-110">使用する方法に関係なく、最終的な結果は同じになります。</span><span class="sxs-lookup"><span data-stu-id="90b55-110">The end result is the same regardless of which approach you use.</span></span> <span data-ttu-id="90b55-111">基本的に、すべての *.deploy*ファイルは、指定された値を使用して msdeploy.exe を実行します。これにより、パッケージを配置するために必要な情報を提供する必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="90b55-111">Essentially, all the *.deploy.cmd* file does is to run MSDeploy.exe with some predetermined values, so that you don't have to provide as much information in order to deploy the package.</span></span> <span data-ttu-id="90b55-112">これにより、デプロイプロセスが簡略化されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-112">This simplifies the deployment process.</span></span> <span data-ttu-id="90b55-113">一方、Msdeploy.exe を直接使用すると、パッケージの配置方法よりもはるかに柔軟になります。</span><span class="sxs-lookup"><span data-stu-id="90b55-113">On the other hand, using MSDeploy.exe directly gives you a lot more flexibility over exactly how your package is deployed.</span></span>
> 
> <span data-ttu-id="90b55-114">どの方法を使用するかは、展開プロセスで必要とされる制御量や、Web 配置リモートエージェントサービスと Web 配置ハンドラーのどちらを対象としているかなど、さまざまな要因によって異なります。</span><span class="sxs-lookup"><span data-stu-id="90b55-114">Which approach you use will depend on a variety of factors, including how much control you require over the deployment process and whether you're targeting the Web Deploy Remote Agent service or the Web Deploy Handler.</span></span> <span data-ttu-id="90b55-115">このトピックでは、各方法の使用方法と、それぞれの方法が適切であることを確認する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="90b55-115">This topic explains how to use each approach and identifies when each approach is appropriate.</span></span>
> 
> <span data-ttu-id="90b55-116">このトピックのタスクとチュートリアルでは、次のことを前提としています。</span><span class="sxs-lookup"><span data-stu-id="90b55-116">The tasks and walkthroughs in this topic assume that:</span></span>
> 
> - <span data-ttu-id="90b55-117">「 [Web アプリケーションプロジェクトのビルドとパッケージ化](building-and-packaging-web-application-projects.md)」で説明されているように、web アプリケーションをビルドしてパッケージ化しました。</span><span class="sxs-lookup"><span data-stu-id="90b55-117">You've built and packaged your web application, as described in [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span>
> - <span data-ttu-id="90b55-118">「 [Web パッケージ配置のパラメーターの構成](configuring-parameters-for-web-package-deployment.md)」で説明されているように、ターゲット環境に適切なパラメーター値を指定するように*setparameters .xml*ファイルを変更しました。</span><span class="sxs-lookup"><span data-stu-id="90b55-118">You've modified the *SetParameters.xml* file to provide the right parameter values for your target environment, as described in [Configuring Parameters for Web Package Deployment](configuring-parameters-for-web-package-deployment.md).</span></span>

<span data-ttu-id="90b55-119">Web パッケージを配置する最も簡単な方法は、[*project name*] *. .deploy*ファイルを実行することです。</span><span class="sxs-lookup"><span data-stu-id="90b55-119">Running the [*project name*]*.deploy.cmd* file is the simplest way to deploy a web package.</span></span> <span data-ttu-id="90b55-120">特に、 *.deploy*ファイルを使用すると、msdeploy.exe を直接使用するよりも、次のような利点があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-120">In particular, using the *.deploy.cmd* file offers these advantages over using MSDeploy.exe directly:</span></span>

- <span data-ttu-id="90b55-121">Web 配置パッケージ&#x2014;の場所を指定する必要はありません。 *.deploy*ファイルは、どこにあるかを既に認識しています。</span><span class="sxs-lookup"><span data-stu-id="90b55-121">You don't need to specify the location of the web deployment package&#x2014;the *.deploy.cmd* file already knows where it is.</span></span>
- <span data-ttu-id="90b55-122">*Setparameters .xml*ファイル&#x2014;の場所を指定する必要はありません。 *.cmd*ファイルは、その場所を既に認識しています。</span><span class="sxs-lookup"><span data-stu-id="90b55-122">You don't need to specify the location of the *SetParameters.xml* file&#x2014;the *.deploy.cmd* file already knows where it is.</span></span>
- <span data-ttu-id="90b55-123">ソースとターゲットの Msdeploy.exe プロバイダー&#x2014;を指定する必要はありません。 *.deploy*ファイルは、使用する値を既に認識しています。</span><span class="sxs-lookup"><span data-stu-id="90b55-123">You don't need to specify source and destination MSDeploy providers&#x2014;the *.deploy.cmd* file already knows which values to use.</span></span>
- <span data-ttu-id="90b55-124">Msdeploy.exe 操作の設定&#x2014;を指定する必要はありません *。 .deploy*ファイルによって、通常必要な値が msdeploy.exe コマンドに自動的に追加されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-124">You don't need to specify MSDeploy operation settings&#x2014;the *.deploy.cmd* file adds the commonly required values to the MSDeploy.exe command automatically.</span></span>

<span data-ttu-id="90b55-125">*.Deploy*ファイルを使用して web パッケージを展開する前に、次のことを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-125">Before you use the *.deploy.cmd* file to deploy a web package, you should ensure that:</span></span>

- <span data-ttu-id="90b55-126">*.Deploy*ファイル ([*プロジェクト名*])。*Setparameters .xml*ファイルと web パッケージ ([*プロジェクト名*])。*zip*) は同じフォルダー内にあります。</span><span class="sxs-lookup"><span data-stu-id="90b55-126">The *.deploy.cmd* file, the [*project name*].*SetParameters.xml* file, and the web package ([*project name*].*zip*) are in the same folder.</span></span>
- <span data-ttu-id="90b55-127">Web 配置 (Msdeploy.exe) は、 *.deploy*ファイルを実行するコンピューターにインストールされます。</span><span class="sxs-lookup"><span data-stu-id="90b55-127">Web Deploy (MSDeploy.exe) is installed on the computer that runs the *.deploy.cmd* file.</span></span>

<span data-ttu-id="90b55-128">*.Deploy*ファイルは、さまざまなコマンドラインオプションをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="90b55-128">The *.deploy.cmd* file supports various command-line options.</span></span> <span data-ttu-id="90b55-129">コマンドプロンプトからファイルを実行すると、基本的な構文は次のようになります。</span><span class="sxs-lookup"><span data-stu-id="90b55-129">When you run the file from a command prompt, this is the basic syntax:</span></span>

[!code-console[Main](deploying-web-packages/samples/sample1.cmd)]

<span data-ttu-id="90b55-130">試用版の実行とライブデプロイのどちらを実行するかを指定するには、 **/t**フラグまたは **/y**フラグを指定する必要があります (同じコマンドで両方のフラグを使用しないでください)。</span><span class="sxs-lookup"><span data-stu-id="90b55-130">You must specify either a **/T** flag or a **/Y** flag, to indicate whether you want to perform a trial run or a live deployment respectively (don't use both flags in the same command).</span></span> <span data-ttu-id="90b55-131">次の表では、これらのフラグの用途について説明します。</span><span class="sxs-lookup"><span data-stu-id="90b55-131">This table explains the purpose of each of these flags.</span></span>

| <span data-ttu-id="90b55-132">フラグ</span><span class="sxs-lookup"><span data-stu-id="90b55-132">Flag</span></span> | <span data-ttu-id="90b55-133">Description</span><span class="sxs-lookup"><span data-stu-id="90b55-133">Description</span></span> |
| --- | --- |
| <span data-ttu-id="90b55-134">**/T**</span><span class="sxs-lookup"><span data-stu-id="90b55-134">**/T**</span></span> | <span data-ttu-id="90b55-135">評価版の実行を示す **– whatif**フラグを指定して msdeploy.exe を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="90b55-135">Calls MSDeploy.exe with the **–whatif** flag, which indicates a trial run.</span></span> <span data-ttu-id="90b55-136">パッケージを配置するのではなく、パッケージを配置した場合に何が起こるかのレポートを作成します。</span><span class="sxs-lookup"><span data-stu-id="90b55-136">Rather than deploying the package, it creates a report of what would happen if you did deploy the package.</span></span> |
| <span data-ttu-id="90b55-137">**/Y**</span><span class="sxs-lookup"><span data-stu-id="90b55-137">**/Y**</span></span> | <span data-ttu-id="90b55-138">**– Whatif**フラグを指定せずに msdeploy.exe を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="90b55-138">Calls MSDeploy.exe without the **–whatif** flag.</span></span> <span data-ttu-id="90b55-139">これにより、パッケージがローカルコンピューターまたは指定した移行先サーバーに配置されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-139">This deploys the package to the local computer or the specified destination server.</span></span> |
| <span data-ttu-id="90b55-140">**/M**</span><span class="sxs-lookup"><span data-stu-id="90b55-140">**/M**</span></span> | <span data-ttu-id="90b55-141">移行先サーバーの名前またはサービスの URL を指定します。</span><span class="sxs-lookup"><span data-stu-id="90b55-141">Specifies the destination server name or service URL.</span></span> <span data-ttu-id="90b55-142">ここで指定できる値の詳細については、このトピックの「**エンドポイントに関する考慮事項**」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-142">For more information on the values you can provide here, see the **Endpoint Considerations** section in this topic.</span></span> <span data-ttu-id="90b55-143">**/M**フラグを省略した場合、パッケージはローカルコンピューターに配置されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-143">If you omit the **/M** flag, the package will be deployed to the local computer.</span></span> |
| <span data-ttu-id="90b55-144">**/A**</span><span class="sxs-lookup"><span data-stu-id="90b55-144">**/A**</span></span> | <span data-ttu-id="90b55-145">Msdeploy.exe が展開を実行するために使用する認証の種類を指定します。</span><span class="sxs-lookup"><span data-stu-id="90b55-145">Specifies the authentication type that MSDeploy.exe should use to perform the deployment.</span></span> <span data-ttu-id="90b55-146">指定できる値は、 **NTLM**と**Basic**です。</span><span class="sxs-lookup"><span data-stu-id="90b55-146">Possible values are **NTLM** and **Basic**.</span></span> <span data-ttu-id="90b55-147">**/A**フラグを省略した場合、認証の種類は、Web 配置リモートエージェントサービスに配置する場合は**NTLM** 、Web 配置ハンドラーに配置する場合は **[基本]** に設定されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-147">If you omit the **/A** flag, the authentication type defaults to **NTLM** for deployment to the Web Deploy Remote Agent service and to **Basic** for deployment to the Web Deploy Handler.</span></span> |
| <span data-ttu-id="90b55-148">**/U**</span><span class="sxs-lookup"><span data-stu-id="90b55-148">**/U**</span></span> | <span data-ttu-id="90b55-149">ユーザー名を指定します。</span><span class="sxs-lookup"><span data-stu-id="90b55-149">Specifies the user name.</span></span> <span data-ttu-id="90b55-150">これは、基本認証を使用している場合にのみ適用されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-150">This applies only if you're using basic authentication.</span></span> |
| <span data-ttu-id="90b55-151">**/P**</span><span class="sxs-lookup"><span data-stu-id="90b55-151">**/P**</span></span> | <span data-ttu-id="90b55-152">パスワードを指定します。</span><span class="sxs-lookup"><span data-stu-id="90b55-152">Specifies the password.</span></span> <span data-ttu-id="90b55-153">これは、基本認証を使用している場合にのみ適用されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-153">This applies only if you're using basic authentication.</span></span> |
| <span data-ttu-id="90b55-154">**/L**</span><span class="sxs-lookup"><span data-stu-id="90b55-154">**/L**</span></span> | <span data-ttu-id="90b55-155">パッケージをローカル IIS Express インスタンスに配置する必要があることを示します。</span><span class="sxs-lookup"><span data-stu-id="90b55-155">Indicates that the package should be deployed to the local IIS Express instance.</span></span> |
| <span data-ttu-id="90b55-156">**/G**</span><span class="sxs-lookup"><span data-stu-id="90b55-156">**/G**</span></span> | <span data-ttu-id="90b55-157">[Tempagent プロバイダー設定](https://technet.microsoft.com/library/ee517345(WS.10).aspx)を使用してパッケージを配置することを指定します。</span><span class="sxs-lookup"><span data-stu-id="90b55-157">Specifies that the package is deployed using the [tempAgent provider setting](https://technet.microsoft.com/library/ee517345(WS.10).aspx).</span></span> <span data-ttu-id="90b55-158">**/G**フラグを省略した場合、値は既定で**false**に設定されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-158">If you omit the **/G** flag, the value defaults to **false**.</span></span> |

> [!NOTE]
> <span data-ttu-id="90b55-159">ビルドプロセスによって web パッケージが作成されるたびに、これらの配置オプションについて説明する *[project name] deploy-readme*という名前のファイルも作成されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-159">Every time the build process creates a web package, it also creates a file named *[project name].deploy-readme.txt* that explains these deployment options.</span></span>

<span data-ttu-id="90b55-160">これらのフラグに加えて、Web 配置操作設定を追加*の .deploy*パラメーターとして指定できます。</span><span class="sxs-lookup"><span data-stu-id="90b55-160">In addition to these flags, you can specify Web Deploy operation settings as additional *.deploy.cmd* parameters.</span></span> <span data-ttu-id="90b55-161">指定した追加の設定は、単に基になる Msdeploy.exe コマンドに渡されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-161">Any additional settings you specify are simply passed through to the underlying MSDeploy.exe command.</span></span> <span data-ttu-id="90b55-162">これらの設定の詳細については、「 [Web 配置操作の設定](https://technet.microsoft.com/library/dd569089(WS.10).aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-162">For more information on these settings, see [Web Deploy Operation Settings](https://technet.microsoft.com/library/dd569089(WS.10).aspx).</span></span>

<span data-ttu-id="90b55-163">たとえば、 *.deploy*ファイルを実行して、Contactmanager Mvc web アプリケーションプロジェクトをテスト環境に配置するとします。</span><span class="sxs-lookup"><span data-stu-id="90b55-163">Suppose you want to deploy the ContactManager.Mvc web application project to a test environment by running the *.deploy.cmd* file.</span></span> <span data-ttu-id="90b55-164">テスト環境は Web 配置リモートエージェントサービスを使用するように構成されています。詳細については、「 [Configure The Web Server for Web 配置 Publishing (リモートエージェント)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-164">Your test environment is configured to use the Web Deploy Remote Agent service, as described in [Configure a Web Server for Web Deploy Publishing (Remote Agent)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md).</span></span> <span data-ttu-id="90b55-165">Web アプリケーションをデプロイするには、次の手順を完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-165">To deploy the web application, you need to complete the next steps.</span></span>

<span data-ttu-id="90b55-166">**.Deploy ファイルを使用して web アプリケーションを配置するには**</span><span class="sxs-lookup"><span data-stu-id="90b55-166">**To deploy a web application using the .deploy.cmd file**</span></span>

1. <span data-ttu-id="90b55-167">「 [Web アプリケーションプロジェクトのビルドおよびパッケージ化](building-and-packaging-web-application-projects.md)」で説明されているように、web アプリケーションプロジェクトをビルドしてパッケージ化します。</span><span class="sxs-lookup"><span data-stu-id="90b55-167">Build and package the web application project, as described in [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span>
2. <span data-ttu-id="90b55-168">「 [Web パッケージ配置のパラメーターの構成](configuring-parameters-for-web-package-deployment.md)」で説明されているように、テスト環境の正しいパラメーター値を含むように*Contactmanager. Mvc. setparameters .xml*ファイルを変更します。</span><span class="sxs-lookup"><span data-stu-id="90b55-168">Modify the *ContactManager.Mvc.SetParameters.xml* file to contain the correct parameter values for your test environment, as described in [Configuring Parameters for Web Package Deployment](configuring-parameters-for-web-package-deployment.md).</span></span>
3. <span data-ttu-id="90b55-169">コマンドプロンプトウィンドウを開き、 *Contactmanager. Mvc. .deploy*ファイルの場所に移動します。</span><span class="sxs-lookup"><span data-stu-id="90b55-169">Open a Command Prompt window and navigate to the location of the *ContactManager.Mvc.deploy.cmd* file.</span></span>
4. <span data-ttu-id="90b55-170">次のコマンドを入力し、enter キーを押します。</span><span class="sxs-lookup"><span data-stu-id="90b55-170">Type this command, and then press Enter:</span></span>

    [!code-console[Main](deploying-web-packages/samples/sample2.cmd)]

<span data-ttu-id="90b55-171">次の点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-171">In this example:</span></span>

- <span data-ttu-id="90b55-172">**/Y**フラグは、評価版を実行するのではなく、実際にパッケージを展開することを示します。</span><span class="sxs-lookup"><span data-stu-id="90b55-172">The **/Y** flag indicates that you want to actually deploy the package, rather than doing a trial run.</span></span>
- <span data-ttu-id="90b55-173">**/M**フラグは、TESTWEB1 という名前のサーバーにパッケージを配置することを示します。</span><span class="sxs-lookup"><span data-stu-id="90b55-173">The **/M** flag indicates that you want to deploy the package to the server named TESTWEB1.</span></span> <span data-ttu-id="90b55-174">この値から、Msdeploy.exe は http://TESTWEB1/MSDeployAgentServiceで Web 配置リモートエージェントサービスにパッケージを配置しようとします。</span><span class="sxs-lookup"><span data-stu-id="90b55-174">From this value, MSDeploy.exe will attempt to deploy the package to the Web Deploy Remote Agent service at http://TESTWEB1/MSDeployAgentService.</span></span>
- <span data-ttu-id="90b55-175">**/A**フラグは、NTLM 認証を使用することを示します。</span><span class="sxs-lookup"><span data-stu-id="90b55-175">The **/A** flag indicates that you want to use NTLM authentication.</span></span> <span data-ttu-id="90b55-176">そのため、ユーザー名とパスワードを指定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="90b55-176">As such, you don't need to specify a user name and password.</span></span>

<span data-ttu-id="90b55-177">*.Deploy*ファイルを使用してデプロイプロセスを簡略化する方法を説明するために、上記のオプションを使用して*contactmanager*を実行するときに生成されて実行される msdeploy.exe コマンドを見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="90b55-177">To illustrate how using the *.deploy.cmd* file simplifies the deployment process, take a look at the MSDeploy.exe command that gets generated and executed when you run *ContactManager.Mvc.deploy.cmd* using the options shown above.</span></span>

[!code-console[Main](deploying-web-packages/samples/sample3.cmd)]

<span data-ttu-id="90b55-178">*.Deploy ファイルを*使用した web パッケージの配置の詳細については、「[方法: .Deploy ファイルを使用して配置パッケージをインストール](https://msdn.microsoft.com/library/ff356104.aspx)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-178">For more information on using the *.deploy.cmd* file to deploy a web package, see [How to: Install a Deployment Package Using the deploy.cmd File](https://msdn.microsoft.com/library/ff356104.aspx).</span></span>

## <a name="using-msdeployexe"></a><span data-ttu-id="90b55-179">Msdeploy.exe の使用</span><span class="sxs-lookup"><span data-stu-id="90b55-179">Using MSDeploy.exe</span></span>

<span data-ttu-id="90b55-180">通常、 *.deploy*ファイルを使用すると展開プロセスが単純化されますが、msdeploy.exe を直接使用する方が好ましい場合もあります。</span><span class="sxs-lookup"><span data-stu-id="90b55-180">Although using the *.deploy.cmd* file generally simplifies the deployment process, there are some situations when it's preferable to use MSDeploy.exe directly.</span></span> <span data-ttu-id="90b55-181">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="90b55-181">For example:</span></span>

- <span data-ttu-id="90b55-182">Web 配置ハンドラーに管理者以外のユーザーとして展開する場合は、 *.deploy*ファイルを使用できません。</span><span class="sxs-lookup"><span data-stu-id="90b55-182">If you want to deploy to the Web Deploy Handler as a non-administrator user, you can't use the *.deploy.cmd* file.</span></span> <span data-ttu-id="90b55-183">これは、「**エンドポイントの考慮事項**」で説明されているように Web 配置2.0 のバグが原因です。</span><span class="sxs-lookup"><span data-stu-id="90b55-183">This is due to a bug in Web Deploy 2.0, as described under **Endpoint Considerations**.</span></span>
- <span data-ttu-id="90b55-184">異なる場所にある異なる*Setparameters .xml*ファイルを手動で切り替える場合は、msdeploy.exe を直接使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="90b55-184">If you want to manually switch between different *SetParameters.xml* files in different locations, you may prefer to use MSDeploy.exe directly.</span></span>
- <span data-ttu-id="90b55-185">Msdeploy.exe のコマンドライン引数をいくつかオーバーライドする場合は、Msdeploy.exe を直接使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="90b55-185">If you want to override several MSDeploy.exe command-line arguments, you may prefer to use MSDeploy.exe directly.</span></span>

<span data-ttu-id="90b55-186">Msdeploy.exe を使用する場合は、次の3つの重要な情報を提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-186">When you use MSDeploy.exe, you need to provide three key pieces of information:</span></span>

- <span data-ttu-id="90b55-187">データの取得元の場所を示す **-source**パラメーター。</span><span class="sxs-lookup"><span data-stu-id="90b55-187">A **–source** parameter that indicates where your data is coming from.</span></span>
- <span data-ttu-id="90b55-188">データの移動先を示す **– dest**パラメーター。</span><span class="sxs-lookup"><span data-stu-id="90b55-188">A **–dest** parameter that indicates where your data is going to.</span></span>
- <span data-ttu-id="90b55-189">実行する[操作](https://technet.microsoft.com/library/dd568989(WS.10).aspx)を示す **–動詞**パラメーター。</span><span class="sxs-lookup"><span data-stu-id="90b55-189">A **–verb** parameter that indicates the [operation](https://technet.microsoft.com/library/dd568989(WS.10).aspx) you want to perform.</span></span>

<span data-ttu-id="90b55-190">Msdeploy.exe は、 [Web 配置プロバイダー](https://technet.microsoft.com/library/dd569040(WS.10).aspx)に依存して、ソースとターゲットのデータを処理します。</span><span class="sxs-lookup"><span data-stu-id="90b55-190">MSDeploy.exe relies on [Web Deploy providers](https://technet.microsoft.com/library/dd569040(WS.10).aspx) to process source and destination data.</span></span> <span data-ttu-id="90b55-191">Web 配置には、使用できる&#x2014;アプリケーションとデータソースの範囲を表すプロバイダーが多数用意されています。たとえば、SQL Server データベース、IIS web サーバー、証明書、グローバルアセンブリキャッシュ (GAC) アセンブリ、さまざまな構成ファイル、その他多くの種類のデータのプロバイダーがあります。</span><span class="sxs-lookup"><span data-stu-id="90b55-191">Web Deploy includes a lot of providers that represent the range of applications and data sources it can work with&#x2014;for example, there are providers for SQL Server databases, IIS web servers, certificates, global assembly cache (GAC) assemblies, various different configuration files, and lots of other types of data.</span></span> <span data-ttu-id="90b55-192">– **Source**パラメーターと **– dest**パラメーターの両方で、 **-source**: [*providerName*] = [*location*] の形式でプロバイダーを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-192">Both the **–source** parameter and the **–dest** parameter must specify a provider, in the form **–source**:[*providerName*]=[*location*].</span></span> <span data-ttu-id="90b55-193">IIS web サイトに web パッケージを配置する場合は、次の値を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-193">When you're deploying a web package to an IIS website, you should use these values:</span></span>

- <span data-ttu-id="90b55-194">**– Source**プロバイダーは常に[パッケージ](https://technet.microsoft.com/library/dd569019(WS.10).aspx)です。</span><span class="sxs-lookup"><span data-stu-id="90b55-194">The **–source** provider is always [package](https://technet.microsoft.com/library/dd569019(WS.10).aspx).</span></span> <span data-ttu-id="90b55-195">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="90b55-195">For example:</span></span>

    [!code-console[Main](deploying-web-packages/samples/sample4.cmd)]
- <span data-ttu-id="90b55-196">**– Dest**プロバイダーは常に[auto](https://technet.microsoft.com/library/dd569016(WS.10).aspx)です。例えば：</span><span class="sxs-lookup"><span data-stu-id="90b55-196">The **–dest** provider is always [auto](https://technet.microsoft.com/library/dd569016(WS.10).aspx). For example:</span></span>

    [!code-console[Main](deploying-web-packages/samples/sample5.cmd)]
- <span data-ttu-id="90b55-197">**–動詞**は常に**同期**されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-197">The **–verb** is always **sync**.</span></span>

    [!code-console[Main](deploying-web-packages/samples/sample6.cmd)]

<span data-ttu-id="90b55-198">さらに、その他の[プロバイダー固有の設定](https://technet.microsoft.com/library/dd569001(WS.10).aspx)と一般的な[操作の設定](https://technet.microsoft.com/library/dd569089(WS.10).aspx)を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-198">In addition, you'll need to specify various other [provider-specific settings](https://technet.microsoft.com/library/dd569001(WS.10).aspx) and general [operation settings](https://technet.microsoft.com/library/dd569089(WS.10).aspx).</span></span> <span data-ttu-id="90b55-199">たとえば、ContactManager の Mvc web アプリケーションをステージング環境にデプロイするとします。</span><span class="sxs-lookup"><span data-stu-id="90b55-199">For example, suppose you want to deploy the ContactManager.Mvc web application to a staging environment.</span></span> <span data-ttu-id="90b55-200">この配置は、Web 配置ハンドラーを対象とし、基本認証を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-200">The deployment will target the Web Deploy Handler and must use basic authentication.</span></span> <span data-ttu-id="90b55-201">Web アプリケーションをデプロイするには、次の手順を完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-201">To deploy the web application, you need to complete the next steps.</span></span>

<span data-ttu-id="90b55-202">**Msdeploy.exe を使用して web アプリケーションを展開するには**</span><span class="sxs-lookup"><span data-stu-id="90b55-202">**To deploy a web application using MSDeploy.exe**</span></span>

1. <span data-ttu-id="90b55-203">「 [Web アプリケーションプロジェクトのビルドおよびパッケージ化](building-and-packaging-web-application-projects.md)」で説明されているように、web アプリケーションプロジェクトをビルドしてパッケージ化します。</span><span class="sxs-lookup"><span data-stu-id="90b55-203">Build and package the web application project, as described in [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span>
2. <span data-ttu-id="90b55-204">「 [Web パッケージ配置のパラメーターの構成](configuring-parameters-for-web-package-deployment.md)」で説明されているように、ステージング環境の正しいパラメーター値が含まれるように*Contactmanager. Mvc パラメーター .xml*ファイルを変更します。</span><span class="sxs-lookup"><span data-stu-id="90b55-204">Modify the *ContactManager.Mvc.SetParameters.xml* file to contain the correct parameter values for your staging environment, as described in [Configuring Parameters for Web Package Deployment](configuring-parameters-for-web-package-deployment.md).</span></span>
3. <span data-ttu-id="90b55-205">コマンドプロンプトウィンドウを開き、Msdeploy.exe の場所を参照します。</span><span class="sxs-lookup"><span data-stu-id="90b55-205">Open a Command Prompt window and browse to the location of MSDeploy.exe.</span></span> <span data-ttu-id="90b55-206">これは通常、%PROGRAMFILES%\IIS\Microsoft Web 配置 V2\msdeploy.exe. にあります。</span><span class="sxs-lookup"><span data-stu-id="90b55-206">This is typically at %PROGRAMFILES%\IIS\Microsoft Web Deploy V2\msdeploy.exe.</span></span>
4. <span data-ttu-id="90b55-207">次のコマンドを入力し、enter キーを押します (改行は無視します)。</span><span class="sxs-lookup"><span data-stu-id="90b55-207">Type this command, and then press Enter (disregard the line breaks):</span></span>

    [!code-console[Main](deploying-web-packages/samples/sample7.cmd)]

<span data-ttu-id="90b55-208">次の点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-208">In this example:</span></span>

- <span data-ttu-id="90b55-209">**– Source**パラメーターは**パッケージ**プロバイダーを指定し、web パッケージの場所を示します。</span><span class="sxs-lookup"><span data-stu-id="90b55-209">The **–source** parameter specifies the **package** provider and indicates the location of the web package.</span></span>
- <span data-ttu-id="90b55-210">**– Dest**パラメーターは、**自動**プロバイダーを指定します。</span><span class="sxs-lookup"><span data-stu-id="90b55-210">The **–dest** parameter specifies the **auto** provider.</span></span> <span data-ttu-id="90b55-211">**ComputerName**設定は、移行先サーバーの Web 配置ハンドラーのサービス URL を提供します。</span><span class="sxs-lookup"><span data-stu-id="90b55-211">The **computerName** setting provides the service URL of the Web Deploy Handler on the destination server.</span></span> <span data-ttu-id="90b55-212">**[Authtype]** 設定は基本認証を使用することを示します。そのため、**ユーザー名**と**パスワード**を入力する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-212">The **authtype** setting indicates that you want to use basic authentication, and as such you need to provide a **username** and a **password**.</span></span> <span data-ttu-id="90b55-213">最後に、 **Includeacls = "False"** の設定は、ソース web アプリケーション内のファイルのアクセス制御リスト (acl) を移行先サーバーにコピーしないことを示します。</span><span class="sxs-lookup"><span data-stu-id="90b55-213">Finally, the **includeAcls="False"** setting indicates that you don't want to copy the access control lists (ACLs) of the files in your source web application to the destination server.</span></span>
- <span data-ttu-id="90b55-214">**– Verb: sync**引数は、移行先サーバーでソースコンテンツをレプリケートすることを示します。</span><span class="sxs-lookup"><span data-stu-id="90b55-214">The **–verb:sync** argument indicates that you want to replicate the source content on the destination server.</span></span>
- <span data-ttu-id="90b55-215">**– Disablelink**引数は、アプリケーションプール、仮想ディレクトリ構成、または SECURE SOCKETS LAYER (SSL) 証明書を移行先サーバーにレプリケートしないことを示します。</span><span class="sxs-lookup"><span data-stu-id="90b55-215">The **–disableLink** arguments indicate that you don't want to replicate application pools, virtual directory configuration, or Secure Sockets Layer (SSL) certificates on the destination server.</span></span> <span data-ttu-id="90b55-216">詳細については、「 [Web 配置リンク拡張機能](https://technet.microsoft.com/library/dd569028(WS.10).aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-216">For more information, see [Web Deploy Link Extensions](https://technet.microsoft.com/library/dd569028(WS.10).aspx).</span></span>
- <span data-ttu-id="90b55-217">**– Setparamfile**パラメーターは、 *setparameters .xml*ファイルの場所を提供します。</span><span class="sxs-lookup"><span data-stu-id="90b55-217">The **–setParamFile** parameter provides the location of the *SetParameters.xml* file.</span></span>
- <span data-ttu-id="90b55-218">**– Allowuntrusted**スイッチは、信頼された証明機関によって発行されていない SSL 証明書を Web 配置が受け入れる必要があることを示します。</span><span class="sxs-lookup"><span data-stu-id="90b55-218">The **–allowUntrusted** switch indicates that Web Deploy should accept SSL certificates that were not issued by a trusted certification authority.</span></span> <span data-ttu-id="90b55-219">Web 配置ハンドラーにデプロイしていて、自己署名証明書を使用してサービス URL を保護している場合は、このスイッチを含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-219">If you're deploying to the Web Deploy Handler, and you've used a self-signed certificate to secure the service URL, you need to include this switch.</span></span>

## <a name="automating-web-package-deployment"></a><span data-ttu-id="90b55-220">Web パッケージの配置の自動化</span><span class="sxs-lookup"><span data-stu-id="90b55-220">Automating Web Package Deployment</span></span>

<span data-ttu-id="90b55-221">多くのエンタープライズシナリオでは、大規模なシングルステップまたは自動化されたデプロイの一部として、web パッケージをデプロイする必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-221">In a lot of enterprise scenarios, you'll want to deploy your web packages as part of a larger single-step or automated deployment.</span></span> <span data-ttu-id="90b55-222">*.Deploy*ファイルを実行して、または msdeploy.exe を直接使用して、web パッケージを配置するかどうかに関係なく、コマンドをパラメーター化して、Microsoft Build Engine (MSBuild) プロジェクトファイルのターゲットから呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="90b55-222">Regardless of whether you choose to deploy your web packages by running the *.deploy.cmd* file or by using MSDeploy.exe directly, you can parameterize your commands and call them from a target in a Microsoft Build Engine (MSBuild) project file.</span></span>

<span data-ttu-id="90b55-223">Contact Manager サンプルソリューションで、 *Publish*ファイル内の**publishwebpackages**ターゲットを確認します。</span><span class="sxs-lookup"><span data-stu-id="90b55-223">In the Contact Manager sample solution, take a look at the **PublishWebPackages** target in the *Publish.proj* file.</span></span> <span data-ttu-id="90b55-224">このターゲットは、 **Publishpackages**という名前の項目リストによって識別される *.deploy*ファイルごとに1回実行されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-224">This target runs once for each *.deploy.cmd* file identified by an item list named **PublishPackages**.</span></span> <span data-ttu-id="90b55-225">ターゲットは、プロパティと項目メタデータを使用して、各 *.deploy*ファイルの引数値の完全なセットを作成してから、 **Exec**タスクを使用してコマンドを実行します。</span><span class="sxs-lookup"><span data-stu-id="90b55-225">The target uses properties and item metadata to build up a full set of argument values for each *.deploy.cmd* file and then uses the **Exec** task to run the command.</span></span>

[!code-xml[Main](deploying-web-packages/samples/sample8.xml)]

> [!NOTE]
> <span data-ttu-id="90b55-226">サンプルソリューションのプロジェクトファイルモデルの概要と、一般的なカスタムプロジェクトファイルの概要については、「[プロジェクトファイルについ](understanding-the-project-file.md)て」および「[ビルドプロセスについ](understanding-the-build-process.md)て」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-226">For a broader overview of the project file model in the sample solution, and an introduction to custom project files in general, see [Understanding the Project File](understanding-the-project-file.md) and [Understanding the Build Process](understanding-the-build-process.md).</span></span>

## <a name="endpoint-considerations"></a><span data-ttu-id="90b55-227">エンドポイントに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="90b55-227">Endpoint Considerations</span></span>

<span data-ttu-id="90b55-228">*.Deploy*ファイルを実行して、または msdeploy.exe を直接使用して、web パッケージを配置するかどうかにかかわらず、デプロイのコンピューター名またはサービスエンドポイントを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-228">Regardless of whether you deploy your web package by running the *.deploy.cmd* file or by using MSDeploy.exe directly, you need to specify a computer name or a service endpoint for your deployment.</span></span>

<span data-ttu-id="90b55-229">対象の web サーバーが Web 配置リモートエージェントサービスを使用してデプロイするように構成されている場合は、ターゲットサービスの URL を送信先として指定します。</span><span class="sxs-lookup"><span data-stu-id="90b55-229">If the destination web server is configured for deployment using the Web Deploy Remote Agent service, you specify the target service URL as your destination.</span></span>

[!code-console[Main](deploying-web-packages/samples/sample9.cmd)]

<span data-ttu-id="90b55-230">または、宛先としてサーバー名だけを指定することも、リモートエージェントサービスの URL を推測 Web 配置こともできます。</span><span class="sxs-lookup"><span data-stu-id="90b55-230">Alternatively, you can specify the server name alone as your destination, and Web Deploy will infer the remote agent service URL.</span></span>

[!code-console[Main](deploying-web-packages/samples/sample10.cmd)]

<span data-ttu-id="90b55-231">対象の web サーバーが Web 配置ハンドラーを使用して配置するように構成されている場合は、IIS Web 管理サービス (WMSvc) のエンドポイントアドレスを宛先として指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-231">If the destination web server is configured for deployment using the Web Deploy Handler, you need to specify the endpoint address of the IIS Web Management Service (WMSvc) as your destination.</span></span> <span data-ttu-id="90b55-232">既定では、次の形式になります。</span><span class="sxs-lookup"><span data-stu-id="90b55-232">By default, this takes the form:</span></span>

[!code-console[Main](deploying-web-packages/samples/sample11.cmd)]

<span data-ttu-id="90b55-233">これらのエンドポイントのいずれかをターゲットにするには、 *.deploy*ファイルまたは msdeploy.exe を直接使用します。</span><span class="sxs-lookup"><span data-stu-id="90b55-233">You can target any of these endpoints using either the *.deploy.cmd* file or MSDeploy.exe directly.</span></span> <span data-ttu-id="90b55-234">ただし、「 [Web 配置発行用に Web サーバーを構成する (Web 配置ハンドラー)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md)」の説明に従って、管理者以外のユーザーとして Web 配置ハンドラーに展開する場合は、サービスエンドポイントアドレスにクエリ文字列を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-234">However, if you want to deploy to the Web Deploy Handler as a non-administrator user, as described in [Configure a Web Server for Web Deploy Publishing (Web Deploy Handler)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md), you need to add a query string to the service endpoint address.</span></span>

[!code-console[Main](deploying-web-packages/samples/sample12.cmd)]

<span data-ttu-id="90b55-235">これは、管理者以外のユーザーが IIS サーバー レベルのアクセスを持っていないためです。そのユーザーは、特定の IIS web サイトへのアクセスのみが。</span><span class="sxs-lookup"><span data-stu-id="90b55-235">This is because the non-administrator user doesn't have server-level access to IIS; he or she only has access to a specific IIS website.</span></span> <span data-ttu-id="90b55-236">このドキュメントの執筆時点では、Web 発行パイプライン (WPP) のバグが原因で、クエリ文字列を含むエンドポイントアドレスを使用して *.deploy*ファイルを実行することはできません。</span><span class="sxs-lookup"><span data-stu-id="90b55-236">At the time of writing, due to a bug in the Web Publishing Pipeline (WPP), you can't run the *.deploy.cmd* file using an endpoint address that includes a query string.</span></span> <span data-ttu-id="90b55-237">このシナリオで直接 MSDeploy.exe を使用して、web パッケージを展開する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-237">In this scenario, you need to deploy your web package by using MSDeploy.exe directly.</span></span>

> [!NOTE]
> <span data-ttu-id="90b55-238">リモートエージェントサービスと Web 配置ハンドラーの Web 配置の詳細については、「 [Web 配置に適切なアプローチを選択する](../configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-238">For more information on the Web Deploy Remote Agent service and the Web Deploy Handler, see [Choosing the Right Approach to Web Deployment](../configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment.md).</span></span> <span data-ttu-id="90b55-239">これらのエンドポイントに配置するために環境固有のプロジェクトファイルを構成する方法については、「[ターゲット環境の配置プロパティを構成](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-239">For guidance on how to configure your environment-specific project files to deploy to these endpoints, see [Configure Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>

## <a name="authentication-considerations"></a><span data-ttu-id="90b55-240">認証に関する注意点</span><span class="sxs-lookup"><span data-stu-id="90b55-240">Authentication Considerations</span></span>

<span data-ttu-id="90b55-241">*.Deploy*ファイルを実行して、または msdeploy.exe を直接使用して、web パッケージを配置するかどうかに関係なく、認証の種類を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-241">Regardless of whether you deploy your web package by running the *.deploy.cmd* file or by using MSDeploy.exe directly, you need to specify an authentication type.</span></span> <span data-ttu-id="90b55-242">Web 配置には、 **NTLM**または**Basic**の2つの値を指定できます。</span><span class="sxs-lookup"><span data-stu-id="90b55-242">Web Deploy accepts two possible values: **NTLM** or **Basic**.</span></span> <span data-ttu-id="90b55-243">基本認証を指定する場合は、ユーザー名とパスワードも指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-243">If you specify basic authentication, you also need to provide a user name and password.</span></span> <span data-ttu-id="90b55-244">認証の種類を選択する際には、次の点に注意する必要があるさまざまな要素があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-244">There are various factors you need to be aware of when you select an authentication type:</span></span>

- <span data-ttu-id="90b55-245">Web 配置リモートエージェントサービスにデプロイする場合は、NTLM 認証を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-245">If you're deploying to the Web Deploy Remote Agent service, you must use NTLM authentication.</span></span> <span data-ttu-id="90b55-246">リモートエージェントサービスは、基本認証資格情報を受け入れません。</span><span class="sxs-lookup"><span data-stu-id="90b55-246">The remote agent service doesn't accept basic authentication credentials.</span></span>
- <span data-ttu-id="90b55-247">Web 配置ハンドラーにデプロイする場合は、NTLM 認証または基本認証のいずれかを使用できます。</span><span class="sxs-lookup"><span data-stu-id="90b55-247">If you're deploying to the Web Deploy Handler, you can use either NTLM or basic authentication.</span></span> <span data-ttu-id="90b55-248">既定の設定は [基本認証] です。</span><span class="sxs-lookup"><span data-stu-id="90b55-248">The default setting is basic authentication.</span></span> <span data-ttu-id="90b55-249">基本認証は、プレーンテキストで送信されるユーザー名とパスワードに依存しますが、Web 配置ハンドラーが常に SSL 暗号化を使用するため、資格情報が保護されます。</span><span class="sxs-lookup"><span data-stu-id="90b55-249">Although basic authentication relies on user names and passwords being transmitted in plain text, your credentials are protected as the Web Deploy Handler always uses SSL encryption.</span></span>
- <span data-ttu-id="90b55-250">Web パッケージにデータベースが含まれており、web サーバーとデータベースサーバーが別々のコンピューターである場合、 [ntlm の "ダブルホップ" の制限](https://go.microsoft.com/?linkid=9805120)により、ntlm 認証を使用してデータベースをデプロイすることはできません。</span><span class="sxs-lookup"><span data-stu-id="90b55-250">If your web package includes a database, and the web server and database server are separate machines, you won't be able to deploy the database using NTLM authentication due to the [NTLM "double-hop" limitation](https://go.microsoft.com/?linkid=9805120).</span></span> <span data-ttu-id="90b55-251">デプロイ接続文字列で SQL Server 資格情報を使用するか、基本認証の資格情報を指定して Web 配置する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90b55-251">You need to either use SQL Server credentials in your deployment connection string or supply basic authentication credentials to Web Deploy.</span></span> <span data-ttu-id="90b55-252">この問題の詳細については、「[エンタープライズ環境にメンバーシップデータベースを展開する](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-252">This issue is described in more detail in [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="90b55-253">まとめ</span><span class="sxs-lookup"><span data-stu-id="90b55-253">Conclusion</span></span>

<span data-ttu-id="90b55-254">このトピックでは、 *.deploy*ファイルを実行するか、または msdeploy.exe を直接使用して、web パッケージを配置する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="90b55-254">This topic described how you can deploy a web package either by running the *.deploy.cmd* file or by using MSDeploy.exe directly.</span></span> <span data-ttu-id="90b55-255">この記事では、各方法が適切であることを説明し、より大きなシングルステップまたは自動のビルドプロセスの一部として配置コマンドをパラメーター化して実行する方法について説明しました。</span><span class="sxs-lookup"><span data-stu-id="90b55-255">It explained when each approach might be appropriate, and it described how you can parameterize and run a deployment command as part of a larger single-step or automated build process.</span></span>

## <a name="further-reading"></a><span data-ttu-id="90b55-256">参考資料</span><span class="sxs-lookup"><span data-stu-id="90b55-256">Further Reading</span></span>

<span data-ttu-id="90b55-257">Web 配置パッケージを作成してパラメーター化する方法のガイダンスについては、「web[アプリケーションプロジェクトのビルドおよびパッケージ化](building-and-packaging-web-application-projects.md)」および「 [web パッケージ配置のパラメーターの構成](configuring-parameters-for-web-package-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-257">For guidance on how to create and parameterize a web deployment package, see [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md) and [Configuring Parameters for Web Package Deployment](configuring-parameters-for-web-package-deployment.md).</span></span> <span data-ttu-id="90b55-258">Team Foundation Server (TFS) インスタンスから web パッケージを構築および配置する方法については、「[自動 Web デプロイの Team Foundation Server の構成](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-258">For guidance on how to build and deploy web packages from a Team Foundation Server (TFS) instance, see [Configuring Team Foundation Server for Automated Web Deployment](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md).</span></span> <span data-ttu-id="90b55-259">展開プロセスをカスタマイズおよびトラブルシューティングする方法については、「[展開からのファイルとフォルダーの除外](../advanced-enterprise-web-deployment/excluding-files-and-folders-from-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90b55-259">For information on how to customize and troubleshoot the deployment process, see [Excluding Files and Folders from Deployment](../advanced-enterprise-web-deployment/excluding-files-and-folders-from-deployment.md).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="90b55-260">[前へ](configuring-parameters-for-web-package-deployment.md)
> [次へ](deploying-database-projects.md)</span><span class="sxs-lookup"><span data-stu-id="90b55-260">[Previous](configuring-parameters-for-web-package-deployment.md)
[Next](deploying-database-projects.md)</span></span>
