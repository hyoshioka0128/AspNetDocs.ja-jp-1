---
uid: web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
title: マスター/詳細の選択可能なマスター GridView を使用すると詳細 DetailView (c#) |Microsoft Docs
author: rick-anderson
description: このチュートリアルは、GridView 行選択ボタンと共に各製品の価格と名前を含める必要があります。 Particu の Select ボタンをクリックしています.
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 0f982827-f8f9-420d-b36b-57b23f5aa519
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
msc.type: authoredcontent
ms.openlocfilehash: 6c6c4d6176dc87007346791dcf665e5288e4d6cc
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2019
ms.locfileid: "65108268"
---
# <a name="masterdetail-using-a-selectable-master-gridview-with-a-details-detailview-c"></a><span data-ttu-id="ad1c6-104">選択可能なマスター GridView と詳細 DetailView を使用してマスター/詳細を表示する (C#)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-104">Master/Detail Using a Selectable Master GridView with a Details DetailView (C#)</span></span>

<span data-ttu-id="ad1c6-105">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ad1c6-106">[サンプル アプリをダウンロード](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe)または[PDF のダウンロード](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-106">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe) or [Download PDF](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span></span>

> <span data-ttu-id="ad1c6-107">このチュートリアルは、GridView 行選択ボタンと共に各製品の価格と名前を含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-107">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="ad1c6-108">特定の製品の選択 ボタンをクリックすると、同じページに DetailsView コントロールに表示される、完全な詳細情報が発生します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-108">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>

## <a name="introduction"></a><span data-ttu-id="ad1c6-109">はじめに</span><span class="sxs-lookup"><span data-stu-id="ad1c6-109">Introduction</span></span>

<span data-ttu-id="ad1c6-110">[前のチュートリアル](master-detail-filtering-across-two-pages-cs.md)2 つの web ページを使用してマスター/詳細レポートを作成する方法を説明しました"マスター"web ページ、サプライヤーの一覧を表示、および、選択したによって提供されるこれらの製品を一覧表示"詳細"web ページ。仕入先。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-110">In the [previous tutorial](master-detail-filtering-across-two-pages-cs.md) we saw how to create a master/detail report using two web pages: a "master" web page, from which we displayed the list of suppliers; and a "details" web page that listed those products provided by the selected supplier.</span></span> <span data-ttu-id="ad1c6-111">この 2 つのページのレポートの形式は、1 つのページに凝縮できます。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-111">This two page report format can be condensed into one page.</span></span> <span data-ttu-id="ad1c6-112">このチュートリアルは、GridView 行選択ボタンと共に各製品の価格と名前を含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-112">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="ad1c6-113">特定の製品の選択 ボタンをクリックすると、同じページに DetailsView コントロールに表示される、完全な詳細情報が発生します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-113">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>

<span data-ttu-id="ad1c6-114">[![[選択] ボタンをクリックしてには、製品の詳細が表示されます。](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-114">[![Clicking the Select Button Displays the Product's Details](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span></span>

<span data-ttu-id="ad1c6-115">**図 1**:[選択] ボタンをクリックしてには、製品の詳細が表示されます ([フルサイズの画像を表示する をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-115">**Figure 1**: Clicking the Select Button Displays the Product's Details ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png))</span></span>

## <a name="step-1-creating-a-selectable-gridview"></a><span data-ttu-id="ad1c6-116">手順 1: 選択可能な GridView を作成します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-116">Step 1: Creating a Selectable GridView</span></span>

<span data-ttu-id="ad1c6-117">マスター/詳細の 2 ページで各マスター レコードにハイパーリンクが含まれていることを報告することを思い出してくださいをクリックすると、クリックされた行を渡すことの詳細ページにユーザーに送信`SupplierID`クエリ文字列値。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-117">Recall that in the two-page master/detail report that each master record included a hyperlink that, when clicked, sent the user to the details page passing the clicked row's `SupplierID` value in the querystring.</span></span> <span data-ttu-id="ad1c6-118">このようなハイパーリンクは、内を使用して GridView 行ごとに追加されました。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-118">Such a hyperlink was added to each GridView row using a HyperLinkField.</span></span> <span data-ttu-id="ad1c6-119">1 つのページ マスター/詳細レポートでは、私たちは必要があります、ボタンをクリックすると、各 GridView 行の詳細が表示されます。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-119">For the single page master/details report, we will need a Button for each GridView row that, when clicked, shows the details.</span></span> <span data-ttu-id="ad1c6-120">GridView コントロールは、ポストバックが発生して、その行を GridView のとしてマークする行ごとに Select ボタンを含めるように構成できる[SelectedRow](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedrow.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-120">The GridView control can be configured to include a Select button for each row that causes a postback and marks that row as the GridView's [SelectedRow](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedrow.aspx).</span></span>

<span data-ttu-id="ad1c6-121">GridView コントロールを追加することで開始、`DetailsBySelecting.aspx`ページで、`Filtering`設定、フォルダー、`ID`プロパティを`ProductsGrid`します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-121">Start by adding a GridView control to the `DetailsBySelecting.aspx` page in the `Filtering` folder, setting its `ID` property to `ProductsGrid`.</span></span> <span data-ttu-id="ad1c6-122">という名前の新しい ObjectDataSource を次に、追加`AllProductsDataSource`を呼び出す、`ProductsBLL`クラスの`GetProducts()`メソッド。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-122">Next, add a new ObjectDataSource named `AllProductsDataSource` that invokes the `ProductsBLL` class's `GetProducts()` method.</span></span>

<span data-ttu-id="ad1c6-123">[![ObjectDataSource AllProductsDataSource という名前の作成します。](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-123">[![Create an ObjectDataSource Named AllProductsDataSource](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span></span>

<span data-ttu-id="ad1c6-124">**図 2**:ObjectDataSource の名前付き作成`AllProductsDataSource`([フルサイズの画像を表示する をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-124">**Figure 2**: Create an ObjectDataSource Named `AllProductsDataSource` ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png))</span></span>

<span data-ttu-id="ad1c6-125">[![ProductsBLL クラスを使用して、](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-125">[![Use the ProductsBLL Class](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span></span>

<span data-ttu-id="ad1c6-126">**図 3**:使用して、`ProductsBLL`クラス ([フルサイズの画像を表示する をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-126">**Figure 3**: Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png))</span></span>

<span data-ttu-id="ad1c6-127">[![ObjectDataSource GetProducts() メソッドを呼び出すための構成します。](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-127">[![Configure the ObjectDataSource to Invoke the GetProducts() Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span></span>

<span data-ttu-id="ad1c6-128">**図 4**:Invoke ObjectDataSource を構成、`GetProducts()`メソッド ([フルサイズの画像を表示する をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-128">**Figure 4**: Configure the ObjectDataSource to Invoke the `GetProducts()` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png))</span></span>

<span data-ttu-id="ad1c6-129">GridView のフィールドを削除する編集はすべて、`ProductName`と`UnitPrice`BoundFields。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-129">Edit the GridView's fields removing all but the `ProductName` and `UnitPrice` BoundFields.</span></span> <span data-ttu-id="ad1c6-130">また、自由に書式設定など、必要に応じてこれら BoundFields をカスタマイズする、`UnitPrice`を通貨として BoundField を変更して、 `HeaderText` BoundFields のプロパティ。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-130">Also, feel free to customize these BoundFields as needed, such as formatting the `UnitPrice` BoundField as a currency and changing the `HeaderText` properties of the BoundFields.</span></span> <span data-ttu-id="ad1c6-131">次の手順は、GridView のスマート タグからの列の編集リンクをクリックして、または宣言の構文を手動で構成することで、グラフィカルに実現できます。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-131">These steps can be accomplished graphically, by clicking the Edit Columns link from the GridView's smart tag, or by manually configuring the declarative syntax.</span></span>

<span data-ttu-id="ad1c6-132">[![ProductName および UnitPrice BoundFields 以外はすべて削除します。](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-132">[![Remove All But the ProductName and UnitPrice BoundFields](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span></span>

<span data-ttu-id="ad1c6-133">**図 5**:すべて削除しますが、`ProductName`と`UnitPrice`BoundFields ([フルサイズの画像を表示する をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-133">**Figure 5**: Remove All But the `ProductName` and `UnitPrice` BoundFields ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png))</span></span>

<span data-ttu-id="ad1c6-134">GridView の最終的なマークアップを示します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-134">The final markup for the GridView is:</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample1.aspx)]

<span data-ttu-id="ad1c6-135">次に、行ごとに Select ボタンが追加されますとして選択可能な GridView をマークする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-135">Next, we need to mark the GridView as selectable, which will add a Select button to each row.</span></span> <span data-ttu-id="ad1c6-136">これを実現するには、GridView のスマート タグの選択を有効にするチェック ボックスにチェックします。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-136">To accomplish this, simply check the Enable Selection checkbox in the GridView's smart tag.</span></span>

<span data-ttu-id="ad1c6-137">[![GridView の行を選択できるように](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-137">[![Make the GridView's Rows Selectable](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span></span>

<span data-ttu-id="ad1c6-138">**図 6**:GridView の行を選択できるように ([フルサイズの画像を表示する をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-138">**Figure 6**: Make the GridView's Rows Selectable ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png))</span></span>

<span data-ttu-id="ad1c6-139">選択を有効にするオプションをオンにする [commandfield] を追加、`ProductsGrid`を含む GridView その`ShowSelectButton`プロパティを True に設定します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-139">Checking the Enabling Selection option adds a CommandField to the `ProductsGrid` GridView with its `ShowSelectButton` property set to True.</span></span> <span data-ttu-id="ad1c6-140">これは、結果に Select ボタン、GridView の行ごとの図 6 に示すようにします。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-140">This results in a Select button for each row of the GridView, as Figure 6 illustrates.</span></span> <span data-ttu-id="ad1c6-141">既定では、Select ボタンがある、としてレンダリングされますが、ボタンまたは ImageButtons 代わりに [commandfield] の使用`ButtonType`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-141">By default, the Select buttons are rendered as LinkButtons, but you can use Buttons or ImageButtons instead through the CommandField's `ButtonType` property.</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample2.aspx)]

<span data-ttu-id="ad1c6-142">ポストバックに陥ります GridView 行の Select ボタンがクリックされたときに、GridView の`SelectedRow`プロパティが更新されます。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-142">When a GridView row's Select button is clicked a postback ensues and the GridView's `SelectedRow` property is updated.</span></span> <span data-ttu-id="ad1c6-143">加え、`SelectedRow`プロパティ、GridView の提供、 [SelectedIndex](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx)、 [SelectedValue](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx)、および[SelectedDataKey](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx)プロパティ。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-143">In addition to the `SelectedRow` property, the GridView provides the [SelectedIndex](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx), [SelectedValue](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx), and [SelectedDataKey](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx) properties.</span></span> <span data-ttu-id="ad1c6-144">`SelectedIndex`プロパティが選択した行のインデックスを返しますが、`SelectedValue`と`SelectedDataKey`プロパティ GridView のに基づいて値を返します[DataKeyNames プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-144">The `SelectedIndex` property returns the index of the selected row, whereas the `SelectedValue` and `SelectedDataKey` properties return values based upon the GridView's [DataKeyNames property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx).</span></span>

<span data-ttu-id="ad1c6-145">`DataKeyNames`プロパティを使用して、1 つを関連付ける、または複数のデータ フィールドの各行と値および GridView の各行と基になるデータから一意に識別する情報を属性に一般的に使用します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-145">The `DataKeyNames` property is used to associate one or more data field values with each row and is commonly used to attribute uniquely identifying information from the underlying data with each GridView row.</span></span> <span data-ttu-id="ad1c6-146">`SelectedValue`プロパティは、最初の値を返します`DataKeyNames`選択した行のデータ フィールドが該当します、`SelectedDataKey`プロパティは、選択した行を返します`DataKey`オブジェクトで、すべての指定したデータのキー フィールドの値が含まれます。その行。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-146">The `SelectedValue` property returns the value of the first `DataKeyNames` data field for the selected row where as the `SelectedDataKey` property returns the selected row's `DataKey` object, which contains all of the values for the specified data key fields for that row.</span></span>

<span data-ttu-id="ad1c6-147">`DataKeyNames`プロパティは GridView、DetailsView、またはフォーム ビュー、デザイナーを使用するデータ ソースをバインドすると、自動的に一意に識別するデータ フィールドを設定します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-147">The `DataKeyNames` property is automatically set to the uniquely-identifying data field(s) when you bind a data source to a GridView, DetailsView, or FormView through the Designer.</span></span> <span data-ttu-id="ad1c6-148">中に、このプロパティが設定されてを自動的に、上記のチュートリアルで、例では、ならば、なし、`DataKeyNames`プロパティを指定します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-148">While this property has been set for us automatically in the preceding tutorials, the examples would have worked without the `DataKeyNames` property specified.</span></span> <span data-ttu-id="ad1c6-149">ただし、このチュートリアルで選択可能な GridView およびを私たちを調べて、検証挿入、更新、および削除するには、今後のチュートリアルについては、`DataKeyNames`プロパティを適切に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-149">However, for the selectable GridView in this tutorial, as well as for future tutorials in which we'll be examining inserting, updating, and deleting, the `DataKeyNames` property must be set properly.</span></span> <span data-ttu-id="ad1c6-150">GridView のことを確認する少し`DataKeyNames`プロパティに設定されて`ProductID`します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-150">Take a moment to ensure that your GridView's `DataKeyNames` property is set to `ProductID`.</span></span>

<span data-ttu-id="ad1c6-151">ブラウザーできませんでしたが、進行状況を表示してみましょう。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-151">Let's view our progress thus far through a browser.</span></span> <span data-ttu-id="ad1c6-152">GridView には、すべての選択の LinkButton と製品の価格と名前が一覧表示されるに注意してください。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-152">Note that the GridView lists the name and price for all of the products along with a Select LinkButton.</span></span> <span data-ttu-id="ad1c6-153">[選択] ボタンをクリックすると、ポストバックが発生します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-153">Clicking the Select button causes a postback.</span></span> <span data-ttu-id="ad1c6-154">手順 2 では、選択した製品の詳細を表示することによってこのポストバックに DetailsView 応答する方法を表示されます。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-154">In Step 2 we'll see how to have a DetailsView respond to this postback by displaying the details for the selected product.</span></span>

<span data-ttu-id="ad1c6-155">[![各製品の行には、Select LinkButton が含まれています。](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-155">[![Each Product Row Contains a Select LinkButton](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span></span>

<span data-ttu-id="ad1c6-156">**図 7**:各製品の行には選択 LinkButton が含まれています ([フルサイズの画像を表示する をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-156">**Figure 7**: Each Product Row Contains a Select LinkButton ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png))</span></span>

### <a name="highlighting-the-selected-row"></a><span data-ttu-id="ad1c6-157">選択した行を強調表示</span><span class="sxs-lookup"><span data-stu-id="ad1c6-157">Highlighting the Selected Row</span></span>

<span data-ttu-id="ad1c6-158">`ProductsGrid` GridView が、`SelectedRowStyle`プロパティが選択した行の visual スタイルをディクテーションを使用できます。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-158">The `ProductsGrid` GridView has a `SelectedRowStyle` property that can be used to dictate the visual style for the selected row.</span></span> <span data-ttu-id="ad1c6-159">適切に使用して詳細を明確に示す GridView の行が現在選択されているユーザーのエクスペリエンスの向上このことができます。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-159">Used properly, this can improve the user's experience by more clearly showing which row of the GridView is currently selected.</span></span> <span data-ttu-id="ad1c6-160">このチュートリアルでは、背景が黄色で強調表示は選択した行があてみましょう。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-160">For this tutorial, let's have the selected row be highlighted with a yellow background.</span></span>

<span data-ttu-id="ad1c6-161">同様に、以前のチュートリアルでは、CSS クラスとして定義されている美学上に関連する設定を保持するよう努力しましょう。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-161">As with our earlier tutorials, let's strive to keep the aesthetic-related settings defined as CSS classes.</span></span> <span data-ttu-id="ad1c6-162">そのため、新しい CSS クラスを作成`Styles.css`という`SelectedRowStyle`します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-162">Therefore, create a new CSS class in `Styles.css` named `SelectedRowStyle`.</span></span>

[!code-css[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample3.css)]

<span data-ttu-id="ad1c6-163">この CSS クラスを適用する、`SelectedRowStyle`プロパティの*すべて*チュートリアル シリーズで Gridview 編集、`GridView.skin`にスキンを適用、`DataWebControls`に含めるテーマ、`SelectedRowStyle`次に示すように設定。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-163">To apply this CSS class to the `SelectedRowStyle` property of *all* GridViews in our tutorial series, edit the `GridView.skin` Skin in the `DataWebControls` Theme to include the `SelectedRowStyle` settings as shown below:</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample4.aspx)]

<span data-ttu-id="ad1c6-164">このさらに、GridView に選択された行は今すぐ黄色の背景色で強調表示されます。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-164">With this addition, the selected GridView row is now highlighted with a yellow background color.</span></span>

<span data-ttu-id="ad1c6-165">[![GridView の SelectedRowStyle プロパティを使用して、選択した行の外観をカスタマイズします。](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-165">[![Customize the Selected Row's Appearance Using the GridView's SelectedRowStyle Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span></span>

<span data-ttu-id="ad1c6-166">**図 8**:GridView のカスタマイズ [選択した行の外観を使用して`SelectedRowStyle`プロパティ ([フルサイズの画像を表示する] をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-166">**Figure 8**: Customize the Selected Row's Appearance Using the GridView's `SelectedRowStyle` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png))</span></span>

## <a name="step-2-displaying-the-selected-products-details-in-a-detailsview"></a><span data-ttu-id="ad1c6-167">手順 2: DetailsView で選択した製品の詳細を表示します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-167">Step 2: Displaying the Selected Product's Details in a DetailsView</span></span>

<span data-ttu-id="ad1c6-168">`ProductsGrid` GridView が完了残っては選択されている特定の製品についての情報を表示する DetailsView を追加することだけです。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-168">With the `ProductsGrid` GridView complete, all that remains is to add a DetailsView that displays information about the particular product selected.</span></span> <span data-ttu-id="ad1c6-169">上、GridView、DetailsView コントロールを追加しという名前の新しい ObjectDataSource を作成して`ProductDetailsDataSource`します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-169">Add a DetailsView control above the GridView and create a new ObjectDataSource named `ProductDetailsDataSource`.</span></span> <span data-ttu-id="ad1c6-170">選択した製品に関する特定の情報を表示するには、この DetailsView ので、構成、`ProductDetailsDataSource`を使用する、`ProductsBLL`クラスの`GetProductByProductID(productID)`メソッド。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-170">Since we want this DetailsView to display particular information about the selected product, configure the `ProductDetailsDataSource` to use the `ProductsBLL` class's `GetProductByProductID(productID)` method.</span></span>

<span data-ttu-id="ad1c6-171">[![ProductsBLL クラスの GetProductByProductID(productID) メソッドを呼び出す](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-171">[![Invoke the ProductsBLL Class's GetProductByProductID(productID) Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span></span>

<span data-ttu-id="ad1c6-172">**図 9**:呼び出す、`ProductsBLL`クラスの`GetProductByProductID(productID)`メソッド ([フルサイズの画像を表示する をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-172">**Figure 9**: Invoke the `ProductsBLL` Class's `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png))</span></span>

<span data-ttu-id="ad1c6-173">*`productID`* パラメーターの値を GridView コントロールから取得した`SelectedValue`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-173">Have the *`productID`* parameter's value obtained from the GridView control's `SelectedValue` property.</span></span> <span data-ttu-id="ad1c6-174">前に、GridView に説明したよう`SelectedValue`プロパティは、最初のデータ キーの選択した行の値を返します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-174">As we discussed earlier, the GridView's `SelectedValue` property returns the first data key value for the selected row.</span></span> <span data-ttu-id="ad1c6-175">そのため、命令型を GridView の`DataKeyNames`プロパティに設定されて`ProductID`いるため、選択した行の`ProductID`によって値が返される`SelectedValue`します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-175">Therefore, it's imperative that the GridView's `DataKeyNames` property is set to `ProductID`, so that the selected row's `ProductID` value is returned by `SelectedValue`.</span></span>

<span data-ttu-id="ad1c6-176">[![GridView の SelectedValue プロパティに productID パラメーターを設定します。](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-176">[![Set the productID Parameter to the GridView's SelectedValue Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span></span>

<span data-ttu-id="ad1c6-177">**図 10**:設定、 *`productID`* パラメーターを GridView の`SelectedValue`プロパティ ([フルサイズの画像を表示する をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-177">**Figure 10**: Set the *`productID`* Parameter to the GridView's `SelectedValue` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png))</span></span>

<span data-ttu-id="ad1c6-178">1 回、 `productDetailsDataSource` ObjectDataSource が正しく構成されていて、DetailsView にバインドされている、このチュートリアルは終了です。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-178">Once the `productDetailsDataSource` ObjectDataSource has been configured correctly and bound to the DetailsView, this tutorial is complete!</span></span> <span data-ttu-id="ad1c6-179">ページが初めてアクセスしたときに行が選択されていないため、GridView の`SelectedValue`プロパティが返す`null`します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-179">When the page is first visited no row is selected, so the GridView's `SelectedValue` property returns `null`.</span></span> <span data-ttu-id="ad1c6-180">製品がないので、 `NULL` `ProductID`値、レコードは返されませんが、`GetProductByProductID(productID)`メソッド DetailsView が表示されていないことを意味 (図 11 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-180">Since there are no products with a `NULL` `ProductID` value, no records are returned by the `GetProductByProductID(productID)` method, meaning that the DetailsView isn't displayed (see Figure 11).</span></span> <span data-ttu-id="ad1c6-181">GridView の行の選択ボタンをクリックするとポストバックに陥ります、DetailsView を更新します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-181">Upon clicking a GridView row's Select button, a postback ensues and the DetailsView is refreshed.</span></span> <span data-ttu-id="ad1c6-182">GridView の今回`SelectedValue`プロパティが返す、`ProductID`選択した行の`GetProductByProductID(productID)`メソッドを返します。 を`ProductsDataTable`その特定の製品と DetailsView についてこれらの詳細を示しています (図 12 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-182">This time the GridView's `SelectedValue` property returns the `ProductID` of the selected row, the `GetProductByProductID(productID)` method returns a `ProductsDataTable` with information about that particular product, and the DetailsView shows these details (see Figure 12).</span></span>

<span data-ttu-id="ad1c6-183">[![最初のアクセス、GridView のみが表示される場合](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-183">[![When First Visited, Only the GridView is Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span></span>

<span data-ttu-id="ad1c6-184">**図 11**:最初にアクセスすると、GridView のみが表示されます ([フルサイズの画像を表示する をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-184">**Figure 11**: When First Visited, Only the GridView is Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png))</span></span>

<span data-ttu-id="ad1c6-185">[![行を選択すると、製品の詳細が表示されます。](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-185">[![Upon Selecting a Row, the Product's Details are Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span></span>

<span data-ttu-id="ad1c6-186">**図 12**:行を選択すると、製品の詳細が表示されます ([フルサイズの画像を表示する をクリックします](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png))。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-186">**Figure 12**: Upon Selecting a Row, the Product's Details are Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png))</span></span>

## <a name="summary"></a><span data-ttu-id="ad1c6-187">まとめ</span><span class="sxs-lookup"><span data-stu-id="ad1c6-187">Summary</span></span>

<span data-ttu-id="ad1c6-188">これで、上記の 3 つのチュートリアルのさまざまなマスター/詳細レポートを表示するための手法を説明しました。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-188">In this and the preceding three tutorials we've seen a number of techniques for displaying master/detail reports.</span></span> <span data-ttu-id="ad1c6-189">調べるこのチュートリアルでは選択可能な GridView を使用して、マスター レコードと同じページで選択したマスター レコードの詳細を表示する、DetailsView を格納します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-189">In this tutorial we examined using a selectable GridView to house the master records and a DetailsView to display details about the selected master record on the same page.</span></span> <span data-ttu-id="ad1c6-190">前のチュートリアルには、Dropdownlist を使用して、1 つの web ページと詳細レコードを別のマスター レコードを表示するマスター/詳細レポートを表示する方法を説明しました。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-190">In the earlier tutorials we looked at how to display master/details reports using DropDownLists and displaying master records on one web page and detail records on another.</span></span>

<span data-ttu-id="ad1c6-191">このチュートリアルでは、マスター/詳細レポートのマイクロソフトの調査で終了します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-191">This tutorial concludes our examination of master/detail reports.</span></span> <span data-ttu-id="ad1c6-192">以降、次のチュートリアルではまず、探索の GridView、DetailsView、FormView とカスタマイズされた書式します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-192">Starting with the next tutorial we'll begin our exploration of customized formatting with the GridView, DetailsView, and FormView.</span></span> <span data-ttu-id="ad1c6-193">ここにバインドされたデータに基づくこれらのコントロールの外観をカスタマイズする方法、GridView のフッターにデータを集計する方法、およびテンプレートを使用してより詳細なレイアウトの制御を取得する方法が表示されます。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-193">We'll see how to customize the appearance of these controls based on the data bound to them, how to summarize data in the GridView's footer, and how to use templates to obtain a greater degree of control over the layout.</span></span>

<span data-ttu-id="ad1c6-194">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-194">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="ad1c6-195">執筆者紹介</span><span class="sxs-lookup"><span data-stu-id="ad1c6-195">About the Author</span></span>

<span data-ttu-id="ad1c6-196">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックおよびの創設者の著者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、Microsoft Web テクノロジと 1998 年から携わっています。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-196">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="ad1c6-197">Scott は、フリーのコンサルタント、トレーナー、およびライターとして動作します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-197">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="ad1c6-198">最新の著書は[ *Sams 教える自分で ASP.NET 2.0 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-198">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="ad1c6-199">彼に到達できる[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-199">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="ad1c6-200">彼のブログにあるでまたは[ http://ScottOnWriting.NET](http://ScottOnWriting.NET)します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-200">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="ad1c6-201">特別なに感謝します。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-201">Special Thanks To</span></span>

<span data-ttu-id="ad1c6-202">このチュートリアル シリーズは、多くの便利なレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-202">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="ad1c6-203">このチュートリアルでは、潜在顧客レビュー担当者が、Hilton Giesenow です。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-203">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="ad1c6-204">今後、MSDN の記事を確認したいですか。</span><span class="sxs-lookup"><span data-stu-id="ad1c6-204">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="ad1c6-205">場合は、筆者に[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-205">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ad1c6-206">[前へ](master-detail-filtering-across-two-pages-cs.md)
> [次へ](master-detail-filtering-with-a-dropdownlist-vb.md)</span><span class="sxs-lookup"><span data-stu-id="ad1c6-206">[Previous](master-detail-filtering-across-two-pages-cs.md)
[Next](master-detail-filtering-with-a-dropdownlist-vb.md)</span></span>
