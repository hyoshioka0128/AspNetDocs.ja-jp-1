---
uid: web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
title: 詳細詳細ビューを含む選択可能なマスター GridView を使用したC#マスター/詳細 () |Microsoft Docs
author: rick-anderson
description: このチュートリアルでは、各製品の名前と価格を選択ボタンと共に含む行を含む GridView を使用します。 [選択] ボタンをクリックして
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 0f982827-f8f9-420d-b36b-57b23f5aa519
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
msc.type: authoredcontent
ms.openlocfilehash: 04c427341f063729bd23b416a96f5acb20702792
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/28/2019
ms.locfileid: "74632296"
---
# <a name="masterdetail-using-a-selectable-master-gridview-with-a-details-detailview-c"></a><span data-ttu-id="8f526-104">選択可能なマスター GridView と詳細 DetailView を使用してマスター/詳細を表示する (C#)</span><span class="sxs-lookup"><span data-stu-id="8f526-104">Master/Detail Using a Selectable Master GridView with a Details DetailView (C#)</span></span>

<span data-ttu-id="8f526-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="8f526-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8f526-106">[サンプルアプリのダウンロード](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe)または[PDF のダウンロード](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="8f526-106">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe) or [Download PDF](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span></span>

> <span data-ttu-id="8f526-107">このチュートリアルでは、各製品の名前と価格を選択ボタンと共に含む行を含む GridView を使用します。</span><span class="sxs-lookup"><span data-stu-id="8f526-107">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="8f526-108">特定の製品の [選択] ボタンをクリックすると、完全な詳細が同じページの DetailsView コントロールに表示されます。</span><span class="sxs-lookup"><span data-stu-id="8f526-108">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>

## <a name="introduction"></a><span data-ttu-id="8f526-109">はじめに</span><span class="sxs-lookup"><span data-stu-id="8f526-109">Introduction</span></span>

<span data-ttu-id="8f526-110">前の[チュートリアル](master-detail-filtering-across-two-pages-cs.md)では、2つの web ページを使用してマスター/詳細レポートを作成する方法を説明しました。 "マスター" web ページには、サプライヤーの一覧が表示されています。また、選択した業者によって提供される製品の一覧を示す "詳細" web ページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="8f526-110">In the [previous tutorial](master-detail-filtering-across-two-pages-cs.md) we saw how to create a master/detail report using two web pages: a "master" web page, from which we displayed the list of suppliers; and a "details" web page that listed those products provided by the selected supplier.</span></span> <span data-ttu-id="8f526-111">この2ページのレポート形式は、1ページに縮小することができます。</span><span class="sxs-lookup"><span data-stu-id="8f526-111">This two page report format can be condensed into one page.</span></span> <span data-ttu-id="8f526-112">このチュートリアルでは、各製品の名前と価格を選択ボタンと共に含む行を含む GridView を使用します。</span><span class="sxs-lookup"><span data-stu-id="8f526-112">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="8f526-113">特定の製品の [選択] ボタンをクリックすると、完全な詳細が同じページの DetailsView コントロールに表示されます。</span><span class="sxs-lookup"><span data-stu-id="8f526-113">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>

<span data-ttu-id="8f526-114">[[選択] ボタンをクリック ![と、製品の詳細が表示されます](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-114">[![Clicking the Select Button Displays the Product's Details](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span></span>

<span data-ttu-id="8f526-115">**図 1**: [選択] ボタンをクリックすると、製品の詳細が表示されます ([クリックすると、フルサイズの画像が表示](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png)されます)</span><span class="sxs-lookup"><span data-stu-id="8f526-115">**Figure 1**: Clicking the Select Button Displays the Product's Details ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png))</span></span>

## <a name="step-1-creating-a-selectable-gridview"></a><span data-ttu-id="8f526-116">手順 1: 選択可能な GridView の作成</span><span class="sxs-lookup"><span data-stu-id="8f526-116">Step 1: Creating a Selectable GridView</span></span>

<span data-ttu-id="8f526-117">2ページのマスター/詳細レポートで、各マスターレコードにハイパーリンクが含まれていることを思い出してください。クリックすると、クリックした行の `SupplierID` 値がクエリ文字列に渡され、詳細ページにユーザーが送信されます。</span><span class="sxs-lookup"><span data-stu-id="8f526-117">Recall that in the two-page master/detail report that each master record included a hyperlink that, when clicked, sent the user to the details page passing the clicked row's `SupplierID` value in the querystring.</span></span> <span data-ttu-id="8f526-118">このようなハイパーリンクは、ハイパーリンクフィールドを使用して各 GridView 行に追加されています。</span><span class="sxs-lookup"><span data-stu-id="8f526-118">Such a hyperlink was added to each GridView row using a HyperLinkField.</span></span> <span data-ttu-id="8f526-119">1ページのマスター/詳細レポートでは、クリックすると詳細が表示される各 GridView 行に対してボタンが必要になります。</span><span class="sxs-lookup"><span data-stu-id="8f526-119">For the single page master/details report, we will need a Button for each GridView row that, when clicked, shows the details.</span></span> <span data-ttu-id="8f526-120">GridView コントロールは、ポストバックの原因となった行ごとに Select ボタンを含めて、その行を GridView の[Selectedrow](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedrow.aspx)としてマークするように構成できます。</span><span class="sxs-lookup"><span data-stu-id="8f526-120">The GridView control can be configured to include a Select button for each row that causes a postback and marks that row as the GridView's [SelectedRow](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedrow.aspx).</span></span>

<span data-ttu-id="8f526-121">まず、GridView コントロールを `Filtering` フォルダーの `DetailsBySelecting.aspx` ページに追加し、その `ID` プロパティを `ProductsGrid`に設定します。</span><span class="sxs-lookup"><span data-stu-id="8f526-121">Start by adding a GridView control to the `DetailsBySelecting.aspx` page in the `Filtering` folder, setting its `ID` property to `ProductsGrid`.</span></span> <span data-ttu-id="8f526-122">次に、`ProductsBLL` クラスの `GetProducts()` メソッドを呼び出す `AllProductsDataSource` という名前の新しい ObjectDataSource を追加します。</span><span class="sxs-lookup"><span data-stu-id="8f526-122">Next, add a new ObjectDataSource named `AllProductsDataSource` that invokes the `ProductsBLL` class's `GetProducts()` method.</span></span>

<span data-ttu-id="8f526-123">[![、All$ Datasource という名前の ObjectDataSource を作成する](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-123">[![Create an ObjectDataSource Named AllProductsDataSource](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span></span>

<span data-ttu-id="8f526-124">**図 2**: `AllProductsDataSource` という名前の ObjectDataSource を作成[する (クリックすると、フルサイズの画像が表示](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png)されます)</span><span class="sxs-lookup"><span data-stu-id="8f526-124">**Figure 2**: Create an ObjectDataSource Named `AllProductsDataSource` ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png))</span></span>

<span data-ttu-id="8f526-125">[製品の Bll クラスを使用 ![には](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-125">[![Use the ProductsBLL Class](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span></span>

<span data-ttu-id="8f526-126">**図 3**: `ProductsBLL` クラスを使用[する (クリックすると、フルサイズの画像が表示](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png)されます)</span><span class="sxs-lookup"><span data-stu-id="8f526-126">**Figure 3**: Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png))</span></span>

<span data-ttu-id="8f526-127">[GetProducts () メソッドを呼び出すように ObjectDataSource を構成 ![には](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-127">[![Configure the ObjectDataSource to Invoke the GetProducts() Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span></span>

<span data-ttu-id="8f526-128">**図 4**: `GetProducts()` メソッドを呼び出すように ObjectDataSource を構成する ([クリックしてフルサイズのイメージを表示](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8f526-128">**Figure 4**: Configure the ObjectDataSource to Invoke the `GetProducts()` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png))</span></span>

<span data-ttu-id="8f526-129">GridView のフィールドを編集し、`ProductName` フィールドと `UnitPrice` BoundFields 以外はすべて削除します。</span><span class="sxs-lookup"><span data-stu-id="8f526-129">Edit the GridView's fields removing all but the `ProductName` and `UnitPrice` BoundFields.</span></span> <span data-ttu-id="8f526-130">また、`UnitPrice` BoundField を通貨として書式設定したり、BoundFields の `HeaderText` プロパティを変更したりするなど、必要に応じてこれらの BoundFields を自由にカスタマイズできます。</span><span class="sxs-lookup"><span data-stu-id="8f526-130">Also, feel free to customize these BoundFields as needed, such as formatting the `UnitPrice` BoundField as a currency and changing the `HeaderText` properties of the BoundFields.</span></span> <span data-ttu-id="8f526-131">これらの手順は、GridView のスマートタグから [列の編集] リンクをクリックするか、宣言型の構文を手動で構成することによって、グラフィカルに行うことができます。</span><span class="sxs-lookup"><span data-stu-id="8f526-131">These steps can be accomplished graphically, by clicking the Edit Columns link from the GridView's smart tag, or by manually configuring the declarative syntax.</span></span>

<span data-ttu-id="8f526-132">[ProductName フィールドと UnitPrice BoundFields 以外のすべてのフィールドを削除 ![には](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-132">[![Remove All But the ProductName and UnitPrice BoundFields](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span></span>

<span data-ttu-id="8f526-133">**図 5**: `ProductName` フィールドと `UnitPrice` boundfields 以外のすべてを削除[する (クリックしてフルサイズのイメージを表示する](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="8f526-133">**Figure 5**: Remove All But the `ProductName` and `UnitPrice` BoundFields ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png))</span></span>

<span data-ttu-id="8f526-134">GridView の最終的なマークアップは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="8f526-134">The final markup for the GridView is:</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample1.aspx)]

<span data-ttu-id="8f526-135">次に、GridView を選択可能としてマークする必要があります。これにより、各行に Select ボタンが追加されます。</span><span class="sxs-lookup"><span data-stu-id="8f526-135">Next, we need to mark the GridView as selectable, which will add a Select button to each row.</span></span> <span data-ttu-id="8f526-136">これを実現するには、GridView のスマートタグの [選択を有効にする] チェックボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="8f526-136">To accomplish this, simply check the Enable Selection checkbox in the GridView's smart tag.</span></span>

<span data-ttu-id="8f526-137">[GridView の行を選択可能にする ![](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-137">[![Make the GridView's Rows Selectable](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span></span>

<span data-ttu-id="8f526-138">**図 6**: GridView の行を選択可能[にする (クリックすると、フルサイズのイメージが表示](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png)されます)</span><span class="sxs-lookup"><span data-stu-id="8f526-138">**Figure 6**: Make the GridView's Rows Selectable ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png))</span></span>

<span data-ttu-id="8f526-139">[選択範囲の有効化] オプションをオンにすると、`ShowSelectButton` プロパティが True に設定された `ProductsGrid` GridView に CommandField が追加されます。</span><span class="sxs-lookup"><span data-stu-id="8f526-139">Checking the Enabling Selection option adds a CommandField to the `ProductsGrid` GridView with its `ShowSelectButton` property set to True.</span></span> <span data-ttu-id="8f526-140">この結果、図6に示すように、GridView の行ごとに [選択] ボタンが表示されます。</span><span class="sxs-lookup"><span data-stu-id="8f526-140">This results in a Select button for each row of the GridView, as Figure 6 illustrates.</span></span> <span data-ttu-id="8f526-141">既定では、[選択] ボタンはリンクボタンとして表示されますが、CommandField の `ButtonType` プロパティではなく、ボタンまたは ImageButtons を使用できます。</span><span class="sxs-lookup"><span data-stu-id="8f526-141">By default, the Select buttons are rendered as LinkButtons, but you can use Buttons or ImageButtons instead through the CommandField's `ButtonType` property.</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample2.aspx)]

<span data-ttu-id="8f526-142">GridView 行の Select ボタンがポストバック ensues をクリックすると、GridView の `SelectedRow` プロパティが更新されます。</span><span class="sxs-lookup"><span data-stu-id="8f526-142">When a GridView row's Select button is clicked a postback ensues and the GridView's `SelectedRow` property is updated.</span></span> <span data-ttu-id="8f526-143">GridView には、`SelectedRow` プロパティに加えて、 [SelectedIndex](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx)、 [SelectedValue](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx)、 [selecteddatakey](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx)の各プロパティが用意されています。</span><span class="sxs-lookup"><span data-stu-id="8f526-143">In addition to the `SelectedRow` property, the GridView provides the [SelectedIndex](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx), [SelectedValue](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx), and [SelectedDataKey](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx) properties.</span></span> <span data-ttu-id="8f526-144">`SelectedIndex` プロパティは、選択された行のインデックスを返します。一方、`SelectedValue` プロパティと `SelectedDataKey` プロパティは、GridView の[いる datakeynames プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx)に基づいて値を返します。</span><span class="sxs-lookup"><span data-stu-id="8f526-144">The `SelectedIndex` property returns the index of the selected row, whereas the `SelectedValue` and `SelectedDataKey` properties return values based upon the GridView's [DataKeyNames property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx).</span></span>

<span data-ttu-id="8f526-145">`DataKeyNames` プロパティは、1つまたは複数のデータフィールドの値を各行に関連付けるために使用され、一般的には、基になるデータから各 GridView 行の情報を一意に識別するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="8f526-145">The `DataKeyNames` property is used to associate one or more data field values with each row and is commonly used to attribute uniquely identifying information from the underlying data with each GridView row.</span></span> <span data-ttu-id="8f526-146">`SelectedValue` プロパティは、選択された行の最初の `DataKeyNames` データフィールドの値を返します。ここで、`SelectedDataKey` プロパティは選択された行の `DataKey` オブジェクトを返します。このオブジェクトには、その行の指定されたデータキーフィールドのすべての値が含まれます。</span><span class="sxs-lookup"><span data-stu-id="8f526-146">The `SelectedValue` property returns the value of the first `DataKeyNames` data field for the selected row where as the `SelectedDataKey` property returns the selected row's `DataKey` object, which contains all of the values for the specified data key fields for that row.</span></span>

<span data-ttu-id="8f526-147">デザイナーを使用してデータソースを GridView、DetailsView、または FormView にバインドすると、[`DataKeyNames`] プロパティが自動的に一意に識別されるデータフィールドに設定されます。</span><span class="sxs-lookup"><span data-stu-id="8f526-147">The `DataKeyNames` property is automatically set to the uniquely-identifying data field(s) when you bind a data source to a GridView, DetailsView, or FormView through the Designer.</span></span> <span data-ttu-id="8f526-148">このプロパティは、前のチュートリアルで自動的に設定されていますが、この例では、`DataKeyNames` プロパティが指定されていない状態で動作しています。</span><span class="sxs-lookup"><span data-stu-id="8f526-148">While this property has been set for us automatically in the preceding tutorials, the examples would have worked without the `DataKeyNames` property specified.</span></span> <span data-ttu-id="8f526-149">ただし、このチュートリアルで選択可能な GridView に加えて、挿入、更新、および削除を確認する今後のチュートリアルについては、`DataKeyNames` プロパティを適切に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f526-149">However, for the selectable GridView in this tutorial, as well as for future tutorials in which we'll be examining inserting, updating, and deleting, the `DataKeyNames` property must be set properly.</span></span> <span data-ttu-id="8f526-150">GridView の `DataKeyNames` プロパティが `ProductID`に設定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="8f526-150">Take a moment to ensure that your GridView's `DataKeyNames` property is set to `ProductID`.</span></span>

<span data-ttu-id="8f526-151">ブラウザーを通じてこれまでの進行状況を見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="8f526-151">Let's view our progress thus far through a browser.</span></span> <span data-ttu-id="8f526-152">GridView には、すべての製品の名前と価格が、Select LinkButton と共に表示されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="8f526-152">Note that the GridView lists the name and price for all of the products along with a Select LinkButton.</span></span> <span data-ttu-id="8f526-153">[選択] ボタンをクリックすると、ポストバックが発生します。</span><span class="sxs-lookup"><span data-stu-id="8f526-153">Clicking the Select button causes a postback.</span></span> <span data-ttu-id="8f526-154">手順 2. では、選択した製品の詳細を表示して、このポストバックに対して DetailsView を応答させる方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="8f526-154">In Step 2 we'll see how to have a DetailsView respond to this postback by displaying the details for the selected product.</span></span>

<span data-ttu-id="8f526-155">[各製品行に Select LinkButton が含まれて ![](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-155">[![Each Product Row Contains a Select LinkButton](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span></span>

<span data-ttu-id="8f526-156">**図 7**: 各製品行に Select LinkButton が含まれている ([クリックしてフルサイズの画像を表示する](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="8f526-156">**Figure 7**: Each Product Row Contains a Select LinkButton ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png))</span></span>

### <a name="highlighting-the-selected-row"></a><span data-ttu-id="8f526-157">選択された行の強調表示</span><span class="sxs-lookup"><span data-stu-id="8f526-157">Highlighting the Selected Row</span></span>

<span data-ttu-id="8f526-158">`ProductsGrid` GridView には、選択した行の視覚スタイルを指定するために使用できる `SelectedRowStyle` プロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="8f526-158">The `ProductsGrid` GridView has a `SelectedRowStyle` property that can be used to dictate the visual style for the selected row.</span></span> <span data-ttu-id="8f526-159">適切に使用すると、現在選択されている GridView の行をより明確に表示することで、ユーザーのエクスペリエンスを向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="8f526-159">Used properly, this can improve the user's experience by more clearly showing which row of the GridView is currently selected.</span></span> <span data-ttu-id="8f526-160">このチュートリアルでは、選択した行を黄色の背景で強調表示してみましょう。</span><span class="sxs-lookup"><span data-stu-id="8f526-160">For this tutorial, let's have the selected row be highlighted with a yellow background.</span></span>

<span data-ttu-id="8f526-161">前のチュートリアルと同様に、見た目に関連する設定を CSS クラスとして定義したままにしておきましょう。</span><span class="sxs-lookup"><span data-stu-id="8f526-161">As with our earlier tutorials, let's strive to keep the aesthetic-related settings defined as CSS classes.</span></span> <span data-ttu-id="8f526-162">したがって、`Styles.css` `SelectedRowStyle`という名前の新しい CSS クラスを作成します。</span><span class="sxs-lookup"><span data-stu-id="8f526-162">Therefore, create a new CSS class in `Styles.css` named `SelectedRowStyle`.</span></span>

[!code-css[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample3.css)]

<span data-ttu-id="8f526-163">この CSS クラスをチュートリアルシリーズの*すべて*の gridviews の `SelectedRowStyle` プロパティに適用するには、`DataWebControls` テーマの `GridView.skin` スキンを編集して、次のように `SelectedRowStyle` 設定を含めます。</span><span class="sxs-lookup"><span data-stu-id="8f526-163">To apply this CSS class to the `SelectedRowStyle` property of *all* GridViews in our tutorial series, edit the `GridView.skin` Skin in the `DataWebControls` Theme to include the `SelectedRowStyle` settings as shown below:</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample4.aspx)]

<span data-ttu-id="8f526-164">この追加により、選択した GridView 行が黄色の背景色で強調表示されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="8f526-164">With this addition, the selected GridView row is now highlighted with a yellow background color.</span></span>

<span data-ttu-id="8f526-165">[GridView の SelectedRowStyle プロパティを使用して、選択した行の外観をカスタマイズ ![には](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-165">[![Customize the Selected Row's Appearance Using the GridView's SelectedRowStyle Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span></span>

<span data-ttu-id="8f526-166">**図 8**: GridView の `SelectedRowStyle` プロパティを使用して、選択した行の外観をカスタマイズ[する (クリックしてフルサイズのイメージを表示](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="8f526-166">**Figure 8**: Customize the Selected Row's Appearance Using the GridView's `SelectedRowStyle` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png))</span></span>

## <a name="step-2-displaying-the-selected-products-details-in-a-detailsview"></a><span data-ttu-id="8f526-167">手順 2: 選択した製品の詳細を DetailsView に表示する</span><span class="sxs-lookup"><span data-stu-id="8f526-167">Step 2: Displaying the Selected Product's Details in a DetailsView</span></span>

<span data-ttu-id="8f526-168">GridView の `ProductsGrid` が完了したら、選択した特定の製品に関する情報を表示する DetailsView を追加します。</span><span class="sxs-lookup"><span data-stu-id="8f526-168">With the `ProductsGrid` GridView complete, all that remains is to add a DetailsView that displays information about the particular product selected.</span></span> <span data-ttu-id="8f526-169">GridView の上に DetailsView コントロールを追加し、`ProductDetailsDataSource`という名前の新しい ObjectDataSource を作成します。</span><span class="sxs-lookup"><span data-stu-id="8f526-169">Add a DetailsView control above the GridView and create a new ObjectDataSource named `ProductDetailsDataSource`.</span></span> <span data-ttu-id="8f526-170">この DetailsView で、選択した製品に関する特定の情報が表示されるようにするため、`ProductsBLL` クラスの `GetProductByProductID(productID)` メソッドを使用するように `ProductDetailsDataSource` を構成します。</span><span class="sxs-lookup"><span data-stu-id="8f526-170">Since we want this DetailsView to display particular information about the selected product, configure the `ProductDetailsDataSource` to use the `ProductsBLL` class's `GetProductByProductID(productID)` method.</span></span>

<span data-ttu-id="8f526-171">[Productbll クラスの GetProductByProductID (productID) メソッドを呼び出す ![](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-171">[![Invoke the ProductsBLL Class's GetProductByProductID(productID) Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span></span>

<span data-ttu-id="8f526-172">**図 9**: `ProductsBLL` クラスの `GetProductByProductID(productID)` メソッドを呼び出す ([クリックしてフルサイズのイメージを表示する](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="8f526-172">**Figure 9**: Invoke the `ProductsBLL` Class's `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png))</span></span>

<span data-ttu-id="8f526-173">GridView コントロールの `SelectedValue` プロパティから取得した *`productID`* パラメーターの値を取得します。</span><span class="sxs-lookup"><span data-stu-id="8f526-173">Have the *`productID`* parameter's value obtained from the GridView control's `SelectedValue` property.</span></span> <span data-ttu-id="8f526-174">前に説明したように、GridView の `SelectedValue` プロパティは、選択された行の最初のデータキー値を返します。</span><span class="sxs-lookup"><span data-stu-id="8f526-174">As we discussed earlier, the GridView's `SelectedValue` property returns the first data key value for the selected row.</span></span> <span data-ttu-id="8f526-175">そのため、選択した行の `ProductID` 値が `SelectedValue`によって返されるように、GridView の `DataKeyNames` プロパティを `ProductID`に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f526-175">Therefore, it's imperative that the GridView's `DataKeyNames` property is set to `ProductID`, so that the selected row's `ProductID` value is returned by `SelectedValue`.</span></span>

<span data-ttu-id="8f526-176">[productID パラメーターを GridView の SelectedValue プロパティに設定 ![](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-176">[![Set the productID Parameter to the GridView's SelectedValue Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span></span>

<span data-ttu-id="8f526-177">**図 10**: *`productID`* パラメーターを GridView の `SelectedValue` プロパティに設定する ([クリックすると、フルサイズの画像が表示](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png)されます)</span><span class="sxs-lookup"><span data-stu-id="8f526-177">**Figure 10**: Set the *`productID`* Parameter to the GridView's `SelectedValue` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png))</span></span>

<span data-ttu-id="8f526-178">`productDetailsDataSource` ObjectDataSource が正しく構成され、DetailsView にバインドされると、このチュートリアルは完了です。</span><span class="sxs-lookup"><span data-stu-id="8f526-178">Once the `productDetailsDataSource` ObjectDataSource has been configured correctly and bound to the DetailsView, this tutorial is complete!</span></span> <span data-ttu-id="8f526-179">ページに最初にアクセスしたときに行が選択されていないため、GridView の `SelectedValue` プロパティは `null`を返します。</span><span class="sxs-lookup"><span data-stu-id="8f526-179">When the page is first visited no row is selected, so the GridView's `SelectedValue` property returns `null`.</span></span> <span data-ttu-id="8f526-180">`NULL` `ProductID` 値を持つ製品は存在しないため、`GetProductByProductID(productID)` メソッドによってレコードが返されることはありません。これは、DetailsView が表示されないことを意味します (図11を参照)。</span><span class="sxs-lookup"><span data-stu-id="8f526-180">Since there are no products with a `NULL` `ProductID` value, no records are returned by the `GetProductByProductID(productID)` method, meaning that the DetailsView isn't displayed (see Figure 11).</span></span> <span data-ttu-id="8f526-181">GridView 行の Select ボタンをクリックすると、ポストバック ensues と DetailsView が更新されます。</span><span class="sxs-lookup"><span data-stu-id="8f526-181">Upon clicking a GridView row's Select button, a postback ensues and the DetailsView is refreshed.</span></span> <span data-ttu-id="8f526-182">このとき、GridView の `SelectedValue` プロパティは選択された行の `ProductID` を返し、`GetProductByProductID(productID)` メソッドはその特定の製品に関する情報を含む `ProductsDataTable` を返し、DetailsView にこれらの詳細を表示します (図12を参照)。</span><span class="sxs-lookup"><span data-stu-id="8f526-182">This time the GridView's `SelectedValue` property returns the `ProductID` of the selected row, the `GetProductByProductID(productID)` method returns a `ProductsDataTable` with information about that particular product, and the DetailsView shows these details (see Figure 12).</span></span>

<span data-ttu-id="8f526-183">[![最初にアクセスしたときに、GridView のみが表示されます。](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-183">[![When First Visited, Only the GridView is Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span></span>

<span data-ttu-id="8f526-184">**図 11**: 最初にアクセスしたときに GridView のみが表示される ([クリックすると、フルサイズの画像が表示](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png)されます)</span><span class="sxs-lookup"><span data-stu-id="8f526-184">**Figure 11**: When First Visited, Only the GridView is Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png))</span></span>

<span data-ttu-id="8f526-185">[行を選択すると、製品の詳細が表示され ![](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="8f526-185">[![Upon Selecting a Row, the Product's Details are Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span></span>

<span data-ttu-id="8f526-186">**図 12**: 行を選択すると、製品の詳細が表示されます ([クリックすると、フルサイズの画像が表示](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png)されます)</span><span class="sxs-lookup"><span data-stu-id="8f526-186">**Figure 12**: Upon Selecting a Row, the Product's Details are Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png))</span></span>

## <a name="summary"></a><span data-ttu-id="8f526-187">要約</span><span class="sxs-lookup"><span data-stu-id="8f526-187">Summary</span></span>

<span data-ttu-id="8f526-188">この3つのチュートリアルでは、マスター/詳細レポートを表示するためのいくつかの手法について説明しました。</span><span class="sxs-lookup"><span data-stu-id="8f526-188">In this and the preceding three tutorials we've seen a number of techniques for displaying master/detail reports.</span></span> <span data-ttu-id="8f526-189">このチュートリアルでは、選択可能な GridView を使用してマスターレコードを格納し、DetailsView を使用して、選択したマスターレコードの詳細を同じページに表示します。</span><span class="sxs-lookup"><span data-stu-id="8f526-189">In this tutorial we examined using a selectable GridView to house the master records and a DetailsView to display details about the selected master record on the same page.</span></span> <span data-ttu-id="8f526-190">前のチュートリアルでは、DropDownLists を使用してマスター/詳細レポートを表示する方法と、1つの web ページにマスターレコードを表示する方法と、別の web ページで詳細レコードを表示する方法を説明しました。</span><span class="sxs-lookup"><span data-stu-id="8f526-190">In the earlier tutorials we looked at how to display master/details reports using DropDownLists and displaying master records on one web page and detail records on another.</span></span>

<span data-ttu-id="8f526-191">このチュートリアルでは、マスター/詳細レポートの検査について説明します。</span><span class="sxs-lookup"><span data-stu-id="8f526-191">This tutorial concludes our examination of master/detail reports.</span></span> <span data-ttu-id="8f526-192">次のチュートリアルでは、GridView、DetailsView、および FormView を使用したカスタマイズされた書式設定の探索を開始します。</span><span class="sxs-lookup"><span data-stu-id="8f526-192">Starting with the next tutorial we'll begin our exploration of customized formatting with the GridView, DetailsView, and FormView.</span></span> <span data-ttu-id="8f526-193">これらのコントロールの外観は、バインドされたデータに基づいてカスタマイズする方法、GridView のフッターにデータを要約する方法、およびテンプレートを使用してレイアウトをより細かく制御する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="8f526-193">We'll see how to customize the appearance of these controls based on the data bound to them, how to summarize data in the GridView's footer, and how to use templates to obtain a greater degree of control over the layout.</span></span>

<span data-ttu-id="8f526-194">プログラミングを楽しんでください。</span><span class="sxs-lookup"><span data-stu-id="8f526-194">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="8f526-195">作成者について</span><span class="sxs-lookup"><span data-stu-id="8f526-195">About the Author</span></span>

<span data-ttu-id="8f526-196">1998以来、 [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)は 7 asp/創設者 of [4GuysFromRolla.com](http://www.4guysfromrolla.com)の執筆者であり、Microsoft Web テクノロジを使用しています。</span><span class="sxs-lookup"><span data-stu-id="8f526-196">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8f526-197">Scott は、独立したコンサルタント、トレーナー、およびライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="8f526-197">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8f526-198">彼の最新の書籍は[ *、ASP.NET 2.0 を24時間以内に教え*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ています。</span><span class="sxs-lookup"><span data-stu-id="8f526-198">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="8f526-199">mitchell@4GuysFromRolla.comでアクセスでき[ます。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8f526-199">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="8f526-200">または彼のブログを参照してください。これは[http://ScottOnWriting.NET](http://ScottOnWriting.NET)にあります。</span><span class="sxs-lookup"><span data-stu-id="8f526-200">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="8f526-201">ありがとうございました。</span><span class="sxs-lookup"><span data-stu-id="8f526-201">Special Thanks To</span></span>

<span data-ttu-id="8f526-202">このチュートリアルシリーズは、役に立つ多くのレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="8f526-202">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="8f526-203">このチュートリアルのリードレビュー担当者は、Hilton Giesenow でした。</span><span class="sxs-lookup"><span data-stu-id="8f526-203">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="8f526-204">今後の MSDN 記事を確認することに興味がありますか?</span><span class="sxs-lookup"><span data-stu-id="8f526-204">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="8f526-205">その場合は、mitchell@4GuysFromRolla.comの行を削除[します。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8f526-205">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8f526-206">[前へ](master-detail-filtering-across-two-pages-cs.md)
> [次へ](master-detail-filtering-with-a-dropdownlist-vb.md)</span><span class="sxs-lookup"><span data-stu-id="8f526-206">[Previous](master-detail-filtering-across-two-pages-cs.md)
[Next](master-detail-filtering-with-a-dropdownlist-vb.md)</span></span>
