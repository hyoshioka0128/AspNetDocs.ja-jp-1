---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
title: マスター/詳細のフィルタ リングを 2 つの Dropdownlist (c#) |Microsoft Docs
author: rick-anderson
description: このチュートリアルでは、目的の親と祖父母 recor を選択する 2 つの DropDownList コントロールを使用して、3 番目のレイヤーを追加するマスター/詳細リレーションシップを展開しています.
ms.author: riande
ms.date: 03/31/2010
ms.assetid: ac4b0d77-4816-4ded-afd0-88dab667aedd
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
msc.type: authoredcontent
ms.openlocfilehash: 58ffa99cbe72b2789b8741a8c2378760c2f2c19c
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2019
ms.locfileid: "65134062"
---
# <a name="masterdetail-filtering-with-two-dropdownlists-c"></a><span data-ttu-id="f75fa-103">2 つの DropDownList でマスター/詳細をフィルター処理する (C#)</span><span class="sxs-lookup"><span data-stu-id="f75fa-103">Master/Detail Filtering With Two DropDownLists (C#)</span></span>

<span data-ttu-id="f75fa-104">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f75fa-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f75fa-105">[サンプル アプリをダウンロード](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe)または[PDF のダウンロード](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f75fa-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe) or [Download PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span></span>

> <span data-ttu-id="f75fa-106">このチュートリアルでは、目的の親、親の親レコードを選択する 2 つの DropDownList コントロールを使用して、3 番目のレイヤーを追加するマスター/詳細リレーションシップを展開します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-106">This tutorial expands the master/detail relationship to add a third layer, using two DropDownList controls to select the desired parent and grandparent records.</span></span>

## <a name="introduction"></a><span data-ttu-id="f75fa-107">はじめに</span><span class="sxs-lookup"><span data-stu-id="f75fa-107">Introduction</span></span>

<span data-ttu-id="f75fa-108">[前のチュートリアル](master-detail-filtering-with-a-dropdownlist-cs.md)カテゴリと、選択したカテゴリに属しているこれらの製品を示す GridView を含む 1 つの DropDownList を使用して単純なマスター/詳細レポートを表示する方法について確認しました。</span><span class="sxs-lookup"><span data-stu-id="f75fa-108">In the [previous tutorial](master-detail-filtering-with-a-dropdownlist-cs.md) we examined how to display a simple master/details report using a single DropDownList populated with the categories and a GridView showing those products that belong to the selected category.</span></span> <span data-ttu-id="f75fa-109">このレポートのパターンは、一対多のリレーションシップがあり、複数の一対多リレーションシップを含むシナリオの作業に簡単に拡張できるレコードを表示する場合に機能します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-109">This report pattern works well when displaying records that have a one-to-many relationship and can easily be extended to work for scenarios that include multiple one-to-many relationships.</span></span> <span data-ttu-id="f75fa-110">たとえば、受注システムでは、顧客、注文、および注文品目に対応するテーブルがあります。</span><span class="sxs-lookup"><span data-stu-id="f75fa-110">For example, an order entry system would have tables that correspond to customers, orders, and order line items.</span></span> <span data-ttu-id="f75fa-111">特定の顧客は、複数の項目で構成される各注文に複数の注文があります。</span><span class="sxs-lookup"><span data-stu-id="f75fa-111">A given customer may have multiple orders with each order consisting of multiple items.</span></span> <span data-ttu-id="f75fa-112">このようなデータは、2 つの Dropdownlist と GridView をユーザーに表示することができます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-112">Such data can be presented to the user with two DropDownLists and a GridView.</span></span> <span data-ttu-id="f75fa-113">最初の DropDownList では、データベース内に 2 つ目では、各顧客のリスト項目が、選択した顧客の注文をされているいずれかの内容します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-113">The first DropDownList would have a list item for each customer in the database with the second one's contents being the orders placed by the selected customer.</span></span> <span data-ttu-id="f75fa-114">GridView には、選択された注文から品目が一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-114">A GridView would list the line items from the selected order.</span></span>

<span data-ttu-id="f75fa-115">Northwind データベースの標準的な顧客/注文/注文詳細情報を含めるときにその`Customers`、`Orders`と`Order Details`アーキテクチャでこれらのテーブルのテーブルがキャプチャされません。</span><span class="sxs-lookup"><span data-stu-id="f75fa-115">While the Northwind database include the canonical customer/order/order details information in its `Customers`, `Orders`, and `Order Details` tables, these tables aren't captured in our architecture.</span></span> <span data-ttu-id="f75fa-116">それでも、依存する 2 つの Dropdownlist を使用してについては説明できますも。</span><span class="sxs-lookup"><span data-stu-id="f75fa-116">Nonetheless, we can still illustrate using two dependent DropDownLists.</span></span> <span data-ttu-id="f75fa-117">最初の DropDownList は、選択したカテゴリに属する製品、カテゴリと、2 つ目が表示されます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-117">The first DropDownList will list the categories and the second the products belonging to the selected category.</span></span> <span data-ttu-id="f75fa-118">DetailsView を選択した製品の詳細、一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-118">A DetailsView will then list the details of the selected product.</span></span>

## <a name="step-1-creating-and-populating-the-categories-dropdownlist"></a><span data-ttu-id="f75fa-119">手順 1: 作成およびカテゴリの DropDownList の設定</span><span class="sxs-lookup"><span data-stu-id="f75fa-119">Step 1: Creating and Populating the Categories DropDownList</span></span>

<span data-ttu-id="f75fa-120">最初の目標では、カテゴリの一覧を次のドロップダウン リストを追加します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-120">Our first goal is to add the DropDownList that lists the categories.</span></span> <span data-ttu-id="f75fa-121">この手順では、前のチュートリアルで詳しく解説したが、完全を期すのためここでまとめます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-121">These steps were examined in detail in the preceding tutorial, but are summarized here for completeness.</span></span>

<span data-ttu-id="f75fa-122">オープン、`MasterDetailsDetails.aspx`ページで、`Filtering`フォルダー、DropDownList に ページで、追加設定その`ID`プロパティを`Categories`のスマート タグのデータ ソースの構成のリンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="f75fa-122">Open the `MasterDetailsDetails.aspx` page in the `Filtering` folder, add a DropDownList to the page, set its `ID` property to `Categories`, and then click the Configure Data Source link in its smart tag.</span></span> <span data-ttu-id="f75fa-123">データ ソース構成ウィザードからは、新しいデータ ソースを追加を選択します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-123">From the Data Source Configuration Wizard choose to add a new data source.</span></span>

<span data-ttu-id="f75fa-124">[![DropDownList に新しいデータ ソースを追加します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-124">[![Add a New Data Source for the DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span></span>

<span data-ttu-id="f75fa-125">**図 1**:DropDownList に新しいデータ ソースの追加 ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-125">**Figure 1**: Add a New Data Source for the DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span></span>

<span data-ttu-id="f75fa-126">新しいデータ ソース、当然ながら、べき ObjectDataSource。</span><span class="sxs-lookup"><span data-stu-id="f75fa-126">The new data source should, naturally, be an ObjectDataSource.</span></span> <span data-ttu-id="f75fa-127">名前をこの新しい ObjectDataSource`CategoriesDataSource`してそれを呼び出す、`CategoriesBLL`オブジェクトの`GetCategories()`メソッド。</span><span class="sxs-lookup"><span data-stu-id="f75fa-127">Name this new ObjectDataSource `CategoriesDataSource` and have it invoke the `CategoriesBLL` object's `GetCategories()` method.</span></span>

<span data-ttu-id="f75fa-128">[![CategoriesBLL クラスを使用します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span></span>

<span data-ttu-id="f75fa-129">**図 2**:使用する、`CategoriesBLL`クラス ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-129">**Figure 2**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span></span>

<span data-ttu-id="f75fa-130">[![ObjectDataSource GetCategories() メソッドを使用して構成します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span></span>

<span data-ttu-id="f75fa-131">**図 3**:構成に使用する ObjectDataSource、`GetCategories()`メソッド ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-131">**Figure 3**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span></span>

<span data-ttu-id="f75fa-132">ObjectDataSource を構成すた後必要がありますにどのデータ ソースのフィールドを表示するかを指定する、 `Categories` DropDownList、どれをリスト項目の値として構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f75fa-132">After configuring the ObjectDataSource we still need to specify which data source field should be displayed in the `Categories` DropDownList and which one should be configured as the value for the list item.</span></span> <span data-ttu-id="f75fa-133">設定、`CategoryName`フィールドとして表示し、`CategoryID`各リスト項目の値として。</span><span class="sxs-lookup"><span data-stu-id="f75fa-133">Set the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="f75fa-134">[![値として使用 CategoryID と CategoryName フィールド DropDownList 表示があります。](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span></span>

<span data-ttu-id="f75fa-135">**図 4**:DropDownList の表示、`CategoryName`フィールド`CategoryID`値として ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-135">**Figure 4**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span></span>

<span data-ttu-id="f75fa-136">この時点で DropDownList コントロールがある (`Categories`) からのレコードに設定されます、`Categories`テーブル。</span><span class="sxs-lookup"><span data-stu-id="f75fa-136">At this point we have a DropDownList control (`Categories`) that's populated with the records from the `Categories` table.</span></span> <span data-ttu-id="f75fa-137">ユーザーが次のドロップダウン リストから新しいカテゴリを選択すると、DropDownList、手順 2. で作成することが私たちの製品を更新するために発生するへのポストバックがいいでしょう。</span><span class="sxs-lookup"><span data-stu-id="f75fa-137">When the user chooses a new category from the DropDownList we'll want a postback to occur in order to refresh the product DropDownList that we're going to create in Step 2.</span></span> <span data-ttu-id="f75fa-138">そのため、AutoPostBack を有効にするオプションを確認してください、 `categories` DropDownList のスマート タグ。</span><span class="sxs-lookup"><span data-stu-id="f75fa-138">Therefore, check the Enable AutoPostBack option from the `categories` DropDownList's smart tag.</span></span>

<span data-ttu-id="f75fa-139">[![カテゴリの DropDownList の AutoPostBack を有効にします。](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-139">[![Enable AutoPostBack for the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span></span>

<span data-ttu-id="f75fa-140">**図 5**:AutoPostBack を有効にする、 `Categories` DropDownList ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-140">**Figure 5**: Enable AutoPostBack for the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span></span>

## <a name="step-2-displaying-the-selected-categorys-products-in-a-second-dropdownlist"></a><span data-ttu-id="f75fa-141">手順 2: 2 番目の DropDownList で選択したカテゴリの製品を表示します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-141">Step 2: Displaying the Selected Category's Products in a Second DropDownList</span></span>

<span data-ttu-id="f75fa-142">`Categories` DropDownList が完了したら、次の手順は、選択したカテゴリに属する製品の DropDownList を表示します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-142">With the `Categories` DropDownList completed, our next step is to display a DropDownList of products belonging to the selected category.</span></span> <span data-ttu-id="f75fa-143">これを実現するもう 1 つの DropDownList をという名前のページに追加`ProductsByCategory`します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-143">To accomplish this, add another DropDownList to the page named `ProductsByCategory`.</span></span> <span data-ttu-id="f75fa-144">同様、 `Categories` DropDownList の新しい ObjectDataSource を作成、`ProductsByCategory`という名前の DropDownList`ProductsByCategoryDataSource`します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-144">As with the `Categories` DropDownList, create a new ObjectDataSource for the `ProductsByCategory` DropDownList named `ProductsByCategoryDataSource`.</span></span>

<span data-ttu-id="f75fa-145">[![ProductsByCategory DropDownList に新しいデータ ソースを追加します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-145">[![Add a New Data Source for the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span></span>

<span data-ttu-id="f75fa-146">**図 6**:新しいデータ ソースの追加、 `ProductsByCategory` DropDownList ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-146">**Figure 6**: Add a New Data Source for the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span></span>

<span data-ttu-id="f75fa-147">[![ProductsByCategoryDataSource という名前の新しい ObjectDataSource を作成します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-147">[![Create a New ObjectDataSource Named ProductsByCategoryDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span></span>

<span data-ttu-id="f75fa-148">**図 7**:名前付き新しい ObjectDataSource 作成`ProductsByCategoryDataSource`([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-148">**Figure 7**: Create a New ObjectDataSource Named `ProductsByCategoryDataSource` ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span></span>

<span data-ttu-id="f75fa-149">以降、`ProductsByCategory`選択したカテゴリに属する製品だけを表示する DropDownList ニーズがある呼び出す ObjectDataSource、`GetProductsByCategoryID(categoryID)`からメソッド、`ProductsBLL`オブジェクト。</span><span class="sxs-lookup"><span data-stu-id="f75fa-149">Since the `ProductsByCategory` DropDownList needs to display just those products belonging to the selected category, have the ObjectDataSource invoke the `GetProductsByCategoryID(categoryID)` method from the `ProductsBLL` object.</span></span>

<span data-ttu-id="f75fa-150">[![ProductsBLL クラスを使用します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-150">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span></span>

<span data-ttu-id="f75fa-151">**図 8**:使用する、`ProductsBLL`クラス ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-151">**Figure 8**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span></span>

<span data-ttu-id="f75fa-152">[![ObjectDataSource GetProductsByCategoryID(categoryID) メソッドを使用して構成します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-152">[![Configure the ObjectDataSource to Use the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span></span>

<span data-ttu-id="f75fa-153">**図 9**:構成に使用する ObjectDataSource、`GetProductsByCategoryID(categoryID)`メソッド ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-153">**Figure 9**: Configure the ObjectDataSource to Use the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span></span>

<span data-ttu-id="f75fa-154">値を指定しなければ、ウィザードの最後の手順で、 *`categoryID`* パラメーター。</span><span class="sxs-lookup"><span data-stu-id="f75fa-154">In the final step of the wizard we need to specify the value of the *`categoryID`* parameter.</span></span> <span data-ttu-id="f75fa-155">選択されたアイテムにこのパラメーターを割り当てる、 `Categories` DropDownList します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-155">Assign this parameter to the selected item from the `Categories` DropDownList.</span></span>

<span data-ttu-id="f75fa-156">[![カテゴリ DropDownList から categoryID パラメーターの値を取得します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-156">[![Pull the categoryID Parameter Value from the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span></span>

<span data-ttu-id="f75fa-157">**図 10**:プル、 *`categoryID`* からパラメーター値、 `Categories` DropDownList ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-157">**Figure 10**: Pull the *`categoryID`* Parameter Value from the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span></span>

<span data-ttu-id="f75fa-158">ObjectDataSource が構成されているとは次のドロップダウン リストの項目の値や表示の対象に使用されるデータ ソース フィールドを指定します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-158">With the ObjectDataSource configured, all that remains is to specify what data source fields are used for the display and value of the DropDownList's items.</span></span> <span data-ttu-id="f75fa-159">表示、`ProductName`フィールドし、を使用して、`ProductID`値としてフィールド。</span><span class="sxs-lookup"><span data-stu-id="f75fa-159">Display the `ProductName` field and use the `ProductID` field as the value.</span></span>

<span data-ttu-id="f75fa-160">[![DropDownList のリスト項目のテキストと値のプロパティに使用されるデータ ソースのフィールドを指定します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-160">[![Specify the Data Source Fields Used for the DropDownList's ListItems' Text and Value Properties](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span></span>

<span data-ttu-id="f75fa-161">**図 11**:使用されるデータ ソースのフィールドを指定の DropDownList の`ListItem`s'`Text`と`Value`プロパティ ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-161">**Figure 11**: Specify the Data Source Fields Used for the DropDownList's `ListItem` s' `Text` and `Value` Properties ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span></span>

<span data-ttu-id="f75fa-162">ObjectDataSource でと`ProductsByCategory`DropDownList には、ページが構成されている 2 つの Dropdownlist に表示されます。 最初はすべて一覧表示、カテゴリの 2 つ目は、選択したカテゴリに属しているこれらの製品を一覧表示中にします。</span><span class="sxs-lookup"><span data-stu-id="f75fa-162">With the ObjectDataSource and `ProductsByCategory` DropDownList configured our page will display two DropDownLists: the first will list all of the categories while the second will list those products belonging to the selected category.</span></span> <span data-ttu-id="f75fa-163">ユーザーは、最初の DropDownList から新しいカテゴリを選択してポストバックが発生したりする 2 つ目の DropDownList を再バインドは、新しく選択したカテゴリに属しているこれらの製品を表示します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-163">When the user selects a new category from the first DropDownList, a postback will ensue and the second DropDownList will be rebound, showing those products that belong to the newly selected category.</span></span> <span data-ttu-id="f75fa-164">図 12、13 show`MasterDetailsDetails.aspx`ブラウザーで表示したときにアクションにします。</span><span class="sxs-lookup"><span data-stu-id="f75fa-164">Figures 12 and 13 show `MasterDetailsDetails.aspx` in action when viewed through a browser.</span></span>

<span data-ttu-id="f75fa-165">[![飲み物のカテゴリが選択されている場合、最初のページにアクセスして、](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-165">[![When First Visiting the Page, the Beverages Category is Selected](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span></span>

<span data-ttu-id="f75fa-166">**図 12**:飲み物のカテゴリが選択されている場合、最初のページにアクセスして、([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-166">**Figure 12**: When First Visiting the Page, the Beverages Category is Selected ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span></span>

<span data-ttu-id="f75fa-167">[![別のカテゴリを選択すると、新しいカテゴリの製品が表示されます。](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-167">[![Choosing a Different Category Displays the New Category's Products](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span></span>

<span data-ttu-id="f75fa-168">**図 13**:別のカテゴリが表示されます、新しいカテゴリの製品を選択する ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-168">**Figure 13**: Choosing a Different Category Displays the New Category's Products ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span></span>

<span data-ttu-id="f75fa-169">現在、 `productsByCategory` DropDownList を変更されたときに*いない*ポストバックが発生します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-169">Currently the `productsByCategory` DropDownList, when changed, does *not* cause a postback.</span></span> <span data-ttu-id="f75fa-170">ただし、選択した製品の詳細 (手順 3) を表示する、DetailsView を追加すると発生するへのポストバックします。</span><span class="sxs-lookup"><span data-stu-id="f75fa-170">However, we will want a postback to occur once we add a DetailsView to display the selected product's details (Step 3).</span></span> <span data-ttu-id="f75fa-171">そのためから AutoPostBack を有効にするチェック ボックスをオン、 `productsByCategory` DropDownList のスマート タグ。</span><span class="sxs-lookup"><span data-stu-id="f75fa-171">Therefore, check the Enable AutoPostBack checkbox from the `productsByCategory` DropDownList's smart tag.</span></span>

<span data-ttu-id="f75fa-172">[![ProductsByCategory DropDownList の AutoPostBack 機能を有効にします。](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-172">[![Enable the AutoPostBack Feature for the productsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span></span>

<span data-ttu-id="f75fa-173">**図 14**:AutoPostBack 機能を有効にする、 `productsByCategory` DropDownList ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-173">**Figure 14**: Enable the AutoPostBack Feature for the `productsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span></span>

## <a name="step-3-using-a-detailsview-to-display-details-for-the-selected-product"></a><span data-ttu-id="f75fa-174">手順 3: 選択した製品の詳細を表示する、DetailsView を使用します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-174">Step 3: Using a DetailsView to Display Details for the Selected Product</span></span>

<span data-ttu-id="f75fa-175">最後の手順では、DetailsView で選択した製品の詳細を表示します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-175">The final step is to display the details for the selected product in a DetailsView.</span></span> <span data-ttu-id="f75fa-176">ページに、DetailsView を追加するこれを実現するに次のように設定します。 その`ID`プロパティを`ProductDetails`、し、その新しい ObjectDataSource を作成します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-176">To accomplish this, add a DetailsView to the page, set its `ID` property to `ProductDetails`, and create a new ObjectDataSource for it.</span></span> <span data-ttu-id="f75fa-177">構成からそのデータをプルするには、この ObjectDataSource、`ProductsBLL`クラスの`GetProductByProductID(productID)`メソッドの選択した値を使用して、`ProductsByCategory`の DropDownList の値の *`productID`* パラメーター。</span><span class="sxs-lookup"><span data-stu-id="f75fa-177">Configure this ObjectDataSource to pull its data from the `ProductsBLL` class's `GetProductByProductID(productID)` method using the selected value of the `ProductsByCategory` DropDownList for the value of the *`productID`* parameter.</span></span>

<span data-ttu-id="f75fa-178">[![ProductsBLL クラスを使用します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-178">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span></span>

<span data-ttu-id="f75fa-179">**図 15**:使用する、`ProductsBLL`クラス ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-179">**Figure 15**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span></span>

<span data-ttu-id="f75fa-180">[![ObjectDataSource GetProductByProductID(productID) メソッドを使用して構成します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-180">[![Configure the ObjectDataSource to Use the GetProductByProductID(productID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span></span>

<span data-ttu-id="f75fa-181">**図 16**:構成に使用する ObjectDataSource、`GetProductByProductID(productID)`メソッド ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-181">**Figure 16**: Configure the ObjectDataSource to Use the `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span></span>

<span data-ttu-id="f75fa-182">[![ProductsByCategory DropDownList から productID パラメーターの値を取得します。](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-182">[![Pull the productID Parameter Value from the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span></span>

<span data-ttu-id="f75fa-183">**図 17**:プル、 *`productID`* からパラメーター値、 `ProductsByCategory` DropDownList ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-183">**Figure 17**: Pull the *`productID`* Parameter Value from the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span></span>

<span data-ttu-id="f75fa-184">使用可能なフィールドのいずれかを DetailsView で表示することができます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-184">You can choose to display any of the available fields in the DetailsView.</span></span> <span data-ttu-id="f75fa-185">削除することを選択する、 `ProductID`、 `SupplierID`、および`CategoryID`フィールドし順序を変更し、残りのフィールドを書式設定します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-185">I've opted to remove the `ProductID`, `SupplierID`, and `CategoryID` fields and reordered and formatted the remaining fields.</span></span> <span data-ttu-id="f75fa-186">DetailsView は取り除かさらに、`Height`と`Width`プロパティ、指定されたサイズに制約があるのではなく、そのデータに最適な表示に必要な幅を拡張する DetailsView を許可します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-186">In addition, I cleared out the DetailsView's `Height` and `Width` properties, allowing the DetailsView to expand to the width needed to best display its data rather than having it constrained to a specified size.</span></span> <span data-ttu-id="f75fa-187">完全なマークアップは、以下が表示されます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-187">The full markup appears below:</span></span>

[!code-aspx[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample1.aspx)]

<span data-ttu-id="f75fa-188">少し試して、`MasterDetailsDetails.aspx`ブラウザーでページ。</span><span class="sxs-lookup"><span data-stu-id="f75fa-188">Take a moment to try out the `MasterDetailsDetails.aspx` page in a browser.</span></span> <span data-ttu-id="f75fa-189">一見、必要に応じて動作しますが、微妙な問題があるように思われる場合します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-189">At first glance it may appear that everything is working as desired, but there's a subtle problem.</span></span> <span data-ttu-id="f75fa-190">新しいカテゴリを選択すると、 `ProductsByCategory` DropDownList が更新され、選択したカテゴリの製品が、 `ProductDetails` DetailsView は引き続き以前の製品情報を表示します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-190">When you choose a new category the `ProductsByCategory` DropDownList is updated to include those products for the selected category, but the `ProductDetails` DetailsView continued to show the previous product information.</span></span> <span data-ttu-id="f75fa-191">選択したカテゴリ別の製品を選択するときに、DetailsView が更新されます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-191">The DetailsView is updated when choosing a different product for the selected category.</span></span> <span data-ttu-id="f75fa-192">さらに、十分な徹底的にテストすると、見つかりますを継続的に新しいカテゴリを選択した場合 (から飲み物を選択するなど、 `Categories` DropDownList、調味料、し、ある) その他のすべてのカテゴリ選択により、 `ProductDetails`DetailsView を更新します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-192">Furthermore, if you test thoroughly enough, you'll find that if you continually choose new categories (such as choosing Beverages from the `Categories` DropDownList, then Condiments, then Confections) every other category selection causes the `ProductDetails` DetailsView to be refreshed.</span></span>

<span data-ttu-id="f75fa-193">この問題を具体化するためは、具体的な例を見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="f75fa-193">To help concretize this problem, let's look at a specific example.</span></span> <span data-ttu-id="f75fa-194">飲み物のカテゴリが選択されているし、関連製品に読み込まれるページに初めてアクセスするときに、 `ProductsByCategory` DropDownList します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-194">When you first visit the page the Beverages category is selected and the related products are loaded in the `ProductsByCategory` DropDownList.</span></span> <span data-ttu-id="f75fa-195">Chai は、選択した製品とその詳細が表示されます、 `ProductDetails` DetailsView、図 18 に示すようにします。</span><span class="sxs-lookup"><span data-stu-id="f75fa-195">Chai is the selected product and its details are displayed in the `ProductDetails` DetailsView, as shown in Figure 18.</span></span>

<span data-ttu-id="f75fa-196">[![選択されている製品の詳細は、DetailsView で表示されます。](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-196">[![The Selected Product's Details are Displayed in a DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span></span>

<span data-ttu-id="f75fa-197">**図 18**:DetailsView で選択されている製品の詳細が表示されます ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-197">**Figure 18**: The Selected Product's Details are Displayed in a DetailsView ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span></span>

<span data-ttu-id="f75fa-198">ポストバックが発生した飲み物から調味料にカテゴリ選択を変更した場合、 `ProductsByCategory` DropDownList は、それに応じて更新されますが、DetailsView はまだ Chai の詳細を表示します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-198">If you change the category selection from Beverages to Condiments, a postback occurs and the `ProductsByCategory` DropDownList is updated accordingly, but the DetailsView still displays details for Chai.</span></span>

<span data-ttu-id="f75fa-199">[![以前選択されている製品の詳細については引き続き表示されます。](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-199">[![The Previously Selected Product's Details are Still Displayed](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span></span>

<span data-ttu-id="f75fa-200">**図 19**:以前選択されている製品の詳細については引き続き表示されます ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-200">**Figure 19**: The Previously Selected Product's Details are Still Displayed ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span></span>

<span data-ttu-id="f75fa-201">想定どおり、DetailsView を更新リストから新しい製品を選択します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-201">Picking a new product from the list refreshes the DetailsView as expected.</span></span> <span data-ttu-id="f75fa-202">製品を変更した後、新しいカテゴリを選択する場合、DetailsView もう一度更新しません。</span><span class="sxs-lookup"><span data-stu-id="f75fa-202">If you pick a new category after changing the product, the DetailsView again won't refresh.</span></span> <span data-ttu-id="f75fa-203">ただし、新しい製品を選択するのではなく、新しいカテゴリを選択した場合、DetailsView が更新されます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-203">However, if instead of choosing a new product you selected a new category, the DetailsView would refresh.</span></span> <span data-ttu-id="f75fa-204">世界で起こっているここか。</span><span class="sxs-lookup"><span data-stu-id="f75fa-204">What in the world is going on here?</span></span>

<span data-ttu-id="f75fa-205">問題は、ページのライフ サイクルのタイミングの問題です。</span><span class="sxs-lookup"><span data-stu-id="f75fa-205">The problem is a timing issue in the page's lifecycle.</span></span> <span data-ttu-id="f75fa-206">たびに、そのレンダリングといくつかの手順を進め、ページが要求されます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-206">Whenever a page is requested it proceeds through a number of steps as its rendering.</span></span> <span data-ttu-id="f75fa-207">ObjectDataSource のいずれかを確認の制御手順のいずれかでその`SelectParameters`値が変更されました。</span><span class="sxs-lookup"><span data-stu-id="f75fa-207">In one of these steps the ObjectDataSource controls check to see if any of their `SelectParameters` values have changed.</span></span> <span data-ttu-id="f75fa-208">そのため、データ Web コントロールがバインドされている場合、ObjectDataSource では、その表示を更新する必要があることがわかっています。</span><span class="sxs-lookup"><span data-stu-id="f75fa-208">If so, the data Web control bound to the ObjectDataSource knows that it needs to refresh its display.</span></span> <span data-ttu-id="f75fa-209">たとえば、新しいカテゴリを選択すると、 `ProductsByCategoryDataSource` ObjectDataSource は、パラメーター値が変更されたことを検出、 `ProductsByCategory` DropDownList を再バインド自体には、選択したカテゴリの製品を取得します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-209">For example, when a new category is selected, the `ProductsByCategoryDataSource` ObjectDataSource detects that its parameter values have changed and the `ProductsByCategory` DropDownList rebinds itself, getting the products for the selected category.</span></span>

<span data-ttu-id="f75fa-210">このような状況で発生した問題は、ObjectDataSources パラメーターの変更をチェックするページのライフ サイクル内のポイントが発生する*する前に*関連付けられているデータ Web コントロールの再バインドします。</span><span class="sxs-lookup"><span data-stu-id="f75fa-210">The problem that arises in this situation is that the point in the page lifecycle that the ObjectDataSources check for changed parameters occurs *before* the rebinding of the associated data Web controls.</span></span> <span data-ttu-id="f75fa-211">そのため、新しいカテゴリを選択するときに、 `ProductsByCategoryDataSource` ObjectDataSource では、そのパラメーターの値の変更を検出します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-211">Therefore, when selecting a new category the `ProductsByCategoryDataSource` ObjectDataSource detects a change in its parameter's value.</span></span> <span data-ttu-id="f75fa-212">ObjectDataSource で使用される、 `ProductDetails` DetailsView、ただしは書き留めておきます。 このような変更、 `ProductsByCategory` DropDownList はまだ再バインドできます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-212">The ObjectDataSource used by the `ProductDetails` DetailsView, however, doesn't note any such changes because the `ProductsByCategory` DropDownList has yet to be rebound.</span></span> <span data-ttu-id="f75fa-213">ライフ サイクルの後で、 `ProductsByCategory` DropDownList を新しく選択したカテゴリの製品を取得して、その ObjectDataSource に再バインドします。</span><span class="sxs-lookup"><span data-stu-id="f75fa-213">Later in the lifecycle the `ProductsByCategory` DropDownList rebinds to its ObjectDataSource, grabbing the products for the newly selected category.</span></span> <span data-ttu-id="f75fa-214">中に、 `ProductsByCategory` DropDownList の値が変更されて、 `ProductDetails` DetailsView の ObjectDataSource が既にそのパラメーター値のチェックを実行。 そのため、DetailsView がその前の結果が表示されます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-214">While the `ProductsByCategory` DropDownList's value has changed, the `ProductDetails` DetailsView's ObjectDataSource has already done its parameter value check; therefore, the DetailsView displays its previous results.</span></span> <span data-ttu-id="f75fa-215">この操作は、図 20 で表したものです。</span><span class="sxs-lookup"><span data-stu-id="f75fa-215">This interaction is depicted in Figure 20.</span></span>

<span data-ttu-id="f75fa-216">[![ProductsByCategory DropDownList の値が変更された ProductDetails DetailsView の ObjectDataSource の変更を確認した後](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-216">[![The ProductsByCategory DropDownList Value Changes After the ProductDetails DetailsView's ObjectDataSource Checks for Changes](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span></span>

<span data-ttu-id="f75fa-217">**図 20**:`ProductsByCategory` DropDownList の値の変更後、 `ProductDetails` DetailsView の変更の ObjectDataSource 確認 ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-217">**Figure 20**: The `ProductsByCategory` DropDownList Value Changes After the `ProductDetails` DetailsView's ObjectDataSource Checks for Changes ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span></span>

<span data-ttu-id="f75fa-218">明示的に再バインドする必要があります。 これを解決するには、`ProductDetails`後 DetailsView、 `ProductsByCategory` DropDownList にバインドします。</span><span class="sxs-lookup"><span data-stu-id="f75fa-218">To remedy this we need to explicitly rebind the `ProductDetails` DetailsView after the `ProductsByCategory` DropDownList has been bound.</span></span> <span data-ttu-id="f75fa-219">これを呼び出すことによって実現しましたできます、 `ProductDetails` DetailsView の`DataBind()`メソッドと、 `ProductsByCategory` DropDownList の`DataBound`イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-219">We can accomplish this by calling the `ProductDetails` DetailsView's `DataBind()` method when the `ProductsByCategory` DropDownList's `DataBound` event fires.</span></span> <span data-ttu-id="f75fa-220">次のイベント ハンドラー コードを追加、`MasterDetailsDetails.aspx`ページの分離コード クラス (を参照してください、"[ObjectDataSource のパラメーター値をプログラムによって設定](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)"イベント ハンドラーを追加する方法の詳細については)。</span><span class="sxs-lookup"><span data-stu-id="f75fa-220">Add the following event handler code to the `MasterDetailsDetails.aspx` page's code-behind class (refer to the "[Programmatically Setting the ObjectDataSource's Parameter Values](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)" for a discussion on how to add an event handler):</span></span>

[!code-csharp[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample2.cs)]

<span data-ttu-id="f75fa-221">この明示的な呼び出しの後、 `ProductDetails` DetailsView の`DataBind()`メソッドが追加されていますが、チュートリアルが期待どおりに動作します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-221">After this explicit call to the `ProductDetails` DetailsView's `DataBind()` method has been added, the tutorial works as expected.</span></span> <span data-ttu-id="f75fa-222">図 21 の強調表示がこれを変更する方法は、以前の問題を修正できます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-222">Figure 21 highlights how this changed remedied our earlier problem.</span></span>

<span data-ttu-id="f75fa-223">[![ProductDetails DetailsView は明示的に更新されるときに、ProductsByCategory DropDownList のデータ バインド イベントが発生します](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="f75fa-223">[![The ProductDetails DetailsView is Explicitly Refreshed When the ProductsByCategory DropDownList's DataBound Event Fires](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span></span>

<span data-ttu-id="f75fa-224">**図 21**:`ProductDetails` DetailsView は明示的に更新されるときに、 `ProductsByCategory` DropDownList の`DataBound`イベントが発生します ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))。</span><span class="sxs-lookup"><span data-stu-id="f75fa-224">**Figure 21**: The `ProductDetails` DetailsView is Explicitly Refreshed When the `ProductsByCategory` DropDownList's `DataBound` Event Fires ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span></span>

## <a name="summary"></a><span data-ttu-id="f75fa-225">まとめ</span><span class="sxs-lookup"><span data-stu-id="f75fa-225">Summary</span></span>

<span data-ttu-id="f75fa-226">マスター/詳細レポートの最適なユーザー インターフェイス要素として、DropDownList の機能が、マスター/詳細レコードの間に一対多のリレーションシップがある場合。</span><span class="sxs-lookup"><span data-stu-id="f75fa-226">The DropDownList serves as an ideal user interface element for master/detail reports where there is a one-to-many relationship between the master and detail records.</span></span> <span data-ttu-id="f75fa-227">前のチュートリアルでは、1 つの DropDownList を使用して、選択したカテゴリによって表示される製品をフィルター処理する方法を説明しました。</span><span class="sxs-lookup"><span data-stu-id="f75fa-227">In the preceding tutorial we saw how to use a single DropDownList to filter the products displayed by the selected category.</span></span> <span data-ttu-id="f75fa-228">このチュートリアルでは製品の GridView に置き換え、DropDownList を DetailsView、選択した製品の詳細を表示するために使用します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-228">In this tutorial we replaced the GridView of products with a DropDownList, and used a DetailsView to display the details of the selected product.</span></span> <span data-ttu-id="f75fa-229">このチュートリアルで説明する概念は、顧客、注文、注文項目など、複数の一対多リレーションシップに関連するデータ モデルに簡単に拡張できます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-229">The concepts discussed in this tutorial can easily be extended to data models involving multiple one-to-many relationships, such as customers, orders, and order items.</span></span> <span data-ttu-id="f75fa-230">一般に、一対多リレーションシップの「一」のエンティティの各 DropDownList をいつでも追加できます。</span><span class="sxs-lookup"><span data-stu-id="f75fa-230">In general, you can always add a DropDownList for each of the "one" entities in the one-to-many relationships.</span></span>

<span data-ttu-id="f75fa-231">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="f75fa-231">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f75fa-232">執筆者紹介</span><span class="sxs-lookup"><span data-stu-id="f75fa-232">About the Author</span></span>

<span data-ttu-id="f75fa-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックおよびの創設者の著者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、Microsoft Web テクノロジと 1998 年から携わっています。</span><span class="sxs-lookup"><span data-stu-id="f75fa-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f75fa-234">Scott は、フリーのコンサルタント、トレーナー、およびライターとして動作します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-234">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f75fa-235">最新の著書は[ *Sams 教える自分で ASP.NET 2.0 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-235">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f75fa-236">彼に到達できる[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f75fa-236">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f75fa-237">彼のブログにあるでまたは[ http://ScottOnWriting.NET](http://ScottOnWriting.NET)します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-237">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f75fa-238">特別なに感謝します。</span><span class="sxs-lookup"><span data-stu-id="f75fa-238">Special Thanks To</span></span>

<span data-ttu-id="f75fa-239">このチュートリアル シリーズは、多くの便利なレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="f75fa-239">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f75fa-240">このチュートリアルでは、潜在顧客レビュー担当者が、Hilton Giesenow です。</span><span class="sxs-lookup"><span data-stu-id="f75fa-240">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="f75fa-241">今後、MSDN の記事を確認したいですか。</span><span class="sxs-lookup"><span data-stu-id="f75fa-241">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f75fa-242">場合は、筆者に[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f75fa-242">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f75fa-243">[前へ](master-detail-filtering-with-a-dropdownlist-cs.md)
> [次へ](master-detail-filtering-across-two-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f75fa-243">[Previous](master-detail-filtering-with-a-dropdownlist-cs.md)
[Next](master-detail-filtering-across-two-pages-cs.md)</span></span>
