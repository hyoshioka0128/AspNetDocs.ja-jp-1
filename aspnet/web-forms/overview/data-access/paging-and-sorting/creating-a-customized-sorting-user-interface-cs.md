---
uid: web-forms/overview/data-access/paging-and-sorting/creating-a-customized-sorting-user-interface-cs
title: カスタマイズされた並べ替えユーザー インターフェイス (c#) を作成する |Microsoft Docs
author: rick-anderson
description: 長いリストを表示するには、データが並べ替えられたときに、非常に役に立ちます行の区切り記号を導入することで関連するデータをグループ化します。 このチュートリアルで作成する方法.
ms.author: riande
ms.date: 08/15/2006
ms.assetid: 6f81b633-9d01-4e52-ae4a-2ea6bc109475
msc.legacyurl: /web-forms/overview/data-access/paging-and-sorting/creating-a-customized-sorting-user-interface-cs
msc.type: authoredcontent
ms.openlocfilehash: af4f91ffed7b8884a7441b5ccf4f390aba867fed
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2019
ms.locfileid: "65121904"
---
# <a name="creating-a-customized-sorting-user-interface-c"></a><span data-ttu-id="95cb1-104">カスタマイズされた並べ替えユーザー インターフェイスを作成する (C#)</span><span class="sxs-lookup"><span data-stu-id="95cb1-104">Creating a Customized Sorting User Interface (C#)</span></span>

<span data-ttu-id="95cb1-105">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="95cb1-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="95cb1-106">[サンプル アプリをダウンロード](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_27_CS.exe)または[PDF のダウンロード](creating-a-customized-sorting-user-interface-cs/_static/datatutorial27cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="95cb1-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_27_CS.exe) or [Download PDF](creating-a-customized-sorting-user-interface-cs/_static/datatutorial27cs1.pdf)</span></span>

> <span data-ttu-id="95cb1-107">長いリストを表示するには、データが並べ替えられたときに、非常に役に立ちます行の区切り記号を導入することで関連するデータをグループ化します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-107">When displaying a long list of sorted data, it can be very helpful to group related data by introducing separator rows.</span></span> <span data-ttu-id="95cb1-108">このチュートリアルでは、このような並べ替えユーザー インターフェイスを作成する方法がわかります。</span><span class="sxs-lookup"><span data-stu-id="95cb1-108">In this tutorial we'll see how to create such a sorting user interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="95cb1-109">はじめに</span><span class="sxs-lookup"><span data-stu-id="95cb1-109">Introduction</span></span>

<span data-ttu-id="95cb1-110">データを並べ替えるの長いリストを表示する場合がごく少数の並べ替えられた列で別の値がある場合、エンドユーザー方が難しい、正確に、違い境界にあります。</span><span class="sxs-lookup"><span data-stu-id="95cb1-110">When displaying a long list of sorted data where there are only a handful of different values in the sorted column, an end user might find it hard to discern where, exactly, the difference boundaries occur.</span></span> <span data-ttu-id="95cb1-111">たとえば、9 個までのさまざまなカテゴリの選択肢は、データベースで 81 の製品が (8 つの一意のカテゴリだけでなく、`NULL`オプション)。</span><span class="sxs-lookup"><span data-stu-id="95cb1-111">For example, there are 81 products in the database, but only nine different category choices (eight unique categories plus the `NULL` option).</span></span> <span data-ttu-id="95cb1-112">シーフード カテゴリに該当する製品を調べることに興味を持っているユーザーの場合を考えます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-112">Consider the case of a user who is interested in examining the products that fall under the Seafood category.</span></span> <span data-ttu-id="95cb1-113">一覧表示されたページから*すべて*彼女のおすすめをカテゴリ別にグループ化の結果の並べ替えにはの単一の GridView では、製品、ユーザーが決定可能性がありますすべてのシーフード製品化します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-113">From a page that lists *all* of the products in a single GridView, the user might decide her best bet is to sort the results by category, which will group together all of the Seafood products together.</span></span> <span data-ttu-id="95cb1-114">カテゴリで並べ替えの後、ユーザー、必要があります、リストを探してみましょうシーフードでグループ化した製品の開始位置と終了を探してします。</span><span class="sxs-lookup"><span data-stu-id="95cb1-114">After sorting by category, the user then needs to hunt through the list, looking for where the Seafood-grouped products start and end.</span></span> <span data-ttu-id="95cb1-115">結果はでアルファベット順に並べ替えられますのでシーフード製品カテゴリ名は、難しくはありませんが、グリッド内の項目の一覧を密接にスキャンが必要です。</span><span class="sxs-lookup"><span data-stu-id="95cb1-115">Since the results are ordered alphabetically by the category name finding the Seafood products is not difficult, but it still requires closely scanning the list of items in the grid.</span></span>

<span data-ttu-id="95cb1-116">並べ替えられたグループ間の境界を強調表示するには、多くの web サイトは、このようなグループ間の区切り記号を追加するユーザー インターフェイスを使用します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-116">To help highlight the boundaries between sorted groups, many websites employ a user interface that adds a separator between such groups.</span></span> <span data-ttu-id="95cb1-117">図 1 のような区切り記号は、ユーザーはより迅速に特定のグループを検索して、その境界を特定するだけでなく、データにどのような個別のグループの存在を確認できます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-117">Separators like the ones shown in Figure 1 enables a user to more quickly find a particular group and identify its boundaries, as well as ascertain what distinct groups exist in the data.</span></span>

<span data-ttu-id="95cb1-118">[![各カテゴリ グループが明確に識別](creating-a-customized-sorting-user-interface-cs/_static/image2.png)](creating-a-customized-sorting-user-interface-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="95cb1-118">[![Each Category Group is Clearly Identified](creating-a-customized-sorting-user-interface-cs/_static/image2.png)](creating-a-customized-sorting-user-interface-cs/_static/image1.png)</span></span>

<span data-ttu-id="95cb1-119">**図 1**:各カテゴリ グループが明確に識別される ([フルサイズの画像を表示する をクリックします](creating-a-customized-sorting-user-interface-cs/_static/image3.png))。</span><span class="sxs-lookup"><span data-stu-id="95cb1-119">**Figure 1**: Each Category Group is Clearly Identified ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image3.png))</span></span>

<span data-ttu-id="95cb1-120">このチュートリアルでは、このような並べ替えユーザー インターフェイスを作成する方法がわかります。</span><span class="sxs-lookup"><span data-stu-id="95cb1-120">In this tutorial we'll see how to create such a sorting user interface.</span></span>

## <a name="step-1-creating-a-standard-sortable-gridview"></a><span data-ttu-id="95cb1-121">手順 1: 標準的な並べ替え可能な GridView を作成します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-121">Step 1: Creating a Standard, Sortable GridView</span></span>

<span data-ttu-id="95cb1-122">強化された並べ替えインターフェイスを提供する GridView を拡張する方法を調査する前に、製品の一覧を表示する標準的な並べ替え可能な GridView をまず作成 s を使用できます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-122">Before we explore how to augment the GridView to provide the enhanced sorting interface, let s first create a standard, sortable GridView that lists the products.</span></span> <span data-ttu-id="95cb1-123">開いて開始、`CustomSortingUI.aspx`ページで、`PagingAndSorting`フォルダー。</span><span class="sxs-lookup"><span data-stu-id="95cb1-123">Start by opening the `CustomSortingUI.aspx` page in the `PagingAndSorting` folder.</span></span> <span data-ttu-id="95cb1-124">ページに GridView を追加、設定、`ID`プロパティを`ProductList`、新しい ObjectDataSource にバインドします。</span><span class="sxs-lookup"><span data-stu-id="95cb1-124">Add a GridView to the page, set its `ID` property to `ProductList`, and bind it to a new ObjectDataSource.</span></span> <span data-ttu-id="95cb1-125">構成を使用する ObjectDataSource、`ProductsBLL`クラスの`GetProducts()`レコードを選択する方法。</span><span class="sxs-lookup"><span data-stu-id="95cb1-125">Configure the ObjectDataSource to use the `ProductsBLL` class s `GetProducts()` method for selecting records.</span></span>

<span data-ttu-id="95cb1-126">のみが含まれるように、GridView を次に、構成、 `ProductName`、 `CategoryName`、 `SupplierName`、および`UnitPrice`BoundFields と提供が中止された CheckBoxField します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-126">Next, configure the GridView such that it only contains the `ProductName`, `CategoryName`, `SupplierName`, and `UnitPrice` BoundFields and the Discontinued CheckBoxField.</span></span> <span data-ttu-id="95cb1-127">GridView のスマート タグの並べ替えを有効にするチェック ボックスをオンの並べ替えをサポートする GridView を最後に、構成 (設定して、またはその`AllowSorting`プロパティを`true`)。</span><span class="sxs-lookup"><span data-stu-id="95cb1-127">Finally, configure the GridView to support sorting by checking the Enable Sorting checkbox in the GridView s smart tag (or by setting its `AllowSorting` property to `true`).</span></span> <span data-ttu-id="95cb1-128">追加を行った後、 `CustomSortingUI.aspx`  ページで、宣言型マークアップは、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="95cb1-128">After making these additions to the `CustomSortingUI.aspx` page, the declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](creating-a-customized-sorting-user-interface-cs/samples/sample1.aspx)]

<span data-ttu-id="95cb1-129">ブラウザーできませんでしたが、進行状況を表示する時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="95cb1-129">Take a moment to view our progress thus far in a browser.</span></span> <span data-ttu-id="95cb1-130">図 2 は、そのデータがカテゴリでアルファベット順で並べ替えられる場合、並べ替え可能な GridView を示します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-130">Figure 2 shows the sortable GridView when its data is sorted by category in alphabetical order.</span></span>

<span data-ttu-id="95cb1-131">[![並べ替え可能な GridView のデータはカテゴリで並べ替え](creating-a-customized-sorting-user-interface-cs/_static/image5.png)](creating-a-customized-sorting-user-interface-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="95cb1-131">[![The Sortable GridView s Data is Ordered by Category](creating-a-customized-sorting-user-interface-cs/_static/image5.png)](creating-a-customized-sorting-user-interface-cs/_static/image4.png)</span></span>

<span data-ttu-id="95cb1-132">**図 2**:データのカテゴリで並べ替え並べ替え可能な GridView s ([フルサイズの画像を表示する をクリックします](creating-a-customized-sorting-user-interface-cs/_static/image6.png))。</span><span class="sxs-lookup"><span data-stu-id="95cb1-132">**Figure 2**: The Sortable GridView s Data is Ordered by Category ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image6.png))</span></span>

## <a name="step-2-exploring-techniques-for-adding-the-separator-rows"></a><span data-ttu-id="95cb1-133">手順 2: 区切り記号の行を追加するための手法を探索</span><span class="sxs-lookup"><span data-stu-id="95cb1-133">Step 2: Exploring Techniques for Adding the Separator Rows</span></span>

<span data-ttu-id="95cb1-134">ジェネリック、並べ替え可能な GridView で完全な残っているは並べ替えられた各グループの前に、gridview の区切り記号の行を追加できるようにします。</span><span class="sxs-lookup"><span data-stu-id="95cb1-134">With the generic, sortable GridView complete, all that remains is to be able to add the separator rows in the GridView before each unique sorted group.</span></span> <span data-ttu-id="95cb1-135">しかし、どのような行に挿入できます GridView でしょうか。</span><span class="sxs-lookup"><span data-stu-id="95cb1-135">But how can such rows be injected into the GridView?</span></span> <span data-ttu-id="95cb1-136">基本的に、必要な GridView、s 行を反復処理する並べ替え済みの列の値の間の相違点が発生するかを判断し、し、適切な区切り行を追加します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-136">Essentially, we need to iterate through the GridView s rows, determine where the differences occur between the values in the sorted column, and then add the appropriate separator row.</span></span> <span data-ttu-id="95cb1-137">GridView s に、ソリューションがどこかにある自然なようこの問題を考える`RowDataBound`イベント ハンドラー。</span><span class="sxs-lookup"><span data-stu-id="95cb1-137">When thinking about this problem, it seems natural that the solution lies somewhere in the GridView s `RowDataBound` event handler.</span></span> <span data-ttu-id="95cb1-138">説明したように、[カスタム書式設定時にデータ](../custom-formatting/custom-formatting-based-upon-data-cs.md)チュートリアルでは、このイベント ハンドラーは通常、行のデータに基づく行レベルの書式設定を適用する場合に使用します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-138">As we discussed in the [Custom Formatting Based Upon Data](../custom-formatting/custom-formatting-based-upon-data-cs.md) tutorial, this event handler is commonly used when applying row-level formatting based on the row s data.</span></span> <span data-ttu-id="95cb1-139">ただし、`RowDataBound`イベント ハンドラー ソリューションではない、ここでは、行にことはできませんこのイベント ハンドラーからプログラムで、GridView に追加します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-139">However, the `RowDataBound` event handler is not the solution here, as rows cannot be added to the GridView programmatically from this event handler.</span></span> <span data-ttu-id="95cb1-140">GridView の`Rows`コレクションは実際には、読み取り専用です。</span><span class="sxs-lookup"><span data-stu-id="95cb1-140">The GridView s `Rows` collection, in fact, is read-only.</span></span>

<span data-ttu-id="95cb1-141">GridView に追加の行を追加するのには、3 つの選択肢があります。</span><span class="sxs-lookup"><span data-stu-id="95cb1-141">To add additional rows to the GridView we have three choices:</span></span>

- <span data-ttu-id="95cb1-142">GridView にバインドされている実際のデータにこれらのメタデータの区切り記号の行を追加します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-142">Add these metadata separator rows to the actual data that is bound to the GridView</span></span>
- <span data-ttu-id="95cb1-143">さらに追加したら、GridView をデータにバインドされていますが、 `TableRow` GridView s インスタンス コレクションの制御</span><span class="sxs-lookup"><span data-stu-id="95cb1-143">After the GridView has been bound to the data, add additional `TableRow` instances to the GridView s control collection</span></span>
- <span data-ttu-id="95cb1-144">GridView コントロールを拡張し、GridView 構造の構築を担当のこれらのメソッドをオーバーライドするカスタム サーバー コントロールを作成します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-144">Create a custom server control that extends the GridView control and overrides those methods responsible for constructing the GridView s structure</span></span>

<span data-ttu-id="95cb1-145">この機能は、多くの web ページ上または複数の web サイト全体で必要な場合、カスタム サーバー コントロールを作成する最適な方法でしょう。</span><span class="sxs-lookup"><span data-stu-id="95cb1-145">Creating a custom server control would be the best approach if this functionality was needed on many web pages or across several websites.</span></span> <span data-ttu-id="95cb1-146">ただし、非常に大量のコードと GridView s の内部動作の細部まで詳しく分析の完全な探索が必要になることは。</span><span class="sxs-lookup"><span data-stu-id="95cb1-146">However, it would entail quite a bit of code and a thorough exploration into the depths of the GridView s internal workings.</span></span> <span data-ttu-id="95cb1-147">そのため、このオプションは、このチュートリアルを考慮しましたをしません。</span><span class="sxs-lookup"><span data-stu-id="95cb1-147">Therefore, we'll not consider that option for this tutorial.</span></span>

<span data-ttu-id="95cb1-148">実際のデータに区切り行を追加のオプション以外の 2 つ GridView にバインドし、後の GridView のコントロールのコレクションを操作のバインド - 問題を異なる方法で攻撃し、価値について説明されています。</span><span class="sxs-lookup"><span data-stu-id="95cb1-148">The other two options adding separator rows to the actual data being bound to the GridView and manipulating the GridView s control collection after its been bound - attack the problem differently and merit a discussion.</span></span>

## <a name="adding-rows-to-the-data-bound-to-the-gridview"></a><span data-ttu-id="95cb1-149">GridView にバインドされているデータに行を追加します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-149">Adding Rows to the Data Bound to the GridView</span></span>

<span data-ttu-id="95cb1-150">GridView をデータ ソースにバインドすると、ときに作成、`GridViewRow`データ ソースによって返されるレコードごとにします。</span><span class="sxs-lookup"><span data-stu-id="95cb1-150">When the GridView is bound to a data source, it creates a `GridViewRow` for each record returned by the data source.</span></span> <span data-ttu-id="95cb1-151">そのため、GridView にバインドする前に、データ ソースにレコードの区切り記号を追加することで、必要な区切り行を挿入しましたできます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-151">Therefore, we can inject the needed separator rows by adding separator records to the data source before binding it to the GridView.</span></span> <span data-ttu-id="95cb1-152">図 3 は、この概念を示します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-152">Figure 3 illustrates this concept.</span></span>

![1 つの手法では、データ ソースへの行の区切り記号の追加](creating-a-customized-sorting-user-interface-cs/_static/image7.png)

<span data-ttu-id="95cb1-154">**図 3**:1 つの手法では、データ ソースへの行の区切り記号の追加</span><span class="sxs-lookup"><span data-stu-id="95cb1-154">**Figure 3**: One Technique Involves Adding Separator Rows to the Data Source</span></span>

<span data-ttu-id="95cb1-155">特殊な区切りのレコードがないために、引用符で囲まれた用語の区切り記号レコードを使用します。代わりに、私たちする必要があります何らかの方法でフラグ、データ ソースの特定のレコードが通常のデータ行ではなく、区切り記号として機能します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-155">I use the term separator records in quotes because there is no special separator record; rather, we must somehow flag that a particular record in the data source serves as a separator rather than a normal data row.</span></span> <span data-ttu-id="95cb1-156">この例については、再バインドします、`ProductsDataTable`インスタンスから構成されると、GridView を`ProductRows`します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-156">For our examples, we re binding a `ProductsDataTable` instance to the GridView, which is composed of `ProductRows`.</span></span> <span data-ttu-id="95cb1-157">レコードを区切り記号の行としてフラグを設定して可能性があります、`CategoryID`プロパティを`-1`(ため、このような値は、通常存在でした)。</span><span class="sxs-lookup"><span data-stu-id="95cb1-157">We might flag a record as a separator row by setting its `CategoryID` property to `-1` (since such a value couldn't exist normally).</span></span>

<span data-ttu-id="95cb1-158">この手法を利用するには、次の手順を実行する d 必要があります。</span><span class="sxs-lookup"><span data-stu-id="95cb1-158">To utilize this technique we d need to perform the following steps:</span></span>

1. <span data-ttu-id="95cb1-159">GridView にバインドするデータをプログラムで取得 (、`ProductsDataTable`インスタンス)</span><span class="sxs-lookup"><span data-stu-id="95cb1-159">Programmatically retrieve the data to bind to the GridView (a `ProductsDataTable` instance)</span></span>
2. <span data-ttu-id="95cb1-160">GridView s に基づいてデータを並べ替える`SortExpression`と`SortDirection`プロパティ</span><span class="sxs-lookup"><span data-stu-id="95cb1-160">Sort the data based on the GridView s `SortExpression` and `SortDirection` properties</span></span>
3. <span data-ttu-id="95cb1-161">反復処理、`ProductsRows`で、 `ProductsDataTable`、並べ替えられた列の違いがある箇所を探し求めています。</span><span class="sxs-lookup"><span data-stu-id="95cb1-161">Iterate through the `ProductsRows` in the `ProductsDataTable`, looking for where the differences in the sorted column lie</span></span>
4. <span data-ttu-id="95cb1-162">各グループの境界の区切り記号のレコードを挿入`ProductsRow`インスタンスを持つ、s、DataTable に`CategoryID`設定`-1`(または任意指定された区切り記号のレコードとしてレコードをマークする決定)</span><span class="sxs-lookup"><span data-stu-id="95cb1-162">At each group boundary, inject a separator record `ProductsRow` instance into the DataTable, one that has it s `CategoryID` set to `-1` (or whatever designation was decided upon to mark a record as a separator record )</span></span>
5. <span data-ttu-id="95cb1-163">区切り記号の行を挿入した後、GridView をプログラムでデータをバインドします。</span><span class="sxs-lookup"><span data-stu-id="95cb1-163">After injecting the separator rows, programmatically bind the data to the GridView</span></span>

<span data-ttu-id="95cb1-164">これら 5 つの手順だけでなく d 必要もあります GridView s のイベント ハンドラーを提供する`RowDataBound`イベント。</span><span class="sxs-lookup"><span data-stu-id="95cb1-164">In addition to these five steps, we d also need to provide an event handler for the GridView s `RowDataBound` event.</span></span> <span data-ttu-id="95cb1-165">ここでは、d ごとに確認`DataRow`決定した区切り記号と行、1 つが`CategoryID`設定が`-1`。</span><span class="sxs-lookup"><span data-stu-id="95cb1-165">Here, we d check each `DataRow` and determine if it was a separator row, one whose `CategoryID` setting was `-1`.</span></span> <span data-ttu-id="95cb1-166">そのため、d おそらくたい場合、書式設定またはセルに表示されるテキストを調整します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-166">If so, we d probably want to adjust its formatting or the text displayed in the cell(s).</span></span>

<span data-ttu-id="95cb1-167">この手法を使用しても、GridView のイベント ハンドラーを提供する必要があると、上記で説明したよりもさらに作業を必要と並べ替えのグループの境界を挿入する`Sorting`イベントを引き続き追跡、`SortExpression`と`SortDirection`値。</span><span class="sxs-lookup"><span data-stu-id="95cb1-167">Using this technique for injecting the sorting group boundaries requires a bit more work than outlined above, as you need to also provide an event handler for the GridView s `Sorting` event and keep track of the `SortExpression` and `SortDirection` values.</span></span>

## <a name="manipulating-the-gridview-s-control-collection-after-it-s-been-databound"></a><span data-ttu-id="95cb1-168">これは、後にコレクションを s 制御 GridView s を操作するデータ バインドされています</span><span class="sxs-lookup"><span data-stu-id="95cb1-168">Manipulating the GridView s Control Collection After It s Been Databound</span></span>

<span data-ttu-id="95cb1-169">GridView にバインドする前に、データをメッセージングではなく、区切り記号の行を追加できます*後*データが GridView にバインドされました。</span><span class="sxs-lookup"><span data-stu-id="95cb1-169">Rather than messaging the data before binding it to the GridView, we can add the separator rows *after* the data has been bound to the GridView.</span></span> <span data-ttu-id="95cb1-170">データ バインディングのプロセスが実際には、GridView のコントロール階層を作成して、単に`Table`セルのコレクションのそれぞれで構成されますが、行のコレクションのインスタンスで構成されます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-170">The process of data binding builds up the GridView s control hierarchy, which in reality is simply a `Table` instance composed of a collection of rows, each of which is composed of a collection of cells.</span></span> <span data-ttu-id="95cb1-171">具体的には、GridView のコントロール コレクションに含まれる、 `Table` 、そのルートにあるオブジェクトを`GridViewRow`(から派生、`TableRow`クラス) 内の各レコード、 `DataSource` 、GridView にバインドされていると、`TableCell`各内のオブジェクト`GridViewRow`内の各データ フィールドのインスタンス、`DataSource`します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-171">Specifically, the GridView s control collection contains a `Table` object at its root, a `GridViewRow` (which is derived from the `TableRow` class) for each record in the `DataSource` bound to the GridView, and a `TableCell` object in each `GridViewRow` instance for each data field in the `DataSource`.</span></span>

<span data-ttu-id="95cb1-172">各並べ替えグループ間の区切り記号の行を追加するには、ことを直接操作できますこのコントロールの階層構造が作成されたら。</span><span class="sxs-lookup"><span data-stu-id="95cb1-172">To add separator rows between each sorting group, we can directly manipulate this control hierarchy once it has been created.</span></span> <span data-ttu-id="95cb1-173">ページが表示されるまで、最後に s の GridView コントロール階層が作成されたことを確信できます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-173">We can be confident that the GridView s control hierarchy has been created for the last time by the time the page is being rendered.</span></span> <span data-ttu-id="95cb1-174">このため、この方法をオーバーライド、`Page`クラスの`Render`メソッド、必要な区切り記号の行に含めるこの時点で GridView s の最終的なコントロール階層を更新します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-174">Therefore, this approach overrides the `Page` class s `Render` method, at which point the GridView s final control hierarchy is updated to include the needed separator rows.</span></span> <span data-ttu-id="95cb1-175">図 4 は、このプロセスを示します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-175">Figure 4 illustrates this process.</span></span>

<span data-ttu-id="95cb1-176">[![代替手法が s の GridView コントロール階層を操作します。](creating-a-customized-sorting-user-interface-cs/_static/image9.png)](creating-a-customized-sorting-user-interface-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="95cb1-176">[![An Alternate Technique Manipulates the GridView s Control Hierarchy](creating-a-customized-sorting-user-interface-cs/_static/image9.png)](creating-a-customized-sorting-user-interface-cs/_static/image8.png)</span></span>

<span data-ttu-id="95cb1-177">**図 4**:代替手法が GridView のコントロール階層を操作する ([フルサイズの画像を表示する をクリックします](creating-a-customized-sorting-user-interface-cs/_static/image10.png))。</span><span class="sxs-lookup"><span data-stu-id="95cb1-177">**Figure 4**: An Alternate Technique Manipulates the GridView s Control Hierarchy ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image10.png))</span></span>

<span data-ttu-id="95cb1-178">このチュートリアルでは、この後者のアプローチ、並べ替えのユーザー エクスペリエンスのカスタマイズを使用します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-178">For this tutorial, we'll use this latter approach to customize the sorting user experience.</span></span>

> [!NOTE]
> <span data-ttu-id="95cb1-179">コードはで提供される例に基づく m は、このチュートリアルでは提示[Teemu Keiski](http://aspadvice.com/blogs/joteke/default.aspx) s ブログ エントリ「 [GridView 並べ替えのグループ化ビットを再生](http://aspadvice.com/blogs/joteke/archive/2006/02/11/15130.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-179">The code I m presenting in this tutorial is based on the example provided in [Teemu Keiski](http://aspadvice.com/blogs/joteke/default.aspx) s blog entry, [Playing a Bit with GridView Sort Grouping](http://aspadvice.com/blogs/joteke/archive/2006/02/11/15130.aspx).</span></span>

## <a name="step-3-adding-the-separator-rows-to-the-gridview-s-control-hierarchy"></a><span data-ttu-id="95cb1-180">手順 3: GridView のコントロール階層に区切り記号の行を追加</span><span class="sxs-lookup"><span data-stu-id="95cb1-180">Step 3: Adding the Separator Rows to the GridView s Control Hierarchy</span></span>

<span data-ttu-id="95cb1-181">この追加の最後に、ページのライフ サイクルが、実際の GridView c を実行するため、そのコントロールの階層構造が作成され、そのページのアクセス時に、最後に作成された後に、GridView s のコントロール階層に区切り行を追加するいたしますソース階層が HTML に表示されています。</span><span class="sxs-lookup"><span data-stu-id="95cb1-181">Since we only want to add the separator rows to the GridView s control hierarchy after its control hierarchy has been created and created for the last time on that page visit, we want to perform this addition at the end of the page lifecycle, but before the actual GridView control hierarchy has been rendered into HTML.</span></span> <span data-ttu-id="95cb1-182">これには、最新の可能なポイントは、`Page`クラスの`Render`イベントで、次のメソッド シグネチャを使用して分離コード クラスを無効にできます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-182">The latest possible point at which we can accomplish this is the `Page` class s `Render` event, which we can override in our code-behind class using the following method signature:</span></span>

[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample2.cs)]

<span data-ttu-id="95cb1-183">ときに、`Page`クラス元`Render`メソッドが呼び出される`base.Render(writer)`の各ページにコントロールに表示され、コントロールの階層構造に基づくマークアップを生成します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-183">When the `Page` class s original `Render` method is invoked `base.Render(writer)` each of the controls in the page will be rendered, generating the markup based on their control hierarchy.</span></span> <span data-ttu-id="95cb1-184">したがっては両者を呼び出すことが不可欠`base.Render(writer)`ページが表示されるように、GridView s を操作およびコントロールの呼び出しの前に階層`base.Render(writer)`、その前に、GridView のコントロール階層に区切り行が追加されましたs されてレンダリングされます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-184">Therefore it is imperative that we both call `base.Render(writer)`, so that the page is rendered, and that we manipulate the GridView s control hierarchy prior to calling `base.Render(writer)`, so that the separator rows have been added to the GridView s control hierarchy before it s been rendered.</span></span>

<span data-ttu-id="95cb1-185">並べ替えのグループ ヘッダーを挿入するには、最初のデータが並べ替えられること、ユーザーが要求することを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="95cb1-185">To inject the sort group headers we first need to ensure that the user has requested that the data be sorted.</span></span> <span data-ttu-id="95cb1-186">既定では、GridView の内容が並べ替えられていないと、したがってことヘッダーを並べ替え、グループを入力する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="95cb1-186">By default, the GridView s contents are not sorted, and therefore we don t need to enter any group sorting headers.</span></span>

> [!NOTE]
> <span data-ttu-id="95cb1-187">GridView ページが最初に読み込まれたときに、特定の列で並べ替えられる場合は、呼び出す GridView の`Sort`メソッドの最初のページ参照してください (ただし、以降のポストバックではなく)。</span><span class="sxs-lookup"><span data-stu-id="95cb1-187">If you want the GridView to be sorted by a particular column when the page is first loaded, call the GridView s `Sort` method on the first page visit (but not on subsequent postbacks).</span></span> <span data-ttu-id="95cb1-188">これを実現するには、この呼び出しを追加、`Page_Load`内にイベント ハンドラー、`if (!Page.IsPostBack)`条件。</span><span class="sxs-lookup"><span data-stu-id="95cb1-188">To accomplish this, add this call in the `Page_Load` event handler within an `if (!Page.IsPostBack)` conditional.</span></span> <span data-ttu-id="95cb1-189">参照、[レポート データの並べ替えとページング](paging-and-sorting-report-data-cs.md)チュートリアルの情報の詳細については、`Sort`メソッド。</span><span class="sxs-lookup"><span data-stu-id="95cb1-189">Refer back to the [Paging and Sorting Report Data](paging-and-sorting-report-data-cs.md) tutorial information for more on the `Sort` method.</span></span>

<span data-ttu-id="95cb1-190">データが並べ替えられているを次のタスクではどのような列を確認すると仮定すると、によってデータが並べ替えられたし、から s 列での相違点を検索する行をスキャンする値します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-190">Assuming that the data has been sorted, our next task is to determine what column the data was sorted by and then to scan the rows looking for differences in that column s values.</span></span> <span data-ttu-id="95cb1-191">次のコードでは、データが並べ替えられているし、データが並べ替えられて、列を検索することを保証します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-191">The following code ensures that the data has been sorted and finds the column by which the data has been sorted:</span></span>

[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample3.cs)]

<span data-ttu-id="95cb1-192">GridView がまだを並べ替え、GridView の`SortExpression`プロパティが設定されていません。</span><span class="sxs-lookup"><span data-stu-id="95cb1-192">If the GridView has yet to be sorted, the GridView s `SortExpression` property will not have been set.</span></span> <span data-ttu-id="95cb1-193">そのため、だけ使用するこのプロパティがいくつかの値を持つ場合は、区切り記号の行を追加します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-193">Therefore, we only want to add the separator rows if this property has some value.</span></span> <span data-ttu-id="95cb1-194">場合は、次に、データの並べ替え、列のインデックスを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="95cb1-194">If it does, we next need to determine the index of the column by which the data was sorted.</span></span> <span data-ttu-id="95cb1-195">これは GridView s ループ`Columns`コレクションを持つ列の検索`SortExpression`プロパティが GridView 秒に等しい`SortExpression`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="95cb1-195">This is accomplished by looping through the GridView s `Columns` collection, searching for the column whose `SortExpression` property equals the GridView s `SortExpression` property.</span></span> <span data-ttu-id="95cb1-196">取得私たちもの列のインデックスだけでなく、`HeaderText`プロパティで、区切り記号の行を表示するときに使用されます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-196">In addition to the column s index, we also grab the `HeaderText` property, which is used when displaying the separator rows.</span></span>

<span data-ttu-id="95cb1-197">データを並べ替える列のインデックスを含む最後に、GridView の行を列挙します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-197">With the index of the column by which the data is sorted, the final step is to enumerate the rows of the GridView.</span></span> <span data-ttu-id="95cb1-198">行ごとに並べ替えられた列の値が、前の行の並べ替えられています列の値と異なるかどうかを判断する必要があります。</span><span class="sxs-lookup"><span data-stu-id="95cb1-198">For each row we need to determine whether the sorted column s value differs from the previous row s sorted column s value.</span></span> <span data-ttu-id="95cb1-199">新しいを挿入する必要がありますので場合、`GridViewRow`コントロール階層にインスタンス。</span><span class="sxs-lookup"><span data-stu-id="95cb1-199">If so, we need to inject a new `GridViewRow` instance into the control hierarchy.</span></span> <span data-ttu-id="95cb1-200">これは、次のコードで実現されます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-200">This is accomplished with the following code:</span></span>

[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample4.cs)]

<span data-ttu-id="95cb1-201">このコードはプログラムで参照することで起動、 `Table` s の GridView コントロール階層のルートにあるオブジェクトし、という名前の文字列変数を作成する`lastValue`します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-201">This code starts by programmatically referencing the `Table` object found at the root of the GridView s control hierarchy and creating a string variable named `lastValue`.</span></span> <span data-ttu-id="95cb1-202">`lastValue` 前の行の値を持つ現在の行 s 並べ替え列の値を比較に使用されます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-202">`lastValue` is used to compare the current row s sorted column value with the previous row s value.</span></span> <span data-ttu-id="95cb1-203">次に、GridView s`Rows`コレクションが列挙されで行ごとに並べ替えられた列の値が格納されている、`currentValue`変数。</span><span class="sxs-lookup"><span data-stu-id="95cb1-203">Next, the GridView s `Rows` collection is enumerated and for each row the value of the sorted column is stored in the `currentValue` variable.</span></span>

> [!NOTE]
> <span data-ttu-id="95cb1-204">特定の行の並べ替え列の値を決定するセル s 使用`Text`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="95cb1-204">To determine the value of the particular row s sorted column I use the cell s `Text` property.</span></span> <span data-ttu-id="95cb1-205">これは、BoundFields に適してがない TemplateFields、CheckBoxFields、必要に応じて機能にします。</span><span class="sxs-lookup"><span data-stu-id="95cb1-205">This works well for BoundFields, but will not work as desired for TemplateFields, CheckBoxFields, and so on.</span></span> <span data-ttu-id="95cb1-206">間もなく代替 GridView フィールドに対応する方法についてを説明します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-206">We'll look at how to account for alternate GridView fields shortly.</span></span>

<span data-ttu-id="95cb1-207">`currentValue`と`lastValue`変数と比較します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-207">The `currentValue` and `lastValue` variables are then compared.</span></span> <span data-ttu-id="95cb1-208">これらが異なる場合は、コントロールの階層構造に新しい区切り記号の行を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="95cb1-208">If they differ we need to add a new separator row to the control hierarchy.</span></span> <span data-ttu-id="95cb1-209">インデックスを決定することでこれは、`GridViewRow`で、`Table`オブジェクト`Rows`コレクションの新規作成`GridViewRow`と`TableCell`インスタンス、および追加し、`TableCell`と`GridViewRow`に、コントロールの階層。</span><span class="sxs-lookup"><span data-stu-id="95cb1-209">This is accomplished by determining the index of the `GridViewRow` in the `Table` object s `Rows` collection, creating new `GridViewRow` and `TableCell` instances, and then adding the `TableCell` and `GridViewRow` to the control hierarchy.</span></span>

<span data-ttu-id="95cb1-210">区切り記号が $s 内の単一行を行に注意してください`TableCell`、GridView の幅全体にまたがるように書式設定を使用して書式設定、 `SortHeaderRowStyle` CSS クラス、ありその`Text`(カテゴリ) など、並べ替えるグループの両方が表示されるような名前プロパティにと(飲み物) などのグループの値です。</span><span class="sxs-lookup"><span data-stu-id="95cb1-210">Note that the separator row s lone `TableCell` is formatted such that it spans the entire width of the GridView, is formatted using the `SortHeaderRowStyle` CSS class, and has its `Text` property such that it shows both the sort group name (such as Category ) and the group s value (such as Beverages ).</span></span> <span data-ttu-id="95cb1-211">最後に、`lastValue`の値が更新され`currentValue`します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-211">Finally, `lastValue` is updated to the value of `currentValue`.</span></span>

<span data-ttu-id="95cb1-212">並べ替えのグループ ヘッダー行の書式設定に使用する CSS クラス`SortHeaderRowStyle`で指定する必要があります、`Styles.css`ファイル。</span><span class="sxs-lookup"><span data-stu-id="95cb1-212">The CSS class used to format the sorting group header row `SortHeaderRowStyle` needs to be specified in the `Styles.css` file.</span></span> <span data-ttu-id="95cb1-213">自由にどのようなスタイル設定にアピールします。次を使用しました。</span><span class="sxs-lookup"><span data-stu-id="95cb1-213">Feel free to use whatever style settings appeal to you; I used the following:</span></span>

[!code-css[Main](creating-a-customized-sorting-user-interface-cs/samples/sample5.css)]

<span data-ttu-id="95cb1-214">BoundField で並べ替えるときに現在のコードでは、並べ替えのインターフェイスは並べ替えグループ ヘッダーを追加 (業者によって並べ替えるときに、スクリーン ショットを表示する図 5 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="95cb1-214">With the current code, the sorting interface adds sort group headers when sorting by any BoundField (see Figure 5, which shows a screenshot when sorting by supplier).</span></span> <span data-ttu-id="95cb1-215">ただし、(CheckBoxField や TemplateField) などのフィールドの種類を並べ替えるときに、並べ替えのグループ ヘッダーが (図 6 参照) が見つかりません。</span><span class="sxs-lookup"><span data-stu-id="95cb1-215">However, when sorting by any other field type (such as a CheckBoxField or TemplateField), the sort group headers are nowhere to be found (see Figure 6).</span></span>

<span data-ttu-id="95cb1-216">[![並べ替えのインターフェイスに BoundFields で並べ替えるときに並べ替えられたグループ ヘッダーが含まれます](creating-a-customized-sorting-user-interface-cs/_static/image12.png)](creating-a-customized-sorting-user-interface-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="95cb1-216">[![The Sorting Interface Includes Sort Group Headers When Sorting by BoundFields](creating-a-customized-sorting-user-interface-cs/_static/image12.png)](creating-a-customized-sorting-user-interface-cs/_static/image11.png)</span></span>

<span data-ttu-id="95cb1-217">**図 5**:並べ替えインターフェイスが含まれています並べ替えグループ ヘッダーとして並べ替え BoundFields ([フルサイズの画像を表示する をクリックします](creating-a-customized-sorting-user-interface-cs/_static/image13.png))。</span><span class="sxs-lookup"><span data-stu-id="95cb1-217">**Figure 5**: The Sorting Interface Includes Sort Group Headers When Sorting by BoundFields ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image13.png))</span></span>

<span data-ttu-id="95cb1-218">[![並べ替えのグループ ヘッダーが不足しているときに並べ替え、CheckBoxField です。](creating-a-customized-sorting-user-interface-cs/_static/image15.png)](creating-a-customized-sorting-user-interface-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="95cb1-218">[![The Sort Group Headers are Missing When Sorting a CheckBoxField](creating-a-customized-sorting-user-interface-cs/_static/image15.png)](creating-a-customized-sorting-user-interface-cs/_static/image14.png)</span></span>

<span data-ttu-id="95cb1-219">**図 6**:並べ替えのグループ ヘッダーが不足しているときに並べ替え、CheckBoxField ([フルサイズの画像を表示する をクリックします](creating-a-customized-sorting-user-interface-cs/_static/image16.png))。</span><span class="sxs-lookup"><span data-stu-id="95cb1-219">**Figure 6**: The Sort Group Headers are Missing When Sorting a CheckBoxField ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image16.png))</span></span>

<span data-ttu-id="95cb1-220">コードは現在だけに使用して、CheckBoxField して並べ替えるときに、並べ替えのグループ ヘッダーが見つからない理由は、 `TableCell` s`Text`行ごとに並べ替えられた列の値を決定するプロパティ。</span><span class="sxs-lookup"><span data-stu-id="95cb1-220">The reason the sort group headers are missing when sorting by a CheckBoxField is because the code currently uses just the `TableCell` s `Text` property to determine the value of the sorted column for each row.</span></span> <span data-ttu-id="95cb1-221">CheckBoxFields、用、 `TableCell` s`Text`プロパティが空の文字列は、代わりに、値が内にあるチェック ボックスを Web コントロールで使用できる、 `TableCell` s`Controls`コレクション。</span><span class="sxs-lookup"><span data-stu-id="95cb1-221">For CheckBoxFields, the `TableCell` s `Text` property is an empty string; instead, the value is available through a CheckBox Web control that resides within the `TableCell` s `Controls` collection.</span></span>

<span data-ttu-id="95cb1-222">BoundFields 以外のフィールド型を処理するために、コードを拡張する必要があります、`currentValue`変数に代入するチェック ボックスでの存在を確認、 `TableCell` s`Controls`コレクション。</span><span class="sxs-lookup"><span data-stu-id="95cb1-222">To handle field types other than BoundFields, we need to augment the code where the `currentValue` variable is assigned to check for the existence of a CheckBox in the `TableCell` s `Controls` collection.</span></span> <span data-ttu-id="95cb1-223">使用する代わりに`currentValue = gvr.Cells[sortColumnIndex].Text`、このコードを次に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-223">Instead of using `currentValue = gvr.Cells[sortColumnIndex].Text`, replace this code with the following:</span></span>

[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample6.cs)]

<span data-ttu-id="95cb1-224">このコードは、並べ替えられた列を調べて`TableCell`の任意のコントロールがないかどうかを確認するのには、現在の行の`Controls`コレクション。</span><span class="sxs-lookup"><span data-stu-id="95cb1-224">This code examines the sorted column `TableCell` for the current row to determine if there are any controls in the `Controls` collection.</span></span> <span data-ttu-id="95cb1-225">存在し、最初のコントロールは、チェック ボックスをオンの場合、`currentValue`変数が設定を [はい] またはいいえ、チェック ボックス s に応じて`Checked`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="95cb1-225">If there are, and the first control is a CheckBox, the `currentValue` variable is set to Yes or No, depending on the CheckBox s `Checked` property.</span></span> <span data-ttu-id="95cb1-226">値を取得する場合は、 `TableCell` s`Text`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="95cb1-226">Otherwise, the value is taken from the `TableCell` s `Text` property.</span></span> <span data-ttu-id="95cb1-227">このロジックは、GridView に存在する任意の TemplateFields の並べ替えを処理するためにレプリケートできます。</span><span class="sxs-lookup"><span data-stu-id="95cb1-227">This logic can be replicated to handle sorting for any TemplateFields that may exist in the GridView.</span></span>

<span data-ttu-id="95cb1-228">上記のコードの追加、並べ替えのグループ ヘッダーは廃止された CheckBoxField で並べ替えるときに存在するようになりました (図 7 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="95cb1-228">With the above code addition, the sort group headers are now present when sorting by the Discontinued CheckBoxField (see Figure 7).</span></span>

<span data-ttu-id="95cb1-229">[![並べ替えのグループ ヘッダーは現在存在するときに並べ替え、CheckBoxField です。](creating-a-customized-sorting-user-interface-cs/_static/image18.png)](creating-a-customized-sorting-user-interface-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="95cb1-229">[![The Sort Group Headers are Now Present When Sorting a CheckBoxField](creating-a-customized-sorting-user-interface-cs/_static/image18.png)](creating-a-customized-sorting-user-interface-cs/_static/image17.png)</span></span>

<span data-ttu-id="95cb1-230">**図 7**:並べ替えのグループ ヘッダーは現在存在するときに並べ替え、CheckBoxField ([フルサイズの画像を表示する をクリックします](creating-a-customized-sorting-user-interface-cs/_static/image19.png))。</span><span class="sxs-lookup"><span data-stu-id="95cb1-230">**Figure 7**: The Sort Group Headers are Now Present When Sorting a CheckBoxField ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image19.png))</span></span>

> [!NOTE]
> <span data-ttu-id="95cb1-231">製品がある場合`NULL`の値をデータベース、 `CategoryID`、 `SupplierID`、または`UnitPrice`フィールド、それらの値は、GridView で空の文字列として既定で表示でこれらの製品の区切り記号の行のテキストを意味`NULL`カテゴリのような値は読み取ら: (が s は、カテゴリ後名なし: などのカテゴリ。飲み物)。</span><span class="sxs-lookup"><span data-stu-id="95cb1-231">If you have products with `NULL` database values for the `CategoryID`, `SupplierID`, or `UnitPrice` fields, those values will appear as empty strings in the GridView by default, meaning the separator row s text for those products with `NULL` values will read like Category: (that is, there s no name after Category: like with Category: Beverages ).</span></span> <span data-ttu-id="95cb1-232">ここに表示される値の場合は、BoundFields か設定できます[`NullDisplayText`プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.nulldisplaytext.aspx)テキストを表示するかを割り当てるときに、Render メソッドで条件付きステートメントを追加することができます、`currentValue`に区切り記号行の`Text`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="95cb1-232">If you want a value displayed here you can either set the BoundFields [`NullDisplayText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.nulldisplaytext.aspx) to the text you want displayed or you can add a conditional statement in the Render method when assigning the `currentValue` to the separator row s `Text` property.</span></span>

## <a name="summary"></a><span data-ttu-id="95cb1-233">まとめ</span><span class="sxs-lookup"><span data-stu-id="95cb1-233">Summary</span></span>

<span data-ttu-id="95cb1-234">GridView では、並べ替えのインターフェイスをカスタマイズするための多くの組み込みオプションは含まれません。</span><span class="sxs-lookup"><span data-stu-id="95cb1-234">The GridView does not include many built-in options for customizing the sorting interface.</span></span> <span data-ttu-id="95cb1-235">ただし、大量の低レベルのコードよりカスタマイズされたインターフェイスを作成するには、GridView のコントロール階層を調整することも可能です。</span><span class="sxs-lookup"><span data-stu-id="95cb1-235">However, with a bit of low-level code, it s possible to tweak the GridView s control hierarchy to create a more customized interface.</span></span> <span data-ttu-id="95cb1-236">このチュートリアルでは、GridView を並べ替え可能な個別のグループとそれらのグループの境界をより簡単に識別するための並べ替えグループ区切り行を追加する方法を説明しました。</span><span class="sxs-lookup"><span data-stu-id="95cb1-236">In this tutorial we saw how to add a sort group separator row for a sortable GridView, which more easily identifies the distinct groups and those groups boundaries.</span></span> <span data-ttu-id="95cb1-237">カスタマイズされた並べ替えインターフェイスの他の例については、チェック アウト[Scott Guthrie](https://weblogs.asp.net/scottgu/) s [ASP.NET 2.0 GridView 並べ替えヒントとテクニック](https://weblogs.asp.net/scottgu/archive/2006/02/11/437995.aspx)ブログ エントリ。</span><span class="sxs-lookup"><span data-stu-id="95cb1-237">For additional examples of customized sorting interfaces, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/) s [A Few ASP.NET 2.0 GridView Sorting Tips and Tricks](https://weblogs.asp.net/scottgu/archive/2006/02/11/437995.aspx) blog entry.</span></span>

<span data-ttu-id="95cb1-238">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="95cb1-238">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="95cb1-239">執筆者紹介</span><span class="sxs-lookup"><span data-stu-id="95cb1-239">About the Author</span></span>

<span data-ttu-id="95cb1-240">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックおよびの創設者の著者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、Microsoft Web テクノロジと 1998 年から携わっています。</span><span class="sxs-lookup"><span data-stu-id="95cb1-240">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="95cb1-241">Scott は、フリーのコンサルタント、トレーナー、およびライターとして動作します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-241">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="95cb1-242">最新の著書は[ *Sams 教える自分で ASP.NET 2.0 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-242">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="95cb1-243">彼に到達できる[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="95cb1-243">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="95cb1-244">彼のブログにあるでまたは[ http://ScottOnWriting.NET](http://ScottOnWriting.NET)します。</span><span class="sxs-lookup"><span data-stu-id="95cb1-244">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="95cb1-245">[前へ](sorting-custom-paged-data-cs.md)
> [次へ](paging-and-sorting-report-data-vb.md)</span><span class="sxs-lookup"><span data-stu-id="95cb1-245">[Previous](sorting-custom-paged-data-cs.md)
[Next](paging-and-sorting-report-data-vb.md)</span></span>
