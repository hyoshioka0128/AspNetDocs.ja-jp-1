---
uid: web-forms/overview/data-access/paging-and-sorting/creating-a-customized-sorting-user-interface-cs
title: カスタマイズされた並べ替えユーザーインターフェイスC#を作成する () |Microsoft Docs
author: rick-anderson
description: 並べ替えられたデータの長い一覧を表示する場合は、区切り行を導入することによって関連データをグループ化すると非常に便利です。 このチュートリアルでは、次の方法について説明します。
ms.author: riande
ms.date: 08/15/2006
ms.assetid: 6f81b633-9d01-4e52-ae4a-2ea6bc109475
msc.legacyurl: /web-forms/overview/data-access/paging-and-sorting/creating-a-customized-sorting-user-interface-cs
msc.type: authoredcontent
ms.openlocfilehash: 93ec07a13de80e4c874ff46b5dfa626b60b632c8
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/28/2019
ms.locfileid: "74597349"
---
# <a name="creating-a-customized-sorting-user-interface-c"></a><span data-ttu-id="f2094-104">カスタマイズされた並べ替えユーザー インターフェイスを作成する (C#)</span><span class="sxs-lookup"><span data-stu-id="f2094-104">Creating a Customized Sorting User Interface (C#)</span></span>

<span data-ttu-id="f2094-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f2094-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f2094-106">[サンプルアプリのダウンロード](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_27_CS.exe)または[PDF のダウンロード](creating-a-customized-sorting-user-interface-cs/_static/datatutorial27cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f2094-106">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_27_CS.exe) or [Download PDF](creating-a-customized-sorting-user-interface-cs/_static/datatutorial27cs1.pdf)</span></span>

> <span data-ttu-id="f2094-107">並べ替えられたデータの長い一覧を表示する場合は、区切り行を導入することによって関連データをグループ化すると非常に便利です。</span><span class="sxs-lookup"><span data-stu-id="f2094-107">When displaying a long list of sorted data, it can be very helpful to group related data by introducing separator rows.</span></span> <span data-ttu-id="f2094-108">このチュートリアルでは、このような並べ替えユーザーインターフェイスを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="f2094-108">In this tutorial we'll see how to create such a sorting user interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="f2094-109">はじめに</span><span class="sxs-lookup"><span data-stu-id="f2094-109">Introduction</span></span>

<span data-ttu-id="f2094-110">並べ替えられた列に異なる値がいくつか存在する場合、並べ替えられたデータの長い一覧を表示すると、エンドユーザーは、正確な境界がどこにあるかを正確に区別することが困難になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-110">When displaying a long list of sorted data where there are only a handful of different values in the sorted column, an end user might find it hard to discern where, exactly, the difference boundaries occur.</span></span> <span data-ttu-id="f2094-111">たとえば、データベースには81製品がありますが、カテゴリの選択肢は9つだけです (8 つの一意のカテゴリと `NULL` オプション)。</span><span class="sxs-lookup"><span data-stu-id="f2094-111">For example, there are 81 products in the database, but only nine different category choices (eight unique categories plus the `NULL` option).</span></span> <span data-ttu-id="f2094-112">シーフードカテゴリに分類されている製品を調べることに関心のあるユーザーの場合を考えてみます。</span><span class="sxs-lookup"><span data-stu-id="f2094-112">Consider the case of a user who is interested in examining the products that fall under the Seafood category.</span></span> <span data-ttu-id="f2094-113">1つの GridView 内の*すべて*の製品を一覧表示するページから、ユーザーは結果をカテゴリ別に並べ替えることができます。これにより、すべてのシーフード製品がまとめてグループ化されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-113">From a page that lists *all* of the products in a single GridView, the user might decide her best bet is to sort the results by category, which will group together all of the Seafood products together.</span></span> <span data-ttu-id="f2094-114">カテゴリ別に並べ替えた後、ユーザーはリストを確認する必要があります。ここでは、シーフード製品の開始と終了を検索します。</span><span class="sxs-lookup"><span data-stu-id="f2094-114">After sorting by category, the user then needs to hunt through the list, looking for where the Seafood-grouped products start and end.</span></span> <span data-ttu-id="f2094-115">結果はカテゴリ名のアルファベット順に並べ替えられるため、シーフード製品を見つけるのは困難ですが、グリッド内の項目の一覧を厳密にスキャンする必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-115">Since the results are ordered alphabetically by the category name finding the Seafood products is not difficult, but it still requires closely scanning the list of items in the grid.</span></span>

<span data-ttu-id="f2094-116">並べ替えられたグループ間の境界を強調表示するために、多くの web サイトでは、そのようなグループ間に区切り記号を追加するユーザーインターフェイスを採用しています。</span><span class="sxs-lookup"><span data-stu-id="f2094-116">To help highlight the boundaries between sorted groups, many websites employ a user interface that adds a separator between such groups.</span></span> <span data-ttu-id="f2094-117">図1に示すような区切り記号を使用すると、特定のグループをすばやく検索し、その境界を識別したり、データ内に存在する別のグループを確認したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="f2094-117">Separators like the ones shown in Figure 1 enables a user to more quickly find a particular group and identify its boundaries, as well as ascertain what distinct groups exist in the data.</span></span>

<span data-ttu-id="f2094-118">[各カテゴリグループを明確に識別 ![](creating-a-customized-sorting-user-interface-cs/_static/image2.png)](creating-a-customized-sorting-user-interface-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f2094-118">[![Each Category Group is Clearly Identified](creating-a-customized-sorting-user-interface-cs/_static/image2.png)](creating-a-customized-sorting-user-interface-cs/_static/image1.png)</span></span>

<span data-ttu-id="f2094-119">**図 1**: 各カテゴリグループが明確に識別される ([クリックすると、フルサイズの画像が表示](creating-a-customized-sorting-user-interface-cs/_static/image3.png)されます)</span><span class="sxs-lookup"><span data-stu-id="f2094-119">**Figure 1**: Each Category Group is Clearly Identified ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image3.png))</span></span>

<span data-ttu-id="f2094-120">このチュートリアルでは、このような並べ替えユーザーインターフェイスを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="f2094-120">In this tutorial we'll see how to create such a sorting user interface.</span></span>

## <a name="step-1-creating-a-standard-sortable-gridview"></a><span data-ttu-id="f2094-121">手順 1: 標準の並べ替え可能な GridView の作成</span><span class="sxs-lookup"><span data-stu-id="f2094-121">Step 1: Creating a Standard, Sortable GridView</span></span>

<span data-ttu-id="f2094-122">拡張並べ替えインターフェイスを提供するように GridView を拡張する方法については、まず、製品を一覧表示する、標準の並べ替え可能な GridView を作成してみましょう。</span><span class="sxs-lookup"><span data-stu-id="f2094-122">Before we explore how to augment the GridView to provide the enhanced sorting interface, let s first create a standard, sortable GridView that lists the products.</span></span> <span data-ttu-id="f2094-123">まず、`PagingAndSorting` フォルダーの [`CustomSortingUI.aspx`] ページを開きます。</span><span class="sxs-lookup"><span data-stu-id="f2094-123">Start by opening the `CustomSortingUI.aspx` page in the `PagingAndSorting` folder.</span></span> <span data-ttu-id="f2094-124">GridView をページに追加し、その `ID` プロパティを `ProductList`に設定して、新しい ObjectDataSource にバインドします。</span><span class="sxs-lookup"><span data-stu-id="f2094-124">Add a GridView to the page, set its `ID` property to `ProductList`, and bind it to a new ObjectDataSource.</span></span> <span data-ttu-id="f2094-125">`ProductsBLL` クラス s `GetProducts()` メソッドを使用してレコードを選択するように ObjectDataSource を構成します。</span><span class="sxs-lookup"><span data-stu-id="f2094-125">Configure the ObjectDataSource to use the `ProductsBLL` class s `GetProducts()` method for selecting records.</span></span>

<span data-ttu-id="f2094-126">次に、`ProductName`、`CategoryName`、`SupplierName`、および `UnitPrice` BoundFields と、廃止された CheckBoxField のみが含まれるように、GridView を構成します。</span><span class="sxs-lookup"><span data-stu-id="f2094-126">Next, configure the GridView such that it only contains the `ProductName`, `CategoryName`, `SupplierName`, and `UnitPrice` BoundFields and the Discontinued CheckBoxField.</span></span> <span data-ttu-id="f2094-127">最後に、gridview のスマートタグの [並べ替えを有効にする] チェックボックスをオンにして、並べ替えをサポートするように GridView を構成します (または、`AllowSorting` プロパティを `true`に設定します)。</span><span class="sxs-lookup"><span data-stu-id="f2094-127">Finally, configure the GridView to support sorting by checking the Enable Sorting checkbox in the GridView s smart tag (or by setting its `AllowSorting` property to `true`).</span></span> <span data-ttu-id="f2094-128">これらを [`CustomSortingUI.aspx`] ページに追加すると、宣言型のマークアップは次のようになります。</span><span class="sxs-lookup"><span data-stu-id="f2094-128">After making these additions to the `CustomSortingUI.aspx` page, the declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](creating-a-customized-sorting-user-interface-cs/samples/sample1.aspx)]

<span data-ttu-id="f2094-129">ブラウザーでこの時点までの進行状況を確認してください。</span><span class="sxs-lookup"><span data-stu-id="f2094-129">Take a moment to view our progress thus far in a browser.</span></span> <span data-ttu-id="f2094-130">図2は、データがアルファベット順にカテゴリ別に並べ替えられている場合の、並べ替え可能な GridView を示しています。</span><span class="sxs-lookup"><span data-stu-id="f2094-130">Figure 2 shows the sortable GridView when its data is sorted by category in alphabetical order.</span></span>

<span data-ttu-id="f2094-131">[並べ替え可能な GridView のデータがカテゴリ別に並べ替えら ![](creating-a-customized-sorting-user-interface-cs/_static/image5.png)](creating-a-customized-sorting-user-interface-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f2094-131">[![The Sortable GridView s Data is Ordered by Category](creating-a-customized-sorting-user-interface-cs/_static/image5.png)](creating-a-customized-sorting-user-interface-cs/_static/image4.png)</span></span>

<span data-ttu-id="f2094-132">**図 2**: 並べ替え可能な GridView のデータがカテゴリ別に並べ替えられている ([クリックすると、フルサイズの画像が表示](creating-a-customized-sorting-user-interface-cs/_static/image6.png)されます)</span><span class="sxs-lookup"><span data-stu-id="f2094-132">**Figure 2**: The Sortable GridView s Data is Ordered by Category ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image6.png))</span></span>

## <a name="step-2-exploring-techniques-for-adding-the-separator-rows"></a><span data-ttu-id="f2094-133">手順 2: 区切り行を追加するための手法を調べる</span><span class="sxs-lookup"><span data-stu-id="f2094-133">Step 2: Exploring Techniques for Adding the Separator Rows</span></span>

<span data-ttu-id="f2094-134">汎用の並べ替え可能な GridView を完了すると、すべての一意の並べ替えられたグループの前に、GridView の区切り行を追加できるようになります。</span><span class="sxs-lookup"><span data-stu-id="f2094-134">With the generic, sortable GridView complete, all that remains is to be able to add the separator rows in the GridView before each unique sorted group.</span></span> <span data-ttu-id="f2094-135">しかし、このような行を GridView に挿入するにはどうすればよいでしょうか。</span><span class="sxs-lookup"><span data-stu-id="f2094-135">But how can such rows be injected into the GridView?</span></span> <span data-ttu-id="f2094-136">基本的に、GridView の行を反復処理し、並べ替えられた列の値の間の相違点を判断して、適切な区切り行を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-136">Essentially, we need to iterate through the GridView s rows, determine where the differences occur between the values in the sorted column, and then add the appropriate separator row.</span></span> <span data-ttu-id="f2094-137">この問題について考えてみると、ソリューションが GridView s `RowDataBound` イベントハンドラーのどこかにあることが自然であるように見えます。</span><span class="sxs-lookup"><span data-stu-id="f2094-137">When thinking about this problem, it seems natural that the solution lies somewhere in the GridView s `RowDataBound` event handler.</span></span> <span data-ttu-id="f2094-138">「[データに基づくカスタム書式](../custom-formatting/custom-formatting-based-upon-data-cs.md)設定」のチュートリアルで説明したように、このイベントハンドラーは、行のデータに基づいて行レベルの書式設定を適用するときによく使用されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-138">As we discussed in the [Custom Formatting Based Upon Data](../custom-formatting/custom-formatting-based-upon-data-cs.md) tutorial, this event handler is commonly used when applying row-level formatting based on the row s data.</span></span> <span data-ttu-id="f2094-139">ただし、このイベントハンドラーからプログラムを使用して行を GridView に追加することはできないので、ここでは `RowDataBound` イベントハンドラーはソリューションではありません。</span><span class="sxs-lookup"><span data-stu-id="f2094-139">However, the `RowDataBound` event handler is not the solution here, as rows cannot be added to the GridView programmatically from this event handler.</span></span> <span data-ttu-id="f2094-140">実際には、GridView の `Rows` コレクションは読み取り専用です。</span><span class="sxs-lookup"><span data-stu-id="f2094-140">The GridView s `Rows` collection, in fact, is read-only.</span></span>

<span data-ttu-id="f2094-141">GridView に行を追加するには、次の3つの選択肢があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-141">To add additional rows to the GridView we have three choices:</span></span>

- <span data-ttu-id="f2094-142">これらのメタデータ区切り行を、GridView にバインドされている実際のデータに追加します。</span><span class="sxs-lookup"><span data-stu-id="f2094-142">Add these metadata separator rows to the actual data that is bound to the GridView</span></span>
- <span data-ttu-id="f2094-143">GridView がデータにバインドされたら、追加の `TableRow` インスタンスを GridView s コントロールコレクションに追加します。</span><span class="sxs-lookup"><span data-stu-id="f2094-143">After the GridView has been bound to the data, add additional `TableRow` instances to the GridView s control collection</span></span>
- <span data-ttu-id="f2094-144">GridView コントロールを拡張するカスタムサーバーコントロールを作成し、GridView の構造を構築するためのメソッドをオーバーライドします。</span><span class="sxs-lookup"><span data-stu-id="f2094-144">Create a custom server control that extends the GridView control and overrides those methods responsible for constructing the GridView s structure</span></span>

<span data-ttu-id="f2094-145">多くの web ページまたは複数の web サイトでこの機能が必要な場合は、カスタムサーバーコントロールを作成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f2094-145">Creating a custom server control would be the best approach if this functionality was needed on many web pages or across several websites.</span></span> <span data-ttu-id="f2094-146">ただし、かなりのコードが必要になり、GridView の内部動作の深さを徹底的に調査する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-146">However, it would entail quite a bit of code and a thorough exploration into the depths of the GridView s internal workings.</span></span> <span data-ttu-id="f2094-147">このため、このチュートリアルではこのオプションについては検討しません。</span><span class="sxs-lookup"><span data-stu-id="f2094-147">Therefore, we'll not consider that option for this tutorial.</span></span>

<span data-ttu-id="f2094-148">その他の2つのオプションでは、GridView にバインドされている実際のデータに区切り行を追加し、バインドされた後に GridView のコントロールコレクションを操作して、問題を別の方法で攻撃し、議論を行います。</span><span class="sxs-lookup"><span data-stu-id="f2094-148">The other two options adding separator rows to the actual data being bound to the GridView and manipulating the GridView s control collection after its been bound - attack the problem differently and merit a discussion.</span></span>

## <a name="adding-rows-to-the-data-bound-to-the-gridview"></a><span data-ttu-id="f2094-149">GridView にバインドされているデータに行を追加する</span><span class="sxs-lookup"><span data-stu-id="f2094-149">Adding Rows to the Data Bound to the GridView</span></span>

<span data-ttu-id="f2094-150">GridView がデータソースにバインドされると、データソースによって返されるレコードごとに `GridViewRow` が作成されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-150">When the GridView is bound to a data source, it creates a `GridViewRow` for each record returned by the data source.</span></span> <span data-ttu-id="f2094-151">そのため、GridView にバインドする前に区切り記号レコードをデータソースに追加することによって、必要な区切り記号を挿入できます。</span><span class="sxs-lookup"><span data-stu-id="f2094-151">Therefore, we can inject the needed separator rows by adding separator records to the data source before binding it to the GridView.</span></span> <span data-ttu-id="f2094-152">図3は、この概念を示しています。</span><span class="sxs-lookup"><span data-stu-id="f2094-152">Figure 3 illustrates this concept.</span></span>

![1つの手法では、データソースに区切り行を追加します。](creating-a-customized-sorting-user-interface-cs/_static/image7.png)

<span data-ttu-id="f2094-154">**図 3**: データソースに区切り行を追加する方法の1つ</span><span class="sxs-lookup"><span data-stu-id="f2094-154">**Figure 3**: One Technique Involves Adding Separator Rows to the Data Source</span></span>

<span data-ttu-id="f2094-155">区切り記号レコードという用語は、特別な区切り記号がないため、引用符で使用します。代わりに、データソース内の特定のレコードが通常のデータ行ではなく区切り記号として機能することを、何らかのフラグを付ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-155">I use the term separator records in quotes because there is no special separator record; rather, we must somehow flag that a particular record in the data source serves as a separator rather than a normal data row.</span></span> <span data-ttu-id="f2094-156">この例では、`ProductRows`で構成されている GridView に `ProductsDataTable` インスタンスをバインドします。</span><span class="sxs-lookup"><span data-stu-id="f2094-156">For our examples, we re binding a `ProductsDataTable` instance to the GridView, which is composed of `ProductRows`.</span></span> <span data-ttu-id="f2094-157">`CategoryID` プロパティを `-1` に設定して、レコードを区切り行としてフラグを設定することがあります (このような値は通常は存在できません)。</span><span class="sxs-lookup"><span data-stu-id="f2094-157">We might flag a record as a separator row by setting its `CategoryID` property to `-1` (since such a value couldn't exist normally).</span></span>

<span data-ttu-id="f2094-158">この手法を利用するには、次の手順を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-158">To utilize this technique we d need to perform the following steps:</span></span>

1. <span data-ttu-id="f2094-159">GridView にバインドするデータをプログラムで取得する (`ProductsDataTable` インスタンス)</span><span class="sxs-lookup"><span data-stu-id="f2094-159">Programmatically retrieve the data to bind to the GridView (a `ProductsDataTable` instance)</span></span>
2. <span data-ttu-id="f2094-160">GridView の `SortExpression` と `SortDirection` のプロパティに基づいてデータを並べ替えます。</span><span class="sxs-lookup"><span data-stu-id="f2094-160">Sort the data based on the GridView s `SortExpression` and `SortDirection` properties</span></span>
3. <span data-ttu-id="f2094-161">`ProductsDataTable`内の `ProductsRows` を反復処理して、並べ替えられた列の相違点を探します。</span><span class="sxs-lookup"><span data-stu-id="f2094-161">Iterate through the `ProductsRows` in the `ProductsDataTable`, looking for where the differences in the sorted column lie</span></span>
4. <span data-ttu-id="f2094-162">各グループの境界で、`ProductsRow` インスタンスの区切り記号レコードを DataTable に挿入します。これには、`CategoryID` が `-1` に設定されているか (または、レコードを区切り記号レコードとしてマークするために決定された任意の指定) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="f2094-162">At each group boundary, inject a separator record `ProductsRow` instance into the DataTable, one that has it s `CategoryID` set to `-1` (or whatever designation was decided upon to mark a record as a separator record )</span></span>
5. <span data-ttu-id="f2094-163">区切り行を挿入した後、プログラムによってデータを GridView にバインドします。</span><span class="sxs-lookup"><span data-stu-id="f2094-163">After injecting the separator rows, programmatically bind the data to the GridView</span></span>

<span data-ttu-id="f2094-164">これらの5つの手順に加えて、GridView s `RowDataBound` イベントのイベントハンドラーも提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-164">In addition to these five steps, we d also need to provide an event handler for the GridView s `RowDataBound` event.</span></span> <span data-ttu-id="f2094-165">ここでは、各 `DataRow` をチェックし、`CategoryID` 設定が `-1`れている区切り行であるかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="f2094-165">Here, we d check each `DataRow` and determine if it was a separator row, one whose `CategoryID` setting was `-1`.</span></span> <span data-ttu-id="f2094-166">その場合は、その書式設定や、セルに表示されるテキストを調整することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f2094-166">If so, we d probably want to adjust its formatting or the text displayed in the cell(s).</span></span>

<span data-ttu-id="f2094-167">並べ替えグループの境界を挿入するためにこの手法を使用する場合は、前に説明した以上の作業が必要になります。これは、GridView の `Sorting` イベントのイベントハンドラーを提供し、`SortExpression` と `SortDirection` の値を追跡する必要があるためです。</span><span class="sxs-lookup"><span data-stu-id="f2094-167">Using this technique for injecting the sorting group boundaries requires a bit more work than outlined above, as you need to also provide an event handler for the GridView s `Sorting` event and keep track of the `SortExpression` and `SortDirection` values.</span></span>

## <a name="manipulating-the-gridview-s-control-collection-after-it-s-been-databound"></a><span data-ttu-id="f2094-168">データバインドされた後の GridView s コントロールコレクションの操作</span><span class="sxs-lookup"><span data-stu-id="f2094-168">Manipulating the GridView s Control Collection After It s Been Databound</span></span>

<span data-ttu-id="f2094-169">GridView にバインドする前にデータをメッセージングするのではなく、データが GridView にバインドされ*た後*に区切り行を追加できます。</span><span class="sxs-lookup"><span data-stu-id="f2094-169">Rather than messaging the data before binding it to the GridView, we can add the separator rows *after* the data has been bound to the GridView.</span></span> <span data-ttu-id="f2094-170">データバインディングのプロセスは、GridView のコントロール階層を構築します。これは実際には、単に行のコレクションで構成される `Table` インスタンスであり、それぞれがセルのコレクションで構成されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-170">The process of data binding builds up the GridView s control hierarchy, which in reality is simply a `Table` instance composed of a collection of rows, each of which is composed of a collection of cells.</span></span> <span data-ttu-id="f2094-171">具体的には、GridView のコントロールコレクションには、ルートの `Table` オブジェクト、GridView にバインドされている `DataSource` 内の各レコードの `GridViewRow` (`TableRow` クラスから派生した)、および `TableCell` 内の各データフィールドの各 `GridViewRow` インスタンス内の `DataSource`オブジェクトが含まれています。</span><span class="sxs-lookup"><span data-stu-id="f2094-171">Specifically, the GridView s control collection contains a `Table` object at its root, a `GridViewRow` (which is derived from the `TableRow` class) for each record in the `DataSource` bound to the GridView, and a `TableCell` object in each `GridViewRow` instance for each data field in the `DataSource`.</span></span>

<span data-ttu-id="f2094-172">各並べ替えグループの間に区切り記号を追加するには、作成されたコントロール階層を直接操作します。</span><span class="sxs-lookup"><span data-stu-id="f2094-172">To add separator rows between each sorting group, we can directly manipulate this control hierarchy once it has been created.</span></span> <span data-ttu-id="f2094-173">ページがレンダリングされる時点までに、GridView のコントロール階層が最後に作成されたことを確信できます。</span><span class="sxs-lookup"><span data-stu-id="f2094-173">We can be confident that the GridView s control hierarchy has been created for the last time by the time the page is being rendered.</span></span> <span data-ttu-id="f2094-174">したがって、この方法は `Page` クラス s `Render` メソッドよりも優先されます。その時点で、必要な区切り行を含むように GridView の最後のコントロール階層が更新されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-174">Therefore, this approach overrides the `Page` class s `Render` method, at which point the GridView s final control hierarchy is updated to include the needed separator rows.</span></span> <span data-ttu-id="f2094-175">図4に、このプロセスを示します。</span><span class="sxs-lookup"><span data-stu-id="f2094-175">Figure 4 illustrates this process.</span></span>

<span data-ttu-id="f2094-176">[別の手法を ![して、GridView のコントロール階層を操作します。](creating-a-customized-sorting-user-interface-cs/_static/image9.png)](creating-a-customized-sorting-user-interface-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="f2094-176">[![An Alternate Technique Manipulates the GridView s Control Hierarchy](creating-a-customized-sorting-user-interface-cs/_static/image9.png)](creating-a-customized-sorting-user-interface-cs/_static/image8.png)</span></span>

<span data-ttu-id="f2094-177">**図 4**: 別の方法で GridView のコントロール階層を操作する ([クリックすると、フルサイズのイメージが表示](creating-a-customized-sorting-user-interface-cs/_static/image10.png)されます)</span><span class="sxs-lookup"><span data-stu-id="f2094-177">**Figure 4**: An Alternate Technique Manipulates the GridView s Control Hierarchy ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image10.png))</span></span>

<span data-ttu-id="f2094-178">このチュートリアルでは、この後者の方法を使用して、ユーザーエクスペリエンスの並べ替えをカスタマイズします。</span><span class="sxs-lookup"><span data-stu-id="f2094-178">For this tutorial, we'll use this latter approach to customize the sorting user experience.</span></span>

> [!NOTE]
> <span data-ttu-id="f2094-179">このチュートリアルで説明するコードは、 [Teemu Keiski](http://aspadvice.com/blogs/joteke/default.aspx) s ブログエントリに記載されている例に基づいており、 [GridView の並べ替えグループ化を使用してビットを再生](http://aspadvice.com/blogs/joteke/archive/2006/02/11/15130.aspx)しています。</span><span class="sxs-lookup"><span data-stu-id="f2094-179">The code I m presenting in this tutorial is based on the example provided in [Teemu Keiski](http://aspadvice.com/blogs/joteke/default.aspx) s blog entry, [Playing a Bit with GridView Sort Grouping](http://aspadvice.com/blogs/joteke/archive/2006/02/11/15130.aspx).</span></span>

## <a name="step-3-adding-the-separator-rows-to-the-gridview-s-control-hierarchy"></a><span data-ttu-id="f2094-180">手順 3: GridView のコントロール階層に区切り行を追加する</span><span class="sxs-lookup"><span data-stu-id="f2094-180">Step 3: Adding the Separator Rows to the GridView s Control Hierarchy</span></span>

<span data-ttu-id="f2094-181">GridView のコントロール階層が作成され、最後にそのページにアクセスするときに作成された後に、区切り行を追加するだけなので、ページライフサイクルの最後にこの追加を実行しますが、実際の GridView co) 階層が HTML にレンダリングされました。</span><span class="sxs-lookup"><span data-stu-id="f2094-181">Since we only want to add the separator rows to the GridView s control hierarchy after its control hierarchy has been created and created for the last time on that page visit, we want to perform this addition at the end of the page lifecycle, but before the actual GridView control hierarchy has been rendered into HTML.</span></span> <span data-ttu-id="f2094-182">これを実現できる最新のポイントは、`Page` クラス s `Render` イベントです。このイベントは、次のメソッドシグネチャを使用して、分離コードクラスでオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="f2094-182">The latest possible point at which we can accomplish this is the `Page` class s `Render` event, which we can override in our code-behind class using the following method signature:</span></span>

[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample2.cs)]

<span data-ttu-id="f2094-183">`Page` クラス s original `Render` メソッドが呼び出されると `base.Render(writer)` ページ内の各コントロールがレンダリングされ、コントロール階層に基づいてマークアップが生成されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-183">When the `Page` class s original `Render` method is invoked `base.Render(writer)` each of the controls in the page will be rendered, generating the markup based on their control hierarchy.</span></span> <span data-ttu-id="f2094-184">したがって、ページが表示されるように `base.Render(writer)`を呼び出す必要があります。また、`base.Render(writer)`を呼び出す前に GridView の s コントロール階層を操作して、表示される前に区切り行が GridView s コントロール階層に追加されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-184">Therefore it is imperative that we both call `base.Render(writer)`, so that the page is rendered, and that we manipulate the GridView s control hierarchy prior to calling `base.Render(writer)`, so that the separator rows have been added to the GridView s control hierarchy before it s been rendered.</span></span>

<span data-ttu-id="f2094-185">並べ替えグループヘッダーを挿入するには、まず、ユーザーがデータの並べ替えを要求したことを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-185">To inject the sort group headers we first need to ensure that the user has requested that the data be sorted.</span></span> <span data-ttu-id="f2094-186">既定では、GridView のコンテンツは並べ替えられないため、グループの並べ替えヘッダーを入力する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="f2094-186">By default, the GridView s contents are not sorted, and therefore we don t need to enter any group sorting headers.</span></span>

> [!NOTE]
> <span data-ttu-id="f2094-187">ページが最初に読み込まれるときに、GridView を特定の列で並べ替えるには、最初のページにアクセスしたときに GridView s `Sort` メソッドを呼び出します (以降のポストバックでは使用しません)。</span><span class="sxs-lookup"><span data-stu-id="f2094-187">If you want the GridView to be sorted by a particular column when the page is first loaded, call the GridView s `Sort` method on the first page visit (but not on subsequent postbacks).</span></span> <span data-ttu-id="f2094-188">これを実現するには、`if (!Page.IsPostBack)` 条件に含まれる `Page_Load` イベントハンドラーにこの呼び出しを追加します。</span><span class="sxs-lookup"><span data-stu-id="f2094-188">To accomplish this, add this call in the `Page_Load` event handler within an `if (!Page.IsPostBack)` conditional.</span></span> <span data-ttu-id="f2094-189">`Sort` 方法の詳細については、「[レポートデータのページングと並べ替え](paging-and-sorting-report-data-cs.md)」チュートリアルの情報を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f2094-189">Refer back to the [Paging and Sorting Report Data](paging-and-sorting-report-data-cs.md) tutorial information for more on the `Sort` method.</span></span>

<span data-ttu-id="f2094-190">データが並べ替えられていることを前提として、次のタスクでは、データの並べ替えに使用された列を特定し、その列の値の相違点を検索する行をスキャンします。</span><span class="sxs-lookup"><span data-stu-id="f2094-190">Assuming that the data has been sorted, our next task is to determine what column the data was sorted by and then to scan the rows looking for differences in that column s values.</span></span> <span data-ttu-id="f2094-191">次のコードでは、データが並べ替えられていることを確認し、データの並べ替えに使用されている列を見つけます。</span><span class="sxs-lookup"><span data-stu-id="f2094-191">The following code ensures that the data has been sorted and finds the column by which the data has been sorted:</span></span>

[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample3.cs)]

<span data-ttu-id="f2094-192">GridView がまだ並べ替えられていない場合は、GridView の `SortExpression` プロパティが設定されていません。</span><span class="sxs-lookup"><span data-stu-id="f2094-192">If the GridView has yet to be sorted, the GridView s `SortExpression` property will not have been set.</span></span> <span data-ttu-id="f2094-193">このため、このプロパティに値がある場合にのみ、区切り行を追加します。</span><span class="sxs-lookup"><span data-stu-id="f2094-193">Therefore, we only want to add the separator rows if this property has some value.</span></span> <span data-ttu-id="f2094-194">その場合は、次に、データの並べ替えに使用された列のインデックスを決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-194">If it does, we next need to determine the index of the column by which the data was sorted.</span></span> <span data-ttu-id="f2094-195">これは、GridView s `Columns` コレクションをループ処理し、`SortExpression` プロパティが GridView s `SortExpression` プロパティと等しい列を検索することで実現されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-195">This is accomplished by looping through the GridView s `Columns` collection, searching for the column whose `SortExpression` property equals the GridView s `SortExpression` property.</span></span> <span data-ttu-id="f2094-196">列 s インデックスに加えて、区切り行を表示するときに使用される `HeaderText` プロパティも取得します。</span><span class="sxs-lookup"><span data-stu-id="f2094-196">In addition to the column s index, we also grab the `HeaderText` property, which is used when displaying the separator rows.</span></span>

<span data-ttu-id="f2094-197">データの並べ替えに使用する列のインデックスを使用して、最後の手順として、GridView の行を列挙します。</span><span class="sxs-lookup"><span data-stu-id="f2094-197">With the index of the column by which the data is sorted, the final step is to enumerate the rows of the GridView.</span></span> <span data-ttu-id="f2094-198">行ごとに、並べ替えられた列の値が前の行の並べ替えられた列の値と異なるかどうかを判断する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-198">For each row we need to determine whether the sorted column s value differs from the previous row s sorted column s value.</span></span> <span data-ttu-id="f2094-199">その場合は、新しい `GridViewRow` インスタンスをコントロール階層に挿入する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-199">If so, we need to inject a new `GridViewRow` instance into the control hierarchy.</span></span> <span data-ttu-id="f2094-200">これは、次のコードを使用して行います。</span><span class="sxs-lookup"><span data-stu-id="f2094-200">This is accomplished with the following code:</span></span>

[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample4.cs)]

<span data-ttu-id="f2094-201">このコードは、GridView のコントロール階層のルートにある `Table` オブジェクトをプログラムによって参照し、`lastValue`という名前の文字列変数を作成することによって開始します。</span><span class="sxs-lookup"><span data-stu-id="f2094-201">This code starts by programmatically referencing the `Table` object found at the root of the GridView s control hierarchy and creating a string variable named `lastValue`.</span></span> <span data-ttu-id="f2094-202">`lastValue` は、現在の行の並べ替えられた列の値と前の行の値を比較するために使用します。</span><span class="sxs-lookup"><span data-stu-id="f2094-202">`lastValue` is used to compare the current row s sorted column value with the previous row s value.</span></span> <span data-ttu-id="f2094-203">次に、GridView s `Rows` コレクションが列挙され、行ごとに、並べ替えられた列の値が `currentValue` 変数に格納されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-203">Next, the GridView s `Rows` collection is enumerated and for each row the value of the sorted column is stored in the `currentValue` variable.</span></span>

> [!NOTE]
> <span data-ttu-id="f2094-204">特定の行の並べ替え済みの列の値を確認するには、セル s `Text` プロパティを使用します。</span><span class="sxs-lookup"><span data-stu-id="f2094-204">To determine the value of the particular row s sorted column I use the cell s `Text` property.</span></span> <span data-ttu-id="f2094-205">これは、BoundFields では適切に機能しますが、TemplateFields や CheckBoxFields などには適していません。</span><span class="sxs-lookup"><span data-stu-id="f2094-205">This works well for BoundFields, but will not work as desired for TemplateFields, CheckBoxFields, and so on.</span></span> <span data-ttu-id="f2094-206">ここでは、後で代替 GridView フィールドを考慮する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="f2094-206">We'll look at how to account for alternate GridView fields shortly.</span></span>

<span data-ttu-id="f2094-207">その後、`currentValue` と `lastValue` の変数が比較されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-207">The `currentValue` and `lastValue` variables are then compared.</span></span> <span data-ttu-id="f2094-208">異なる場合は、コントロール階層に新しい区切り行を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-208">If they differ we need to add a new separator row to the control hierarchy.</span></span> <span data-ttu-id="f2094-209">これを行うには、`Table` オブジェクト s `Rows` コレクション内の `GridViewRow` のインデックスを調べ、新しい `GridViewRow` と `TableCell` インスタンスを作成してから、`TableCell` と `GridViewRow` をコントロール階層に追加します。</span><span class="sxs-lookup"><span data-stu-id="f2094-209">This is accomplished by determining the index of the `GridViewRow` in the `Table` object s `Rows` collection, creating new `GridViewRow` and `TableCell` instances, and then adding the `TableCell` and `GridViewRow` to the control hierarchy.</span></span>

<span data-ttu-id="f2094-210">区切り行 s `TableCell` は、GridView の幅全体にまたがるように書式設定されており、`SortHeaderRowStyle` CSS クラスを使用して書式設定されています。また、並べ替えグループ名 (Category など) と group s 値 (飲料など) の両方が表示されるように `Text` プロパティを持っていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="f2094-210">Note that the separator row s lone `TableCell` is formatted such that it spans the entire width of the GridView, is formatted using the `SortHeaderRowStyle` CSS class, and has its `Text` property such that it shows both the sort group name (such as Category ) and the group s value (such as Beverages ).</span></span> <span data-ttu-id="f2094-211">最後に、`lastValue` が `currentValue`の値に更新されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-211">Finally, `lastValue` is updated to the value of `currentValue`.</span></span>

<span data-ttu-id="f2094-212">並べ替えグループヘッダー行の書式を設定するために使用される CSS クラス `SortHeaderRowStyle` `Styles.css` ファイルで指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-212">The CSS class used to format the sorting group header row `SortHeaderRowStyle` needs to be specified in the `Styles.css` file.</span></span> <span data-ttu-id="f2094-213">好きなスタイル設定を自由に使用できます。ここでは、次のものを使用しました。</span><span class="sxs-lookup"><span data-stu-id="f2094-213">Feel free to use whatever style settings appeal to you; I used the following:</span></span>

[!code-css[Main](creating-a-customized-sorting-user-interface-cs/samples/sample5.css)]

<span data-ttu-id="f2094-214">現在のコードでは、並べ替えインターフェイスは、任意の BoundField によって並べ替えを行うときに並べ替えグループヘッダーを追加します (図5を参照してください。これは、業者による並べ替え時のスクリーンショットを示しています)。</span><span class="sxs-lookup"><span data-stu-id="f2094-214">With the current code, the sorting interface adds sort group headers when sorting by any BoundField (see Figure 5, which shows a screenshot when sorting by supplier).</span></span> <span data-ttu-id="f2094-215">ただし、他のフィールドの種類 (CheckBoxField や TemplateField など) で並べ替える場合は、並べ替えグループのヘッダーが見つかりません (図6を参照)。</span><span class="sxs-lookup"><span data-stu-id="f2094-215">However, when sorting by any other field type (such as a CheckBoxField or TemplateField), the sort group headers are nowhere to be found (see Figure 6).</span></span>

<span data-ttu-id="f2094-216">[並べ替えインターフェイスに、BoundFields による並べ替え時の並べ替えグループヘッダーが含まれる ![](creating-a-customized-sorting-user-interface-cs/_static/image12.png)](creating-a-customized-sorting-user-interface-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="f2094-216">[![The Sorting Interface Includes Sort Group Headers When Sorting by BoundFields](creating-a-customized-sorting-user-interface-cs/_static/image12.png)](creating-a-customized-sorting-user-interface-cs/_static/image11.png)</span></span>

<span data-ttu-id="f2094-217">**図 5**: 並べ替えインターフェイスには、boundfields によって並べ替えを行うときの並べ替えグループヘッダーが含まれます ([クリックしてフルサイズのイメージを表示](creating-a-customized-sorting-user-interface-cs/_static/image13.png)します)</span><span class="sxs-lookup"><span data-stu-id="f2094-217">**Figure 5**: The Sorting Interface Includes Sort Group Headers When Sorting by BoundFields ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image13.png))</span></span>

<span data-ttu-id="f2094-218">[CheckBoxField の並べ替え時に並べ替えグループヘッダーがない ![](creating-a-customized-sorting-user-interface-cs/_static/image15.png)](creating-a-customized-sorting-user-interface-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="f2094-218">[![The Sort Group Headers are Missing When Sorting a CheckBoxField](creating-a-customized-sorting-user-interface-cs/_static/image15.png)](creating-a-customized-sorting-user-interface-cs/_static/image14.png)</span></span>

<span data-ttu-id="f2094-219">**図 6**: CheckBoxField の並べ替え時に並べ替えグループのヘッダーが表示されない ([クリックしてフルサイズの画像を表示する](creating-a-customized-sorting-user-interface-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="f2094-219">**Figure 6**: The Sort Group Headers are Missing When Sorting a CheckBoxField ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image16.png))</span></span>

<span data-ttu-id="f2094-220">CheckBoxField での並べ替え時に並べ替えグループヘッダーがない理由は、現在、コードでは `TableCell` s `Text` プロパティのみを使用して、行ごとに並べ替えられた列の値を決定しているためです。</span><span class="sxs-lookup"><span data-stu-id="f2094-220">The reason the sort group headers are missing when sorting by a CheckBoxField is because the code currently uses just the `TableCell` s `Text` property to determine the value of the sorted column for each row.</span></span> <span data-ttu-id="f2094-221">CheckBoxFields の場合、`TableCell` s `Text` プロパティは空の文字列です。代わりに、この値は、`TableCell` s `Controls` コレクション内に存在する CheckBox Web コントロールで使用できます。</span><span class="sxs-lookup"><span data-stu-id="f2094-221">For CheckBoxFields, the `TableCell` s `Text` property is an empty string; instead, the value is available through a CheckBox Web control that resides within the `TableCell` s `Controls` collection.</span></span>

<span data-ttu-id="f2094-222">BoundFields 以外のフィールド型を処理するには、`currentValue` 変数が割り当てられているコードを拡張して、`TableCell` s `Controls` コレクションにチェックボックスがあるかどうかを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2094-222">To handle field types other than BoundFields, we need to augment the code where the `currentValue` variable is assigned to check for the existence of a CheckBox in the `TableCell` s `Controls` collection.</span></span> <span data-ttu-id="f2094-223">`currentValue = gvr.Cells[sortColumnIndex].Text`を使用する代わりに、このコードを次のコードに置き換えます。</span><span class="sxs-lookup"><span data-stu-id="f2094-223">Instead of using `currentValue = gvr.Cells[sortColumnIndex].Text`, replace this code with the following:</span></span>

[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample6.cs)]

<span data-ttu-id="f2094-224">このコードは、現在の行に対して並べ替えられた列 `TableCell` を調べて、`Controls` コレクションにコントロールがあるかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="f2094-224">This code examines the sorted column `TableCell` for the current row to determine if there are any controls in the `Controls` collection.</span></span> <span data-ttu-id="f2094-225">が存在し、最初のコントロールがチェックボックスの場合は、CheckBox s `Checked` プロパティに応じて、`currentValue` 変数が Yes または No に設定されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-225">If there are, and the first control is a CheckBox, the `currentValue` variable is set to Yes or No, depending on the CheckBox s `Checked` property.</span></span> <span data-ttu-id="f2094-226">それ以外の場合、値は `TableCell` s `Text` プロパティから取得されます。</span><span class="sxs-lookup"><span data-stu-id="f2094-226">Otherwise, the value is taken from the `TableCell` s `Text` property.</span></span> <span data-ttu-id="f2094-227">このロジックをレプリケートして、GridView に存在する可能性のある TemplateFields の並べ替えを処理することができます。</span><span class="sxs-lookup"><span data-stu-id="f2094-227">This logic can be replicated to handle sorting for any TemplateFields that may exist in the GridView.</span></span>

<span data-ttu-id="f2094-228">上記のコードを追加すると、廃止された CheckBoxField (図7を参照) によって並べ替えを行うときに、並べ替えグループのヘッダーが表示されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="f2094-228">With the above code addition, the sort group headers are now present when sorting by the Discontinued CheckBoxField (see Figure 7).</span></span>

<span data-ttu-id="f2094-229">[CheckBoxField の並べ替え時に並べ替えグループのヘッダーが表示されるように ![](creating-a-customized-sorting-user-interface-cs/_static/image18.png)](creating-a-customized-sorting-user-interface-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="f2094-229">[![The Sort Group Headers are Now Present When Sorting a CheckBoxField](creating-a-customized-sorting-user-interface-cs/_static/image18.png)](creating-a-customized-sorting-user-interface-cs/_static/image17.png)</span></span>

<span data-ttu-id="f2094-230">**図 7**: CheckBoxField の並べ替え時に並べ替えグループのヘッダーが表示される ([クリックしてフルサイズのイメージを表示する](creating-a-customized-sorting-user-interface-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="f2094-230">**Figure 7**: The Sort Group Headers are Now Present When Sorting a CheckBoxField ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image19.png))</span></span>

> [!NOTE]
> <span data-ttu-id="f2094-231">`NULL` データベースの値が `CategoryID`、`SupplierID`、または `UnitPrice` フィールドに含まれている製品がある場合、既定では、これらの値は GridView で空の文字列として表示されます。つまり、`NULL` 値を持つ製品の区切り行 s テキストは Category として読み取られます (つまり、category: 飲料ではなく、category の後に名前</span><span class="sxs-lookup"><span data-stu-id="f2094-231">If you have products with `NULL` database values for the `CategoryID`, `SupplierID`, or `UnitPrice` fields, those values will appear as empty strings in the GridView by default, meaning the separator row s text for those products with `NULL` values will read like Category: (that is, there s no name after Category: like with Category: Beverages ).</span></span> <span data-ttu-id="f2094-232">ここに表示される値を使用する場合は、BoundFields [`NullDisplayText` プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.nulldisplaytext.aspx)に表示するテキストを設定するか、`currentValue` を separator 行 s `Text` プロパティに割り当てるときに、Render メソッドに条件付きステートメントを追加できます。</span><span class="sxs-lookup"><span data-stu-id="f2094-232">If you want a value displayed here you can either set the BoundFields [`NullDisplayText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.nulldisplaytext.aspx) to the text you want displayed or you can add a conditional statement in the Render method when assigning the `currentValue` to the separator row s `Text` property.</span></span>

## <a name="summary"></a><span data-ttu-id="f2094-233">要約</span><span class="sxs-lookup"><span data-stu-id="f2094-233">Summary</span></span>

<span data-ttu-id="f2094-234">GridView には、並べ替えインターフェイスをカスタマイズするための多くの組み込みオプションは含まれていません。</span><span class="sxs-lookup"><span data-stu-id="f2094-234">The GridView does not include many built-in options for customizing the sorting interface.</span></span> <span data-ttu-id="f2094-235">ただし、低レベルのコードでは、GridView のコントロール階層を微調整して、よりカスタマイズされたインターフェイスを作成することができます。</span><span class="sxs-lookup"><span data-stu-id="f2094-235">However, with a bit of low-level code, it s possible to tweak the GridView s control hierarchy to create a more customized interface.</span></span> <span data-ttu-id="f2094-236">このチュートリアルでは、並べ替え可能な GridView の並べ替えグループの区切り行を追加する方法を説明しました。これにより、個別のグループとそれらのグループの境界を簡単に識別できます。</span><span class="sxs-lookup"><span data-stu-id="f2094-236">In this tutorial we saw how to add a sort group separator row for a sortable GridView, which more easily identifies the distinct groups and those groups boundaries.</span></span> <span data-ttu-id="f2094-237">カスタマイズされた並べ替えインターフェイスのその他の例については、 [Scott Guthrie](https://weblogs.asp.net/scottgu/) s[の ASP.NET 2.0 GridView の並べ替えのヒントと秘訣](https://weblogs.asp.net/scottgu/archive/2006/02/11/437995.aspx)に関するブログ記事をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="f2094-237">For additional examples of customized sorting interfaces, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/) s [A Few ASP.NET 2.0 GridView Sorting Tips and Tricks](https://weblogs.asp.net/scottgu/archive/2006/02/11/437995.aspx) blog entry.</span></span>

<span data-ttu-id="f2094-238">プログラミングを楽しんでください。</span><span class="sxs-lookup"><span data-stu-id="f2094-238">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f2094-239">作成者について</span><span class="sxs-lookup"><span data-stu-id="f2094-239">About the Author</span></span>

<span data-ttu-id="f2094-240">1998以来、 [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)は 7 asp/創設者 of [4GuysFromRolla.com](http://www.4guysfromrolla.com)の執筆者であり、Microsoft Web テクノロジを使用しています。</span><span class="sxs-lookup"><span data-stu-id="f2094-240">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f2094-241">Scott は、独立したコンサルタント、トレーナー、およびライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="f2094-241">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f2094-242">彼の最新の書籍は[ *、ASP.NET 2.0 を24時間以内に教え*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ています。</span><span class="sxs-lookup"><span data-stu-id="f2094-242">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f2094-243">mitchell@4GuysFromRolla.comでアクセスでき[ます。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f2094-243">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f2094-244">または彼のブログを参照してください。これは[http://ScottOnWriting.NET](http://ScottOnWriting.NET)にあります。</span><span class="sxs-lookup"><span data-stu-id="f2094-244">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f2094-245">[前へ](sorting-custom-paged-data-cs.md)
> [次へ](paging-and-sorting-report-data-vb.md)</span><span class="sxs-lookup"><span data-stu-id="f2094-245">[Previous](sorting-custom-paged-data-cs.md)
[Next](paging-and-sorting-report-data-vb.md)</span></span>
