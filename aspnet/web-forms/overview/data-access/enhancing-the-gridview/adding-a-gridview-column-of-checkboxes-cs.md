---
uid: web-forms/overview/data-access/enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs
title: Checkbox (C#) | の GridView 列を追加するMicrosoft Docs
author: rick-anderson
description: このチュートリアルでは、GridView コントロールにチェックボックスの列を追加して、ユーザーに対して、複数の行を選択してわかりやすく表示する方法について説明します。
ms.author: riande
ms.date: 03/06/2007
ms.assetid: f63a9443-2db0-4f80-8246-840d3e86c2a3
msc.legacyurl: /web-forms/overview/data-access/enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs
msc.type: authoredcontent
ms.openlocfilehash: b9d1ed50e8d88202c3286b4cd0e9ebf111dfbe21
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78478270"
---
# <a name="adding-a-gridview-column-of-checkboxes-c"></a><span data-ttu-id="fca51-103">チェックボックスの GridView 列を追加する (C#)</span><span class="sxs-lookup"><span data-stu-id="fca51-103">Adding a GridView Column of Checkboxes (C#)</span></span>

<span data-ttu-id="fca51-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="fca51-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="fca51-105">[サンプルアプリのダウンロード](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_52_CS.exe)または[PDF のダウンロード](adding-a-gridview-column-of-checkboxes-cs/_static/datatutorial52cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="fca51-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_52_CS.exe) or [Download PDF](adding-a-gridview-column-of-checkboxes-cs/_static/datatutorial52cs1.pdf)</span></span>

> <span data-ttu-id="fca51-106">このチュートリアルでは、gridview コントロールにチェックボックスの列を追加して、ユーザーが GridView の複数の行を直感的に選択できるようにする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="fca51-106">This tutorial looks at how to add a column of check boxes to a GridView control to provide the user with an intuitive way of selecting multiple rows of the GridView.</span></span>

## <a name="introduction"></a><span data-ttu-id="fca51-107">はじめに</span><span class="sxs-lookup"><span data-stu-id="fca51-107">Introduction</span></span>

<span data-ttu-id="fca51-108">前のチュートリアルでは、特定のレコードを選択する目的で、オプションボタンの列を GridView に追加する方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="fca51-108">In the preceding tutorial we examined how to add a column of radio buttons to the GridView for the purpose of selecting a particular record.</span></span> <span data-ttu-id="fca51-109">オプションボタンの列は、ユーザーがグリッドから最大で1つの項目を選択することに制限されている場合に適したユーザーインターフェイスです。</span><span class="sxs-lookup"><span data-stu-id="fca51-109">A column of radio buttons is a suitable user interface when the user is limited to choosing at most one item from the grid.</span></span> <span data-ttu-id="fca51-110">ただし、ユーザーがグリッドから任意の数の項目を選択できるようにすることが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="fca51-110">At times, however, we may want to allow the user to pick an arbitrary number of items from the grid.</span></span> <span data-ttu-id="fca51-111">たとえば、Web ベースの電子メールクライアントでは、通常、メッセージの一覧とチェックボックスの列が表示されます。</span><span class="sxs-lookup"><span data-stu-id="fca51-111">Web-based email clients, for example, typically display the list of messages with a column of checkboxes.</span></span> <span data-ttu-id="fca51-112">ユーザーは任意の数のメッセージを選択して、他のフォルダーへのメールの移動や削除など、何らかの操作を実行できます。</span><span class="sxs-lookup"><span data-stu-id="fca51-112">The user can select an arbitrary number of messages and then perform some action, such as moving the emails to another folder or deleting them.</span></span>

<span data-ttu-id="fca51-113">このチュートリアルでは、チェックボックスの列を追加する方法と、ポストバック時にチェックされたチェックボックスを確認する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="fca51-113">In this tutorial we will see how to add a column of checkboxes and how to determine what checkboxes were checked on postback.</span></span> <span data-ttu-id="fca51-114">特に、web ベースの電子メールクライアントのユーザーインターフェイスを模倣した例を作成します。</span><span class="sxs-lookup"><span data-stu-id="fca51-114">In particular, we'll build an example that closely mimics the web-based email client user interface.</span></span> <span data-ttu-id="fca51-115">この例では、`Products` データベーステーブルに製品を一覧表示するページングされた GridView と、各行にチェックボックスがあります (図1を参照)。</span><span class="sxs-lookup"><span data-stu-id="fca51-115">Our example will include a paged GridView listing the products in the `Products` database table with a checkbox in each row (see Figure 1).</span></span> <span data-ttu-id="fca51-116">[選択した製品の削除] ボタンをクリックすると、選択した製品が削除されます。</span><span class="sxs-lookup"><span data-stu-id="fca51-116">A Delete Selected Products button, when clicked, will delete those products selected.</span></span>

<span data-ttu-id="fca51-117">[各製品行にチェックボックスが含まれて ![](adding-a-gridview-column-of-checkboxes-cs/_static/image1.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="fca51-117">[![Each Product Row Includes a Checkbox](adding-a-gridview-column-of-checkboxes-cs/_static/image1.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image1.png)</span></span>

<span data-ttu-id="fca51-118">**図 1**: 各製品行にチェックボックスが含まれている ([クリックすると、フルサイズの画像が表示](adding-a-gridview-column-of-checkboxes-cs/_static/image2.png)されます)</span><span class="sxs-lookup"><span data-stu-id="fca51-118">**Figure 1**: Each Product Row Includes a Checkbox ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image2.png))</span></span>

## <a name="step-1-adding-a-paged-gridview-that-lists-product-information"></a><span data-ttu-id="fca51-119">手順 1: 製品情報を一覧表示するページングされた GridView の追加</span><span class="sxs-lookup"><span data-stu-id="fca51-119">Step 1: Adding a Paged GridView that Lists Product Information</span></span>

<span data-ttu-id="fca51-120">チェックボックスの列を追加することを心配する前に、まず、ページングをサポートする GridView で製品を一覧表示する方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="fca51-120">Before we worry about adding a column of checkboxes, let s first focus on listing the products in a GridView that supports paging.</span></span> <span data-ttu-id="fca51-121">まず、`EnhancedGridView` フォルダーの [`CheckBoxField.aspx`] ページを開き、GridView をツールボックスからデザイナーにドラッグし、`ID` を [`Products`] に設定します。</span><span class="sxs-lookup"><span data-stu-id="fca51-121">Start by opening the `CheckBoxField.aspx` page in the `EnhancedGridView` folder and drag a GridView from the Toolbox onto the Designer, setting its `ID` to `Products`.</span></span> <span data-ttu-id="fca51-122">次に、GridView を `ProductsDataSource`という名前の新しい ObjectDataSource にバインドします。</span><span class="sxs-lookup"><span data-stu-id="fca51-122">Next, choose to bind the GridView to a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="fca51-123">`ProductsBLL` クラスを使用し、`GetProducts()` メソッドを呼び出してデータを返すように ObjectDataSource を構成します。</span><span class="sxs-lookup"><span data-stu-id="fca51-123">Configure the ObjectDataSource to use the `ProductsBLL` class, calling the `GetProducts()` method to return the data.</span></span> <span data-ttu-id="fca51-124">この GridView は読み取り専用であるため、[更新]、[挿入]、[削除] の各タブのドロップダウンリストを [(なし)] に設定します。</span><span class="sxs-lookup"><span data-stu-id="fca51-124">Since this GridView will be read-only, set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) .</span></span>

<span data-ttu-id="fca51-125">[![新しい ObjectDataSource Datasource を作成する](adding-a-gridview-column-of-checkboxes-cs/_static/image2.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="fca51-125">[![Create a New ObjectDataSource Named ProductsDataSource](adding-a-gridview-column-of-checkboxes-cs/_static/image2.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image3.png)</span></span>

<span data-ttu-id="fca51-126">**図 2**: `ProductsDataSource` という名前の新しい ObjectDataSource を作成[する (クリックすると、フルサイズの画像が表示](adding-a-gridview-column-of-checkboxes-cs/_static/image4.png)される)</span><span class="sxs-lookup"><span data-stu-id="fca51-126">**Figure 2**: Create a New ObjectDataSource Named `ProductsDataSource` ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image4.png))</span></span>

<span data-ttu-id="fca51-127">[GetProducts () メソッドを使用してデータを取得するように ObjectDataSource を構成 ![には](adding-a-gridview-column-of-checkboxes-cs/_static/image3.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="fca51-127">[![Configure the ObjectDataSource to Retrieve Data Using the GetProducts() Method](adding-a-gridview-column-of-checkboxes-cs/_static/image3.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image5.png)</span></span>

<span data-ttu-id="fca51-128">**図 3**: `GetProducts()` メソッドを使用してデータを取得するように ObjectDataSource を構成する ([クリックしてフルサイズのイメージを表示](adding-a-gridview-column-of-checkboxes-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="fca51-128">**Figure 3**: Configure the ObjectDataSource to Retrieve Data Using the `GetProducts()` Method ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image6.png))</span></span>

<span data-ttu-id="fca51-129">[[更新]、[挿入]、[削除] の各タブのドロップダウンリストを [(なし)] に設定 ![ます。](adding-a-gridview-column-of-checkboxes-cs/_static/image4.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="fca51-129">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None)](adding-a-gridview-column-of-checkboxes-cs/_static/image4.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image7.png)</span></span>

<span data-ttu-id="fca51-130">**図 4**: [更新]、[挿入]、[削除] の各タブのドロップダウンリストを (なし) に設定する ([クリックしてフルサイズのイメージを表示する](adding-a-gridview-column-of-checkboxes-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="fca51-130">**Figure 4**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None) ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image8.png))</span></span>

<span data-ttu-id="fca51-131">データソースの構成ウィザードを完了すると、Visual Studio によって、BoundColumns と、製品関連のデータフィールドの CheckBoxColumn が自動的に作成されます。</span><span class="sxs-lookup"><span data-stu-id="fca51-131">After completing the Configure Data Source wizard, Visual Studio will automatically create BoundColumns and a CheckBoxColumn for the product-related data fields.</span></span> <span data-ttu-id="fca51-132">前のチュートリアルで行ったように、`ProductName`、`CategoryName`、および `UnitPrice` BoundFields 以外のすべてを削除し、`HeaderText` のプロパティを製品、カテゴリ、および価格に変更します。</span><span class="sxs-lookup"><span data-stu-id="fca51-132">Like we did in the previous tutorial, remove all but the `ProductName`, `CategoryName`, and `UnitPrice` BoundFields, and change the `HeaderText` properties to Product, Category, and Price.</span></span> <span data-ttu-id="fca51-133">値が通貨として書式設定されるように、`UnitPrice` BoundField を構成します。</span><span class="sxs-lookup"><span data-stu-id="fca51-133">Configure the `UnitPrice` BoundField so that its value is formatted as a currency.</span></span> <span data-ttu-id="fca51-134">また、スマートタグの [ページングを有効にする] チェックボックスをオンにして、ページングをサポートするように GridView を構成します。</span><span class="sxs-lookup"><span data-stu-id="fca51-134">Also configure the GridView to support paging by checking the Enable Paging checkbox from the smart tag.</span></span>

<span data-ttu-id="fca51-135">選択した製品を削除するためのユーザーインターフェイスも追加します。</span><span class="sxs-lookup"><span data-stu-id="fca51-135">Let s also add the user interface for deleting the selected products.</span></span> <span data-ttu-id="fca51-136">GridView の下に Button Web コントロールを追加し、その `ID` を `DeleteSelectedProducts` に設定し、その `Text` プロパティを選択した製品を削除します。</span><span class="sxs-lookup"><span data-stu-id="fca51-136">Add a Button Web control beneath the GridView, setting its `ID` to `DeleteSelectedProducts` and its `Text` property to Delete Selected Products.</span></span> <span data-ttu-id="fca51-137">この例では、実際にデータベースから製品を削除するのではなく、削除された製品を示すメッセージを表示するだけです。</span><span class="sxs-lookup"><span data-stu-id="fca51-137">Rather than actually deleting products from the database, for this example we'll just display a message stating the products that would have been deleted.</span></span> <span data-ttu-id="fca51-138">これに対応するには、ボタンの下にラベル Web コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="fca51-138">To accommodate this, add a Label Web control beneath the Button.</span></span> <span data-ttu-id="fca51-139">ID を `DeleteResults`に設定し、`Text` プロパティをオフにして、その `Visible` および `EnableViewState` プロパティを `false`に設定します。</span><span class="sxs-lookup"><span data-stu-id="fca51-139">Set its ID to `DeleteResults`, clear out its `Text` property, and set its `Visible` and `EnableViewState` properties to `false`.</span></span>

<span data-ttu-id="fca51-140">これらの変更を行った後、GridView、ObjectDataSource、Button、および Label s の宣言マークアップは、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="fca51-140">After making these changes, the GridView, ObjectDataSource, Button, and Label s declarative markup should similar to the following:</span></span>

[!code-aspx[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample1.aspx)]

<span data-ttu-id="fca51-141">ブラウザーでページを表示します (図5を参照)。</span><span class="sxs-lookup"><span data-stu-id="fca51-141">Take a moment to view the page in a browser (see Figure 5).</span></span> <span data-ttu-id="fca51-142">この時点で、最初の10個の製品の名前、カテゴリ、価格が表示されます。</span><span class="sxs-lookup"><span data-stu-id="fca51-142">At this point you should see the name, category, and price of the first ten products.</span></span>

<span data-ttu-id="fca51-143">[最初の10個の製品の名前、カテゴリ、価格が表示され ![](adding-a-gridview-column-of-checkboxes-cs/_static/image5.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="fca51-143">[![The Name, Category, and Price of the First Ten Products are Listed](adding-a-gridview-column-of-checkboxes-cs/_static/image5.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image9.png)</span></span>

<span data-ttu-id="fca51-144">**図 5**: 最初の10個の製品の名前、カテゴリ、価格が表示されます ([クリックすると、フルサイズの画像が表示](adding-a-gridview-column-of-checkboxes-cs/_static/image10.png)されます)</span><span class="sxs-lookup"><span data-stu-id="fca51-144">**Figure 5**: The Name, Category, and Price of the First Ten Products are Listed ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image10.png))</span></span>

## <a name="step-2-adding-a-column-of-checkboxes"></a><span data-ttu-id="fca51-145">手順 2: チェックボックスの列の追加</span><span class="sxs-lookup"><span data-stu-id="fca51-145">Step 2: Adding a Column of Checkboxes</span></span>

<span data-ttu-id="fca51-146">ASP.NET 2.0 には CheckBoxField が含まれているため、GridView にチェックボックスの列を追加するために使用できると考えられるかもしれません。</span><span class="sxs-lookup"><span data-stu-id="fca51-146">Since ASP.NET 2.0 includes a CheckBoxField, one might think that it could be used to add a column of checkboxes to a GridView.</span></span> <span data-ttu-id="fca51-147">残念ながら、CheckBoxField はブール型のデータフィールドを使用するように設計されているため、そうではありません。</span><span class="sxs-lookup"><span data-stu-id="fca51-147">Unfortunately, that is not the case, as the CheckBoxField is designed to work with a Boolean data field.</span></span> <span data-ttu-id="fca51-148">つまり、CheckBoxField を使用するには、表示されているチェックボックスがオンになっているかどうかを判断する値を持つ基になるデータフィールドを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fca51-148">That is, in order to use the CheckBoxField we must specify the underlying data field whose value is consulted to determine whether the rendered checkbox is checked.</span></span> <span data-ttu-id="fca51-149">CheckBoxField を使用して、チェックボックスがオフの列だけを含めることはできません。</span><span class="sxs-lookup"><span data-stu-id="fca51-149">We cannot use the CheckBoxField to just include a column of unchecked checkboxes.</span></span>

<span data-ttu-id="fca51-150">代わりに、TemplateField を追加し、チェックボックス Web コントロールを `ItemTemplate`に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fca51-150">Instead, we must add a TemplateField and add a CheckBox Web control to its `ItemTemplate`.</span></span> <span data-ttu-id="fca51-151">`Products` GridView に TemplateField を追加し、最初 (左端) のフィールドに設定します。</span><span class="sxs-lookup"><span data-stu-id="fca51-151">Go ahead and add a TemplateField to the `Products` GridView and make it the first (far-left) field.</span></span> <span data-ttu-id="fca51-152">GridView s スマートタグから、[テンプレートの編集] リンクをクリックし、[ツールボックス] から [CheckBox] Web コントロールを `ItemTemplate`にドラッグします。</span><span class="sxs-lookup"><span data-stu-id="fca51-152">From the GridView s smart tag, click on the Edit Templates link and then drag a CheckBox Web control from the Toolbox into the `ItemTemplate`.</span></span> <span data-ttu-id="fca51-153">この CheckBox s `ID` プロパティを `ProductSelector`に設定します。</span><span class="sxs-lookup"><span data-stu-id="fca51-153">Set this CheckBox s `ID` property to `ProductSelector`.</span></span>

<span data-ttu-id="fca51-154">[TemplateField s ItemTemplate に ProductSelector という名前の CheckBox Web コントロールを追加 ![には](adding-a-gridview-column-of-checkboxes-cs/_static/image6.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="fca51-154">[![Add a CheckBox Web Control Named ProductSelector to the TemplateField s ItemTemplate](adding-a-gridview-column-of-checkboxes-cs/_static/image6.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image11.png)</span></span>

<span data-ttu-id="fca51-155">**図 6**: `ProductSelector` という名前の CheckBox Web コントロールを TemplateField s `ItemTemplate` に追加する ([クリックすると、フルサイズの画像が表示](adding-a-gridview-column-of-checkboxes-cs/_static/image12.png)されます)</span><span class="sxs-lookup"><span data-stu-id="fca51-155">**Figure 6**: Add a CheckBox Web Control Named `ProductSelector` to the TemplateField s `ItemTemplate` ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image12.png))</span></span>

<span data-ttu-id="fca51-156">TemplateField および CheckBox Web コントロールが追加され、各行にチェックボックスが追加されました。</span><span class="sxs-lookup"><span data-stu-id="fca51-156">With the TemplateField and CheckBox Web control added, each row now includes a checkbox.</span></span> <span data-ttu-id="fca51-157">図7に、TemplateField および CheckBox を追加した後にブラウザーで表示すると、このページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="fca51-157">Figure 7 shows this page, when viewed through a browser, after the TemplateField and CheckBox have been added.</span></span>

<span data-ttu-id="fca51-158">[各製品行にチェックボックスが含まれるようになりました ![](adding-a-gridview-column-of-checkboxes-cs/_static/image7.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="fca51-158">[![Each Product Row Now Includes a Checkbox](adding-a-gridview-column-of-checkboxes-cs/_static/image7.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image13.png)</span></span>

<span data-ttu-id="fca51-159">**図 7**: 各製品行にチェックボックスが含まれるようになりました ([クリックしてフルサイズの画像を表示](adding-a-gridview-column-of-checkboxes-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="fca51-159">**Figure 7**: Each Product Row Now Includes a Checkbox ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image14.png))</span></span>

## <a name="step-3-determining-what-checkboxes-were-checked-on-postback"></a><span data-ttu-id="fca51-160">手順 3: ポストバック時にチェックされたチェックボックスの確認</span><span class="sxs-lookup"><span data-stu-id="fca51-160">Step 3: Determining What Checkboxes Were Checked On Postback</span></span>

<span data-ttu-id="fca51-161">この時点では、チェックボックスの列がありますが、ポストバック時にチェックされたチェックボックスを確認する方法はありません。</span><span class="sxs-lookup"><span data-stu-id="fca51-161">At this point we have a column of checkboxes but no way to determine what checkboxes were checked on postback.</span></span> <span data-ttu-id="fca51-162">ただし、[選択した製品の削除] ボタンをクリックしたときに、その製品を削除するためにチェックされたチェックボックスを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fca51-162">When the Delete Selected Products button is clicked, though, we need to know what checkboxes were checked in order to delete those products.</span></span>

<span data-ttu-id="fca51-163">GridView s [`Rows` プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows.aspx)は、gridview のデータ行へのアクセスを提供します。</span><span class="sxs-lookup"><span data-stu-id="fca51-163">The GridView s [`Rows` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows.aspx) provides access to the data rows in the GridView.</span></span> <span data-ttu-id="fca51-164">これらの行を反復処理し、CheckBox コントロールにプログラムでアクセスして、その `Checked` プロパティを参照して、チェックボックスがオンになっているかどうかを判断します。</span><span class="sxs-lookup"><span data-stu-id="fca51-164">We can iterate through these rows, programmatically access the CheckBox control, and then consult its `Checked` property to determine whether the CheckBox has been selected.</span></span>

<span data-ttu-id="fca51-165">`DeleteSelectedProducts` ボタン Web コントロール s `Click` イベントのイベントハンドラーを作成し、次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="fca51-165">Create an event handler for the `DeleteSelectedProducts` Button Web control s `Click` event and add the following code:</span></span>

[!code-csharp[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample2.cs)]

<span data-ttu-id="fca51-166">`Rows` プロパティは、GridView のデータ行を指定する `GridViewRow` インスタンスのコレクションを返します。</span><span class="sxs-lookup"><span data-stu-id="fca51-166">The `Rows` property returns a collection of `GridViewRow` instances that makeup the GridView s data rows.</span></span> <span data-ttu-id="fca51-167">ここで `foreach` ループは、このコレクションを列挙します。</span><span class="sxs-lookup"><span data-stu-id="fca51-167">The `foreach` loop here enumerates this collection.</span></span> <span data-ttu-id="fca51-168">`GridViewRow` の各オブジェクトについて、行のチェックボックスは、`row.FindControl("controlID")`を使用してプログラムによってアクセスされます。</span><span class="sxs-lookup"><span data-stu-id="fca51-168">For each `GridViewRow` object, the row s CheckBox is programmatically accessed using `row.FindControl("controlID")`.</span></span> <span data-ttu-id="fca51-169">チェックボックスをオンにすると、`ProductID` 値に対応する行が `DataKeys` コレクションから取得されます。</span><span class="sxs-lookup"><span data-stu-id="fca51-169">If the CheckBox is checked, the row s corresponding `ProductID` value is retrieved from the `DataKeys` collection.</span></span> <span data-ttu-id="fca51-170">この演習では、`DeleteResults` ラベルにわかりやすいメッセージを表示します。ただし、動作しているアプリケーションでは、代わりに `ProductsBLL` クラス s `DeleteProduct(productID)` メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="fca51-170">In this exercise, we simply display an informative message in the `DeleteResults` Label, although in a working application we d instead make a call to the `ProductsBLL` class s `DeleteProduct(productID)` method.</span></span>

<span data-ttu-id="fca51-171">このイベントハンドラーを追加すると、[選択した製品の削除] ボタンをクリックすると、選択した製品の `ProductID` が表示されるようになります。</span><span class="sxs-lookup"><span data-stu-id="fca51-171">With the addition of this event handler, clicking the Delete Selected Products button now displays the `ProductID` s of the selected products.</span></span>

<span data-ttu-id="fca51-172">[![[選択した製品の削除] ボタンをクリックすると、選択した Products Productids) が表示されます](adding-a-gridview-column-of-checkboxes-cs/_static/image8.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="fca51-172">[![When the Delete Selected Products Button is Clicked the Selected Products ProductIDs are Listed](adding-a-gridview-column-of-checkboxes-cs/_static/image8.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image15.png)</span></span>

<span data-ttu-id="fca51-173">**図 8**: [選択した製品の削除] ボタンをクリックすると、選択した製品 `ProductID` が一覧表示されます ([クリックすると、フルサイズの画像が表示](adding-a-gridview-column-of-checkboxes-cs/_static/image16.png)されます)</span><span class="sxs-lookup"><span data-stu-id="fca51-173">**Figure 8**: When the Delete Selected Products Button is Clicked the Selected Products `ProductID` s are Listed ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image16.png))</span></span>

## <a name="step-4-adding-check-all-and-uncheck-all-buttons"></a><span data-ttu-id="fca51-174">手順 4: すべてのボタンを確認し、すべてのボタンをオフにする</span><span class="sxs-lookup"><span data-stu-id="fca51-174">Step 4: Adding Check All and Uncheck All Buttons</span></span>

<span data-ttu-id="fca51-175">現在のページのすべての製品を削除する場合は、10の各チェックボックスをオンにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="fca51-175">If a user wants to delete all products on the current page, they must check each of the ten checkboxes.</span></span> <span data-ttu-id="fca51-176">[すべて確認] ボタンを追加することにより、このプロセスを迅速に実行できます。このボタンをクリックすると、グリッド内のすべてのチェックボックスがオンになります。</span><span class="sxs-lookup"><span data-stu-id="fca51-176">We can help expedite this process by adding a Check All button that, when clicked, selects all of the checkboxes in the grid.</span></span> <span data-ttu-id="fca51-177">[すべてクリア] ボタンも同様に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="fca51-177">An Uncheck All button would be equally helpful.</span></span>

<span data-ttu-id="fca51-178">2つのボタン Web コントロールをページに追加し、GridView の上に配置します。</span><span class="sxs-lookup"><span data-stu-id="fca51-178">Add two Button Web controls to the page, placing them above the GridView.</span></span> <span data-ttu-id="fca51-179">最初の1つの `ID` を `CheckAll` に設定し、その `Text` プロパティを [すべてを確認] に設定します。2つ目の `ID` を `UncheckAll` に設定し、その `Text` プロパティを [すべてオフ] に設定します。</span><span class="sxs-lookup"><span data-stu-id="fca51-179">Set the first one s `ID` to `CheckAll` and its `Text` property to Check All ; set the second one s `ID` to `UncheckAll` and its `Text` property to Uncheck All .</span></span>

[!code-aspx[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample3.aspx)]

<span data-ttu-id="fca51-180">次に、`ToggleCheckState(checkState)` という名前の分離コードクラスにメソッドを作成します。このメソッドを呼び出すと、`Products` GridView s `Rows` collection が列挙され、各 CheckBox s `Checked` プロパティが渡された*Checkstate*パラメーターの値に設定されます。</span><span class="sxs-lookup"><span data-stu-id="fca51-180">Next, create a method in the code-behind class named `ToggleCheckState(checkState)` that, when invoked, enumerates the `Products` GridView s `Rows` collection and sets each CheckBox s `Checked` property to the value of the passed in *checkState* parameter.</span></span>

[!code-csharp[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample4.cs)]

<span data-ttu-id="fca51-181">次に、[`CheckAll`] および [`UncheckAll`] ボタンの `Click` イベントハンドラーを作成します。</span><span class="sxs-lookup"><span data-stu-id="fca51-181">Next, create `Click` event handlers for the `CheckAll` and `UncheckAll` buttons.</span></span> <span data-ttu-id="fca51-182">`CheckAll` s イベントハンドラーでは、単に `ToggleCheckState(true)`を呼び出します。`UncheckAll`で `ToggleCheckState(false)`を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="fca51-182">In `CheckAll` s event handler, simply call `ToggleCheckState(true)`; in `UncheckAll`, call `ToggleCheckState(false)`.</span></span>

[!code-csharp[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample5.cs)]

<span data-ttu-id="fca51-183">このコードでは、[すべてを確認] ボタンをクリックするとポストバックが発生し、GridView のすべてのチェックボックスがオンになります。</span><span class="sxs-lookup"><span data-stu-id="fca51-183">With this code, clicking the Check All button causes a postback and checks all of the checkboxes in the GridView.</span></span> <span data-ttu-id="fca51-184">同様に、[すべてのチェックボックスをオフにする] チェックボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="fca51-184">Likewise, clicking Uncheck All unselects all checkboxes.</span></span> <span data-ttu-id="fca51-185">図9に、[すべて確認] ボタンがオンになった後の画面を示します。</span><span class="sxs-lookup"><span data-stu-id="fca51-185">Figure 9 shows the screen after the Check All button has been checked.</span></span>

<span data-ttu-id="fca51-186">[[すべてを確認] ボタンをクリックしてすべてのチェックボックスを選択 ![](adding-a-gridview-column-of-checkboxes-cs/_static/image9.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="fca51-186">[![Clicking the Check All Button Selects All Checkboxes](adding-a-gridview-column-of-checkboxes-cs/_static/image9.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image17.png)</span></span>

<span data-ttu-id="fca51-187">**図 9**: [すべてを確認] ボタンをクリックすると、すべてのチェックボックスがオンになります ([クリックすると、フルサイズの画像が表示](adding-a-gridview-column-of-checkboxes-cs/_static/image18.png)されます)</span><span class="sxs-lookup"><span data-stu-id="fca51-187">**Figure 9**: Clicking the Check All Button Selects All Checkboxes ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image18.png))</span></span>

> [!NOTE]
> <span data-ttu-id="fca51-188">チェックボックスの列を表示する場合、すべてのチェックボックスをオンまたはオフにするには、ヘッダー行のチェックボックスを使用します。</span><span class="sxs-lookup"><span data-stu-id="fca51-188">When displaying a column of checkboxes, one approach for selecting or unselecting all of the checkboxes is through a checkbox in the header row.</span></span> <span data-ttu-id="fca51-189">また、すべての実装を確認し、すべての実装をオフにするには、ポストバックが必要です。</span><span class="sxs-lookup"><span data-stu-id="fca51-189">Moreover, the current Check All / Uncheck All implementation requires a postback.</span></span> <span data-ttu-id="fca51-190">ただし、チェックボックスをオンまたはオフにすることはできますが、クライアント側のスクリプトでは、snappier のユーザーエクスペリエンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="fca51-190">The checkboxes can be checked or unchecked, however, entirely through client-side script, thereby providing a snappier user experience.</span></span> <span data-ttu-id="fca51-191">[すべてをチェック] の [ヘッダー行] チェックボックスを使用して詳細を確認するには、クライアント側の手法を使用する方法については、「クライアント側の[スクリプトを使用して GridView ですべて](http://aspnet.4guysfromrolla.com/articles/053106-1.aspx)のチェックボックスをチェックする」および「すべてを確認する」チェックボックスをオンにしてください。</span><span class="sxs-lookup"><span data-stu-id="fca51-191">To explore using a header row checkbox for Check All and Uncheck All in detail, along with a discussion on using client-side techniques, check out [Checking All CheckBoxes in a GridView Using Client-Side Script and a Check All CheckBox](http://aspnet.4guysfromrolla.com/articles/053106-1.aspx).</span></span>

## <a name="summary"></a><span data-ttu-id="fca51-192">まとめ</span><span class="sxs-lookup"><span data-stu-id="fca51-192">Summary</span></span>

<span data-ttu-id="fca51-193">続行する前にユーザーが GridView から任意の数の行を選択できるようにする必要がある場合は、チェックボックスの列を追加する方法が1つあります。</span><span class="sxs-lookup"><span data-stu-id="fca51-193">In cases where you need to let users choose an arbitrary number of rows from a GridView before proceeding, adding a column of checkboxes is one option.</span></span> <span data-ttu-id="fca51-194">このチュートリアルで説明したように、GridView にチェックボックスの列を含めると、CheckBox Web コントロールで TemplateField を追加することができます。</span><span class="sxs-lookup"><span data-stu-id="fca51-194">As we saw in this tutorial, including a column of checkboxes in the GridView entails adding a TemplateField with a CheckBox Web control.</span></span> <span data-ttu-id="fca51-195">(前のチュートリアルで行ったように) Web コントロールを使用して、ASP.NET が、ポストバック間でチェックされなかったチェックボックスを自動的に記憶します。</span><span class="sxs-lookup"><span data-stu-id="fca51-195">By using a Web control (versus injecting markup directly into the template, as we did in the previous tutorial) ASP.NET automatically remembers what CheckBoxes were and were not checked across postback.</span></span> <span data-ttu-id="fca51-196">また、コード内のチェックボックスにプログラムでアクセスして、特定のチェックボックスがオンになっているかどうかを判断したり、チェックされた状態を変更したりすることもできます。</span><span class="sxs-lookup"><span data-stu-id="fca51-196">We can also programmatically access the CheckBoxes in code to determine whether a given CheckBox is checked, or to change the checked state.</span></span>

<span data-ttu-id="fca51-197">このチュートリアルと最後のチュートリアルでは、行セレクター列を GridView に追加しました。</span><span class="sxs-lookup"><span data-stu-id="fca51-197">This tutorial and the last one looked at adding a row selector column to the GridView.</span></span> <span data-ttu-id="fca51-198">次のチュートリアルでは、いくつかの作業を行い、GridView に挿入機能を追加できる方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="fca51-198">In our next tutorial we'll examine how, with a bit of work, we can add inserting capabilities to the GridView.</span></span>

<span data-ttu-id="fca51-199">プログラミングを楽しんでください。</span><span class="sxs-lookup"><span data-stu-id="fca51-199">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="fca51-200">著者について</span><span class="sxs-lookup"><span data-stu-id="fca51-200">About the Author</span></span>

<span data-ttu-id="fca51-201">1998以来、 [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)は 7 asp/創設者 of [4GuysFromRolla.com](http://www.4guysfromrolla.com)の執筆者であり、Microsoft Web テクノロジを使用しています。</span><span class="sxs-lookup"><span data-stu-id="fca51-201">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="fca51-202">Scott は、独立したコンサルタント、トレーナー、およびライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="fca51-202">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="fca51-203">彼の最新の書籍は[ *、ASP.NET 2.0 を24時間以内に教え*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ています。</span><span class="sxs-lookup"><span data-stu-id="fca51-203">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="fca51-204">mitchell@4GuysFromRolla.comでアクセスでき[ます。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="fca51-204">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="fca51-205">または彼のブログを参照してください。これは[http://ScottOnWriting.NET](http://ScottOnWriting.NET)にあります。</span><span class="sxs-lookup"><span data-stu-id="fca51-205">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="fca51-206">[前へ](adding-a-gridview-column-of-radio-buttons-cs.md)
> [次へ](inserting-a-new-record-from-the-gridview-s-footer-cs.md)</span><span class="sxs-lookup"><span data-stu-id="fca51-206">[Previous](adding-a-gridview-column-of-radio-buttons-cs.md)
[Next](inserting-a-new-record-from-the-gridview-s-footer-cs.md)</span></span>
