---
uid: web-forms/overview/moving-to-aspnet-20/master-pages
title: マスター ページ |マイクロソフトドキュメント
author: rick-anderson
description: Web サイトを成功させるための重要なコンポーネントの 1 つは、一貫した外観です。 ASP.NET 1.x では、開発者はユーザー コントロールを使用して共通のページ elem..
ms.author: riande
ms.date: 02/20/2005
ms.assetid: 9c0cce4d-efd9-4c14-b0e8-a1a140abb3f4
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/master-pages
msc.type: authoredcontent
ms.openlocfilehash: b493feb21d2e3d6429f0a23df5aab66e0c4c5b07
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2020
ms.locfileid: "81543185"
---
# <a name="master-pages"></a><span data-ttu-id="397a4-104">マスター ページ</span><span class="sxs-lookup"><span data-stu-id="397a4-104">Master Pages</span></span>

<span data-ttu-id="397a4-105">[マイクロソフト](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="397a4-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="397a4-106">Web サイトを成功させるための重要なコンポーネントの 1 つは、一貫した外観です。</span><span class="sxs-lookup"><span data-stu-id="397a4-106">One of the key components to a successful Web site is a consistent look and feel.</span></span> <span data-ttu-id="397a4-107">ASP.NET 1.x では、開発者はユーザー コントロールを使用して、Web アプリケーション全体で共通のページ要素をレプリケートしました。</span><span class="sxs-lookup"><span data-stu-id="397a4-107">In ASP.NET 1.x, developers used user controls to replicate common page elements across a Web application.</span></span> <span data-ttu-id="397a4-108">これは確かに実行可能なソリューションですが、ユーザー コントロールを使用する場合は、いくつかの欠点があります。</span><span class="sxs-lookup"><span data-stu-id="397a4-108">While that is certainly a workable solution, using user controls does have some drawbacks.</span></span> <span data-ttu-id="397a4-109">たとえば、ユーザー コントロールの位置を変更するには、サイト全体で複数のページを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="397a4-109">For example, a change in position of a user control requires a change to multiple pages across a site.</span></span> <span data-ttu-id="397a4-110">また、ユーザー コントロールは、ページに挿入された後もデザイン ビューに表示されません。</span><span class="sxs-lookup"><span data-stu-id="397a4-110">User controls are also not rendered in Design view after being inserted on a page.</span></span>

<span data-ttu-id="397a4-111">Web サイトを成功させるための重要なコンポーネントの 1 つは、一貫した外観です。</span><span class="sxs-lookup"><span data-stu-id="397a4-111">One of the key components to a successful Web site is a consistent look and feel.</span></span> <span data-ttu-id="397a4-112">ASP.NET 1.x では、開発者はユーザー コントロールを使用して、Web アプリケーション全体で共通のページ要素をレプリケートしました。</span><span class="sxs-lookup"><span data-stu-id="397a4-112">In ASP.NET 1.x, developers used user controls to replicate common page elements across a Web application.</span></span> <span data-ttu-id="397a4-113">これは確かに実行可能なソリューションですが、ユーザー コントロールを使用する場合は、いくつかの欠点があります。</span><span class="sxs-lookup"><span data-stu-id="397a4-113">While that is certainly a workable solution, using user controls does have some drawbacks.</span></span> <span data-ttu-id="397a4-114">たとえば、ユーザー コントロールの位置を変更するには、サイト全体で複数のページを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="397a4-114">For example, a change in position of a user control requires a change to multiple pages across a site.</span></span> <span data-ttu-id="397a4-115">また、ユーザー コントロールは、ページに挿入された後もデザイン ビューに表示されません。</span><span class="sxs-lookup"><span data-stu-id="397a4-115">User controls are also not rendered in Design view after being inserted on a page.</span></span>

<span data-ttu-id="397a4-116">ASP.NET 2.0 では、一貫性のある外観を維持する方法としてマスター ページが導入されています。</span><span class="sxs-lookup"><span data-stu-id="397a4-116">ASP.NET 2.0 introduces Master pages as a way of maintaining a consistent look and feel, and as you'll soon see, Master pages represent a significant improvement over the user control method.</span></span>

## <a name="why-master-pages"></a><span data-ttu-id="397a4-117">マスター ページの理由</span><span class="sxs-lookup"><span data-stu-id="397a4-117">Why Master Pages?</span></span>

<span data-ttu-id="397a4-118">ASP.NET 2.0 でマスター ページが必要な理由を疑問に思うかもしれません。</span><span class="sxs-lookup"><span data-stu-id="397a4-118">You may be wondering why master pages were needed in ASP.NET 2.0.</span></span> <span data-ttu-id="397a4-119">結局のところ、Web サイト開発者はすでに ASP.NET 1.x のユーザー コントロールを使用して、ページ間でコンテンツ領域を共有しています。</span><span class="sxs-lookup"><span data-stu-id="397a4-119">After all, Web site developers are already using user controls in ASP.NET 1.x to share content areas between pages.</span></span> <span data-ttu-id="397a4-120">ユーザー コントロールが、共通のレイアウトを作成するための最適なソリューションではない理由は、実際にはいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="397a4-120">There are actually several reasons why user controls are a less-than-optimal solution for creating a common layout.</span></span>

<span data-ttu-id="397a4-121">ユーザー コントロールは、実際にはページ レイアウトを定義しません。</span><span class="sxs-lookup"><span data-stu-id="397a4-121">User controls don't actually define page layout.</span></span> <span data-ttu-id="397a4-122">代わりに、ページの一部のレイアウトと機能を定義します。</span><span class="sxs-lookup"><span data-stu-id="397a4-122">Instead, they define the layout and functionality for a portion of a page.</span></span> <span data-ttu-id="397a4-123">この 2 つの区別は、ユーザー コントロール ソリューションの管理性を大幅に難しくするため、重要です。</span><span class="sxs-lookup"><span data-stu-id="397a4-123">The distinction between these two is important because it makes manageability of a user control solution much more difficult.</span></span> <span data-ttu-id="397a4-124">たとえば、ページ上のユーザー コントロールの位置を変更する場合は、ユーザー コントロールが表示される実際のページを編集する必要があります。</span><span class="sxs-lookup"><span data-stu-id="397a4-124">For example, when you want to change the position of a user control on your page, you must edit the actual page on which the user control appears.</span></span> <span data-ttu-id="397a4-125">ほんの数ページしかない場合は問題ありませんが、大規模なサイトでは、すぐにサイト管理の悪夢になります!</span><span class="sxs-lookup"><span data-stu-id="397a4-125">Thats fine if you have only a few pages, but in large sites, it quickly becomes a site management nightmare!</span></span>

<span data-ttu-id="397a4-126">共通のレイアウトを定義するためにユーザー コントロールを使用するもう 1 つの欠点は、ASP.NET自体のアーキテクチャに根ざしています。</span><span class="sxs-lookup"><span data-stu-id="397a4-126">Another drawback of using user controls for defining a common layout is rooted in the architecture of ASP.NET itself.</span></span> <span data-ttu-id="397a4-127">ユーザー コントロールのパブリック メンバーが変更された場合は、そのユーザー コントロールを使用するすべてのページを再コンパイルする必要があります。</span><span class="sxs-lookup"><span data-stu-id="397a4-127">If any public member of a user control is changed, it requires you to recompile all of the pages that use the user control.</span></span> <span data-ttu-id="397a4-128">次に、ASP.NETは、最初にアクセスしたときにページを再 JIT します。</span><span class="sxs-lookup"><span data-stu-id="397a4-128">In turn, ASP.NET will then re-JIT your pages when they are first accessed.</span></span> <span data-ttu-id="397a4-129">この場合も、スケーラビリティが高く、大規模なサイトに対するサイト管理の問題が発生します。</span><span class="sxs-lookup"><span data-stu-id="397a4-129">This, once again, produces a non-scalable architecture and a site management problem for larger sites.</span></span>

<span data-ttu-id="397a4-130">これらの問題 (およびそれ以上の問題) は、ASP.NET 2.0 のマスター ページでうまく対処されています。</span><span class="sxs-lookup"><span data-stu-id="397a4-130">Both of these problems (and many more) are nicely addressed by master pages in ASP.NET 2.0.</span></span>

## <a name="how-master-pages-work"></a><span data-ttu-id="397a4-131">マスター ページの動作</span><span class="sxs-lookup"><span data-stu-id="397a4-131">How Master Pages Work</span></span>

<span data-ttu-id="397a4-132">マスターページは、他のページのテンプレートに似ています。</span><span class="sxs-lookup"><span data-stu-id="397a4-132">A master page is analogous to a template for other pages.</span></span> <span data-ttu-id="397a4-133">他のページ間で共有する必要があるページ要素 (メニュー、枠など) は、マスター ページに追加されます。</span><span class="sxs-lookup"><span data-stu-id="397a4-133">Page elements that should be shared among other pages (i.e. menus, borders, etc.) are added to the master page.</span></span> <span data-ttu-id="397a4-134">サイトに新しいページを追加すると、マスター ページに関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="397a4-134">When new pages are added to the site, you can associate them with a master page.</span></span> <span data-ttu-id="397a4-135">マスタ ページに関連付けられているページを**コンテンツ ページ**と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="397a4-135">A page that is associated with a master page is called a **content page**.</span></span> <span data-ttu-id="397a4-136">既定では、コンテンツ ページはマスター ページから外観を取ります。</span><span class="sxs-lookup"><span data-stu-id="397a4-136">By default, a content page takes on the appearance from the master page.</span></span> <span data-ttu-id="397a4-137">ただし、マスター ページを作成する場合は、コンテンツ ページを独自のコンテンツに置き換えることができるページの一部を定義できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-137">However, when you create a master page, you can define portions of the page that the content page can replace with its own content.</span></span> <span data-ttu-id="397a4-138">これらの部分は、ASP.NET 2.0 で導入された新しいコントロールを使用して定義されます。**コントロールを配置します**。</span><span class="sxs-lookup"><span data-stu-id="397a4-138">These portions are defined using a new control introduced in ASP.NET 2.0; the **ContentPlaceHolder** control.</span></span>

<span data-ttu-id="397a4-139">マスター ページには、任意の数の ContentPlaceHolder コントロールを含めることができます (またはまったく含まれていません)。コンテンツ ページでは、コンテンツプレース ホルダー コントロールのコンテンツが**コンテンツ**コントロール内 ASP.NETに表示されます。</span><span class="sxs-lookup"><span data-stu-id="397a4-139">A master page can contain any number of ContentPlaceHolder controls (or none at all.) On the content page, the content from the ContentPlaceHolder controls appears inside of **Content** controls, another new control in ASP.NET 2.0.</span></span> <span data-ttu-id="397a4-140">既定では、コンテンツ ページコンテンツ コントロールは空であるため、独自のコンテンツを提供できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-140">By default, the content pages Content controls are empty so that you can provide your own content.</span></span> <span data-ttu-id="397a4-141">コンテンツ コントロール内のマスター ページのコンテンツを使用する場合は、このモジュールの後半で説明するように、そのコンテンツを使用できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-141">If you want to use the content from the master page inside of the Content controls, you can do so as you will see later in this module.</span></span> <span data-ttu-id="397a4-142">コンテンツ コントロールは、コンテンツ コントロールのコンテンツプレース ホルダー ID 属性を介してコンテンツプレース ホルダー コントロールにマップされます。</span><span class="sxs-lookup"><span data-stu-id="397a4-142">The Content control is mapped to the ContentPlaceHolder control via the ContentPlaceHolderID attribute of the Content control.</span></span> <span data-ttu-id="397a4-143">次のコードは、コンテンツ コントロールをマスター ページの mainBody と呼ばれるコンテンツプレース ホルダー コントロールにマップします。</span><span class="sxs-lookup"><span data-stu-id="397a4-143">The code below maps a Content control to a ContentPlaceHolder control called mainBody on a master page.</span></span>

[!code-aspx[Main](master-pages/samples/sample1.aspx)]

> [!NOTE]
> <span data-ttu-id="397a4-144">マスター ページは、他のページの基本クラスであると説明されることがよくあります。</span><span class="sxs-lookup"><span data-stu-id="397a4-144">You will often hear people describe master pages as being a base class for other pages.</span></span> <span data-ttu-id="397a4-145">それは実際には真実ではありません。</span><span class="sxs-lookup"><span data-stu-id="397a4-145">Thats actually not true.</span></span> <span data-ttu-id="397a4-146">マスター ページとコンテンツ ページの関係は、継承の 1 つではありません。</span><span class="sxs-lookup"><span data-stu-id="397a4-146">The relationship between master pages and content pages is not one of inheritance.</span></span>

<span data-ttu-id="397a4-147">**図 1**は、マスター ページと関連付けられたコンテンツ ページを Visual Studio 2005 に表示する場合に示しています。</span><span class="sxs-lookup"><span data-stu-id="397a4-147">**Figure 1** shows a master page and an associated content page as they appear in Visual Studio 2005.</span></span> <span data-ttu-id="397a4-148">マスター ページに ContentPlaceHolder コントロールを表示し、対応するコンテンツ コントロールをコンテンツ ページに表示できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-148">You can see the ContentPlaceHolder control in the master page and the corresponding Content control in the content page.</span></span> <span data-ttu-id="397a4-149">コンテンツ プレース ホルダーの外側にあるマスター ページのコンテンツは表示されますが、コンテンツ ページでは淡色表示されています。</span><span class="sxs-lookup"><span data-stu-id="397a4-149">Notice that the master pages content that is outside of the ContentPlaceHolder is visible but grayed out in the content page.</span></span> <span data-ttu-id="397a4-150">コンテンツ ページに置き換えられるのは、プレースホルダー内のコンテンツのみです。</span><span class="sxs-lookup"><span data-stu-id="397a4-150">Only the content inside of the ContentPlaceHolder can be supplanted by the content page.</span></span> <span data-ttu-id="397a4-151">マスター ページから取得したその他のコンテンツはすべて変更不可です。</span><span class="sxs-lookup"><span data-stu-id="397a4-151">All other content that comes from the master page is immutable.</span></span>

![マスター ページと関連付けられたコンテンツ ページ](master-pages/_static/image1.jpg)

<span data-ttu-id="397a4-153">**図 1**: マスタ ページと関連付けられたコンテンツ ページ</span><span class="sxs-lookup"><span data-stu-id="397a4-153">**Figure 1**: A master page and its associated content page</span></span>

## <a name="creating-a-master-page"></a><span data-ttu-id="397a4-154">マスター ページの作成</span><span class="sxs-lookup"><span data-stu-id="397a4-154">Creating a Master Page</span></span>

<span data-ttu-id="397a4-155">新しいマスター ページを作成するには</span><span class="sxs-lookup"><span data-stu-id="397a4-155">To create a new master page:</span></span>

1. <span data-ttu-id="397a4-156">Visual Studio 2005 を開き、新しい Web サイトを作成します。</span><span class="sxs-lookup"><span data-stu-id="397a4-156">Open Visual Studio 2005 and create a new Web site.</span></span>
2. <span data-ttu-id="397a4-157">[ファイル]、[新規作成]、[ファイル] の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="397a4-157">Click File, New, File.</span></span>
3. <span data-ttu-id="397a4-158">**図 2**に示すように、[新しい項目の追加] ダイアログから [マスター ファイル] を選択します。</span><span class="sxs-lookup"><span data-stu-id="397a4-158">Choose Master File from the Add New Item dialog as shown in **figure 2**.</span></span>
4. <span data-ttu-id="397a4-159">[追加] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="397a4-159">Click Add.</span></span>

![新しいマスタ ページの作成](master-pages/_static/image2.jpg)

<span data-ttu-id="397a4-161">**図 2**: 新しいマスタ ページの作成</span><span class="sxs-lookup"><span data-stu-id="397a4-161">**Figure 2**: Creating a New Master Page</span></span>

<span data-ttu-id="397a4-162">マスタ ページのファイル拡張子は *.master*です。</span><span class="sxs-lookup"><span data-stu-id="397a4-162">Notice that the file extension for a master page is *.master*.</span></span> <span data-ttu-id="397a4-163">これは、マスター ページが通常のページと異なる方法の 1 つです。</span><span class="sxs-lookup"><span data-stu-id="397a4-163">This is one of the ways that a master page differs from an ordinary page.</span></span> <span data-ttu-id="397a4-164">もう 1 つの主な違いは、@Pageディレクティブの代わりに、マスター@Masterページにディレクティブが含まれるということです。</span><span class="sxs-lookup"><span data-stu-id="397a4-164">The other primary difference is that in lieu of a @Page directive, the master page contains a @Master directive.</span></span> <span data-ttu-id="397a4-165">作成したマスター ページのソース ビューに切り替えて、コードを確認します。</span><span class="sxs-lookup"><span data-stu-id="397a4-165">Switch to Source View for the master page you've just created and review the code.</span></span>

<span data-ttu-id="397a4-166">新しいマスター ページには、既定で 1 つのプレース ホルダー コントロールがあります。</span><span class="sxs-lookup"><span data-stu-id="397a4-166">A new master page will have one ContentPlaceHolder control by default.</span></span> <span data-ttu-id="397a4-167">ほとんどの場合、最初に共通のページ要素を作成してから、カスタム コンテンツが必要な場所に ContentPlaceHolder コントロールを挿入する方が理にかなっています。</span><span class="sxs-lookup"><span data-stu-id="397a4-167">In most cases, it makes more sense to create the common page elements first and then insert ContentPlaceHolder controls where custom content is desired.</span></span> <span data-ttu-id="397a4-168">このような場合、開発者は既定の ContentPlaceHolder コントロールを削除し、ページが開発されると新しいコントロールを挿入する必要があります。</span><span class="sxs-lookup"><span data-stu-id="397a4-168">In those cases, developers will want to delete the default ContentPlaceHolder control and insert new ones as the page is developed.</span></span> <span data-ttu-id="397a4-169">コントロールはサイズ変更ハンドルを表示しているにもかかわらずサイズ変更できません。</span><span class="sxs-lookup"><span data-stu-id="397a4-169">ContentPlaceHolder controls are not resizable despite the fact that they do display sizing handles.</span></span> <span data-ttu-id="397a4-170">コントロールのサイズは、1 つの例外を除いて、含まれているコンテンツに基づいて自動的にサイズが設定されます。テーブル セルなどのブロック要素の内側に配置した場合、コントロールのサイズは要素のサイズに合わせて調整されます。</span><span class="sxs-lookup"><span data-stu-id="397a4-170">The ContentPlaceHolder control sizes automatically based upon the content that it contains with one exception; if you place a ContentPlaceHolder control inside of a block element such as a table cell, it will size according to the size of the element.</span></span>

## <a name="lab-1-working-with-master-pages"></a><span data-ttu-id="397a4-171">演習 1 マスター ページの操作</span><span class="sxs-lookup"><span data-stu-id="397a4-171">Lab 1 Working with Master Pages</span></span>

<span data-ttu-id="397a4-172">このラボでは、新しいマスター ページを作成し、3 つのプレース ホルダー コントロールを定義します。</span><span class="sxs-lookup"><span data-stu-id="397a4-172">In this lab, you will create a new master page and define three ContentPlaceHolder controls.</span></span> <span data-ttu-id="397a4-173">新しいコンテンツ ページを作成し、少なくとも 1 つの ContentPlaceHolder コントロールのコンテンツを置き換えます。</span><span class="sxs-lookup"><span data-stu-id="397a4-173">You will then create a new Content page and replace the content from at least one of the ContentPlaceHolder controls.</span></span>

1. <span data-ttu-id="397a4-174">マスター ページを作成し、プレース ホルダー コントロールを挿入します。</span><span class="sxs-lookup"><span data-stu-id="397a4-174">Create a master page and insert ContentPlaceHolder controls.</span></span> 

    1. <span data-ttu-id="397a4-175">上述の手順に従って、新しいマスター ページを作成します。</span><span class="sxs-lookup"><span data-stu-id="397a4-175">Create a new master page as described above.</span></span>
    2. <span data-ttu-id="397a4-176">既定のプレース ホルダー コントロールを削除します。</span><span class="sxs-lookup"><span data-stu-id="397a4-176">Delete the default ContentPlaceHolder control.</span></span>
    3. <span data-ttu-id="397a4-177">コントロールの上枠の枠線をクリックして ContentPlaceHolder コントロールを選択し、キーボードの Del キーを押してコントロールを削除します。</span><span class="sxs-lookup"><span data-stu-id="397a4-177">Select the ContentPlaceHolder control by clicking the shaded top border of the control and then delete it by hitting the DEL key on your keyboard.</span></span>
    4. <span data-ttu-id="397a4-178">図 3 に示すように *、ヘッダーとサイド*テンプレートを使用して新しいテーブルを挿入します。</span><span class="sxs-lookup"><span data-stu-id="397a4-178">Insert a new table using the *Header and side* template as shown in figure 3.</span></span> <span data-ttu-id="397a4-179">テーブル全体がデザイナーに表示されるように、幅と高さをそれぞれ 90% に変更します。</span><span class="sxs-lookup"><span data-stu-id="397a4-179">Change the width and height to 90% each so that the entire table is visible in the designer.</span></span>

![](master-pages/_static/image3.jpg)

<span data-ttu-id="397a4-180">**図 3**</span><span class="sxs-lookup"><span data-stu-id="397a4-180">**Figure 3**</span></span>

1. <span data-ttu-id="397a4-181">テーブルの各セルにカーソルを置き *、valign*プロパティを*top*に設定します。</span><span class="sxs-lookup"><span data-stu-id="397a4-181">Place the cursor into each cell of the table and set the *valign* property to *top*.</span></span>
2. <span data-ttu-id="397a4-182">ツールボックスから、テーブルの上部のセル (ヘッダー セル) にプレース ホルダー コントロールを挿入します。</span><span class="sxs-lookup"><span data-stu-id="397a4-182">From the Toolbox, insert a ContentPlaceHolder control in the top cell of the table (the header cell.)</span></span>
3. <span data-ttu-id="397a4-183">この PlaceHolder コントロールを挿入すると、図 4 に示すように、行の高さがページのほぼ全体を占めています。</span><span class="sxs-lookup"><span data-stu-id="397a4-183">When you insert this ContentPlaceHolder control, you will notice that the row height will take up almost the entire page as shown in figure 4.</span></span> <span data-ttu-id="397a4-184">この時点でそれについて心配しないでください。</span><span class="sxs-lookup"><span data-stu-id="397a4-184">Don't be concerned about that at this point.</span></span>

![空のスペースは、プレース ホルダーと同じセル内にあります。](master-pages/_static/image1.gif)

<span data-ttu-id="397a4-186">**図 4**: 空のスペースは、プレース ホルダーと同じセル内にあります</span><span class="sxs-lookup"><span data-stu-id="397a4-186">**Figure 4**: The empty space is in the same cell as the ContentPlaceHolder</span></span>

1. <span data-ttu-id="397a4-187">他の 2 つのセルにプレース ホルダー コントロールを配置します。</span><span class="sxs-lookup"><span data-stu-id="397a4-187">Place a ContentPlaceHolder control in the other two cells.</span></span> <span data-ttu-id="397a4-188">他の PlaceHolder コントロールが挿入されると、テーブルのセルのサイズは期待どおりに行われます。</span><span class="sxs-lookup"><span data-stu-id="397a4-188">Once the other ContentPlaceHolder controls have been inserted, the size of the table cells should be as you would expect.</span></span> <span data-ttu-id="397a4-189">これで、図**5**に示すページのようになります。</span><span class="sxs-lookup"><span data-stu-id="397a4-189">The page should now look like the page shown in **figure 5**.</span></span>

![すべてのプレース ホルダー コントロールを持つマスター。](master-pages/_static/image2.gif)

<span data-ttu-id="397a4-192">**図 5**: すべてのプレース ホルダー コントロールを持つマスター。</span><span class="sxs-lookup"><span data-stu-id="397a4-192">**Figure 5**: The Master with all ContentPlaceHolder controls.</span></span> <span data-ttu-id="397a4-193">ヘッダー セルのセルの高さが、必要な値になっていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="397a4-193">Notice that the cell height for the header cell is now what it should be</span></span>

1. <span data-ttu-id="397a4-194">3 つのプレース ホルダー コントロールのそれぞれに、選択したテキストを入力します。</span><span class="sxs-lookup"><span data-stu-id="397a4-194">Enter some text of your choice into each of the three ContentPlaceHolder controls.</span></span>
2. <span data-ttu-id="397a4-195">マスター ページを exercise1.master として保存します。</span><span class="sxs-lookup"><span data-stu-id="397a4-195">Save the master page as exercise1.master.</span></span>
3. <span data-ttu-id="397a4-196">新しい Web フォームを作成し、それを exercise1.master マスター ページに関連付けます。</span><span class="sxs-lookup"><span data-stu-id="397a4-196">Create a new Web Form and associate it with the exercise1.master master page.</span></span>
4. <span data-ttu-id="397a4-197">Visual Studio 2005 で [ファイル]、[新規作成]、[ファイル] の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="397a4-197">Select File, New, File in Visual Studio 2005.</span></span>
5. <span data-ttu-id="397a4-198">[新しい項目の追加] ダイアログで **[Web フォーム**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="397a4-198">Select **Web Form** in the Add New Item dialog.</span></span>
6. <span data-ttu-id="397a4-199">図 6 に示すように、[マスター ページの選択] チェック ボックスがオンになっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="397a4-199">Make sure that the Select master page checkbox is checked as shown in figure 6.</span></span>

![新しいコンテンツ ページの追加](master-pages/_static/image3.gif)

<span data-ttu-id="397a4-201">**図 6**: 新しいコンテンツ ページの追加</span><span class="sxs-lookup"><span data-stu-id="397a4-201">**Figure 6**: Adding a new Content Page</span></span>

1. <span data-ttu-id="397a4-202">[追加] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="397a4-202">Click Add.</span></span>
2. <span data-ttu-id="397a4-203">図 7 に示すように、[マスター ページの選択] ダイアログで [exercise1.master] を選択します。</span><span class="sxs-lookup"><span data-stu-id="397a4-203">Select exercise1.master in the Select a master page dialog as shown in figure 7.</span></span>
3. <span data-ttu-id="397a4-204">[OK] をクリックして新しいコンテンツ ページを追加します。</span><span class="sxs-lookup"><span data-stu-id="397a4-204">Click OK to add the new content page.</span></span>

<span data-ttu-id="397a4-205">新しいコンテンツ ページは、マスター ページの各プレース ホルダー コントロールに対して 1 つのコンテンツ コントロールを持つ Visual Studio に表示されます。</span><span class="sxs-lookup"><span data-stu-id="397a4-205">The new content page appears in Visual Studio with one Content control for each ContentPlaceHolder control on the master page.</span></span> <span data-ttu-id="397a4-206">既定では、コンテンツ コントロールは空なので、独自のコンテンツを追加できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-206">By default, the Content controls are empty so that you can add your own content.</span></span> <span data-ttu-id="397a4-207">マスター ページの ContentPlaceHolder コントロールのコンテンツを使用する場合は、図**8**に示すように、スマート タグシンボル (コントロールの右上隅にある小さな黒い矢印) をクリックし、スマート タグから *[既定のマスター コンテンツ*] を選択します。</span><span class="sxs-lookup"><span data-stu-id="397a4-207">If you'd like for them to use the content from the ContentPlaceHolder control on the master page, simply click on the smart tag symbol (the small black arrow in the upper-right corner of the control) and choose *Default to Masters Content* from the smart tag as shown in **figure 8**.</span></span> <span data-ttu-id="397a4-208">この操作を行うと、メニュー項目が *[カスタム コンテンツの作成]* に変わります。</span><span class="sxs-lookup"><span data-stu-id="397a4-208">When you do so, the menu item changes to *Create Custom Content*.</span></span> <span data-ttu-id="397a4-209">この時点でクリックすると、マスター ページからコンテンツが削除され、その特定の Content コントロールのカスタム コンテンツを定義できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-209">Clicking it at that point removes the content from the master page allowing you to define custom content for that particular Content control.</span></span>

![コンテンツ コントロールをマスタ ページ コンテンツに既定に設定する](master-pages/_static/image4.gif)

<span data-ttu-id="397a4-211">**図 7**: コンテンツ コントロールをマスタ ページ コンテンツに既定で設定する</span><span class="sxs-lookup"><span data-stu-id="397a4-211">**Figure 7**: Setting a Content Control to Default to the Master Pages Content</span></span>

## <a name="connecting-master-page-and-content-pages"></a><span data-ttu-id="397a4-212">マスター ページとコンテンツ ページの接続</span><span class="sxs-lookup"><span data-stu-id="397a4-212">Connecting Master Page and Content Pages</span></span>

<span data-ttu-id="397a4-213">マスター ページとコンテンツ ページの関連付けは、次の 4 つの方法のいずれかで構成できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-213">The association between a master page and a content page can be configured in one of four different ways:</span></span>

- <span data-ttu-id="397a4-214">ディレクティブの<strong>マスターページファイル属性</strong>@Page</span><span class="sxs-lookup"><span data-stu-id="397a4-214">The <strong>MasterPageFile</strong> attribute of the @Page directive</span></span>
- <span data-ttu-id="397a4-215">コード内の**プロパティを**設定します。</span><span class="sxs-lookup"><span data-stu-id="397a4-215">Setting the **Page.MasterPageFile** property in code.</span></span>
- <span data-ttu-id="397a4-216">アプリケーション構成ファイル (アプリケーションのルート フォルダー内の web.config) 内の**&lt;pages&gt;** 要素</span><span class="sxs-lookup"><span data-stu-id="397a4-216">The **&lt;pages&gt;** element in the applications configuration file (web.config in the root folder of the application)</span></span>
- <span data-ttu-id="397a4-217">サブフォルダー構成ファイル (web.config サブフォルダー) 内の**&lt;pages&gt;** 要素</span><span class="sxs-lookup"><span data-stu-id="397a4-217">The **&lt;pages&gt;** element in a subfolders configuration file (web.config in a subfolder)</span></span>

## <a name="masterpagefile-attribute"></a><span data-ttu-id="397a4-218">マスターページファイル属性</span><span class="sxs-lookup"><span data-stu-id="397a4-218">MasterPageFile Attribute</span></span>

<span data-ttu-id="397a4-219">属性を使用すると、特定のASP.NET ページにマスター ページを簡単に適用できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-219">The MasterPageFile attribute makes it easy to apply a master page to a particular ASP.NET page.</span></span> <span data-ttu-id="397a4-220">また、この方法は、演習 1 で行ったように、[マスター ページの選択] チェック ボックスをオンにした場合に**マスター ページ**を適用する方法でもあります。</span><span class="sxs-lookup"><span data-stu-id="397a4-220">It is also the method used to apply the master page when you check the **Select Master Page** checkbox as you did in Exercise 1.</span></span>

## <a name="setting-pagemasterpagefile-in-code"></a><span data-ttu-id="397a4-221">コード内のページ.マスターページファイルを設定する</span><span class="sxs-lookup"><span data-stu-id="397a4-221">Setting Page.MasterPageFile in Code</span></span>

<span data-ttu-id="397a4-222">MasterPageFile プロパティをコードで設定すると、実行時に特定のマスター ページをコンテンツに適用できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-222">By setting the MasterPageFile property in code, you can apply a particular master page to your content at runtime.</span></span> <span data-ttu-id="397a4-223">これは、ユーザーロールやその他の条件に基づいて特定のマスターページを適用する必要がある場合に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="397a4-223">This is useful in cases where you may need to apply a specific master page based upon a users role or some other criteria.</span></span> <span data-ttu-id="397a4-224">プロパティは、PreInit メソッドで設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="397a4-224">The MasterPageFile property must be set in the PreInit method.</span></span> <span data-ttu-id="397a4-225">メソッドの後に設定されている場合は、無効なオペレーション例外がスローされます。</span><span class="sxs-lookup"><span data-stu-id="397a4-225">If it is set after the PreInit method, an InvalidOperationException will be thrown.</span></span> <span data-ttu-id="397a4-226">このプロパティが設定されているページには、ページのトップレベル コントロールとして Content コントロールも含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="397a4-226">The page on which this property is being set must also have a Content control as the top-level control for the page.</span></span> <span data-ttu-id="397a4-227">それ以外の場合は、プロパティが設定されているときに、HttpException がスローされます。</span><span class="sxs-lookup"><span data-stu-id="397a4-227">Otherwise an HttpException will be thrown when the MasterPageFile property is set.</span></span>

## <a name="using-the-ltpagesgt-element"></a><span data-ttu-id="397a4-228">ページ&gt;要素&lt;の使用</span><span class="sxs-lookup"><span data-stu-id="397a4-228">Using the &lt;pages&gt; Element</span></span>

<span data-ttu-id="397a4-229">web.config ファイルの&lt;pages&gt;要素で masterPageFile 属性を設定することで、ページのマスター ページを構成できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-229">You can configure a master page for your pages by setting the masterPageFile attribute in the &lt;pages&gt; element of the web.config file.</span></span> <span data-ttu-id="397a4-230">このメソッドを使用する場合は、アプリケーション構造の下位にある web.config ファイルでこの設定をオーバーライドできることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="397a4-230">When using this method, keep in mind that web.config files lower in the application structure can override this setting.</span></span> <span data-ttu-id="397a4-231">@Pageディレクティブに設定されている MasterPageFile 属性も、この設定をオーバーライドします。</span><span class="sxs-lookup"><span data-stu-id="397a4-231">Any MasterPageFile attribute set in a @Page directive will also override this setting.</span></span> <span data-ttu-id="397a4-232">pages&gt; &lt;要素を使用すると、特定のフォルダーまたはファイルで必要に応じてオーバーライドできる*マスター マスター*ページを簡単に作成できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-232">Using the &lt;pages&gt; element makes it simple to create a *master* master page that can be overridden if necessary in particular folders or files.</span></span>

## <a name="properties-in-master-pages"></a><span data-ttu-id="397a4-233">マスタ ページのプロパティ</span><span class="sxs-lookup"><span data-stu-id="397a4-233">Properties in Master Pages</span></span>

<span data-ttu-id="397a4-234">マスター ページは、そのプロパティをマスター ページ内で公開するだけでプロパティを公開できます。</span><span class="sxs-lookup"><span data-stu-id="397a4-234">A master page can expose properties by simply making those properties public within the master page.</span></span> <span data-ttu-id="397a4-235">たとえば、次のコードは SomeProperty というプロパティを定義します。</span><span class="sxs-lookup"><span data-stu-id="397a4-235">For example, the following code defines a property called SomeProperty:</span></span>

[!code-csharp[Main](master-pages/samples/sample2.cs)]

<span data-ttu-id="397a4-236">コンテンツ ページから SomeProperty プロパティにアクセスするには、次のように Master プロパティを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="397a4-236">To access the SomeProperty property from the Content page, you will need to use the Master property like so:</span></span>

[!code-csharp[Main](master-pages/samples/sample3.cs)]

## <a name="nesting-master-pages"></a><span data-ttu-id="397a4-237">マスター ページのネスト</span><span class="sxs-lookup"><span data-stu-id="397a4-237">Nesting Master Pages</span></span>

<span data-ttu-id="397a4-238">マスター ページは、大規模な Web アプリケーションで一般的な外観を実現するための最適なソリューションです。</span><span class="sxs-lookup"><span data-stu-id="397a4-238">Master pages are the perfect solution for ensuring a common look and feel across a large Web application.</span></span> <span data-ttu-id="397a4-239">ただし、大規模なサイトの特定の部分が共通のインターフェイスを共有し、他のパーツが異なるインターフェイスを共有することは珍しくありません。</span><span class="sxs-lookup"><span data-stu-id="397a4-239">However, it's not uncommon to have certain parts of a large site share a common interface while other parts share a different interface.</span></span> <span data-ttu-id="397a4-240">そのニーズに対処するために、複数のマスターページが最適なソリューションです。</span><span class="sxs-lookup"><span data-stu-id="397a4-240">To address that need, multiple master pages are the perfect solution.</span></span> <span data-ttu-id="397a4-241">ただし、大規模なアプリケーションには、サイトの特定のセクション間でのみ共有されるすべてのページや他のコンポーネント間で共有される特定のコンポーネント (メニューなど) が含まれている可能性があるという事実は解決しません。</span><span class="sxs-lookup"><span data-stu-id="397a4-241">However, that still doesn't address the fact that a large application may have certain components (such as a menu, for example) that are shared among all pages and other components that are shared only among certain sections of the site.</span></span> <span data-ttu-id="397a4-242">この種の状況では、入れ子になったマスター ページがニーズを満たします。</span><span class="sxs-lookup"><span data-stu-id="397a4-242">For that type of situation, nested master pages fill the need nicely.</span></span> <span data-ttu-id="397a4-243">ご覧のとおり、通常のマスター ページは、マスター ページとコンテンツ ページで構成されます。</span><span class="sxs-lookup"><span data-stu-id="397a4-243">As you've seen, a normal master page consists of a master page and a content page.</span></span> <span data-ttu-id="397a4-244">入れ子になったマスター ページの状況では、2 つのマスター ページがあります。親マスターと子マスター。</span><span class="sxs-lookup"><span data-stu-id="397a4-244">In a nested master page situation, there are two master pages; a parent master and a child master.</span></span> <span data-ttu-id="397a4-245">子マスター ページもコンテンツ ページであり、そのマスターは親マスター ページです。</span><span class="sxs-lookup"><span data-stu-id="397a4-245">The child master page is also a content page and its master is the parent master page.</span></span>

<span data-ttu-id="397a4-246">一般的なマスター ページのコードを次に示します。</span><span class="sxs-lookup"><span data-stu-id="397a4-246">Here is the code for a typical master page:</span></span>

[!code-aspx[Main](master-pages/samples/sample4.aspx)]

<span data-ttu-id="397a4-247">入れ子になったマスター シナリオでは、これは親マスターになります。</span><span class="sxs-lookup"><span data-stu-id="397a4-247">In a nested master scenario, this would be the parent master.</span></span> <span data-ttu-id="397a4-248">別のマスタ ページでは、このページをマスター ページとして使用し、そのコードは次のようになります。</span><span class="sxs-lookup"><span data-stu-id="397a4-248">Another master page would use this page as its master page, and that code would look like this:</span></span>

[!code-aspx[Main](master-pages/samples/sample5.aspx)]

<span data-ttu-id="397a4-249">このシナリオでは、子マスターは親マスターのコンテンツ ページでもあることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="397a4-249">Note that in this scenario, the child master is also a content page for the parent master.</span></span> <span data-ttu-id="397a4-250">子マスターのすべてのコンテンツは、親の ContentPlaceHolder コントロールからコンテンツを取得するコンテンツ コントロールの内部に表示されます。</span><span class="sxs-lookup"><span data-stu-id="397a4-250">All of the child master's content appears inside of a Content control that gets its content from the parent's ContentPlaceHolder control.</span></span>

> [!NOTE]
> <span data-ttu-id="397a4-251">入れ子になったマスター ページでは、デザイナーのサポートは利用できません。</span><span class="sxs-lookup"><span data-stu-id="397a4-251">Designer support is not available for nested master pages.</span></span> <span data-ttu-id="397a4-252">ネストされたマスタを使用して開発する場合は、ソース ビューを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="397a4-252">When you are developing using nested masters, you will need to use source view.</span></span>

<span data-ttu-id="397a4-253">このビデオでは、入れ子になったマスター ページの使用方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="397a4-253">This video shows a walkthrough of using nested master pages.</span></span>

![](master-pages/_static/image1.png)

[<span data-ttu-id="397a4-254">フルスクリーンビデオを開く</span><span class="sxs-lookup"><span data-stu-id="397a4-254">Open Full-Screen Video</span></span>](master-pages/_static/nested1.wmv)

![マスター ページの選択](master-pages/_static/image4.jpg)

<span data-ttu-id="397a4-256">**図 8**: マスタ ページの選択</span><span class="sxs-lookup"><span data-stu-id="397a4-256">**Figure 8**: Selecting a Master Page</span></span>
