---
uid: web-forms/overview/moving-to-aspnet-20/configuration-and-instrumentation
title: 構成とインストルメンテーション |Microsoft Docs
author: microsoft
description: ASP.NET 2.0 では、構成とインストルメンテーションに大きな変更が加えられています。 新しい ASP.NET configuration API を使用して、構成の変更を pr...
ms.author: riande
ms.date: 02/20/2005
ms.assetid: 21ebbaee-7ed8-45ae-b6c1-c27c88342e48
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/configuration-and-instrumentation
msc.type: authoredcontent
ms.openlocfilehash: cd5bedce5459e8cf8e72df8de69ebd82f2d97789
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78507880"
---
# <a name="configuration-and-instrumentation"></a><span data-ttu-id="bcbf2-104">構成とインストルメンテーション</span><span class="sxs-lookup"><span data-stu-id="bcbf2-104">Configuration and Instrumentation</span></span>

<span data-ttu-id="bcbf2-105">[Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="bcbf2-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="bcbf2-106">ASP.NET 2.0 では、構成とインストルメンテーションに大きな変更が加えられています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-106">There are major changes in configuration and instrumentation in ASP.NET 2.0.</span></span> <span data-ttu-id="bcbf2-107">新しい ASP.NET configuration API では、構成の変更をプログラムで行うことができます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-107">The new ASP.NET configuration API allows for configuration changes to be made programmatically.</span></span> <span data-ttu-id="bcbf2-108">さらに、新しい構成設定の多くは、新しい構成とインストルメンテーションを可能にします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-108">In addition, many new configuration settings exist allow for new configurations and instrumentation.</span></span>

<span data-ttu-id="bcbf2-109">ASP.NET 2.0 では、構成とインストルメンテーションに大きな変更が加えられています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-109">There are major changes in configuration and instrumentation in ASP.NET 2.0.</span></span> <span data-ttu-id="bcbf2-110">新しい ASP.NET configuration API では、構成の変更をプログラムで行うことができます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-110">The new ASP.NET configuration API allows for configuration changes to be made programmatically.</span></span> <span data-ttu-id="bcbf2-111">さらに、新しい構成設定の多くは、新しい構成とインストルメンテーションを可能にします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-111">In addition, many new configuration settings exist allow for new configurations and instrumentation.</span></span>

<span data-ttu-id="bcbf2-112">このモジュールでは、ASP.NET 構成ファイルの読み取りと書き込みに関連する構成 API の ASP.NET について説明します。また、ASP.NET インストルメンテーションについても説明します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-112">In this module, we will discuss ASP.NET the configuration API as it relates to reading from and writing to ASP.NET configuration files, and we will also cover ASP.NET instrumentation.</span></span> <span data-ttu-id="bcbf2-113">また、ASP.NET tracing で利用できる新機能についても説明します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-113">We will also cover the new features available in ASP.NET tracing.</span></span>

## <a name="aspnet-configuration-api"></a><span data-ttu-id="bcbf2-114">ASP.NET 構成 API</span><span class="sxs-lookup"><span data-stu-id="bcbf2-114">ASP.NET Configuration API</span></span>

<span data-ttu-id="bcbf2-115">ASP.NET configuration API を使用すると、単一のプログラミングインターフェイスを使用して、アプリケーション構成データを開発、展開、および管理できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-115">The ASP.NET configuration API allows you to develop, deploy, and manage application configuration data by using a single programming interface.</span></span> <span data-ttu-id="bcbf2-116">構成 API を使用して、構成ファイル内の XML を直接編集せずに、完全な ASP.NET 構成をプログラムで開発および変更できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-116">You can use the configuration API to develop and modify complete ASP.NET configurations programmatically without directly editing the XML in the configuration files.</span></span> <span data-ttu-id="bcbf2-117">また、構成 API は、開発したコンソールアプリケーションやスクリプト、Web ベースの管理ツール、および Microsoft 管理コンソール (MMC) スナップインでも使用できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-117">In addition, you can use the configuration API in console applications and scripts that you develop, in Web-based management tools, and in Microsoft Management Console (MMC) snap-ins.</span></span>

<span data-ttu-id="bcbf2-118">次の2つの構成管理ツールは、構成 API を使用し、.NET Framework バージョン2.0 に含まれています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-118">The following two configuration-management tools use the configuration API and are included with the .NET Framework version 2.0:</span></span>

- <span data-ttu-id="bcbf2-119">ASP.NET MMC スナップイン。構成 API を使用して管理タスクを簡略化し、構成階層のすべてのレベルのローカル構成データを統合して表示します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-119">The ASP.NET MMC snap-in, which uses the configuration API to simplify administrative tasks, providing an integrated view of local configuration data from all levels of the configuration hierarchy.</span></span>
- <span data-ttu-id="bcbf2-120">Web サイト管理ツール。ホストされているサイトを含む、ローカルおよびリモートのアプリケーションの構成設定を管理できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-120">The Web Site Administration Tool, which allows you to manage configuration settings for local and remote applications, including hosted sites.</span></span>

<span data-ttu-id="bcbf2-121">ASP.NET configuration API は、Web サイトおよびアプリケーションをプログラムで構成するために使用できる一連の ASP.NET 管理オブジェクトで構成されています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-121">The ASP.NET configuration API comprises a set of ASP.NET management objects that you can use to configure Web sites and applications programmatically.</span></span> <span data-ttu-id="bcbf2-122">管理オブジェクトは、.NET Framework クラスライブラリとして実装されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-122">Management objects are implemented as a .NET Framework class library.</span></span> <span data-ttu-id="bcbf2-123">構成 API プログラミングモデルは、コンパイル時にデータ型を適用することによって、コードの一貫性と信頼性を確保するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-123">The configuration API programming model helps ensure code consistency and reliability by enforcing data types at compile time.</span></span> <span data-ttu-id="bcbf2-124">アプリケーションの構成を管理しやすくするために、構成 API を使用すると、異なるコレクションとしてデータを表示するのではなく、構成階層内のすべてのポイントから1つのコレクションとしてマージされたデータを表示することができます。構成ファイル。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-124">To make it easier to manage application configurations, the configuration API allows you to view data that is merged from all points in the configuration hierarchy as a single collection, instead of viewing the data as separate collections from different configuration files.</span></span> <span data-ttu-id="bcbf2-125">また、構成 API を使用すると、構成ファイル内の XML を直接編集することなく、アプリケーション構成全体を操作できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-125">Additionally, the configuration API enables you to manipulate entire application configurations without directly editing the XML in the configuration files.</span></span> <span data-ttu-id="bcbf2-126">最後に、API は、Web サイト管理ツールなどの管理ツールをサポートすることで、構成タスクを簡略化します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-126">Finally, the API simplifies configuration tasks by supporting administrative tools, such as the Web Site Administration Tool.</span></span> <span data-ttu-id="bcbf2-127">構成 API は、コンピューター上で構成ファイルを作成し、複数のコンピューター間で構成スクリプトを実行することで、展開を簡略化します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-127">The configuration API simplifies deployment by supporting the creation of configuration files on a computer and running configuration scripts across multiple computers.</span></span>

> [!NOTE]
> <span data-ttu-id="bcbf2-128">構成 API は、IIS アプリケーションの作成をサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-128">The configuration API does not support the creation of IIS applications.</span></span>

## <a name="working-with-local-and-remote-configuration-settings"></a><span data-ttu-id="bcbf2-129">ローカルおよびリモートの構成設定の操作</span><span class="sxs-lookup"><span data-stu-id="bcbf2-129">Working with Local and Remote Configuration Settings</span></span>

<span data-ttu-id="bcbf2-130">構成オブジェクトは、コンピューターなどの特定の物理エンティティ、またはアプリケーションや Web サイトなどの論理エンティティに適用される構成設定の結合されたビューを表します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-130">A Configuration object represents the merged view of the configuration settings that apply to a specific physical entity, such as a computer, or to a logical entity, such as an application or a Web site.</span></span> <span data-ttu-id="bcbf2-131">指定された論理エンティティは、ローカルコンピューターまたはリモートサーバー上に存在することができます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-131">The specified logical entity can exist on the local computer or on a remote server.</span></span> <span data-ttu-id="bcbf2-132">指定されたエンティティの構成ファイルが存在しない場合、構成オブジェクトは、machine.config ファイルで定義されている既定の構成設定を表します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-132">When no configuration file exists for a specified entity, the Configuration object represents the default configuration settings as defined by the Machine.config file.</span></span>

<span data-ttu-id="bcbf2-133">構成オブジェクトを取得するには、次のクラスのオープン構成メソッドのいずれかを使用します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-133">You can get a Configuration object by using one of the open configuration methods from the following classes:</span></span>

1. <span data-ttu-id="bcbf2-134">ConfigurationManager クラス (エンティティがクライアントアプリケーションの場合)。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-134">The ConfigurationManager class, if your entity is a client application.</span></span>
2. <span data-ttu-id="bcbf2-135">WebConfigurationManager クラス (エンティティが Web アプリケーションの場合)。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-135">The WebConfigurationManager class, if your entity is a Web application.</span></span>

<span data-ttu-id="bcbf2-136">これらのメソッドは、構成オブジェクトを返します。構成オブジェクトは、基になる構成ファイルを処理するために必要なメソッドとプロパティを提供します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-136">These methods will return a Configuration object, which in turn provides the required methods and properties to handle the underlying configuration files.</span></span> <span data-ttu-id="bcbf2-137">これらのファイルには、読み取りまたは書き込みのためにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-137">You can access these files for reading or writing.</span></span>

### <a name="reading"></a><span data-ttu-id="bcbf2-138">リード</span><span class="sxs-lookup"><span data-stu-id="bcbf2-138">Reading</span></span>

<span data-ttu-id="bcbf2-139">構成情報を読み取るには、GetSection または GetSectionGroup メソッドを使用します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-139">You use the GetSection or GetSectionGroup method to read configuration information.</span></span> <span data-ttu-id="bcbf2-140">読み取りを行うユーザーまたはプロセスは、階層内のすべての構成ファイルに対する読み取り権限を持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-140">The user or process that reads must have Read permissions on all of the configuration files in the hierarchy.</span></span>

> [!NOTE]
> <span data-ttu-id="bcbf2-141">Path パラメーターを受け取る静的 GetSection メソッドを使用する場合、path パラメーターは、コードが実行されているアプリケーションを参照する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-141">If you use a static GetSection method that takes a path parameter, the path parameter must refer to the application in which the code is running.</span></span> <span data-ttu-id="bcbf2-142">それ以外の場合、パラメーターは無視され、現在実行中のアプリケーションの構成情報が返されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-142">Otherwise, the parameter is ignored and the configuration information for the currently running application is returned.</span></span>

### <a name="writing"></a><span data-ttu-id="bcbf2-143">手書き</span><span class="sxs-lookup"><span data-stu-id="bcbf2-143">Writing</span></span>

<span data-ttu-id="bcbf2-144">Save メソッドのいずれかを使用して、構成情報を書き込みます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-144">You use one of the Save methods to write configuration information.</span></span> <span data-ttu-id="bcbf2-145">書き込みを行うユーザーまたはプロセスは、現在の構成階層レベルの構成ファイルおよびディレクトリに対する書き込みアクセス許可、および階層内のすべての構成ファイルに対する読み取りアクセス許可を持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-145">The user or process that writes must have Write permissions on the configuration file and directory at the current configuration hierarchy level, as well as Read permissions on all of the configuration files in the hierarchy.</span></span>

<span data-ttu-id="bcbf2-146">指定したエンティティの継承された構成設定を表す構成ファイルを生成するには、次のいずれかの保存構成方法を使用します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-146">To generate a configuration file that represents the inherited configuration settings for a specified entity, use one of the following save-configuration methods:</span></span>

1. <span data-ttu-id="bcbf2-147">新しい構成ファイルを作成するための Save メソッド。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-147">The Save method to create a new configuration file.</span></span>
2. <span data-ttu-id="bcbf2-148">別の場所に新しい構成ファイルを生成するための SaveAs メソッド。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-148">The SaveAs method to generate a new configuration file at another location.</span></span>

## <a name="configuration-classes-and-namespaces"></a><span data-ttu-id="bcbf2-149">構成クラスと名前空間</span><span class="sxs-lookup"><span data-stu-id="bcbf2-149">Configuration Classes and Namespaces</span></span>

<span data-ttu-id="bcbf2-150">多くの構成クラスとメソッドは相互に似ています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-150">Many configuration classes and methods are similar to each other.</span></span> <span data-ttu-id="bcbf2-151">次の表では、最も一般的に使用される構成クラスと名前空間について説明します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-151">The following table describes the most commonly used configuration classes and namespaces.</span></span>

| <span data-ttu-id="bcbf2-152">**構成クラスまたは名前空間**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-152">**Configuration class or namespace**</span></span> | <span data-ttu-id="bcbf2-153">**説明**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-153">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="bcbf2-154">[System. Configuration](https://msdn.microsoft.com/library/system.configuration.aspx)名前空間</span><span class="sxs-lookup"><span data-stu-id="bcbf2-154">[System.Configuration](https://msdn.microsoft.com/library/system.configuration.aspx) namespace</span></span> | <span data-ttu-id="bcbf2-155">すべての .NET Framework アプリケーションのメイン構成クラスが含まれています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-155">Contains the main configuration classes for all .NET Framework applications.</span></span> <span data-ttu-id="bcbf2-156">セクションハンドラークラスは、GetSection や GetSectionGroup などのメソッドからセクションの構成データを取得するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-156">Section handler classes are used to obtain configuration data for a section from methods, such as GetSection and GetSectionGroup.</span></span> <span data-ttu-id="bcbf2-157">これらの2つのメソッドは非静的です。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-157">These two methods are non-static.</span></span> |
| <span data-ttu-id="bcbf2-158">System. Configuration クラス</span><span class="sxs-lookup"><span data-stu-id="bcbf2-158">System.Configuration.Configuration class</span></span> | <span data-ttu-id="bcbf2-159">コンピューター、アプリケーション、Web ディレクトリ、またはその他のリソースの構成データのセットを表します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-159">Represents a set of configuration data for a computer, application, Web directory, or other resource.</span></span> <span data-ttu-id="bcbf2-160">このクラスには、構成設定を更新したり、セクションやセクショングループへの参照を取得したりするための、GetSection や GetSectionGroup などの便利なメソッドが含まれています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-160">This class contains useful methods, such as GetSection and GetSectionGroup, for updating configuration settings and obtaining references to sections and section groups.</span></span> <span data-ttu-id="bcbf2-161">このクラスは、WebConfigurationManager クラスと ConfigurationManager クラスのメソッドなど、デザイン時の構成データを取得するメソッドの戻り値の型として使用されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-161">This class is used as a return type for methods that obtain design-time configuration data, such as the methods of the WebConfigurationManager and ConfigurationManager classes.</span></span> |
| <span data-ttu-id="bcbf2-162">System.web. Configuration 名前空間</span><span class="sxs-lookup"><span data-stu-id="bcbf2-162">System.Web.Configuration namespace</span></span> | <span data-ttu-id="bcbf2-163">[ASP.NET 構成設定](https://msdn.microsoft.com/library/b5ysx397.aspx)で定義されている ASP.NET 構成セクションのセクションハンドラークラスが含まれています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-163">Contains the section handler classes for the ASP.NET configuration sections defined at [ASP.NET Configuration Settings](https://msdn.microsoft.com/library/b5ysx397.aspx).</span></span> <span data-ttu-id="bcbf2-164">セクションハンドラークラスは、GetSection や GetSectionGroup などのメソッドからセクションの構成データを取得するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-164">Section handler classes are used to obtain configuration data for a section from methods, such as GetSection and GetSectionGroup.</span></span> |
| <span data-ttu-id="bcbf2-165">System.Web.Configuration.WebConfigurationManager class</span><span class="sxs-lookup"><span data-stu-id="bcbf2-165">System.Web.Configuration.WebConfigurationManager class</span></span> | <span data-ttu-id="bcbf2-166">実行時およびデザイン時の構成設定への参照を取得するための便利なメソッドを提供します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-166">Provides useful methods for obtaining references to run-time and design-time configuration settings.</span></span> <span data-ttu-id="bcbf2-167">これらのメソッドは、戻り値の型として system.object クラスを使用します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-167">These methods use the System.Configuration.Configuration class as a return type.</span></span> <span data-ttu-id="bcbf2-168">このクラスの静的な GetSection メソッド、または ConfigurationManager クラスの非静的 GetSection メソッドを同じように使用できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-168">You can use the static GetSection method of this class or the non-static GetSection method of the System.Configuration.ConfigurationManager class interchangeably.</span></span> <span data-ttu-id="bcbf2-169">Web アプリケーション構成の場合は、ConfigurationManager クラスの代わりに WebConfigurationManager クラスを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-169">For Web application configurations, the System.Web.Configuration.WebConfigurationManager class is recommended instead of the System.Configuration.ConfigurationManager class.</span></span> |
| <span data-ttu-id="bcbf2-170">System.servicemodel[名前空間](https://msdn.microsoft.com/library/system.configuration.provider.aspx)</span><span class="sxs-lookup"><span data-stu-id="bcbf2-170">[System.Configuration.Provider](https://msdn.microsoft.com/library/system.configuration.provider.aspx) namespace</span></span> | <span data-ttu-id="bcbf2-171">構成プロバイダーをカスタマイズおよび拡張する方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-171">Provides a way to customize and extend the configuration provider.</span></span> <span data-ttu-id="bcbf2-172">これは、構成システム内のすべてのプロバイダークラスの基本クラスです。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-172">This is the base class for all provider classes in the configuration system.</span></span> |
| <span data-ttu-id="bcbf2-173">[System.web](https://msdn.microsoft.com/library/system.web.management.aspx)名前空間</span><span class="sxs-lookup"><span data-stu-id="bcbf2-173">[System.Web.Management](https://msdn.microsoft.com/library/system.web.management.aspx) namespace</span></span> | <span data-ttu-id="bcbf2-174">Web アプリケーションの正常性を管理および監視するためのクラスとインターフェイスが含まれています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-174">Contains classes and interfaces for managing and monitoring the health of Web applications.</span></span> <span data-ttu-id="bcbf2-175">厳密に言うと、この名前空間は、構成 API の一部とは見なされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-175">Strictly speaking, this namespace is not considered part of the configuration API.</span></span> <span data-ttu-id="bcbf2-176">たとえば、トレースとイベントの発生は、この名前空間のクラスによって行われます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-176">For example, tracing and event firing is accomplished by the classes in this namespace.</span></span> |
| <span data-ttu-id="bcbf2-177">System.servicemodel[名前空間](https://msdn.microsoft.com/library/system.management.instrumentation.aspx)</span><span class="sxs-lookup"><span data-stu-id="bcbf2-177">[System.Management.Instrumentation](https://msdn.microsoft.com/library/system.management.instrumentation.aspx) namespace</span></span> | <span data-ttu-id="bcbf2-178">アプリケーションのインストルメンテーションが Windows Management Instrumentation (WMI) を介して潜在的なコンシューマーに管理情報とイベントを公開するために必要なクラスを提供します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-178">Provides the classes necessary for the instrumentation of applications to expose their management information and events through Windows Management Instrumentation (WMI) to potential consumers.</span></span> <span data-ttu-id="bcbf2-179">ASP.NET の正常性の監視では、WMI を使用してイベントを配信します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-179">ASP.NET health monitoring uses WMI to deliver events.</span></span> <span data-ttu-id="bcbf2-180">厳密に言うと、この名前空間は、構成 API の一部とは見なされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-180">Strictly speaking, this namespace is not considered part of the configuration API.</span></span> |

## <a name="reading-from-aspnet-configuration-files"></a><span data-ttu-id="bcbf2-181">ASP.NET 構成ファイルからの読み取り</span><span class="sxs-lookup"><span data-stu-id="bcbf2-181">Reading from ASP.NET Configuration Files</span></span>

<span data-ttu-id="bcbf2-182">WebConfigurationManager クラスは、ASP.NET 構成ファイルから読み取るためのコアクラスです。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-182">The WebConfigurationManager class is the core class for reading from ASP.NET configuration files.</span></span> <span data-ttu-id="bcbf2-183">ASP.NET 構成ファイルを読み取るには、基本的に次の3つの手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-183">There are essentially three steps to reading ASP.NET configuration files:</span></span>

1. <span data-ttu-id="bcbf2-184">OpenWebConfiguration メソッドを使用して構成オブジェクトを取得します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-184">Get a Configuration object using the OpenWebConfiguration method.</span></span>
2. <span data-ttu-id="bcbf2-185">構成ファイルの目的のセクションへの参照を取得します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-185">Get a reference to the desired section in the configuration file.</span></span>
3. <span data-ttu-id="bcbf2-186">構成ファイルから必要な情報を読み取ります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-186">Read the desired information from the configuration file.</span></span>

<span data-ttu-id="bcbf2-187">構成オブジェクトは、が特定の構成ファイルを表していないことを表します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-187">The Configuration object represents does not represent a particular configuration file.</span></span> <span data-ttu-id="bcbf2-188">代わりに、コンピューター、アプリケーション、または Web サイトの構成の結合されたビューを表します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-188">Instead, it represents a merged view of the configuration of a computer, application, or Web site.</span></span> <span data-ttu-id="bcbf2-189">次のコードサンプルでは、 *Productinfo*という名前の Web アプリケーションの構成を表す構成オブジェクトをインスタンス化します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-189">The following code sample instantiates a Configuration object representing the configuration of a Web application called *ProductInfo*.</span></span>

[!code-csharp[Main](configuration-and-instrumentation/samples/sample1.cs)]

> [!NOTE]
> <span data-ttu-id="bcbf2-190">/Productinfo パスが存在しない場合、上記のコードは machine.config ファイルで指定されている既定の構成を返します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-190">Note that if the /ProductInfo path doesn't exist, the above code will return the default configuration as specified in the machine.config file.</span></span>

<span data-ttu-id="bcbf2-191">構成オブジェクトを作成したら、GetSection または GetSectionGroup メソッドを使用して構成設定をドリルダウンできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-191">Once you have the Configuration object, you can then use the GetSection or GetSectionGroup method to drill into the configuration settings.</span></span> <span data-ttu-id="bcbf2-192">次の例では、上記の ProductInfo アプリケーションの権限借用設定への参照を取得します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-192">The following example gets a reference to the impersonation settings for the above ProductInfo application:</span></span>

[!code-csharp[Main](configuration-and-instrumentation/samples/sample2.cs)]

## <a name="writing-to-aspnet-configuration-files"></a><span data-ttu-id="bcbf2-193">ASP.NET 構成ファイルへの書き込み</span><span class="sxs-lookup"><span data-stu-id="bcbf2-193">Writing to ASP.NET Configuration Files</span></span>

<span data-ttu-id="bcbf2-194">構成ファイルの読み取りと同様に、WebConfigurationManager クラスは Asp.NET 構成ファイルへの書き込みのためのコアです。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-194">As in reading from configuration files, the WebConfigurationManager class is the core for writing to Asp.NET configuration files.</span></span> <span data-ttu-id="bcbf2-195">また、ASP.NET 構成ファイルに書き込む3つの手順もあります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-195">There are also three steps to writing to ASP.NET configuration files.</span></span>

1. <span data-ttu-id="bcbf2-196">OpenWebConfiguration メソッドを使用して構成オブジェクトを取得します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-196">Get a Configuration object using the OpenWebConfiguration method.</span></span>
2. <span data-ttu-id="bcbf2-197">構成ファイルの目的のセクションへの参照を取得します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-197">Get a reference to the desired section in the configuration file.</span></span>
3. <span data-ttu-id="bcbf2-198">Save または SaveAs メソッドを使用して、構成ファイルから必要な情報を書き込みます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-198">Write the desired information from the configuration file using the Save or SaveAs method.</span></span>

<span data-ttu-id="bcbf2-199">次のコードでは、&lt;のコンパイル&gt; 要素の**debug**属性を false に変更します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-199">The following code changes the **debug** attribute of the &lt;compilation&gt; element to false:</span></span>

[!code-csharp[Main](configuration-and-instrumentation/samples/sample3.cs)]

<span data-ttu-id="bcbf2-200">このコードが実行されると、 *webApp*アプリケーションの web.config ファイルに対して、&lt;のコンパイル&gt; 要素の**debug**属性が false に設定されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-200">When this code is executed, the **debug** attribute of the &lt;compilation&gt; element will be set to false for the *webApp* application's web.config file.</span></span>

## <a name="systemwebmanagement-namespace"></a><span data-ttu-id="bcbf2-201">System.web 名前空間</span><span class="sxs-lookup"><span data-stu-id="bcbf2-201">System.Web.Management Namespace</span></span>

<span data-ttu-id="bcbf2-202">ASP.NET 名前空間には、アプリケーションの正常性を管理および監視するためのクラスとインターフェイスが用意されています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-202">The System.Web.Management namespace provides the classes and interfaces for managing and monitoring the health of ASP.NET applications.</span></span>

<span data-ttu-id="bcbf2-203">ログ記録を行うには、イベントをプロバイダーに関連付けるルールを定義します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-203">Logging is accomplished by defining a rule that associates events with a provider.</span></span> <span data-ttu-id="bcbf2-204">このルールは、プロバイダーに送信されるイベントの種類を定義します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-204">The rule defines the type of events that are sent to the provider.</span></span> <span data-ttu-id="bcbf2-205">次の基本イベントをログに記録できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-205">The following base events are available for you to log:</span></span>

| <span data-ttu-id="bcbf2-206">**WebBaseEvent**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-206">**WebBaseEvent**</span></span> | <span data-ttu-id="bcbf2-207">すべてのイベントの基本イベントクラス。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-207">The base event class for all events.</span></span> <span data-ttu-id="bcbf2-208">イベントコード、イベントの詳細コード、イベントが発生した日付と時刻、シーケンス番号、イベントメッセージ、イベントの詳細など、すべてのイベントに必要なプロパティが含まれています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-208">Contains the required properties for all events such as event code, event detail code, the date and time the event was raised, sequence number, the event message, and event details.</span></span> |
| --- | --- |
| <span data-ttu-id="bcbf2-209">**WebManagementEvent**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-209">**WebManagementEvent**</span></span> | <span data-ttu-id="bcbf2-210">アプリケーションの有効期間、要求、エラー、監査イベントなどの管理イベントの基本イベントクラス。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-210">The base event class for management events, such as application lifetime, request, error, and audit events.</span></span> |
| <span data-ttu-id="bcbf2-211">**WebHeartbeatEvent**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-211">**WebHeartbeatEvent**</span></span> | <span data-ttu-id="bcbf2-212">有効なランタイム状態情報をキャプチャするために、アプリケーションによって定期的に生成されるイベント。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-212">The event generated by the application in regular intervals to capture useful runtime state information.</span></span> |
| <span data-ttu-id="bcbf2-213">**WebAuditEvent**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-213">**WebAuditEvent**</span></span> | <span data-ttu-id="bcbf2-214">セキュリティ監査イベントの基本クラス。承認エラー、復号化エラーなどの条件をマークするために使用され*ます。*</span><span class="sxs-lookup"><span data-stu-id="bcbf2-214">The base class for security audit events, which are used to mark conditions such as authorization failure, decryption failure, *etc.*</span></span> |
| <span data-ttu-id="bcbf2-215">**WebRequestEvent**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-215">**WebRequestEvent**</span></span> | <span data-ttu-id="bcbf2-216">すべての情報要求イベントの基本クラス。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-216">The base class for all informational request events.</span></span> |
| <span data-ttu-id="bcbf2-217">**WebBaseErrorEvent**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-217">**WebBaseErrorEvent**</span></span> | <span data-ttu-id="bcbf2-218">エラー状態を示すすべてのイベントの基本クラス。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-218">The base class for all events indicating error conditions.</span></span> |

<span data-ttu-id="bcbf2-219">使用可能なプロバイダーの種類により、イベント出力をイベントビューアー、SQL Server、Windows Management Instrumentation (WMI)、および電子メールに送信できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-219">The types of providers available allow you to send event output to Event Viewer, SQL Server, Windows Management Instrumentation (WMI), and email.</span></span> <span data-ttu-id="bcbf2-220">事前構成済みのプロバイダーとイベントマッピングによって、イベント出力を記録するために必要な作業量が削減されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-220">The pre-configured providers and event mappings reduce the amount of work necessary to get event output logged.</span></span>

<span data-ttu-id="bcbf2-221">ASP.NET 2.0 では、イベントログプロバイダーをすぐに使用して、アプリケーションドメインの開始と停止に基づくイベントをログに記録し、未処理の例外をログに記録します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-221">ASP.NET 2.0 uses the Event Log provider out-of-the-box to log events based on application domains starting and stopping, as well as logging any unhandled exceptions.</span></span> <span data-ttu-id="bcbf2-222">これは、いくつかの基本的なシナリオに対応するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-222">This helps to cover some of the basic scenarios.</span></span> <span data-ttu-id="bcbf2-223">たとえば、アプリケーションで例外がスローされても、ユーザーがエラーを保存せず、再現できないとします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-223">For example, let's say that your application throws an exception, but the user doesn't save the error and you can't reproduce it.</span></span> <span data-ttu-id="bcbf2-224">既定のイベントログルールでは、例外とスタック情報を収集して、発生したエラーの種類をより正確に把握することができます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-224">With the default Event Log rule, you would be able to gather the exception and stack information to get a better idea of what kind of error occurred.</span></span> <span data-ttu-id="bcbf2-225">もう1つの例は、アプリケーションがセッション状態を失う場合に適用されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-225">Another example applies if your application is losing session state.</span></span> <span data-ttu-id="bcbf2-226">その場合は、イベントログを調べて、アプリケーションドメインがリサイクルされているかどうかと、アプリケーションドメインが最初に停止した理由を確認します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-226">In that case, you can look in the Event Log to determine whether the application domain is recycling, and why the application domain stopped in the first place.</span></span>

<span data-ttu-id="bcbf2-227">また、正常性監視システムは拡張可能です。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-227">Also, the health monitoring system is extensible.</span></span> <span data-ttu-id="bcbf2-228">たとえば、カスタム Web イベントを定義してアプリケーション内で起動し、電子メールなどのイベント情報をプロバイダーに送信するルールを定義できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-228">For example, you can define custom Web events, fire them within your application, and then define a rule to send the event information to a provider such as your email.</span></span> <span data-ttu-id="bcbf2-229">これにより、インストルメンテーションを正常性監視プロバイダーに簡単に結び付けることができます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-229">This allows you to easily tie your instrumentation to the health monitoring providers.</span></span> <span data-ttu-id="bcbf2-230">別の例として、注文が処理されるたびにイベントを発生させ、各イベントを SQL Server データベースに送信するルールを設定することもできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-230">As another example, you could fire an event each time an order is processed and set up a rule that sends each event to the SQL Server database.</span></span> <span data-ttu-id="bcbf2-231">また、ユーザーが行で複数回ログオンに失敗した場合にイベントを発生させ、電子メールベースのプロバイダーを使用するようにイベントを設定することもできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-231">You could also fire an event when a user fails to log on multiple times in a row, and set up the event to use the email-based providers.</span></span>

<span data-ttu-id="bcbf2-232">既定のプロバイダーとイベントの構成は、グローバルな web.config ファイルに格納されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-232">The configuration for the default providers and events is stored in the global Web.config file.</span></span> <span data-ttu-id="bcbf2-233">グローバルな web.config ファイルには、machine.config ファイルに格納されていたすべての Web ベースの設定が ASP.NET 1x で格納されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-233">The global Web.config file stores all the Web-based settings that were stored in the Machine.config file in ASP.NET 1x.</span></span> <span data-ttu-id="bcbf2-234">グローバルな Web.config ファイルは、次のディレクトリにあります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-234">The global Web.config file is located in the following directory:</span></span>

`%windir%\Microsoft.Net\Framework\v2.0.*\config\Web.config`

<span data-ttu-id="bcbf2-235">グローバル Web.config ファイルの &lt;healthMonitoring&gt; セクションには、既定の構成設定が用意されています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-235">The &lt;healthMonitoring&gt; section of the global Web.config file provides default configuration settings.</span></span> <span data-ttu-id="bcbf2-236">アプリケーションの web.config ファイルの &lt;healthMonitoring&gt; セクションを実装することで、これらの設定をオーバーライドしたり、独自の設定を構成したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-236">You can override these setting or configure your own settings by implementing the &lt;healthMonitoring&gt; section in the Web.config file for your application.</span></span>

<span data-ttu-id="bcbf2-237">グローバル Web.config ファイルの &lt;healthMonitoring&gt; セクションには、次の項目が含まれています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-237">The &lt;healthMonitoring&gt; section of the global Web.config file contains the following items:</span></span>

| <span data-ttu-id="bcbf2-238">**providers**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-238">**providers**</span></span> | <span data-ttu-id="bcbf2-239">イベントビューアー、WMI、および SQL Server 用に設定されたプロバイダーが含まれます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-239">Contains providers set up for the Event Viewer, WMI, and SQL Server.</span></span> |
| --- | --- |
| <span data-ttu-id="bcbf2-240">**eventMappings**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-240">**eventMappings**</span></span> | <span data-ttu-id="bcbf2-241">さまざまな WebBase クラスのマッピングが含まれています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-241">Contains mappings for the various WebBase classes.</span></span> <span data-ttu-id="bcbf2-242">独自のイベントクラスを生成する場合は、このリストを拡張できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-242">You can extend this list if you generate your own event class.</span></span> <span data-ttu-id="bcbf2-243">独自のイベントクラスを生成することにより、情報を送信するプロバイダーの粒度が細かくなります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-243">Generating your own event class gives you finer granularity over the providers you send information to.</span></span> <span data-ttu-id="bcbf2-244">たとえば、未処理の例外を SQL Server に送信するように構成し、独自のカスタムイベントを電子メールに送信することができます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-244">For example, you could configure unhandled exceptions to be sent to SQL Server, while sending your own custom events to email.</span></span> |
| <span data-ttu-id="bcbf2-245">**ロジック**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-245">**rules**</span></span> | <span data-ttu-id="bcbf2-246">EventMappings をプロバイダーにリンクします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-246">Links the eventMappings to the provider.</span></span> |
| <span data-ttu-id="bcbf2-247">**ング**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-247">**buffering**</span></span> | <span data-ttu-id="bcbf2-248">SQL Server および電子メールプロバイダーと共に使用して、イベントをプロバイダーにフラッシュする頻度を決定します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-248">Used with SQL Server and email providers to determine how often to flush the events to the provider.</span></span> |

<span data-ttu-id="bcbf2-249">グローバルな web.config ファイルのコード例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-249">Below is a code example from the global Web.config file.</span></span>

[!code-xml[Main](configuration-and-instrumentation/samples/sample4.xml)]

## <a name="how-to-store-events-to-event-viewer"></a><span data-ttu-id="bcbf2-250">イベントをイベントビューアーに格納する方法</span><span class="sxs-lookup"><span data-stu-id="bcbf2-250">How to store events to Event Viewer</span></span>

<span data-ttu-id="bcbf2-251">既に説明したように、イベントビューアーのイベントをログに記録するためのプロバイダーは、グローバルな web.config ファイルで構成されています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-251">As mentioned earlier, the provider for logging events in the Event Viewer is configured for you in the global Web.config file.</span></span> <span data-ttu-id="bcbf2-252">既定では、 **Webbaseerrorevent**と**webbaseerrorevent**に基づくすべてのイベントがログに記録されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-252">By default, all events based on **WebBaseErrorEvent** and **WebFailureAuditEvent** are logged.</span></span> <span data-ttu-id="bcbf2-253">追加のルールを追加して、イベントログに追加情報を記録することができます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-253">You can add additional rules to log additional information to the Event Log.</span></span> <span data-ttu-id="bcbf2-254">たとえば、すべてのイベント (*つまり*、 **WebBaseEvent**に基づくすべてのイベント) をログに記録する場合は、次の規則を web.config ファイルに追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-254">For example, if you wanted to log all events (*i.e.*, every event based on **WebBaseEvent**), you could add the following rule to your Web.config file:</span></span>

[!code-xml[Main](configuration-and-instrumentation/samples/sample5.xml)]

<span data-ttu-id="bcbf2-255">このルールにより、**すべて**のイベントのイベントマップがイベントログプロバイダーにリンクされます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-255">This rule would link the **All Events** event map to the Event Log provider.</span></span> <span data-ttu-id="bcbf2-256">EventMapping とプロバイダーの両方がグローバル Web.config ファイルに含まれています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-256">Both eventMapping and the provider are included in the global Web.config file.</span></span>

## <a name="how-to-store-events-to-sql-server"></a><span data-ttu-id="bcbf2-257">イベントを SQL Server に格納する方法</span><span class="sxs-lookup"><span data-stu-id="bcbf2-257">How to store events to SQL Server</span></span>

<span data-ttu-id="bcbf2-258">このメソッドは、 **aspnetdb.mdf**データベースを使用します。これは、Aspnet\_regsql .exe ツールによって生成されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-258">This method uses the **ASPNETDB** database, which is generated by the Aspnet\_regsql.exe tool.</span></span> <span data-ttu-id="bcbf2-259">既定のプロバイダーは、LocalSqlServer 接続文字列を使用します。これは、App\_data フォルダー内のファイルベースのデータベースまたは SQL Server のローカル SQLExpress インスタンスのいずれかを使用します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-259">The default provider uses the LocalSqlServer connection string, which uses either a file-based database in the App\_data folder or the local SQLExpress instance of SQL Server.</span></span> <span data-ttu-id="bcbf2-260">LocalSqlServer 接続文字列と SqlProvider は両方とも、グローバル Web.config ファイルで構成されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-260">Both the LocalSqlServer connection string and the SqlProvider are configured in the global Web.config file.</span></span>

<span data-ttu-id="bcbf2-261">グローバルな Web.config ファイル内の LocalSqlServer 接続文字列は、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-261">The LocalSqlServer connection string in the global Web.config file looks like this:</span></span>

[!code-xml[Main](configuration-and-instrumentation/samples/sample6.xml)]

<span data-ttu-id="bcbf2-262">別の SQL Server インスタンスを使用する場合は、Aspnet\_regsql ツールを使用する必要があります。これは、%windir%\Microsoft.Net\Framework\v2.0. にあります。\* フォルダー。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-262">If you want to use another SQL Server instance, you'll need to use the Aspnet\_regsql.exe tool, which can be found in the %windir%\Microsoft.Net\Framework\v2.0.\* folder.</span></span> <span data-ttu-id="bcbf2-263">Aspnet\_regsql .exe ツールを使用して SQL Server インスタンスでカスタム**aspnetdb.mdf**データベースを生成し、アプリケーション構成ファイルに接続文字列を追加して、新しい接続文字列を使用してプロバイダーを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-263">Use the Aspnet\_regsql.exe tool to generate a custom **ASPNETDB** database on the SQL Server instance, then add the connection string to your applications configuration file, and then add a provider by using the new connection string.</span></span> <span data-ttu-id="bcbf2-264">**Aspnetdb.mdf**データベースを作成したら、Eventmapping を sqlprovider にリンクするルールを設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-264">Once you have the **ASPNETDB** database created, you'll need to set a rule to link an eventMapping to the sqlProvider.</span></span>

<span data-ttu-id="bcbf2-265">既定の SqlProvider を使用するか、独自のプロバイダーを構成するかにかかわらず、プロバイダーとイベントマップをリンクするルールを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-265">Whether you use the default SqlProvider or configure your own provider, you'll need to add a rule linking the provider with an event map.</span></span> <span data-ttu-id="bcbf2-266">次の規則は、上記で作成した新しいプロバイダーを、**すべてのイベント**のイベントマップにリンクします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-266">The following rule links the new provider that you created above to the **All Events** event map.</span></span> <span data-ttu-id="bcbf2-267">このルールは、 **WebBaseEvent**に基づいてすべてのイベントをログに記録し、MYASPNETDB 接続文字列を使用する MySqlWebEventProvider に送信します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-267">This rule will log all the events based on **WebBaseEvent** and send them to the MySqlWebEventProvider that will use the MYASPNETDB connection string.</span></span> <span data-ttu-id="bcbf2-268">次のコードは、プロバイダーをイベントマップにリンクするルールを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-268">The following code adds a rule to link the provider with an event map:</span></span>

[!code-xml[Main](configuration-and-instrumentation/samples/sample7.xml)]

<span data-ttu-id="bcbf2-269">SQL Server にのみエラーを送信する場合は、次の規則を追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-269">If you wanted to only send errors to SQL Server, you could add the following rule:</span></span>

[!code-xml[Main](configuration-and-instrumentation/samples/sample8.xml)]

## <a name="how-to-forward-events-to-wmi"></a><span data-ttu-id="bcbf2-270">WMI にイベントを転送する方法</span><span class="sxs-lookup"><span data-stu-id="bcbf2-270">How to forward events to WMI</span></span>

<span data-ttu-id="bcbf2-271">また、イベントを WMI に転送することもできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-271">You can also forward the events to WMI.</span></span> <span data-ttu-id="bcbf2-272">既定では、WMI プロバイダーはグローバル web.config ファイルで構成されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-272">The WMI provider is configured for you in the global Web.config file by default.</span></span>

<span data-ttu-id="bcbf2-273">次のコード例では、イベントを WMI に転送するルールを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-273">The following code example adds a rule to forward the events to WMI:</span></span>

[!code-xml[Main](configuration-and-instrumentation/samples/sample9.xml)]

<span data-ttu-id="bcbf2-274">EventMapping をプロバイダに関連付けるルールを追加し、イベントをリッスンする WMI リスナアプリケーションを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-274">You will need to add a rule to associate an eventMapping to the provider, and also a WMI listener application to listen for the events.</span></span> <span data-ttu-id="bcbf2-275">次のコード例では、WMI プロバイダーを**すべてのイベント**のイベントマップにリンクする規則を追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-275">The following code example adds a rule to link the WMI provider to the **All Events** event map:</span></span>

[!code-xml[Main](configuration-and-instrumentation/samples/sample10.xml)]

## <a name="how-to-forward-events-to-email"></a><span data-ttu-id="bcbf2-276">イベントを電子メールに転送する方法</span><span class="sxs-lookup"><span data-stu-id="bcbf2-276">How to forward events to email</span></span>

<span data-ttu-id="bcbf2-277">また、イベントを電子メールに転送することもできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-277">You can also forward events to email.</span></span> <span data-ttu-id="bcbf2-278">電子メールプロバイダーにマップするイベントルールに注意してください。 SQL Server やイベントログにより適した大量の情報を誤って送信する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-278">Be careful about which event rules you map to your email provider, as you can unintentionally send yourself a lot of information that may be better suited for SQL Server or the Event Log.</span></span> <span data-ttu-id="bcbf2-279">電子メールプロバイダーは2つあります。SimpleMailWebEventProvider と TemplatedMailWebEventProvider。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-279">There are two email providers; SimpleMailWebEventProvider and TemplatedMailWebEventProvider.</span></span> <span data-ttu-id="bcbf2-280">それぞれの構成属性は同じですが、"template" 属性と "detailedTemplateErrors" 属性を除いて、どちらも TemplatedMailWebEventProvider でのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-280">Each has the same configuration attributes, with the exception of the "template" and "detailedTemplateErrors" attributes, both of which are only available on the TemplatedMailWebEventProvider.</span></span>

> [!NOTE]
> <span data-ttu-id="bcbf2-281">これらの電子メールプロバイダーはいずれも構成されていません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-281">Neither of these email providers is configured for you.</span></span> <span data-ttu-id="bcbf2-282">これらのファイルは、web.config ファイルに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-282">You'll need to add them to your Web.config file.</span></span>

<span data-ttu-id="bcbf2-283">これら2つの電子メールプロバイダーの主な違いは、SimpleMailWebEventProvider が、変更できない汎用テンプレートに電子メールを送信することです。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-283">The main difference between these two email providers is that SimpleMailWebEventProvider sends emails in a generic template that cannot be modified.</span></span> <span data-ttu-id="bcbf2-284">サンプルの web.config ファイルは、次の規則を使用して、構成されたプロバイダーの一覧にこの電子メールプロバイダーを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-284">The sample Web.config file adds this email provider to the list of configured providers by using the following rule:</span></span>

[!code-xml[Main](configuration-and-instrumentation/samples/sample11.xml)]

<span data-ttu-id="bcbf2-285">次の規則は、電子メールプロバイダーを**すべてのイベント**のイベントマップに関連付けるためにも追加されています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-285">The following rule is also added to tie the email provider to the **All Events** event map:</span></span>

[!code-xml[Main](configuration-and-instrumentation/samples/sample12.xml)]

## <a name="aspnet-20-tracing"></a><span data-ttu-id="bcbf2-286">ASP.NET 2.0 トレース</span><span class="sxs-lookup"><span data-stu-id="bcbf2-286">ASP.NET 2.0 Tracing</span></span>

<span data-ttu-id="bcbf2-287">ASP.NET 2.0 でのトレースには、主に3つの拡張機能があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-287">There are three major enhancements to tracing in ASP.NET 2.0.</span></span>

1. <span data-ttu-id="bcbf2-288">統合トレース機能</span><span class="sxs-lookup"><span data-stu-id="bcbf2-288">Integrated tracing functionality</span></span>
2. <span data-ttu-id="bcbf2-289">プログラムによるトレースメッセージへのアクセス</span><span class="sxs-lookup"><span data-stu-id="bcbf2-289">Programmatic access to trace messages</span></span>
3. <span data-ttu-id="bcbf2-290">改善されたアプリケーションレベルのトレース</span><span class="sxs-lookup"><span data-stu-id="bcbf2-290">Improved application-level tracing</span></span>

## <a name="integrated-tracing-functionality"></a><span data-ttu-id="bcbf2-291">統合トレース機能</span><span class="sxs-lookup"><span data-stu-id="bcbf2-291">Integrated Tracing Functionality</span></span>

<span data-ttu-id="bcbf2-292">これで、ASP.NET クラスによって出力されたメッセージを、トレース出力にルーティングし、ASP.NET トレースによって生成されたメッセージをにルーティングできるようになりました。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-292">You can now route messages emitted by the System.Diagnostics.Trace class to ASP.NET tracing output, and route messages emitted by ASP.NET tracing to System.Diagnostics.Trace.</span></span> <span data-ttu-id="bcbf2-293">ASP.NET インストルメンテーションイベントをトレースに転送することもできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-293">You can also forward ASP.NET instrumentation events to System.Diagnostics.Trace.</span></span> <span data-ttu-id="bcbf2-294">この機能は、&lt;trace&gt; 要素の new **writeToDiagnosticsTrace**属性によって提供されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-294">This functionality is provided by the new **writeToDiagnosticsTrace** attribute of the &lt;trace&gt; element.</span></span> <span data-ttu-id="bcbf2-295">このブール値が true の場合、ASP.NET トレースメッセージは、トレースメッセージを表示するように登録されているリスナーによって使用されるように、システム診断トレースインフラストラクチャに転送されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-295">When this Boolean value is true, ASP.NET Trace messages are forwarded to the System.Diagnostics tracing infrastructure for use by any listeners that are registered to display Trace messages.</span></span>

## <a name="programmatic-access-to-trace-messages"></a><span data-ttu-id="bcbf2-296">プログラムによるトレースメッセージへのアクセス</span><span class="sxs-lookup"><span data-stu-id="bcbf2-296">Programmatic Access to Trace Messages</span></span>

<span data-ttu-id="bcbf2-297">ASP.NET 2.0 では、 **TraceContextRecord**クラスと**TraceRecords** collection を介して、すべてのトレースメッセージにプログラムでアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-297">ASP.NET 2.0 allows for programmatic access to all trace messages via the **TraceContextRecord** class and the **TraceRecords** collection.</span></span> <span data-ttu-id="bcbf2-298">トレースメッセージにアクセスする最も効率的な方法は、 **TraceContextEventHandler**デリゲート (ASP.NET 2.0 の新機能) を登録して、新しい**tracefinished**イベントを処理することです。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-298">The most efficient way of accessing trace messages is to register a **TraceContextEventHandler** delegate (also new in ASP.NET 2.0) to handle the new **TraceFinished** event.</span></span> <span data-ttu-id="bcbf2-299">その後、必要に応じてトレースメッセージをループ処理できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-299">You can then loop through the trace messages as you wish.</span></span>

<span data-ttu-id="bcbf2-300">次のコードサンプルはこれを示しています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-300">The following code sample illustrates this:</span></span>

[!code-csharp[Main](configuration-and-instrumentation/samples/sample13.cs)]

<span data-ttu-id="bcbf2-301">上の例では、TraceRecords コレクションをループ処理し、各メッセージを応答ストリームに書き込みます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-301">In the above example, I loop through the TraceRecords collection and then write each message to the Response stream.</span></span>

## <a name="improved-application-level-tracing"></a><span data-ttu-id="bcbf2-302">改善されたアプリケーションレベルのトレース</span><span class="sxs-lookup"><span data-stu-id="bcbf2-302">Improved Application-Level Tracing</span></span>

<span data-ttu-id="bcbf2-303">アプリケーションレベルのトレースは、&lt;trace&gt; 要素**の新しい属性である新しい属性**の導入によって改善されています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-303">Application-level tracing is improved via the introduction of the new **mostRecent** attribute of the &lt;trace&gt; element.</span></span> <span data-ttu-id="bcbf2-304">この属性は、最新のアプリケーションレベルのトレース出力を表示するかどうかを指定します。また、requestLimit によって示される制限を超える古いトレースデータを破棄するかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-304">This attribute specifies whether the most recent application-level tracing output is displayed and older trace data beyond the limits that are indicated by the requestLimit are discarded.</span></span> <span data-ttu-id="bcbf2-305">False の場合、requestLimit 属性に到達するまで、要求に対してトレースデータが表示されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-305">If false, trace data are displayed for requests until the requestLimit attribute is reached.</span></span>

## <a name="aspnet-command-line-tools"></a><span data-ttu-id="bcbf2-306">ASP.NET コマンドラインツール</span><span class="sxs-lookup"><span data-stu-id="bcbf2-306">ASP.NET Command Line Tools</span></span>

<span data-ttu-id="bcbf2-307">ASP.NET の構成を支援するためのコマンドラインツールがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-307">There are several command-line tools to aid in configuration of ASP.NET.</span></span> <span data-ttu-id="bcbf2-308">ASP.NET の開発者は、aspnet\_iis 登録ツールツールについて理解している必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-308">ASP.NET developers should be familiar with the aspnet\_regiis.exe tool.</span></span> <span data-ttu-id="bcbf2-309">ASP.NET 2.0 には、構成に役立つ3つのコマンドラインツールが他にも用意されています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-309">ASP.NET 2.0 provides three other command-line tools to aid in configuration.</span></span>

<span data-ttu-id="bcbf2-310">次のコマンドラインツールを使用できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-310">The following command-line tools are available:</span></span>

| <span data-ttu-id="bcbf2-311">**ツール**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-311">**Tool**</span></span> | <span data-ttu-id="bcbf2-312">**用途**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-312">**Use**</span></span> |
| --- | --- |
| <span data-ttu-id="bcbf2-313">**aspnet\_iis 登録ツール**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-313">**aspnet\_regiis.exe**</span></span> | <span data-ttu-id="bcbf2-314">ASP.NET を IIS に登録できるようにします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-314">Allows for registration of ASP.NET with IIS.</span></span> <span data-ttu-id="bcbf2-315">このツールには、ASP.NET 2.0 に付属している2つのバージョンがあります。1つは32ビットシステム用 (フレームワークフォルダー内) で、もう1つは64ビットシステム用 (Framework64 フォルダーにあります) です。64ビットバージョンは32ビット OS にはインストールされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-315">There are two versions of this tools that ship with ASP.NET 2.0, one for 32-bit systems (in the Framework folder) and one for 64-bit systems (in the Framework64 folder.) The 64-bit version will not be installed on a 32-bit OS.</span></span> |
| <span data-ttu-id="bcbf2-316">**aspnet\_regsql .exe**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-316">**aspnet\_regsql.exe**</span></span> | <span data-ttu-id="bcbf2-317">ASP.NET SQL Server 登録ツールは、ASP.NET の SQL Server プロバイダーが使用する Microsoft SQL Server データベースを作成したり、既存のデータベースのオプションを追加または削除したりするために使用されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-317">The ASP.NET SQL Server Registration tool is used to create a Microsoft SQL Server database for use by the SQL Server providers in ASP.NET, or to add or remove options from an existing database.</span></span> <span data-ttu-id="bcbf2-318">Aspnet\_regsql .exe ファイルは、Web サーバーの [drive:] \WINDOWS\Microsoft.NET\Framework\versionNumber フォルダーにあります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-318">The Aspnet\_regsql.exe file is located in the [drive:]\WINDOWS\Microsoft.NET\Framework\versionNumber folder on your Web server.</span></span> |
| <span data-ttu-id="bcbf2-319">**aspnet\_regbrowsers .exe**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-319">**aspnet\_regbrowsers.exe**</span></span> | <span data-ttu-id="bcbf2-320">ASP.NET Browser 登録ツールは、すべてのシステム全体のブラウザー定義を解析してアセンブリにコンパイルし、アセンブリをグローバルアセンブリキャッシュにインストールします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-320">The ASP.NET Browser Registration tool parses and compiles all system-wide browser definitions into an assembly and installs the assembly into the global assembly cache.</span></span> <span data-ttu-id="bcbf2-321">このツールでは、ブラウザー定義ファイル () が使用されます。ブラウザーファイル) を .NET Framework BROWSER サブディレクトリからです。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-321">The tool uses the browser definition files (.BROWSER files) from the .NET Framework Browsers subdirectory.</span></span> <span data-ttu-id="bcbf2-322">このツールは、%SystemRoot%\Microsoft.NET\Framework\version\ ディレクトリにあります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-322">The tool can be found in the %SystemRoot%\Microsoft.NET\Framework\version\ directory.</span></span> |
| <span data-ttu-id="bcbf2-323">**aspnet\_コンパイラ .exe**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-323">**aspnet\_compiler.exe**</span></span> | <span data-ttu-id="bcbf2-324">ASP.NET コンパイルツールを使用すると、ASP.NET Web アプリケーションをその場で、または運用サーバーなどのターゲットの場所に配置するためにコンパイルできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-324">The ASP.NET Compilation tool enables you to compile an ASP.NET Web application, either in place or for deployment to a target location such as a production server.</span></span> <span data-ttu-id="bcbf2-325">アプリケーションのコンパイル中にアプリケーションへの最初の要求に対して遅延が発生することはないため、インプレースコンパイルはアプリケーションのパフォーマンスを向上させます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-325">In-place compilation helps application performance because end users do not encounter a delay on the first request to the application while the application is compiled.</span></span> |

<span data-ttu-id="bcbf2-326">Aspnet\_iis 登録ツールツールは ASP.NET 2.0 には新しいものではないため、ここでは説明しません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-326">Because the aspnet\_regiis.exe tool is not new to ASP.NET 2.0, we will not discuss it here.</span></span>

## <a name="aspnet-sql-server-registration-tool---aspnet_regsqlexe"></a><span data-ttu-id="bcbf2-327">ASP.NET SQL Server 登録ツール-aspnet\_regsql .exe</span><span class="sxs-lookup"><span data-stu-id="bcbf2-327">ASP.NET SQL Server Registration Tool - aspnet\_regsql.exe</span></span>

<span data-ttu-id="bcbf2-328">ASP.NET SQL Server 登録ツールを使用して、いくつかの種類のオプションを設定できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-328">You can set several types of options using the ASP.NET SQL Server Registration tool.</span></span> <span data-ttu-id="bcbf2-329">SQL 接続を指定したり、ASP.NET アプリケーションサービスで SQL Server 使用して情報を管理したり、SQL キャッシュ依存関係に使用するデータベースまたはテーブルを指定したり、SQL Server を使用してプロシージャとセッション状態を格納するためのサポートを追加または削除したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-329">You can specify a SQL connection, specify which ASP.NET application services use SQL Server to manage information, indicate which database or table is used for SQL cache dependency, and add or remove support for using SQL Server to store procedures and session state.</span></span>

<span data-ttu-id="bcbf2-330">いくつかの ASP.NET アプリケーションサービスは、データソースからのデータの格納と取得を管理するためにプロバイダーに依存しています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-330">Several ASP.NET application services rely on a provider to manage storing and retrieving data from a data source.</span></span> <span data-ttu-id="bcbf2-331">各プロバイダーは、データソースに固有のものです。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-331">Each provider is specific to the data source.</span></span> <span data-ttu-id="bcbf2-332">ASP.NET には、次の ASP.NET 機能用の SQL Server プロバイダーが含まれています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-332">ASP.NET includes a SQL Server provider for the following ASP.NET features:</span></span>

- <span data-ttu-id="bcbf2-333">メンバーシップ ( [SqlMembershipProvider](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx)クラス)。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-333">Membership (the [SqlMembershipProvider](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx) class).</span></span>
- <span data-ttu-id="bcbf2-334">ロール管理 ( [SqlRoleProvider](https://msdn.microsoft.com/library/system.web.security.sqlroleprovider.aspx)クラス)。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-334">Role Management (the [SqlRoleProvider](https://msdn.microsoft.com/library/system.web.security.sqlroleprovider.aspx) class).</span></span>
- <span data-ttu-id="bcbf2-335">プロファイル ( [Sqlprofileprovider](https://msdn.microsoft.com/library/system.web.profile.sqlprofileprovider.aspx)クラス)。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-335">Profile (the [SqlProfileProvider](https://msdn.microsoft.com/library/system.web.profile.sqlprofileprovider.aspx) class).</span></span>
- <span data-ttu-id="bcbf2-336">Web パーツパーソナル化 ( [sql、Izationprovider](https://msdn.microsoft.com/library/system.web.ui.webcontrols.webparts.sqlpersonalizationprovider.aspx)クラス)。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-336">Web Parts Personalization (the [SqlPersonalizationProvider](https://msdn.microsoft.com/library/system.web.ui.webcontrols.webparts.sqlpersonalizationprovider.aspx) class).</span></span>
- <span data-ttu-id="bcbf2-337">Web イベント ( [Sqlwebeventprovider](https://msdn.microsoft.com/library/system.web.management.sqlwebeventprovider.aspx)クラス)。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-337">Web Events (the [SqlWebEventProvider](https://msdn.microsoft.com/library/system.web.management.sqlwebeventprovider.aspx) class).</span></span>

<span data-ttu-id="bcbf2-338">ASP.NET をインストールすると、サーバーの machine.config ファイルには、プロバイダーに依存する各 ASP.NET 機能の SQL Server プロバイダーを指定する構成要素が含まれます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-338">When you install ASP.NET, the Machine.config file for your server includes configuration elements that specify SQL Server providers for each of the ASP.NET features that rely on a provider.</span></span> <span data-ttu-id="bcbf2-339">これらのプロバイダーは、既定で SQL Server Express 2005 のローカルユーザーインスタンスに接続するように構成されています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-339">These providers are configured, by default, to connect to a local user instance of SQL Server Express 2005.</span></span> <span data-ttu-id="bcbf2-340">プロバイダーによって使用される既定の接続文字列を変更した場合は、コンピューターの構成で構成されている ASP.NET 機能を使用する前に、Aspnet\_regsql を使用して、選択した機能の SQL Server データベースとデータベース要素をインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-340">If you change the default connection string used by the providers, then before you can use any of the ASP.NET features configured in the machine configuration, you must install the SQL Server database and the database elements for your chosen feature using Aspnet\_regsql.exe.</span></span> <span data-ttu-id="bcbf2-341">SQL 登録ツールで指定したデータベースがまだ存在しない場合 (コマンドラインで aspnetdb.mdf が指定されていない場合は既定のデータベースになります)、現在のユーザーには SQL Server でデータベースを作成する権限、およびスキーマ e を作成する権限が必要です。データベース内の lements。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-341">If the database that you specify with the SQL registration tool does not already exist (aspnetdb will be the default database if one is not specified on the command line), then the current user must have rights to create databases in SQL Server as well as to create schema elements within a database.</span></span>

### <a name="sql-cache-dependency"></a><span data-ttu-id="bcbf2-342">SQL キャッシュ依存関係</span><span class="sxs-lookup"><span data-stu-id="bcbf2-342">SQL Cache Dependency</span></span>

<span data-ttu-id="bcbf2-343">ASP.NET 出力キャッシュの高度な機能は、SQL キャッシュの依存関係です。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-343">An advanced feature of ASP.NET output caching is SQL cache dependency.</span></span> <span data-ttu-id="bcbf2-344">SQL キャッシュ依存関係では、2つの異なる操作モードがサポートされます。1つはテーブルポーリングの ASP.NET 実装を使用し、もう1つは SQL Server 2005 のクエリ通知機能を使用する2番目のモードです。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-344">SQL cache dependency supports two different modes of operation: one that uses an ASP.NET implementation of table polling and a second mode that uses the query notification features of SQL Server 2005.</span></span> <span data-ttu-id="bcbf2-345">SQL 登録ツールを使用すると、テーブルポーリングモードの操作を構成できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-345">The SQL registration tool can be used to configure the table-polling mode of operation.</span></span>

### <a name="session-state"></a><span data-ttu-id="bcbf2-346">セッションの状態</span><span class="sxs-lookup"><span data-stu-id="bcbf2-346">Session State</span></span>

<span data-ttu-id="bcbf2-347">既定では、セッション状態の値と情報は ASP.NET プロセス内のメモリに格納されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-347">By default, session state values and information are stored in memory within the ASP.NET process.</span></span> <span data-ttu-id="bcbf2-348">または、セッションデータを SQL Server データベースに格納して、複数の Web サーバーで共有できるようにすることもできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-348">Alternatively, you can store session data in a SQL Server database, where it can be shared by multiple Web servers.</span></span> <span data-ttu-id="bcbf2-349">SQL 登録ツールでセッション状態として指定したデータベースがまだ存在しない場合、現在のユーザーには SQL Server でデータベースを作成する権限、およびデータベース内にスキーマ要素を作成する権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-349">If the database that you specify for session state with the SQL registration tool does not already exist, then the current user must have rights to create databases in SQL Server as well as to create schema elements within a database.</span></span> <span data-ttu-id="bcbf2-350">データベースが存在する場合、現在のユーザーは、既存のデータベースにスキーマ要素を作成する権限を持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-350">If the database does exist, then the current user must have rights to create schema elements in the existing database.</span></span>

<span data-ttu-id="bcbf2-351">SQL Server にセッション状態データベースをインストールするには、Aspnet\_regsql ツールを実行し、コマンドに次の情報を指定します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-351">To install the session state database on SQL Server, run the Aspnet\_regsql.exe tool and supply the following information with the command:</span></span>

- <span data-ttu-id="bcbf2-352">**-S**オプションを使用して SQL Server インスタンスの名前。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-352">The name of the SQL Server instance, using the **-S** option.</span></span>
- <span data-ttu-id="bcbf2-353">SQL Server を実行しているコンピューターにデータベースを作成する権限を持つアカウントのログオン資格情報。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-353">The logon credentials for an account that has permission to create a database on a computer running SQL Server.</span></span> <span data-ttu-id="bcbf2-354">**-E**オプションを使用して、現在ログオンしているユーザーを使用するか、- **U**オプションを使用して **-P**オプションと共にユーザー ID を指定し、パスワードを指定します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-354">Use the **-E** option to use the currently logged-on user, or use the **-U** option to specify a user ID along with the **-P** option to specify a password.</span></span>
- <span data-ttu-id="bcbf2-355">セッション状態データベースを追加するには、 **-ssadd**コマンドラインオプションを指定します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-355">The **-ssadd** command-line option to add the session state database.</span></span>

<span data-ttu-id="bcbf2-356">既定では、Aspnet\_regsql .exe ツールを使用して、SQL Server 2005 Express Edition を実行しているコンピューターにセッション状態データベースをインストールすることはできません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-356">By default, you cannot use the Aspnet\_regsql.exe tool to install the session state database on a computer running SQL Server 2005 Express Edition.</span></span>

### <a name="the-aspnet-browser-registration-tool---aspnet_regbrowsersexe"></a><span data-ttu-id="bcbf2-357">ASP.NET ブラウザー登録ツール-aspnet\_regbrowsers .exe</span><span class="sxs-lookup"><span data-stu-id="bcbf2-357">The ASP.NET Browser Registration Tool - aspnet\_regbrowsers.exe</span></span>

<span data-ttu-id="bcbf2-358">ASP.NET バージョン1.1 では、machine.config ファイルに &lt;browserCaps&gt;という名前のセクションが含まれていました。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-358">In ASP.NET version 1.1, the Machine.config file contained a section called &lt;browserCaps&gt;.</span></span> <span data-ttu-id="bcbf2-359">このセクションには、正規表現に基づいてさまざまなブラウザーの構成を定義する一連の XML エントリが含まれていました。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-359">This section contained a series of XML entries that defined the configurations for various browsers based on a regular expression.</span></span> <span data-ttu-id="bcbf2-360">ASP.NET バージョン2.0 の場合は、新しいです。BROWSER ファイルは、XML エントリを使用して、特定のブラウザーのパラメーターを定義します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-360">For ASP.NET version 2.0, a new .BROWSER file defines the parameters of a particular browser using XML entries.</span></span> <span data-ttu-id="bcbf2-361">新しいブラウザーに情報を追加するには、新しいを追加します。ブラウザーファイルを、システムの%SystemRoot%\Microsoft.NET\Framework\version\CONFIG\Browsers にあるフォルダーに保存します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-361">You add information on a new browser by adding a new .BROWSER file to the folder located at %SystemRoot%\Microsoft.NET\Framework\version\CONFIG\Browsers on your system.</span></span>

<span data-ttu-id="bcbf2-362">ブラウザー情報が必要になるたびにアプリケーションが .config ファイルを読み取らないため、新しいを作成できます。ブラウザーファイルを実行し、Aspnet\_して、必要な変更をアセンブリに追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-362">Because an application is not reading a .config file every time it requires browser information, you can create a new .BROWSER file and run Aspnet\_regbrowsers.exe to add the required changes to the assembly.</span></span> <span data-ttu-id="bcbf2-363">これにより、サーバーは新しいブラウザー情報にすぐにアクセスできるようになり、情報を取得するためにアプリケーションをシャットダウンする必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-363">This allows the server to access the new browser information immediately so you do not have to shut down any of your applications to pick up the information.</span></span> <span data-ttu-id="bcbf2-364">アプリケーションは、現在の HttpRequest の Browser プロパティを使用してブラウザー機能にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-364">An application can access browser capabilities through the Browser property of the current HttpRequest.</span></span>

<span data-ttu-id="bcbf2-365">次のオプションは、aspnet\_実行するときに使用できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-365">The following options are available when running aspnet\_regbrowser.exe:</span></span>

| <span data-ttu-id="bcbf2-366">**オプション**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-366">**Option**</span></span> | <span data-ttu-id="bcbf2-367">**説明**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-367">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="bcbf2-368">**-?**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-368">**-?**</span></span> | <span data-ttu-id="bcbf2-369">コマンドウィンドウに、Aspnet\_regbbrowsers ヘルプテキストを表示します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-369">Displays the Aspnet\_regbbrowsers.exe Help text in the command window.</span></span> |
| <span data-ttu-id="bcbf2-370">**-i**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-370">**-i**</span></span> | <span data-ttu-id="bcbf2-371">ランタイムブラウザー機能アセンブリを作成し、グローバルアセンブリキャッシュにインストールします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-371">Creates the runtime browser capabilities assembly and installs it in the global assembly cache.</span></span> |
| <span data-ttu-id="bcbf2-372">**-u**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-372">**-u**</span></span> | <span data-ttu-id="bcbf2-373">グローバルアセンブリキャッシュからランタイムブラウザー機能アセンブリをアンインストールします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-373">Uninstalls the runtime browser capabilities assembly from the global assembly cache.</span></span> |

## <a name="the-aspnet-compilation-tool---aspnet_compilerexe"></a><span data-ttu-id="bcbf2-374">ASP.NET コンパイルツール-aspnet\_compiler .exe</span><span class="sxs-lookup"><span data-stu-id="bcbf2-374">The ASP.NET Compilation Tool - aspnet\_compiler.exe</span></span>

<span data-ttu-id="bcbf2-375">ASP.NET コンパイルツールは、次の2つの一般的な方法で使用できます。対象の出力ディレクトリが指定されている、配置のためのインプレースコンパイルとコンパイルです。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-375">The ASP.NET Compilation tool can be used in two general ways: for in-place compilation and compilation for deployment, where a target output directory is specified.</span></span>

### <a name="compiling-an-application-in-place"></a>[<span data-ttu-id="bcbf2-376">アプリケーションを適切にコンパイルする</span><span class="sxs-lookup"><span data-stu-id="bcbf2-376">Compiling an Application in Place</span></span>](https://msdn.microsoft.com/library/ms229863.aspx)

<span data-ttu-id="bcbf2-377">ASP.NET コンパイルツールは、アプリケーションを適切にコンパイルできます。つまり、アプリケーションに対して複数の要求を行う動作を模倣して、通常のコンパイルを発生させます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-377">The ASP.NET Compilation tool can compile an application in place, that is, it mimics the behavior of making multiple requests to the application, thus causing regular compilation.</span></span> <span data-ttu-id="bcbf2-378">事前にコンパイルされたサイトのユーザーには、最初の要求でページをコンパイルしても遅延が発生しません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-378">Users of a pre-compiled site will not experience a delay caused by compiling the page on first request.</span></span>

<span data-ttu-id="bcbf2-379">サイトをプリコンパイルする場合は、次の項目が適用されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-379">When you precompile a site in place, the following items apply:</span></span>

- <span data-ttu-id="bcbf2-380">サイトには、そのファイルとディレクトリ構造が保持されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-380">The site retains its files and directory structure.</span></span>
- <span data-ttu-id="bcbf2-381">サーバー上のサイトで使用されるすべてのプログラミング言語用のコンパイラが必要です。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-381">You must have compilers for all programming languages used by the site on the server.</span></span>
- <span data-ttu-id="bcbf2-382">いずれかのファイルのコンパイルに失敗した場合、サイト全体がコンパイルに失敗します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-382">If any file fails compilation, the entire site fails compilation.</span></span>

<span data-ttu-id="bcbf2-383">新しいソースファイルを追加した後で、アプリケーションを再コンパイルすることもできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-383">You can also recompile an application in place after adding new source files to it.</span></span> <span data-ttu-id="bcbf2-384">**-C**オプションを指定しない限り、ツールは、新しいファイルまたは変更されたファイルのみをコンパイルします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-384">The tool compiles only the new or changed files unless you include the **-c** option.</span></span>

> [!NOTE]
> <span data-ttu-id="bcbf2-385">入れ子になったアプリケーションを含むアプリケーションをコンパイルしても、入れ子になったアプリケーションはコンパイルされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-385">Compilation of an application that contains a nested application does not compile the nested application.</span></span> <span data-ttu-id="bcbf2-386">入れ子になったアプリケーションは、個別にコンパイルする必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-386">The nested application must be compiled separately.</span></span>

### <a name="compiling-an-application-for-deployment"></a>[<span data-ttu-id="bcbf2-387">配置のためのアプリケーションのコンパイル</span><span class="sxs-lookup"><span data-stu-id="bcbf2-387">Compiling an Application for Deployment</span></span>](https://msdn.microsoft.com/library/ms229863.aspx)

<span data-ttu-id="bcbf2-388">TargetDir パラメーターを指定して、配置用のアプリケーション (ターゲットの場所にコンパイル) をコンパイルします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-388">You compile an application for deployment (compilation to a target location) by specifying the targetDir parameter.</span></span> <span data-ttu-id="bcbf2-389">TargetDir は Web アプリケーションの最終的な場所にすることができます。または、コンパイル済みアプリケーションをさらにデプロイすることもできます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-389">The targetDir can be the final location for the Web application, or the compiled application can be further deployed.</span></span> <span data-ttu-id="bcbf2-390">**-U**オプションを使用すると、コンパイルされたアプリケーション内の特定のファイルを再コンパイルせずに変更できるように、アプリケーションがコンパイルされます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-390">Using the **-u** option compiles the application in such a way that you can make changes to certain files in the compiled application without recompiling it.</span></span> <span data-ttu-id="bcbf2-391">Aspnet\_は、静的ファイルと動的ファイルの種類を区別し、生成されたアプリケーションを作成するときに異なる方法で処理します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-391">Aspnet\_compiler.exe makes a distinction between static and dynamic file types, and handles them differently when creating the resulting application.</span></span>

- <span data-ttu-id="bcbf2-392">静的ファイルの種類とは、関連付けられたコンパイラやビルドプロバイダーを持たないファイルの種類のことです。たとえば、という名前のファイルには、.css、.gif、.htm、.html、.jpg、.js などの拡張子が付いています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-392">Static file types are those that do not have an associated compiler or build provider, such as files whose named have extensions such as .css, .gif, .htm, .html, .jpg, .js and so on.</span></span> <span data-ttu-id="bcbf2-393">これらのファイルは単にターゲットの場所にコピーされ、ディレクトリ構造内の相対的な位置が保持されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-393">These files are simply copied to the target location, with their relative places in the directory structure preserved.</span></span>
- <span data-ttu-id="bcbf2-394">動的ファイルの種類とは、コンパイラまたはビルドプロバイダーが関連付けられているファイルの種類です。これには、ASP.NET、.ascx、.ashx、.aspx、browser、.master などのファイル名拡張子が付いたファイルも含まれます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-394">Dynamic file types are those that have an associated compiler or build provider, including files with ASP.NET-specific file name extensions such as .asax, .ascx, .ashx, .aspx, .browser, .master, and so on.</span></span> <span data-ttu-id="bcbf2-395">ASP.NET コンパイルツールは、これらのファイルからアセンブリを生成します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-395">The ASP.NET Compilation tool generates assemblies from these files.</span></span> <span data-ttu-id="bcbf2-396">**-U**オプションを省略した場合、このツールはファイル名拡張子を持つファイルも作成します。元のソースファイルをアセンブリにマップするコンパイル済み。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-396">If the **-u** option is omitted, the tool also creates files with the file name extension .COMPILED that map the original source files to their assembly.</span></span> <span data-ttu-id="bcbf2-397">アプリケーションソースのディレクトリ構造が保持されていることを確認するために、ターゲットアプリケーション内の対応する場所にプレースホルダーファイルが生成されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-397">To ensure that the directory structure of the application source is preserved, the tool generates placeholder files in the corresponding locations in the target application.</span></span>

<span data-ttu-id="bcbf2-398">コンパイルされたアプリケーションの内容を変更できることを示すには、 **-u**オプションを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-398">You must use the **-u** option to indicate that the content of the compiled application can be modified.</span></span> <span data-ttu-id="bcbf2-399">それ以外の場合、後続の変更は無視されるか、実行時エラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-399">Otherwise, subsequent modifications are ignored or cause run-time errors.</span></span>

<span data-ttu-id="bcbf2-400">次の表は、 **-u**オプションが含まれている場合に、ASP.NET コンパイルツールがさまざまなファイルの種類を処理する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-400">The following table describes how the ASP.NET Compilation tool handles different file types when the **-u** option is included.</span></span>

| <span data-ttu-id="bcbf2-401">**ファイルの種類**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-401">**File type**</span></span> | <span data-ttu-id="bcbf2-402">**コンパイラアクション**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-402">**Compiler action**</span></span> |
| --- | --- |
| <span data-ttu-id="bcbf2-403">.ascx, .aspx, .master</span><span class="sxs-lookup"><span data-stu-id="bcbf2-403">.ascx, .aspx, .master</span></span> | <span data-ttu-id="bcbf2-404">これらのファイルはマークアップとソースコードに分割されます。これには、分離コードファイルと、&lt;スクリプト runat = "server"&gt; 要素で囲まれたすべてのコードが含まれます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-404">These files are split into markup and source code, which includes both code-behind files and any code that is enclosed in &lt;script runat="server"&gt; elements.</span></span> <span data-ttu-id="bcbf2-405">ソースコードは、ハッシュアルゴリズムから派生した名前を持つアセンブリにコンパイルされ、アセンブリは Bin ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-405">Source code is compiled into assemblies, with names that are derived from a hashing algorithm, and the assemblies are placed in the Bin directory.</span></span> <span data-ttu-id="bcbf2-406">インラインコード ( **&lt;%** と **%&gt;** 角かっこの間に囲まれたコードは、マークアップに含まれており、コンパイルされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-406">Any inline code, that is, code enclosed between the **&lt;%** and **%&gt;** brackets, is included with markup and not compiled.</span></span> <span data-ttu-id="bcbf2-407">ソースファイルと同じ名前の新しいファイルが作成され、マークアップが含まれ、対応する出力ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-407">New files with the same name as the source files are created to contain the markup and placed in the corresponding output directories.</span></span> |
| <span data-ttu-id="bcbf2-408">.ashx, .asmx</span><span class="sxs-lookup"><span data-stu-id="bcbf2-408">.ashx, .asmx</span></span> | <span data-ttu-id="bcbf2-409">これらのファイルはコンパイルされず、出力ディレクトリに移動され、コンパイルされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-409">These files are not compiled and are moved to the output directories as is and not compiled.</span></span> <span data-ttu-id="bcbf2-410">ハンドラーコードをコンパイルする場合は、コードをアプリ\_コードディレクトリのソースコードファイルに配置します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-410">If you wish to have the handler code compiled, place the code into source code files in the App\_Code directory.</span></span> |
| <span data-ttu-id="bcbf2-411">.cs、.vb、jsl、.cpp (前述のファイルの種類の分離コードファイルは含まれません)</span><span class="sxs-lookup"><span data-stu-id="bcbf2-411">.cs, .vb, .jsl, .cpp (not including code-behind files for the file types listed earlier)</span></span> | <span data-ttu-id="bcbf2-412">これらのファイルはコンパイルされ、それらを参照するアセンブリにリソースとして含まれます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-412">These files are compiled and included as a resource in assemblies that reference them.</span></span> <span data-ttu-id="bcbf2-413">ソースファイルは出力ディレクトリにコピーされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-413">Source files are not copied to the output directory.</span></span> <span data-ttu-id="bcbf2-414">コードファイルが参照されていない場合はコンパイルされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-414">If a code file is not referenced, it is not compiled.</span></span> |
| <span data-ttu-id="bcbf2-415">カスタムファイルの種類</span><span class="sxs-lookup"><span data-stu-id="bcbf2-415">Custom file types</span></span> | <span data-ttu-id="bcbf2-416">これらのファイルはコンパイルされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-416">These files are not compiled.</span></span> <span data-ttu-id="bcbf2-417">これらのファイルは、対応する出力ディレクトリにコピーされます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-417">These files are copied to the corresponding output directories.</span></span> |
| <span data-ttu-id="bcbf2-418">App\_Code サブディレクトリ内のソースコードファイル</span><span class="sxs-lookup"><span data-stu-id="bcbf2-418">Source code files in the App\_Code subdirectory</span></span> | <span data-ttu-id="bcbf2-419">これらのファイルはアセンブリにコンパイルされ、Bin ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-419">These files are compiled into assemblies and placed in the Bin directory.</span></span> |
| <span data-ttu-id="bcbf2-420">アプリ\_GlobalResources サブディレクトリ内の .resx および .resources ファイル</span><span class="sxs-lookup"><span data-stu-id="bcbf2-420">.resx and .resource files in the App\_GlobalResources subdirectory</span></span> | <span data-ttu-id="bcbf2-421">これらのファイルはアセンブリにコンパイルされ、Bin ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-421">These files are compiled into assemblies and placed in the Bin directory.</span></span> <span data-ttu-id="bcbf2-422">メイン出力ディレクトリの下にアプリ\_GlobalResources サブディレクトリが作成されません。ソースディレクトリにある .resx ファイルまたは .resources ファイルは出力ディレクトリにコピーされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-422">No App\_GlobalResources subdirectory is created under the main output directory, and no .resx or .resources files located in the source directory are copied to the output directories.</span></span> |
| <span data-ttu-id="bcbf2-423">アプリ\_LocalResources サブディレクトリ内の .resx および .resources ファイル</span><span class="sxs-lookup"><span data-stu-id="bcbf2-423">.resx and .resource files in the App\_LocalResources subdirectory</span></span> | <span data-ttu-id="bcbf2-424">これらのファイルはコンパイルされず、対応する出力ディレクトリにコピーされます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-424">These files are not compiled and are copied to the corresponding output directories.</span></span> |
| <span data-ttu-id="bcbf2-425">App\_theme サブディレクトリの .skin ファイル</span><span class="sxs-lookup"><span data-stu-id="bcbf2-425">.skin files in the App\_Themes subdirectory</span></span> | <span data-ttu-id="bcbf2-426">.Skin ファイルと静的テーマファイルはコンパイルされず、対応する出力ディレクトリにコピーされます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-426">The .skin files and static theme files are not compiled and are copied to the corresponding output directories.</span></span> |
| <span data-ttu-id="bcbf2-427">. browser Web.config の静的ファイルの種類アセンブリが Bin ディレクトリに既に存在する</span><span class="sxs-lookup"><span data-stu-id="bcbf2-427">.browser Web.config Static file types Assemblies already present in the Bin directory</span></span> | <span data-ttu-id="bcbf2-428">これらのファイルは、そのまま出力ディレクトリにコピーされます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-428">These files are copied as is to the output directories.</span></span> |

<span data-ttu-id="bcbf2-429">次の表では、 **-u**オプションを省略した場合に、ASP.NET コンパイルツールがさまざまなファイルの種類を処理する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-429">The following table describes how the ASP.NET Compilation tool handles different file types when the **-u** option is omitted.</span></span>

| <span data-ttu-id="bcbf2-430">**ファイルの種類**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-430">**File type**</span></span> | <span data-ttu-id="bcbf2-431">**コンパイラアクション**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-431">**Compiler action**</span></span> |
| --- | --- |
| <span data-ttu-id="bcbf2-432">.aspx、.asmx、.ashx、.master</span><span class="sxs-lookup"><span data-stu-id="bcbf2-432">.aspx, .asmx, .ashx, .master</span></span> | <span data-ttu-id="bcbf2-433">これらのファイルはマークアップとソースコードに分割されます。これには、分離コードファイルと、&lt;スクリプト runat = "server"&gt; 要素で囲まれたすべてのコードが含まれます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-433">These files are split into markup and source code, which includes both code-behind files and any code that is enclosed in &lt;script runat="server"&gt; elements.</span></span> <span data-ttu-id="bcbf2-434">ソースコードは、ハッシュアルゴリズムから派生した名前を持つアセンブリにコンパイルされます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-434">Source code is compiled into assemblies, with names that are derived from a hashing algorithm.</span></span> <span data-ttu-id="bcbf2-435">結果として得られるアセンブリは Bin ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-435">The resulting assemblies are placed in the Bin directory.</span></span> <span data-ttu-id="bcbf2-436">インラインコード ( **&lt;%** と **%&gt;** 角かっこの間に囲まれたコードは、マークアップに含まれており、コンパイルされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-436">Any inline code, that is, code enclosed between the **&lt;%** and **%&gt;** brackets, is included with markup and not compiled.</span></span> <span data-ttu-id="bcbf2-437">コンパイラは、ソースファイルと同じ名前のマークアップを含む新しいファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-437">The compiler creates new files to contain the markup with the same name as the source files.</span></span> <span data-ttu-id="bcbf2-438">これらのファイルは、Bin ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-438">These resulting files are placed in the Bin directory.</span></span> <span data-ttu-id="bcbf2-439">また、コンパイラは、ソースファイルと同じ名前で拡張子を持つファイルも作成します。マッピング情報を格納しているコンパイル済み。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-439">The compiler also creates files with the same name as the source files but with the extension .COMPILED that contain mapping information.</span></span> <span data-ttu-id="bcbf2-440">、.コンパイル済みのファイルは、ソースファイルの元の場所に対応する出力ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-440">The .COMPILED files are placed in the output directories corresponding to the original location of the source files.</span></span> |
| <span data-ttu-id="bcbf2-441">.ascx</span><span class="sxs-lookup"><span data-stu-id="bcbf2-441">.ascx</span></span> | <span data-ttu-id="bcbf2-442">これらのファイルは、マークアップとソースコードに分割されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-442">These files are split into markup and source code.</span></span> <span data-ttu-id="bcbf2-443">ソースコードはアセンブリにコンパイルされ、Bin ディレクトリに配置され、ハッシュアルゴリズムから派生した名前が付けられます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-443">Source code is compiled into assemblies and placed in the Bin directory, with names that are derived from a hashing algorithm.</span></span> <span data-ttu-id="bcbf2-444">マークアップファイルは生成されません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-444">No markup files are generated.</span></span> |
| <span data-ttu-id="bcbf2-445">.cs、.vb、jsl、.cpp (前述のファイルの種類の分離コードファイルは含まれません)</span><span class="sxs-lookup"><span data-stu-id="bcbf2-445">.cs, .vb, .jsl, .cpp (not including code-behind files for the file types listed earlier)</span></span> | <span data-ttu-id="bcbf2-446">.Ascx、.ashx、または .aspx ファイルから生成されたアセンブリによって参照されるソースコードは、アセンブリにコンパイルされ、Bin ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-446">Source code that is referenced by the assemblies generated from .ascx, .ashx, or .aspx files is compiled into assemblies and placed in the Bin directory.</span></span> <span data-ttu-id="bcbf2-447">ソースファイルはコピーされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-447">No source files are copied.</span></span> |
| <span data-ttu-id="bcbf2-448">カスタムファイルの種類</span><span class="sxs-lookup"><span data-stu-id="bcbf2-448">Custom file types</span></span> | <span data-ttu-id="bcbf2-449">これらのファイルは、動的ファイルと同様にコンパイルされます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-449">These files are compiled like dynamic files.</span></span> <span data-ttu-id="bcbf2-450">コンパイラは、基になるファイルの種類に応じて、出力ディレクトリにマッピングファイルを配置できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-450">Depending on the type of file they are based on, the compiler can place mapping files in the output directories.</span></span> |
| <span data-ttu-id="bcbf2-451">App\_Code サブディレクトリ内のファイル</span><span class="sxs-lookup"><span data-stu-id="bcbf2-451">Files in the App\_Code subdirectory</span></span> | <span data-ttu-id="bcbf2-452">このサブディレクトリ内のソースコードファイルは、アセンブリにコンパイルされ、Bin ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-452">Source code files in this subdirectory are compiled into assemblies and placed in the Bin directory.</span></span> |
| <span data-ttu-id="bcbf2-453">アプリ\_GlobalResources サブディレクトリ内のファイル</span><span class="sxs-lookup"><span data-stu-id="bcbf2-453">Files in the App\_GlobalResources subdirectory</span></span> | <span data-ttu-id="bcbf2-454">これらのファイルはアセンブリにコンパイルされ、Bin ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-454">These files are compiled into assemblies and placed in the Bin directory.</span></span> <span data-ttu-id="bcbf2-455">メインの出力ディレクトリの下に、アプリ\_GlobalResources サブディレクトリが作成されません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-455">No App\_GlobalResources subdirectory is created under the main output directory.</span></span> <span data-ttu-id="bcbf2-456">構成ファイルで appliesTo = "All" を指定した場合、.resx ファイルと .resources ファイルが出力ディレクトリにコピーされます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-456">If the configuration file specifies appliesTo="All", .resx and .resources files are copied to the output directories.</span></span> <span data-ttu-id="bcbf2-457">これらは、 [Buildprovider](https://msdn.microsoft.com/library/system.web.configuration.buildprovider.aspx)によって参照されている場合はコピーされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-457">They are not copied if they are referenced by a [BuildProvider](https://msdn.microsoft.com/library/system.web.configuration.buildprovider.aspx).</span></span> |
| <span data-ttu-id="bcbf2-458">アプリ\_LocalResources サブディレクトリ内の .resx および .resources ファイル</span><span class="sxs-lookup"><span data-stu-id="bcbf2-458">.resx and .resource files in the App\_LocalResources subdirectory</span></span> | <span data-ttu-id="bcbf2-459">これらのファイルは、一意の名前を持つアセンブリにコンパイルされ、Bin ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-459">These files are compiled into assemblies with unique names and placed in the Bin directory.</span></span> <span data-ttu-id="bcbf2-460">.Resx またはリソースファイルは出力ディレクトリにコピーされません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-460">No .resx or .resource files are copied to the output directories.</span></span> |
| <span data-ttu-id="bcbf2-461">App\_theme サブディレクトリの .skin ファイル</span><span class="sxs-lookup"><span data-stu-id="bcbf2-461">.skin files in the App\_Themes subdirectory</span></span> | <span data-ttu-id="bcbf2-462">テーマはアセンブリにコンパイルされ、Bin ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-462">Themes are compiled into assemblies and placed in the Bin directory.</span></span> <span data-ttu-id="bcbf2-463">スタブファイルは、.skin ファイル用に作成され、対応する出力ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-463">Stub files are created for .skin files and placed in the corresponding output directory.</span></span> <span data-ttu-id="bcbf2-464">静的ファイル (.css など) は、出力ディレクトリにコピーされます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-464">Static files (such as .css) are copied to the output directories.</span></span> |
| <span data-ttu-id="bcbf2-465">. browser Web.config の静的ファイルの種類アセンブリが Bin ディレクトリに既に存在する</span><span class="sxs-lookup"><span data-stu-id="bcbf2-465">.browser Web.config Static file types Assemblies already present in the Bin directory</span></span> | <span data-ttu-id="bcbf2-466">これらのファイルは、そのまま出力ディレクトリにコピーされます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-466">These files are copied as is to the output directory.</span></span> |

### <a name="fixed-assembly-names"></a>[<span data-ttu-id="bcbf2-467">固定アセンブリ名</span><span class="sxs-lookup"><span data-stu-id="bcbf2-467">Fixed Assembly Names</span></span>](https://msdn.microsoft.com/library/ms229863.aspx##)

<span data-ttu-id="bcbf2-468">MSI Windows インストーラーを使用した Web アプリケーションのデプロイなど、一部のシナリオでは、一貫したファイル名と内容を使用する必要があります。また、アセンブリまたは更新の構成設定を識別するための一貫性のあるディレクトリ構造も必要です。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-468">Some scenarios, such as deploying a Web application using the MSI Windows Installer, require the use of consistent file names and contents, as well as consistent directory structures to identify assemblies or configuration settings for updates.</span></span> <span data-ttu-id="bcbf2-469">そのような場合は、 **-fixednames**オプションを使用して、複数のページがアセンブリにコンパイルされるを使用する代わりに、ASP.NET コンパイルツールが各ソースファイルのアセンブリをコンパイルするように指定できます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-469">In those cases, you can use the **-fixednames** option to specify that the ASP.NET Compilation tool should compile an assembly for each source file instead of using the where multiple pages are compiled into assemblies.</span></span> <span data-ttu-id="bcbf2-470">これにより、多数のアセンブリが発生する可能性があるため、スケーラビリティに懸念がある場合は、このオプションを慎重に使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-470">This can lead to a large number of assemblies, so if you are concerned with scalability you should use this option with caution.</span></span>

### <a name="strong-name-compilation"></a>[<span data-ttu-id="bcbf2-471">厳密な名前のコンパイル</span><span class="sxs-lookup"><span data-stu-id="bcbf2-471">Strong-Name Compilation</span></span>](https://msdn.microsoft.com/library/ms229863.aspx##)

<span data-ttu-id="bcbf2-472">\- **Aptca**、 **-delaysign**、 **-keycontainer** 、 **-** キーの各オプションが用意されています。これにより、Aspnet\_xsd.exe を使用して厳密な名前のアセンブリを作成し、[厳密な名前のツール (sn.exe)](https://msdn.microsoft.com/library/k5b5tt23.aspx)を個別に使用することができます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-472">The **-aptca**, **-delaysign**, **-keycontainer** and **-keyfile** options are provided so that you can use Aspnet\_compiler.exe to create strongly named assemblies without using the [Strong Name Tool (Sn.exe)](https://msdn.microsoft.com/library/k5b5tt23.aspx) separately.</span></span> <span data-ttu-id="bcbf2-473">これらのオプションは、それぞれ、 **AllowPartiallyTrustedCallersAttribute**、 **assemblydelaysignattribute**、 **assemblydelaysignattribute**、および**AssemblyKeyFileAttribute**に対応しています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-473">These options correspond, respectively, to **AllowPartiallyTrustedCallersAttribute**, **AssemblyDelaySignAttribute**, **AssemblyKeyNameAttribute**, and **AssemblyKeyFileAttribute**.</span></span>

<span data-ttu-id="bcbf2-474">これらの属性については、このコースでは説明しません。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-474">Discussion of these attributes is outside of the scope of this course.</span></span>

## <a name="labs"></a><span data-ttu-id="bcbf2-475">ラボ</span><span class="sxs-lookup"><span data-stu-id="bcbf2-475">Labs</span></span>

<span data-ttu-id="bcbf2-476">次の各ラボは、前のラボに基づいています。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-476">Each of the following labs builds on the previous labs.</span></span> <span data-ttu-id="bcbf2-477">これらの操作は順番に実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-477">You will need to do them in order.</span></span>

## <a name="lab-1-using-the-configuration-api"></a><span data-ttu-id="bcbf2-478">ラボ 1: 構成 API の使用</span><span class="sxs-lookup"><span data-stu-id="bcbf2-478">Lab 1: Using the Configuration API</span></span>

1. <span data-ttu-id="bcbf2-479">*Mod9lab*という名前の新しい Web サイトを作成します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-479">Create a new Web site called *mod9lab*.</span></span>
2. <span data-ttu-id="bcbf2-480">新しい Web 構成ファイルをサイトに追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-480">Add a new Web Configuration File to the site.</span></span>
3. <span data-ttu-id="bcbf2-481">Web.config ファイルに次のを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-481">Add the following to the web.config file:</span></span>

[!code-xml[Main](configuration-and-instrumentation/samples/sample14.xml)]

<span data-ttu-id="bcbf2-482">これにより、web.config ファイルへの変更を保存するためのアクセス許可があることが確認されます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-482">This will ensure that you have permission to save changes to the web.config file.</span></span>

1. <span data-ttu-id="bcbf2-483">Default.aspx に新しい Label コントロールを追加し、ID を**lblDebugStatus**に変更します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-483">Add a new Label control to Default.aspx and change the ID to **lblDebugStatus**.</span></span>
2. <span data-ttu-id="bcbf2-484">Default.aspx に新しいボタンコントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-484">Add a new Button control to Default.aspx.</span></span>
3. <span data-ttu-id="bcbf2-485">ボタンコントロールの ID を**btnToggleDebug**に変更し、テキストを変更して**デバッグ状態を切り替え**ます。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-485">Change the Button control's ID to **btnToggleDebug** and the Text to **Toggle Debug Status**.</span></span>
4. <span data-ttu-id="bcbf2-486">Default.aspx の分離コードファイルのコードビューを開き、次のように、 **system.web**の**using**ステートメントを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-486">Open the Code View for the code-behind file of Default.aspx and add a **using** statement for **System.Web.Configuration** as follows:</span></span>

[!code-csharp[Main](configuration-and-instrumentation/samples/sample15.cs)]

1. <span data-ttu-id="bcbf2-487">次に示すように、クラスに2つのプライベート変数を追加し、ページ\_Init メソッドを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-487">Add two private variables to the class and a Page\_Init method as shown below:</span></span>

[!code-csharp[Main](configuration-and-instrumentation/samples/sample16.cs)]

1. <span data-ttu-id="bcbf2-488">ページ\_の読み込みに次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-488">Add the following code to Page\_Load:</span></span>

[!code-csharp[Main](configuration-and-instrumentation/samples/sample17.cs)]

1. <span data-ttu-id="bcbf2-489">Default.aspx を保存して参照します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-489">Save and browse default.aspx.</span></span> <span data-ttu-id="bcbf2-490">ラベルコントロールに現在のデバッグ状態が表示されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-490">Notice that the Label control displays the current debug status.</span></span>
2. <span data-ttu-id="bcbf2-491">デザイナーの Button コントロールをダブルクリックし、ボタンコントロールの Click イベントに次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-491">Double-click on the Button control in the designer and add the following code to the Click event for the Button control:</span></span>

[!code-csharp[Main](configuration-and-instrumentation/samples/sample18.cs)]

1. <span data-ttu-id="bcbf2-492">Default.aspx を保存して参照し、ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-492">Save and browse default.aspx and click the button.</span></span>
2. <span data-ttu-id="bcbf2-493">各ボタンをクリックした後に web.config ファイルを開き、[&lt;のコンパイル&gt;] セクションの **[デバッグ]** 属性を確認します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-493">Open the web.config file after each button click and observe the **debug** attribute in the &lt;compilation&gt; section.</span></span>

## <a name="lab-2-logging-application-restarts"></a><span data-ttu-id="bcbf2-494">ラボ 2: アプリケーションの再起動のログ記録</span><span class="sxs-lookup"><span data-stu-id="bcbf2-494">Lab 2: Logging Application Restarts</span></span>

<span data-ttu-id="bcbf2-495">このラボでは、イベントビューアーでアプリケーションのシャットダウン、スタートアップ、再コンパイルのログ記録を切り替えることができるコードを作成します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-495">In this lab, you will create code that will allow you to toggle the logging of application shutdowns, startups, and recompilations in the Event Viewer.</span></span>

1. <span data-ttu-id="bcbf2-496">DropDownList を default.aspx に追加し、ID を ddlLogAppEvents に変更します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-496">Add a DropDownList to default.aspx and change the ID to ddlLogAppEvents.</span></span>
2. <span data-ttu-id="bcbf2-497">DropDownList の**AutoPostBack**プロパティを**true**に設定します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-497">Set the **AutoPostBack** property for the DropDownList to **true**.</span></span>
3. <span data-ttu-id="bcbf2-498">DropDownList の Items コレクションに3つの項目を追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-498">Add three items to the Items collection for the DropDownList.</span></span> <span data-ttu-id="bcbf2-499">最初の項目の**テキスト**を*選択*し、値を-1 に設定します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-499">Make the **Text** for the first item *Select Value* and the value -1.</span></span> <span data-ttu-id="bcbf2-500">2番目の項目の**テキスト**と**値**を**True**に、3番目の項目の**テキスト**と**値**を**False**に設定します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-500">Make the **Text** and **Value** of the second item **True** and the **Text** and **Value** of the third item **False**.</span></span>
4. <span data-ttu-id="bcbf2-501">Default.aspx に新しいラベルを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-501">Add a new Label to default.aspx.</span></span> <span data-ttu-id="bcbf2-502">ID を**lblLogAppEvents**に変更します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-502">Change the ID to **lblLogAppEvents**.</span></span>
5. <span data-ttu-id="bcbf2-503">Default.aspx の分離コードビューを開き、次に示すように、HealthMonitoringSection 型の変数に新しい宣言を追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-503">Open the code-behind view for default.aspx and add a new declaration for a variable of type HealthMonitoringSection as shown below:</span></span>

[!code-csharp[Main](configuration-and-instrumentation/samples/sample19.cs)]

1. <span data-ttu-id="bcbf2-504">ページの既存のコードに次のコードを追加\_Init:</span><span class="sxs-lookup"><span data-stu-id="bcbf2-504">Add the following code to the existing code in Page\_Init:</span></span>

[!code-csharp[Main](configuration-and-instrumentation/samples/sample20.cs)]

1. <span data-ttu-id="bcbf2-505">DropDownList をダブルクリックし、SelectedIndexChanged イベントに次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-505">Double-click on the DropDownList and add the following code to the SelectedIndexChanged event:</span></span>

[!code-csharp[Main](configuration-and-instrumentation/samples/sample21.cs)]

1. <span data-ttu-id="bcbf2-506">Default.aspx を参照します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-506">Browse default.aspx.</span></span>
2. <span data-ttu-id="bcbf2-507">ドロップダウンを **[False]** に設定します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-507">Set the dropdown to **False**.</span></span>
3. <span data-ttu-id="bcbf2-508">イベントビューアーのアプリケーションログをクリアします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-508">Clear the Application log in the Event Viewer.</span></span>
4. <span data-ttu-id="bcbf2-509">アプリケーションのデバッグ属性を変更するには、このボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-509">Click the button to change the Debug attribute for the application.</span></span>
5. <span data-ttu-id="bcbf2-510">イベントビューアーのアプリケーションログを更新します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-510">Refresh the Application log in the Event Viewer.</span></span> 

    1. <span data-ttu-id="bcbf2-511">ログに記録されたイベントはありますか。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-511">Were any events logged?</span></span>
    2. <span data-ttu-id="bcbf2-512">なぜでしょうか。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-512">Why or why not?</span></span>
6. <span data-ttu-id="bcbf2-513">ドロップダウンを [True] に設定し**ます。**</span><span class="sxs-lookup"><span data-stu-id="bcbf2-513">Set the dropdown to **True.**</span></span>
7. <span data-ttu-id="bcbf2-514">アプリケーションのデバッグ属性を切り替えるには、このボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-514">Click the button to toggle the Debug attribute for the application.</span></span>
8. <span data-ttu-id="bcbf2-515">イベントビューアーのアプリケーションログインを更新します。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-515">Refresh the Application login the Event Viewer.</span></span> 

    1. <span data-ttu-id="bcbf2-516">ログに記録されたイベントはありますか。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-516">Were any events logged?</span></span>
    2. <span data-ttu-id="bcbf2-517">アプリのシャットダウンの理由は何ですか?</span><span class="sxs-lookup"><span data-stu-id="bcbf2-517">What was the reason for the app shutdown?</span></span>
9. <span data-ttu-id="bcbf2-518">ログ記録をオンまたはオフにして、web.config ファイルに加えられた変更を確認してみてください。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-518">Experiment with turning on and off logging and look at the changes made to the web.config file.</span></span>

## <a name="more-information"></a><span data-ttu-id="bcbf2-519">詳細情報:</span><span class="sxs-lookup"><span data-stu-id="bcbf2-519">More Information:</span></span>

<span data-ttu-id="bcbf2-520">ASP.NET 2.0 のプロバイダーモデルを使用すると、アプリケーションのインストルメンテーションだけでなく、他の多くの用途 (メンバーシップ、プロファイルなど) のために独自のプロバイダーを作成することもできます。アプリケーションイベントをテキストファイルに記録するカスタムプロバイダーの作成の詳細については、こちらの[リンク](https://msdn.microsoft.com/library/default.asp?url=/library/dnaspp/html/ASPNETProvMod_Prt6.asp)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bcbf2-520">ASP.NET 2.0's Provider model allows you to create your own providers for not only application instrumentation, but for many other uses as well such as Membership, Profiles, etc. For detailed information on writing a custom provider to log application events to a text file, visit [this link](https://msdn.microsoft.com/library/default.asp?url=/library/dnaspp/html/ASPNETProvMod_Prt6.asp).</span></span>
