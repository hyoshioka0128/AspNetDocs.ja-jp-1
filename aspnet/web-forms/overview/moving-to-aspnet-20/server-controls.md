---
uid: web-forms/overview/moving-to-aspnet-20/server-controls
title: サーバーコントロール |Microsoft Docs
author: microsoft
description: ASP.NET 2.0 では、さまざまな方法でサーバーコントロールを拡張します。 このモジュールでは、ASP.NET 2.0 と Visual Studio 200 のようなアーキテクチャの変更について説明します。
ms.author: riande
ms.date: 02/20/2005
ms.assetid: 43f6ac47-76fc-4cf7-8e9f-c18ce673dfd8
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/server-controls
msc.type: authoredcontent
ms.openlocfilehash: c02a633013f061c09141d4f98871848c011a799e
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78521092"
---
# <a name="server-controls"></a><span data-ttu-id="58e0f-104">サーバー コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-104">Server Controls</span></span>

<span data-ttu-id="58e0f-105">[Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="58e0f-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="58e0f-106">ASP.NET 2.0 では、さまざまな方法でサーバーコントロールを拡張します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-106">ASP.NET 2.0 enhances server controls in many ways.</span></span> <span data-ttu-id="58e0f-107">このモジュールでは、ASP.NET 2.0 と Visual Studio 2005 がサーバーコントロールを扱う方法に対するアーキテクチャの変更について説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-107">In this module, we'll cover some of the architectural changes to the way ASP.NET 2.0 and Visual Studio 2005 deals with server controls.</span></span>

<span data-ttu-id="58e0f-108">ASP.NET 2.0 では、さまざまな方法でサーバーコントロールを拡張します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-108">ASP.NET 2.0 enhances server controls in many ways.</span></span> <span data-ttu-id="58e0f-109">このモジュールでは、ASP.NET 2.0 と Visual Studio 2005 がサーバーコントロールを扱う方法に対するアーキテクチャの変更について説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-109">In this module, we'll cover some of the architectural changes to the way ASP.NET 2.0 and Visual Studio 2005 deals with server controls.</span></span>

## <a name="view-state"></a><span data-ttu-id="58e0f-110">状態の表示</span><span class="sxs-lookup"><span data-stu-id="58e0f-110">View state</span></span>

<span data-ttu-id="58e0f-111">ASP.NET 2.0 でのビューステートの主な変更は、サイズの大幅な削減です。</span><span class="sxs-lookup"><span data-stu-id="58e0f-111">The primary change in view state in ASP.NET 2.0 is a dramatic reduction in size.</span></span> <span data-ttu-id="58e0f-112">カレンダーコントロールのみを含むページについて考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="58e0f-112">Consider a page with only a Calendar control on it.</span></span> <span data-ttu-id="58e0f-113">ASP.NET 1.1 のビューステートを次に示します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-113">Here is the view state in ASP.NET 1.1.</span></span>

[!code-css[Main](server-controls/samples/sample1.css)]

<span data-ttu-id="58e0f-114">ここで、ASP.NET 2.0 の同一ページのビューステートを示します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-114">Now here's the view state on an identical page in ASP.NET 2.0.</span></span>

[!code-css[Main](server-controls/samples/sample2.css)]

<span data-ttu-id="58e0f-115">これは非常に重要な変更であり、ビューステートがネットワーク経由でやり取りされることを考慮して、この変更により、開発者はパフォーマンスを大幅に向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-115">That's a pretty significant change, and considering that view state is carried back and forth over the wire, this change can give developers a significant performance increase.</span></span> <span data-ttu-id="58e0f-116">ビューステートのサイズを小さくすることは、主にそれを内部で処理する方法によるものです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-116">The reduction in size of view state is largely due to the way that we handle it internally.</span></span> <span data-ttu-id="58e0f-117">ビューステートは Base64 でエンコードされた文字列であることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="58e0f-117">Remember that view state is a Base64 encoded string.</span></span> <span data-ttu-id="58e0f-118">ASP.NET 2.0 でのビューステートの変更について理解を深めるために、上記の例のデコードされた値を確認してみましょう。</span><span class="sxs-lookup"><span data-stu-id="58e0f-118">To better understand the change in view state in ASP.NET 2.0, let's have a look at the decoded values from the examples above.</span></span>

<span data-ttu-id="58e0f-119">デコードされた1.1 ビューステートは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-119">Here is the 1.1 view state decoded:</span></span>

[!code-css[Main](server-controls/samples/sample3.css)]

<span data-ttu-id="58e0f-120">これは、不自然なように見えますが、ここにはパターンがあります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-120">This may look a bit like gibberish, but there is a pattern here.</span></span> <span data-ttu-id="58e0f-121">ASP.NET 1.x では、1つの文字を使用して、&lt;&gt; 文字を使用してデータ型と区切り値を識別しました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-121">In ASP.NET 1.x, we used single characters to identify data-types and delimited values using the &lt;&gt; characters.</span></span> <span data-ttu-id="58e0f-122">上のビューステートサンプルの "t" は、3つの型を表します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-122">The "t" in the view state sample above represents a Triplet.</span></span> <span data-ttu-id="58e0f-123">3つの組には ArrayLists のペアが含まれています ("l" は ArrayList を表します)。これらの ArrayLists の1つには、値1を持つ Int32 ("i") が含まれ、もう一方には別の3つの値が含まれています。</span><span class="sxs-lookup"><span data-stu-id="58e0f-123">The Triplet contains a pair of ArrayLists (the "l" represents an ArrayList.) One of those ArrayLists contains an Int32 ("i") with a value of 1 and the other contains another Triplet.</span></span> <span data-ttu-id="58e0f-124">2つの組には、ArrayLists などのペアが含まれています。覚えておくべき重要な点は、ペアを含む Triplets を使用し、データ型を文字で識別し、&lt; と &gt; 文字を区切り記号として使用することです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-124">The Triplet contains a pair of ArrayLists, etc. The important thing to remember is that we use Triplets that contain pairs, we identify the data-types via a letter, and we use the &lt; and &gt; characters as delimiters.</span></span>

<span data-ttu-id="58e0f-125">ASP.NET 2.0 では、デコードされたビューステートは少し異なります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-125">In ASP.NET 2.0, the decoded view state looks a bit different.</span></span>

[!code-powershell[Main](server-controls/samples/sample4.ps1)]

<span data-ttu-id="58e0f-126">デコードされたビューステートの外観に大きな変化があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="58e0f-126">You should notice a huge change in the appearance of the decoded view state.</span></span> <span data-ttu-id="58e0f-127">この変更には、いくつかのアーキテクチャ基盤があります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-127">This change has several architectural underpinnings.</span></span> <span data-ttu-id="58e0f-128">ASP.NET 1.x のビューステートでは、LosFormatter を使用してデータをシリアル化していました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-128">View state in ASP.NET 1.x used the LosFormatter to serialize data.</span></span> <span data-ttu-id="58e0f-129">2\.0 では、新しい ObjectStateFormatter クラスを使用します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-129">In 2.0, we use the new ObjectStateFormatter class.</span></span> <span data-ttu-id="58e0f-130">このクラスは、ビューステートとコントロール状態のシリアル化と逆シリアル化を支援するように特別に設計されています。</span><span class="sxs-lookup"><span data-stu-id="58e0f-130">This class was specifically designed to aid in the serialization and deserialization of view state and control state.</span></span> <span data-ttu-id="58e0f-131">(コントロールの状態については、次のセクションで説明します)。シリアル化と逆シリアル化を行う方法を変更すると、多くの利点が得られます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-131">(Control state will be covered in the next section.) There are many benefits gained by changing the method by which serialization and deserialization take place.</span></span> <span data-ttu-id="58e0f-132">最も大きな効果の1つは、TextWriter を使用する LosFormatter とは異なり、ObjectStateFormatter は BinaryWriter を使用するという事実です。</span><span class="sxs-lookup"><span data-stu-id="58e0f-132">One of the most dramatic is the fact that unlike the LosFormatter which uses a TextWriter, the ObjectStateFormatter uses a BinaryWriter.</span></span> <span data-ttu-id="58e0f-133">これにより、ASP.NET 2.0 では、ビューステートを文字列ではなく一連のバイトに格納できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-133">This allows ASP.NET 2.0 to store view state a series of bytes instead of strings.</span></span> <span data-ttu-id="58e0f-134">たとえば、整数を取得します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-134">Take, for example, an integer.</span></span> <span data-ttu-id="58e0f-135">ASP.NET 1.1 では、整数のビューステートの4バイトが必要でした。</span><span class="sxs-lookup"><span data-stu-id="58e0f-135">In ASP.NET 1.1, an integer required 4 bytes of view state.</span></span> <span data-ttu-id="58e0f-136">ASP.NET 2.0 では、その同じ整数に必要なのは1バイトだけです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-136">In ASP.NET 2.0, that same integer only requires 1 byte.</span></span> <span data-ttu-id="58e0f-137">格納されるビューステートの量を減らすために、その他の機能強化が行われました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-137">Other enhancements were made to decrease the amount of view state that is stored.</span></span> <span data-ttu-id="58e0f-138">たとえば、DateTime 値は、文字列ではなく TickCount を使用して格納されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-138">DateTime values, for example, are now stored using a TickCount instead of a string.</span></span>

<span data-ttu-id="58e0f-139">すべてが十分ではなかったとしても、1. x のビューステートの最大のコンシューマーの1つが DataGrid および同様のコントロールであるという事実に注目しました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-139">As if all of that weren't enough, special attention was paid to the fact that one of the greatest consumers of view state in 1.x was the DataGrid and similar controls.</span></span> <span data-ttu-id="58e0f-140">ビューステートが考慮される DataGrid などのコントロールの大きな欠点は、多くの場合、大量の繰り返し情報が含まれていることです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-140">A major drawback of controls such as the DataGrid where view state is concerned is that it often contains large amounts of repeated information.</span></span> <span data-ttu-id="58e0f-141">ASP.NET 1.x では、繰り返された情報が繰り返し格納されるだけで、ビューステートが肥大化します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-141">In ASP.NET 1.x, that repeated information was simply stored over and over again resulting in a bloated view state.</span></span> <span data-ttu-id="58e0f-142">ASP.NET 2.0 では、新しい IndexedString クラスを使用して、そのようなデータを格納します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-142">In ASP.NET 2.0, we use the new IndexedString class to store such data.</span></span> <span data-ttu-id="58e0f-143">文字列が繰り返される場合は、IndexedString のトークンと、IndexedString オブジェクトの実行中のテーブル内のインデックスを格納するだけです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-143">If a string repeats, we just store the token for the IndexedString and the index within a running table of IndexedString objects.</span></span>

## <a name="control-state"></a><span data-ttu-id="58e0f-144">コントロールの状態</span><span class="sxs-lookup"><span data-stu-id="58e0f-144">Control State</span></span>

<span data-ttu-id="58e0f-145">ビューステートを使用した開発者の主な gripes の1つは、HTTP ペイロードに追加したサイズでした。</span><span class="sxs-lookup"><span data-stu-id="58e0f-145">One of the major gripes that developers had with view state was the size that it added to the HTTP payload.</span></span> <span data-ttu-id="58e0f-146">既に説明したように、ビューステートの最大のコンシューマーの1つは、DataGrid コントロールです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-146">As previously mentioned, one of the greatest consumers of view state is the DataGrid control.</span></span> <span data-ttu-id="58e0f-147">DataGrid によって生成される大量のビューステートを回避するには、多くの開発者がそのコントロールのビューステートを無効にするだけです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-147">To avoid the huge amounts of view state generated by a DataGrid, many developers simply disabled view state for that control.</span></span> <span data-ttu-id="58e0f-148">残念ながら、そのソリューションは常に適切なソリューションではありませんでした。</span><span class="sxs-lookup"><span data-stu-id="58e0f-148">Unfortunately, that solution wasn't always a good one.</span></span> <span data-ttu-id="58e0f-149">ASP.NET 1.x のビューステートには、コントロールの正しい機能に必要なデータのみが含まれています。</span><span class="sxs-lookup"><span data-stu-id="58e0f-149">View state in ASP.NET 1.x contains not only data necessary for the correct functionality of the control.</span></span> <span data-ttu-id="58e0f-150">また、コントロールの UI の状態に関する情報も含まれます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-150">It also contains information concerning the state of the control's UI.</span></span> <span data-ttu-id="58e0f-151">これは、DataGrid での改ページ位置の自動修正を許可する場合、ビューステートに含まれるすべての UI 情報が不要な場合でも、ビューステートを有効にする必要があることを意味します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-151">This means that if you want to allow for pagination on a DataGrid, you must enable view state even if you don't need all of the UI information that view state contains.</span></span> <span data-ttu-id="58e0f-152">これは、まったくまたはまったくないシナリオです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-152">It's an all-or-nothing scenario.</span></span>

<span data-ttu-id="58e0f-153">ASP.NET 2.0 では、コントロールの状態によって、コントロールの状態の導入によって問題が適切に解決されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-153">In ASP.NET 2.0, control state solves that problem nicely via the introduction of control state.</span></span> <span data-ttu-id="58e0f-154">コントロールの状態には、コントロールの適切な機能に必要なデータが含まれています。</span><span class="sxs-lookup"><span data-stu-id="58e0f-154">Control state contains the data that is absolutely necessary for the proper functionality of a control.</span></span> <span data-ttu-id="58e0f-155">ビューステートとは異なり、コントロールの状態を無効にすることはできません。</span><span class="sxs-lookup"><span data-stu-id="58e0f-155">Unlike view state, control state cannot be disabled.</span></span> <span data-ttu-id="58e0f-156">したがって、コントロールの状態で格納されるデータは慎重に制御することが重要です。</span><span class="sxs-lookup"><span data-stu-id="58e0f-156">Therefore, it is important that the data being stored in control state is carefully controlled.</span></span>

> [!NOTE]
> <span data-ttu-id="58e0f-157">コントロールの状態は、ビューステートと共に \_\_VIEWSTATE 隠しフォームフィールドに表示されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-157">Control state is persisted along with the view state in the \_\_VIEWSTATE hidden form field.</span></span>

<span data-ttu-id="58e0f-158">このビデオは、ビューステートとコントロールの状態のチュートリアルです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-158">This video is a walkthrough of view state and control state.</span></span>

![](server-controls/_static/image1.png)

[<span data-ttu-id="58e0f-159">全画面表示のビデオを開く</span><span class="sxs-lookup"><span data-stu-id="58e0f-159">Open Full-Screen Video</span></span>](server-controls/_static/state1.wmv)

<span data-ttu-id="58e0f-160">サーバーコントロールがコントロールの状態を読み取り、書き込みを行うには、3つの手順を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-160">In order for a server control to read and write to control state, you must take three steps.</span></span>

## <a name="step-1-call-the-registerrequirescontrolstate-method"></a><span data-ttu-id="58e0f-161">手順 1: RegisterRequiresControlState メソッドを呼び出す</span><span class="sxs-lookup"><span data-stu-id="58e0f-161">Step 1: Call the RegisterRequiresControlState Method</span></span>

<span data-ttu-id="58e0f-162">RegisterRequiresControlState メソッドは、コントロールがコントロールの状態を保持する必要があることを ASP.NET に通知します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-162">The RegisterRequiresControlState method informs ASP.NET that a control needs to persist control state.</span></span> <span data-ttu-id="58e0f-163">これは、登録されるコントロールである型コントロールの1つの引数を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-163">It takes one argument of type Control which is the control that is being registered.</span></span>

<span data-ttu-id="58e0f-164">登録は要求に対して保持されないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="58e0f-164">It is important to note that registration does not persist from request to request.</span></span> <span data-ttu-id="58e0f-165">したがって、コントロールの状態を保持する必要がある場合は、すべての要求に対してこのメソッドを呼び出す必要があります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-165">Therefore, this method must be called on every request if a control is to persist control state.</span></span> <span data-ttu-id="58e0f-166">メソッドを OnInit で呼び出すことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="58e0f-166">It is recommended that the method be called in OnInit.</span></span>

[!code-csharp[Main](server-controls/samples/sample5.cs)]

## <a name="step-2-override-savecontrolstate"></a><span data-ttu-id="58e0f-167">手順 2: SaveControlState をオーバーライドする</span><span class="sxs-lookup"><span data-stu-id="58e0f-167">Step 2: Override SaveControlState</span></span>

<span data-ttu-id="58e0f-168">SaveControlState メソッドは、最後のポストバック以降にコントロールのコントロールの状態の変更を保存します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-168">The SaveControlState method saves control state changes for a control since the last post back.</span></span> <span data-ttu-id="58e0f-169">このメソッドは、コントロールの状態を表すオブジェクトを返します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-169">It returns an object representing the control's state.</span></span>

## <a name="step-3-override-loadcontrolstate"></a><span data-ttu-id="58e0f-170">手順 3: LoadControlState をオーバーライドする</span><span class="sxs-lookup"><span data-stu-id="58e0f-170">Step 3: Override LoadControlState</span></span>

<span data-ttu-id="58e0f-171">LoadControlState メソッドは、保存された状態をコントロールに読み込みます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-171">The LoadControlState method loads saved state into a control.</span></span> <span data-ttu-id="58e0f-172">メソッドは、コントロールの保存された状態を保持する Object 型の引数を1つ受け取ります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-172">The method takes one argument of type Object which holds the saved state for the control.</span></span>

## <a name="full-xhtml-compliance"></a><span data-ttu-id="58e0f-173">完全な XHTML 準拠</span><span class="sxs-lookup"><span data-stu-id="58e0f-173">Full XHTML Compliance</span></span>

<span data-ttu-id="58e0f-174">Web 開発者は、Web アプリケーションの標準の重要性を把握しています。</span><span class="sxs-lookup"><span data-stu-id="58e0f-174">Any Web developer knows the importance of standards in Web applications.</span></span> <span data-ttu-id="58e0f-175">標準ベースの開発環境を維持するために、ASP.NET 2.0 は完全に XHTML に準拠しています。</span><span class="sxs-lookup"><span data-stu-id="58e0f-175">In order to maintain a standards-based development environment, ASP.NET 2.0 is fully XHTML compliant.</span></span> <span data-ttu-id="58e0f-176">そのため、HTML 4.0 以上をサポートするブラウザーでは、すべてのタグが XHTML 標準に従ってレンダリングされます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-176">Therefore, all tags are rendered according to XHTML standards in browsers that support HTML 4.0 or greater.</span></span>

<span data-ttu-id="58e0f-177">ASP.NET 1.1 の DOCTYPE 定義は次のようになりました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-177">The DOCTYPE definition in ASP.NET 1.1 was as follows:</span></span>

[!code-html[Main](server-controls/samples/sample6.html)]

<span data-ttu-id="58e0f-178">ASP.NET 2.0 では、既定の DOCTYPE 定義は次のようになります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-178">In ASP.NET 2.0, the default DOCTYPE definition is as follows:</span></span>

[!code-html[Main](server-controls/samples/sample7.html)]

<span data-ttu-id="58e0f-179">このオプションを選択した場合は、構成ファイルの xhtmlConformance ノードを使用して、既定の XHTML 準拠を変更できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-179">If you choose, you can alter the default XHTML compliance via the xhtmlConformance node in the configuration file.</span></span> <span data-ttu-id="58e0f-180">たとえば、web.config ファイルの次のノードは、XHTML 準拠を XHTML 1.0 Strict に変更します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-180">For example, the following node in the web.config file will change XHTML compliance to XHTML 1.0 Strict:</span></span>

[!code-xml[Main](server-controls/samples/sample8.xml)]

<span data-ttu-id="58e0f-181">を選択した場合は、次のように ASP.NET 1.x で使用される従来の構成を使用するように ASP.NET を構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-181">If you choose, you can also configure ASP.NET to use the legacy configuration used in ASP.NET 1.x as follows:</span></span>

[!code-xml[Main](server-controls/samples/sample9.xml)]

## <a name="adaptive-rendering-using-adapters"></a><span data-ttu-id="58e0f-182">アダプターを使用したアダプティブレンダリング</span><span class="sxs-lookup"><span data-stu-id="58e0f-182">Adaptive Rendering Using Adapters</span></span>

<span data-ttu-id="58e0f-183">ASP.NET 1.x では、構成ファイルに、HttpBrowserCapabilities オブジェクトを設定する &lt;browserCaps&gt; セクションが含まれていました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-183">In ASP.NET 1.x, the configuration file contained a &lt;browserCaps&gt; section that populated a HttpBrowserCapabilities object.</span></span> <span data-ttu-id="58e0f-184">このオブジェクトを使用すると、開発者は特定の要求を行っているデバイスを特定し、適切にコードを表示できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-184">This object allowed a developer to determine what device is making a particular request and render code appropriately.</span></span> <span data-ttu-id="58e0f-185">ASP.NET 2.0 では、モデルが改善され、新しい ControlAdapter クラスが使用されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-185">In ASP.NET 2.0, the model has improved and now uses the new ControlAdapter class.</span></span> <span data-ttu-id="58e0f-186">ControlAdapter クラスは、コントロールのライフサイクル内のイベントをオーバーライドし、ユーザーエージェントの機能に基づいてコントロールのレンダリングを制御します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-186">The ControlAdapter class overrides events in the control's lifecycle and controls the rendering of controls based upon the user agent's capabilities.</span></span> <span data-ttu-id="58e0f-187">特定のユーザーエージェントの機能は、ブラウザー定義ファイル (拡張子が c:\windows\microsoft.net\framework\v2.0. のファイル) によって定義されます。\*\*\*\* フォルダーにあります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-187">The capabilities of a specific user agent are defined by a browser definition file (a file with a .browser file extension) stored in the c:\windows\microsoft.net\framework\v2.0.\*\*\*\*\CONFIG\Browsers folder.</span></span>

> [!NOTE]
> <span data-ttu-id="58e0f-188">ControlAdapter クラスは抽象クラスです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-188">The ControlAdapter class is an abstract class.</span></span>

<span data-ttu-id="58e0f-189">1\. x の &lt;browserCaps&gt; セクションと同様に、ブラウザー定義ファイルでは、要求元のブラウザーを識別するために、正規表現を使用してユーザーエージェント文字列を解析します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-189">Much like the &lt;browserCaps&gt; section in 1.x, the browser definition file uses a Regular Expression to parse the user agent string in order to identify the requesting browser.</span></span> <span data-ttu-id="58e0f-190">これにより、そのユーザーエージェントの特定の機能が定義されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-190">It them defines particular capabilities for that user agent.</span></span> <span data-ttu-id="58e0f-191">ControlAdapter は、Render メソッドを使用してコントロールをレンダリングします。</span><span class="sxs-lookup"><span data-stu-id="58e0f-191">The ControlAdapter renders the control via the Render method.</span></span> <span data-ttu-id="58e0f-192">したがって、Render メソッドをオーバーライドする場合は、基本クラスで Render を呼び出さないでください。</span><span class="sxs-lookup"><span data-stu-id="58e0f-192">Therefore, if you override the Render method, you should not call Render on the base class.</span></span> <span data-ttu-id="58e0f-193">このようにすると、レンダリングが2回発生する可能性があります。1回はアダプターで、もう1つはコントロール自体に1回です。</span><span class="sxs-lookup"><span data-stu-id="58e0f-193">Doing so may cause rendering to occur twice, once for the adapter and once for the control itself.</span></span>

## <a name="developing-a-custom-adapter"></a><span data-ttu-id="58e0f-194">カスタムアダプターの開発</span><span class="sxs-lookup"><span data-stu-id="58e0f-194">Developing a Custom Adapter</span></span>

<span data-ttu-id="58e0f-195">ControlAdapter から継承することで、独自のカスタムアダプターを開発できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-195">You can develop your own custom adapter by inheriting from ControlAdapter.</span></span> <span data-ttu-id="58e0f-196">また、ページにアダプターが必要な場合は、抽象クラス PageAdapter を継承することもできます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-196">Additionally, you can inherit from the abstract class PageAdapter in cases where an adapter is needed for a page.</span></span> <span data-ttu-id="58e0f-197">カスタムアダプターへのコントロールのマッピングは、ブラウザー定義ファイルの &lt;controlAdapters&gt; 要素を介して行われます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-197">Mapping of controls to your custom adapter is accomplished via the &lt;controlAdapters&gt; element in the browser definition file.</span></span> <span data-ttu-id="58e0f-198">たとえば、ブラウザー定義ファイルの次の XML は、メニューコントロールを MenuAdapter クラスにマップします。</span><span class="sxs-lookup"><span data-stu-id="58e0f-198">For example, the following XML from a browser definition file maps the Menu control to the MenuAdapter class:</span></span>

[!code-html[Main](server-controls/samples/sample10.html)]

<span data-ttu-id="58e0f-199">このモデルを使用すると、コントロール開発者は特定のデバイスやブラウザーを対象にすることが非常に簡単になります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-199">Using this model, it becomes quite easy for a control developer to target a particular device or browser.</span></span> <span data-ttu-id="58e0f-200">また、開発者は、すべてのデバイスでのページの表示方法を完全に制御できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-200">It's also quite simple for a developer to have complete control over how pages render on every device.</span></span>

## <a name="per-device-rendering"></a><span data-ttu-id="58e0f-201">デバイスごとのレンダリング</span><span class="sxs-lookup"><span data-stu-id="58e0f-201">Per-Device Rendering</span></span>

<span data-ttu-id="58e0f-202">ASP.NET 2.0 のサーバーコントロールのプロパティは、ブラウザー固有のプレフィックスを使用して、デバイスごとに指定できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-202">Server control properties in ASP.NET 2.0 can be specified per-device using a browser-specific prefix.</span></span> <span data-ttu-id="58e0f-203">たとえば、次のコードでは、ページを参照するために使用されているデバイスに応じてラベルのテキストが変更されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-203">For example, the code below will change the Text of a label depending upon which device is being used to browse the page.</span></span>

[!code-aspx[Main](server-controls/samples/sample11.aspx)]

<span data-ttu-id="58e0f-204">このラベルを含むページが Internet Explorer から参照されている場合、ラベルには "Internet Explorer から参照しています" というテキストが表示されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-204">When the page containing this label is browsed from Internet Explorer, the label will display text saying "You are browsing from Internet Explorer."</span></span> <span data-ttu-id="58e0f-205">ページが Firefox から参照されると、ラベルに "Firefox から参照しています" というテキストが表示されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-205">When the page is browsed from Firefox, the label will display the text "You are browsing from Firefox."</span></span> <span data-ttu-id="58e0f-206">他のデバイスからページが参照されると、"不明なデバイスから参照しています。" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-206">When the page is browsed from any other device, it will display "You are browsing from an unknown device."</span></span> <span data-ttu-id="58e0f-207">任意のプロパティは、この特殊な構文を使用して指定できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-207">Any property can be specified using this special syntax.</span></span>

## <a name="setting-focus"></a><span data-ttu-id="58e0f-208">設定 (フォーカスを)</span><span class="sxs-lookup"><span data-stu-id="58e0f-208">Setting Focus</span></span>

<span data-ttu-id="58e0f-209">ASP.NET 1.x の開発者は、特定のコントロールに最初のフォーカスを設定する方法についてよく寄せられるようになりました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-209">ASP.NET 1.x developers frequently asked about how to set initial focus on a particular control.</span></span> <span data-ttu-id="58e0f-210">たとえば、ログインページでは、ページが最初に読み込まれるときに [ユーザー ID] ボックスにフォーカスを設定すると便利です。</span><span class="sxs-lookup"><span data-stu-id="58e0f-210">For example, on a login page, it's useful to have the User ID textbox get the focus when the page first loads.</span></span> <span data-ttu-id="58e0f-211">ASP.NET 1.x で、これを行うには、いくつかのクライアント側スクリプトを記述する必要がありました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-211">In ASP.NET 1.x, doing this required writing some client-side script.</span></span> <span data-ttu-id="58e0f-212">このようなスクリプトは単純なタスクでも、SetFocus メソッドに感謝する ASP.NET 2.0 では不要になりました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-212">Even though such a script is a trivial task, it's no longer necessary in ASP.NET 2.0 thanks to the SetFocus method.</span></span> <span data-ttu-id="58e0f-213">SetFocus メソッドは、フォーカスを受け取る必要があるコントロールを示す1つの引数を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-213">The SetFocus method takes one argument indicating the control that should receive focus.</span></span> <span data-ttu-id="58e0f-214">この引数には、コントロールのクライアント ID を文字列として指定するか、コントロールオブジェクトとしてサーバーコントロールの名前を使用できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-214">This argument can either be the client ID of the control as a string or the name of the Server control as a Control object.</span></span> <span data-ttu-id="58e0f-215">たとえば、最初のフォーカスを、ページが最初に読み込まれるときに txtUserID という名前のテキストボックスコントロールに設定するには、ページ\_の読み込みに次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-215">For example, to set the initial focus to a TextBox control called txtUserID when the page first loads, add the following code to Page\_Load:</span></span>

[!code-csharp[Main](server-controls/samples/sample12.cs)]

<span data-ttu-id="58e0f-216">--または</span><span class="sxs-lookup"><span data-stu-id="58e0f-216">-- or</span></span>

[!code-csharp[Main](server-controls/samples/sample13.cs)]

<span data-ttu-id="58e0f-217">ASP.NET 2.0 では、Webresource.axd ハンドラー (前に説明しました) を使用して、フォーカスを設定するクライアント側の関数をレンダリングします。</span><span class="sxs-lookup"><span data-stu-id="58e0f-217">ASP.NET 2.0 uses the Webresource.axd handler (discussed previously) to render a client-side function that sets the focus.</span></span> <span data-ttu-id="58e0f-218">クライアント側関数の名前は、次に示すように、Web フォーム\_自動フォーカスされます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-218">The name of the client-side function is WebForm\_AutoFocus as shown here:</span></span>

[!code-html[Main](server-controls/samples/sample14.html)]

<span data-ttu-id="58e0f-219">また、コントロールにフォーカスメソッドを使用して、そのコントロールに最初のフォーカスを設定することもできます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-219">Alternatively, you can use the Focus method for a control to set the initial focus to that control.</span></span> <span data-ttu-id="58e0f-220">フォーカスメソッドは、コントロールクラスから派生し、すべての ASP.NET 2.0 コントロールで使用できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-220">The Focus method derives from the Control class and is available to all ASP.NET 2.0 controls.</span></span> <span data-ttu-id="58e0f-221">検証エラーが発生したときに、特定のコントロールにフォーカスを設定することもできます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-221">It is also possible to set focus to a particular control when a validation error occurs.</span></span> <span data-ttu-id="58e0f-222">これについては、後のモジュールで説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-222">That will be covered in a later module.</span></span>

## <a name="new-server-controls-in-aspnet-20"></a><span data-ttu-id="58e0f-223">ASP.NET 2.0 の新しいサーバーコントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-223">New Server Controls in ASP.NET 2.0</span></span>

<span data-ttu-id="58e0f-224">ASP.NET 2.0 の新しいサーバーコントロールを次に示します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-224">The following are new server controls in ASP.NET 2.0.</span></span> <span data-ttu-id="58e0f-225">これらのいくつかについては、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-225">We will go into more detail on some of them in later modules.</span></span>

## <a name="imagemap-control"></a><span data-ttu-id="58e0f-226">ImageMap コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-226">ImageMap Control</span></span>

<span data-ttu-id="58e0f-227">ImageMap コントロールを使用すると、ポストバックを開始したり、URL に移動したりできるように、イメージにホットスポットを追加できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-227">The ImageMap control allows you to add hotspots to an image that can initiate a post back or navigate to a URL.</span></span> <span data-ttu-id="58e0f-228">3種類のホットスポットを利用できます。CircleHotSpot、RectangleHotSpot、および PolygonHotSpot。</span><span class="sxs-lookup"><span data-stu-id="58e0f-228">There are three types of hotspots available; CircleHotSpot, RectangleHotSpot, and PolygonHotSpot.</span></span> <span data-ttu-id="58e0f-229">ホットスポットは、Visual Studio のコレクションエディター、またはコードでプログラムによって追加されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-229">Hotspots are added via a collection editor in Visual Studio or programmatically in code.</span></span> <span data-ttu-id="58e0f-230">イメージ上にホットスポットを描画するために使用できるユーザーインターフェイスはありません。</span><span class="sxs-lookup"><span data-stu-id="58e0f-230">There is no user-interface available for drawing hotspots on an image.</span></span> <span data-ttu-id="58e0f-231">ホットスポットの座標とサイズまたは半径は、宣言によって指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-231">The coordinates and size or radius of the hotspot must be specified declaratively.</span></span> <span data-ttu-id="58e0f-232">デザイナーには、ホットスポットの視覚的な表現もありません。</span><span class="sxs-lookup"><span data-stu-id="58e0f-232">There is also no visual representation of a hotspot in the designer.</span></span> <span data-ttu-id="58e0f-233">ホットスポットが URL に移動するように構成されている場合は、ホットスポットの NavigateUrl プロパティを使用して URL が指定されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-233">If a hotspot is configured to navigate to a URL, the URL is specified via the NavigateUrl property of the hotspot.</span></span> <span data-ttu-id="58e0f-234">ポストバックホットスポットの場合、PostBackValue プロパティを使用すると、サーバー側のコードで取得できる文字列をポストバックに渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-234">In the case of a post back hotspot, the PostBackValue property allows you to pass a string in the post back that can be retrieved in server-side code.</span></span>

![Visual Studio での HotSpot コレクションエディター](server-controls/_static/image1.jpg)

<span data-ttu-id="58e0f-236">**図 1**: Visual Studio での HotSpot コレクションエディター</span><span class="sxs-lookup"><span data-stu-id="58e0f-236">**Figure 1**: HotSpot Collection Editor in Visual Studio</span></span>

## <a name="bulletedlist-control"></a><span data-ttu-id="58e0f-237">BulletedList コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-237">BulletedList Control</span></span>

<span data-ttu-id="58e0f-238">BulletedList コントロールは、データを簡単にバインドできる箇条書きリストです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-238">The BulletedList control is a bulleted list that can easily be data bound.</span></span> <span data-ttu-id="58e0f-239">リストは、BulletStyle プロパティを使用して順序付け (番号付き) することも、順序を指定しないこともできます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-239">The list can be ordered (numbered) or unordered via the BulletStyle property.</span></span> <span data-ttu-id="58e0f-240">リスト内の各項目は、ListItem オブジェクトによって表されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-240">Each item in the list is represented by a ListItem object.</span></span>

![Visual Studio での BulletedList コントロール](server-controls/_static/image1.gif)

<span data-ttu-id="58e0f-242">**図 2**: Visual Studio での BulletedList コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-242">**Figure 2**: BulletedList Control in Visual Studio</span></span>

## <a name="hiddenfield-control"></a><span data-ttu-id="58e0f-243">HiddenField コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-243">HiddenField Control</span></span>

<span data-ttu-id="58e0f-244">HiddenField コントロールは、非表示のフォームフィールドをページに追加します。このフィールドの値は、サーバー側のコードで使用できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-244">The HiddenField control adds a hidden form field to your page, the value of which is available in server-side code.</span></span> <span data-ttu-id="58e0f-245">通常、非表示のフォームフィールドの値は、ポストバック間で変更されないようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-245">The value of a hidden form field is generally expected to remain unchanged between post backs.</span></span> <span data-ttu-id="58e0f-246">ただし、悪意のあるユーザーがポストバック前に値を変更する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-246">However, it is possible for a malicious user to change the value prior to post back.</span></span> <span data-ttu-id="58e0f-247">これが発生した場合、HiddenField コントロールは ValueChanged イベントを発生させます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-247">If this happens, the HiddenField control will raise the ValueChanged event.</span></span> <span data-ttu-id="58e0f-248">HiddenField コントロールに機密情報があり、変更されていないことを確認する必要がある場合は、コード内で ValueChanged イベントを処理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-248">If you have sensitive information in the HiddenField control and you want to ensure that it remains unchanged, you should handle the ValueChanged event in your code.</span></span>

## <a name="fileupload-control"></a><span data-ttu-id="58e0f-249">FileUpload コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-249">FileUpload Control</span></span>

<span data-ttu-id="58e0f-250">ASP.NET 2.0 の FileUpload コントロールを使用すると、ASP.NET ページを介して Web サーバーにファイルをアップロードできます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-250">The FileUpload control in ASP.NET 2.0 makes it possible to upload files to a Web server via an ASP.NET page.</span></span> <span data-ttu-id="58e0f-251">このコントロールは、いくつかの例外を除き、ASP.NET 1.x HtmlInputFile クラスによく似ています。</span><span class="sxs-lookup"><span data-stu-id="58e0f-251">This control is quite similar to the ASP.NET 1.x HtmlInputFile class with a few exceptions.</span></span> <span data-ttu-id="58e0f-252">ASP.NET 1.x では、適切なファイルがあるかどうかを判断するために、PostedFile プロパティが null かどうかをチェックすることをお勧めしました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-252">In ASP.NET 1.x, it was recommended that the PostedFile property be checked for null in order to determine if you had a good file.</span></span> <span data-ttu-id="58e0f-253">ASP.NET 2.0 の FileUpload コントロールには、同じ目的で使用できる新しい HasFile プロパティが追加されています。これはもう少し効率的です。</span><span class="sxs-lookup"><span data-stu-id="58e0f-253">The FileUpload control in ASP.NET 2.0 adds a new HasFile property that you can use for the same purpose and it's a bit more efficient.</span></span>

<span data-ttu-id="58e0f-254">PostedFile プロパティは、HttpPostedFile オブジェクトへのアクセスに使用できますが、HttpPostedFile の一部の機能は、本質的に FileUpload コントロールで使用できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="58e0f-254">The PostedFile property is still available for access to an HttpPostedFile object, but some of the functionality of the HttpPostedFile is now available intrinsically with the FileUpload control.</span></span> <span data-ttu-id="58e0f-255">たとえば、アップロードされたファイルを ASP.NET 1.x に保存するには、HttpPostedFile オブジェクトで SaveAs メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-255">For example, to save an uploaded file in ASP.NET 1.x, you call the SaveAs method on the HttpPostedFile object.</span></span> <span data-ttu-id="58e0f-256">ASP.NET 2.0 の FileUpload コントロールを使用して、FileUpload コントロール自体で SaveAs メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-256">Using the FileUpload control in ASP.NET 2.0, you would call the SaveAs method on the FileUpload control itself.</span></span>

<span data-ttu-id="58e0f-257">2\.0 の動作におけるもう1つの重要な変更 (おそらく、最も重要な変更) は、アップロードされたファイル全体をメモリに読み込みてから保存する必要がなくなったことです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-257">Another significant change in the 2.0 behavior (and likely the most significant change) is that it is no longer necessary to load an entire uploaded file into memory before saving it.</span></span> <span data-ttu-id="58e0f-258">1\.x では、アップロードされたすべてのファイルがディスクに書き込まれる前にすべてのメモリに保存されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-258">In 1.x, any file that was uploaded is saved entirely into memory prior to being written to disk.</span></span> <span data-ttu-id="58e0f-259">このアーキテクチャでは、大きなファイルをアップロードできません。</span><span class="sxs-lookup"><span data-stu-id="58e0f-259">This architecture prevents the upload of large files.</span></span>

<span data-ttu-id="58e0f-260">ASP.NET 2.0 では、httpRuntime 要素の Requestlength Diskthreshold 属性を使用して、ディスクに書き込まれる前にメモリ内のバッファーに保持するキロバイト数を構成できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-260">In ASP.NET 2.0, the requestLengthDiskThreshold attribute of the httpRuntime element allows you to configure how many Kilobytes are held in a buffer in memory prior to being written to disk.</span></span>

<span data-ttu-id="58e0f-261">**重要**: MSDN ドキュメント (および他のドキュメント) では、この値が (kb ではなく) バイトで、既定値が256であることを指定しています。</span><span class="sxs-lookup"><span data-stu-id="58e0f-261">**IMPORTANT**: MSDN documentation (and documentation elsewhere) specifies that this value is in bytes (not Kilobytes) and that the default is 256.</span></span> <span data-ttu-id="58e0f-262">値は実際にはキロバイト単位で指定され、既定値は80です。</span><span class="sxs-lookup"><span data-stu-id="58e0f-262">The value is actually specified in Kilobytes and the default value is 80.</span></span> <span data-ttu-id="58e0f-263">既定値の80K を指定することで、バッファーが大きなオブジェクトヒープで終了しないようにします。</span><span class="sxs-lookup"><span data-stu-id="58e0f-263">By having a default value of 80K, we ensure that the buffer does not end up on the large object heap.</span></span>

## <a name="wizard-control"></a><span data-ttu-id="58e0f-264">ウィザードコントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-264">Wizard Control</span></span>

<span data-ttu-id="58e0f-265">パネルを使用して一連の "ページ" で情報を収集したり、ページからページに移動したりすることに苦労している ASP.NET 開発者には、非常に一般的です。</span><span class="sxs-lookup"><span data-stu-id="58e0f-265">It is fairly common to encounter ASP.NET developers struggling with attempting to gather information in a series of "pages" using panels or by transferring from page to page.</span></span> <span data-ttu-id="58e0f-266">多くの場合、この作業は面倒な作業であり、時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-266">More often than not, the endeavor is a frustrating one and is time consuming.</span></span> <span data-ttu-id="58e0f-267">新しいウィザードコントロールは、ユーザーが使い慣れたウィザードインターフェイスで線形および非線形のステップを許可することで、問題を解決します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-267">The new Wizard control solves the problems by allowing for linear and non-linear steps in a wizard interface that users are familiar with.</span></span> <span data-ttu-id="58e0f-268">ウィザードコントロールは、一連の手順で入力フォームを表示します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-268">The Wizard control presents input forms in a series of steps.</span></span> <span data-ttu-id="58e0f-269">各ステップは、コントロールの StepType プロパティによって指定された特定の種類です。</span><span class="sxs-lookup"><span data-stu-id="58e0f-269">Each step is of a particular type specified by the StepType property of the control.</span></span> <span data-ttu-id="58e0f-270">使用可能な手順の種類は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-270">The available step types are as follows:</span></span>

| <span data-ttu-id="58e0f-271">**ステップの種類**</span><span class="sxs-lookup"><span data-stu-id="58e0f-271">**Step Type**</span></span> | <span data-ttu-id="58e0f-272">**説明**</span><span class="sxs-lookup"><span data-stu-id="58e0f-272">**Explanation**</span></span> |
| --- | --- |
| <span data-ttu-id="58e0f-273">Auto</span><span class="sxs-lookup"><span data-stu-id="58e0f-273">Auto</span></span> | <span data-ttu-id="58e0f-274">ステップ階層内の位置に基づいて、ステップの種類が自動的に決定されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-274">The wizard automatically determines the type of step based upon its position within the step hierarchy.</span></span> |
| <span data-ttu-id="58e0f-275">[開始]</span><span class="sxs-lookup"><span data-stu-id="58e0f-275">Start</span></span> | <span data-ttu-id="58e0f-276">最初のステップ。多くの場合、導入ステートメントを提示するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-276">The first step, often used to present an introductory statement.</span></span> |
| <span data-ttu-id="58e0f-277">手順</span><span class="sxs-lookup"><span data-stu-id="58e0f-277">Step</span></span> | <span data-ttu-id="58e0f-278">通常の手順です。</span><span class="sxs-lookup"><span data-stu-id="58e0f-278">A normal step.</span></span> |
| <span data-ttu-id="58e0f-279">[完了]</span><span class="sxs-lookup"><span data-stu-id="58e0f-279">Finish</span></span> | <span data-ttu-id="58e0f-280">最後の手順。通常は、ウィザードを終了するボタンを表示するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-280">The final step, usually used to present a button to finish the wizard.</span></span> |
| <span data-ttu-id="58e0f-281">完了</span><span class="sxs-lookup"><span data-stu-id="58e0f-281">Complete</span></span> | <span data-ttu-id="58e0f-282">成功したか失敗したかを伝えるメッセージを表示します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-282">Presents a message communicating success or failure.</span></span> |

> [!NOTE]
> <span data-ttu-id="58e0f-283">ウィザードコントロールは、ASP.NET コントロールの状態を使用して状態を追跡します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-283">The Wizard control keeps track of its state using ASP.NET control state.</span></span> <span data-ttu-id="58e0f-284">したがって、EnableViewState プロパティは、も不利を指定せずに false に設定できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-284">Therefore, the EnableViewState property can be set to false without any detriment.</span></span>

<span data-ttu-id="58e0f-285">このビデオは、ウィザードコントロールのチュートリアルです。</span><span class="sxs-lookup"><span data-stu-id="58e0f-285">This video is a walkthrough of the Wizard control.</span></span>

![](server-controls/_static/image2.png)

[<span data-ttu-id="58e0f-286">全画面表示のビデオを開く</span><span class="sxs-lookup"><span data-stu-id="58e0f-286">Open Full-Screen Video</span></span>](server-controls/_static/wizard1.wmv)

## <a name="localize-control"></a><span data-ttu-id="58e0f-287">ローカライズコントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-287">Localize Control</span></span>

<span data-ttu-id="58e0f-288">ローカライズコントロールは、リテラルコントロールに似ています。</span><span class="sxs-lookup"><span data-stu-id="58e0f-288">The Localize control is similar to a Literal control.</span></span> <span data-ttu-id="58e0f-289">ただし、Localize コントロールには、追加されたマークアップの表示方法を制御する**Mode**プロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-289">However, the Localize control has a **Mode** property that controls how markup that is added to it is rendered.</span></span> <span data-ttu-id="58e0f-290">Mode プロパティは、次の値をサポートします。</span><span class="sxs-lookup"><span data-stu-id="58e0f-290">The Mode property supports the following values:</span></span>

| <span data-ttu-id="58e0f-291">**モード**</span><span class="sxs-lookup"><span data-stu-id="58e0f-291">**Mode**</span></span> | <span data-ttu-id="58e0f-292">**説明**</span><span class="sxs-lookup"><span data-stu-id="58e0f-292">**Explanation**</span></span> |
| --- | --- |
| <span data-ttu-id="58e0f-293">変換</span><span class="sxs-lookup"><span data-stu-id="58e0f-293">Transform</span></span> | <span data-ttu-id="58e0f-294">マークアップは、要求を行っているブラウザーのプロトコルに従って変換されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-294">Markup is transformed according to the protocol of the browser making the request.</span></span> |
| <span data-ttu-id="58e0f-295">PassThrough</span><span class="sxs-lookup"><span data-stu-id="58e0f-295">PassThrough</span></span> | <span data-ttu-id="58e0f-296">マークアップはそのようにレンダリングされます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-296">Markup is rendered as-is.</span></span> |
| <span data-ttu-id="58e0f-297">エンコード</span><span class="sxs-lookup"><span data-stu-id="58e0f-297">Encode</span></span> | <span data-ttu-id="58e0f-298">コントロールに追加されたマークアップは、HtmlEncode を使用してエンコードされます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-298">Markup that is added to the control is encoded using HtmlEncode.</span></span> |

## <a name="multiview-and-view-controls"></a><span data-ttu-id="58e0f-299">MultiView およびビューコントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-299">MultiView and View Controls</span></span>

<span data-ttu-id="58e0f-300">MultiView コントロールは、ビューコントロールのコンテナーとして機能し、ビューコントロールは他のコントロールのコンテナーとして機能します (パネルコントロールに似ています)。</span><span class="sxs-lookup"><span data-stu-id="58e0f-300">The MultiView control acts as a container for View controls, and the View control acts as a container (much like a Panel control) for other controls.</span></span> <span data-ttu-id="58e0f-301">MultiView コントロールの各ビューは、単一のビューコントロールによって表されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-301">Each view in a MultiView control is represented by a single View control.</span></span> <span data-ttu-id="58e0f-302">MultiView の最初のビューコントロールはビュー0、2番目はビュー1などです。MultiView コントロールの ActiveViewIndex を指定することで、ビューを切り替えることができます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-302">The first View control in the MultiView is view 0, the second is view 1, etc. You can switch views by specifying the ActiveViewIndex of the MultiView control.</span></span>

## <a name="substitution-control"></a><span data-ttu-id="58e0f-303">Substitution コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-303">Substitution Control</span></span>

<span data-ttu-id="58e0f-304">Substitution コントロールは、ASP.NET キャッシュと組み合わせて使用されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-304">The Substitution control is used in conjunction with ASP.NET caching.</span></span> <span data-ttu-id="58e0f-305">キャッシュを利用する場合に、各要求で更新する必要があるページの部分がある場合 (つまり、キャッシュから除外されているページの一部)、代替コンポーネントは優れたソリューションを提供します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-305">In cases where you want to take advantage of caching, but you have portions of a page that must be updated on each request (in other words, portions of a page that are exempt from caching), the Substitution component provides a great solution.</span></span> <span data-ttu-id="58e0f-306">コントロールは実際に出力をレンダリングしません。</span><span class="sxs-lookup"><span data-stu-id="58e0f-306">The control doesn't actually render any output on its own.</span></span> <span data-ttu-id="58e0f-307">代わりに、サーバー側コードのメソッドにバインドされます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-307">Instead, it is bound to a method in server-side code.</span></span> <span data-ttu-id="58e0f-308">ページが要求されると、メソッドが呼び出され、返されたマークアップが代替コントロールの代わりに表示されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-308">When the page is requested, the method is called and the returned markup is rendered in place of the substitution control.</span></span>

<span data-ttu-id="58e0f-309">Substitution コントロールがバインドされているメソッドは、 **MethodName**プロパティを使用して指定されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-309">The method to which the Substitution control is bound is specified via the **MethodName** property.</span></span> <span data-ttu-id="58e0f-310">このメソッドは、次の条件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-310">That method must meet the following criteria:</span></span>

- <span data-ttu-id="58e0f-311">Static (VB では shared) メソッドである必要があります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-311">It must be a static (shared in VB) method.</span></span>
- <span data-ttu-id="58e0f-312">このメソッドは、HttpContext 型の1つのパラメーターを受け入れます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-312">It accepts one parameter of type HttpContext.</span></span>
- <span data-ttu-id="58e0f-313">このメソッドは、ページ上のコントロールを置き換える必要があるマークアップを表す文字列を返します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-313">It returns a string representing the markup that should replace the control on the page.</span></span>

<span data-ttu-id="58e0f-314">Substitution コントロールには、ページ上の他のコントロールを変更する機能はありませんが、パラメーターを使用して現在の HttpContext にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-314">The Substitution control does not have the ability to modify any other control on the page, but it does have access to the current HttpContext via its parameter.</span></span>

## <a name="gridview-control"></a><span data-ttu-id="58e0f-315">GridView コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-315">GridView Control</span></span>

<span data-ttu-id="58e0f-316">GridView コントロールは、DataGrid コントロールの代わりになります。</span><span class="sxs-lookup"><span data-stu-id="58e0f-316">The GridView control is the replacement for the DataGrid control.</span></span> <span data-ttu-id="58e0f-317">このコントロールについては、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-317">This control will be covered in more detail in a later module.</span></span>

## <a name="detailsview-control"></a><span data-ttu-id="58e0f-318">DetailsView コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-318">DetailsView Control</span></span>

<span data-ttu-id="58e0f-319">DetailsView コントロールを使用すると、データソースから1つのレコードを表示し、それを編集または削除できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-319">The DetailsView control allows you to display a single record from a data source and to edit or delete it.</span></span> <span data-ttu-id="58e0f-320">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-320">It is covered in more detail in a later module.</span></span>

## <a name="formview-control"></a><span data-ttu-id="58e0f-321">FormView コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-321">FormView Control</span></span>

<span data-ttu-id="58e0f-322">FormView コントロールは、構成可能なインターフェイス内のデータソースから1つのレコードを表示するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-322">The FormView control is used to display a single record from a datasource in a configurable interface.</span></span> <span data-ttu-id="58e0f-323">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-323">It is covered in more detail in a later module.</span></span>

## <a name="accessdatasource-control"></a><span data-ttu-id="58e0f-324">AccessDataSource コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-324">AccessDataSource Control</span></span>

<span data-ttu-id="58e0f-325">AccessDataSource コントロールは、Access データベースのデータバインドに使用されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-325">The AccessDataSource control is used to data bind an Access database.</span></span> <span data-ttu-id="58e0f-326">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-326">It is covered in more detail in a later module.</span></span>

## <a name="objectdatasource-control"></a><span data-ttu-id="58e0f-327">ObjectDataSource コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-327">ObjectDataSource Control</span></span>

<span data-ttu-id="58e0f-328">ObjectDataSource コントロールは、3層アーキテクチャをサポートするために使用されます。これにより、コントロールがデータソースに直接バインドされている2層モデルではなく、中間層ビジネスオブジェクトにコントロールをデータバインドできます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-328">The ObjectDataSource control is used to support a three-tier architecture so that controls can be data-bound to a middle-tier business object as opposed to a two-tiered model where controls are bound directly to the data source.</span></span> <span data-ttu-id="58e0f-329">詳細については、後のモジュールで説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-329">It will be discussed in more detail in a later module.</span></span>

## <a name="xmldatasource-control"></a><span data-ttu-id="58e0f-330">XmlDataSource コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-330">XmlDataSource Control</span></span>

<span data-ttu-id="58e0f-331">XmlDataSource コントロールは、XML データソースにデータをバインドするために使用されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-331">The XmlDataSource control is used to data bind to an XML data source.</span></span> <span data-ttu-id="58e0f-332">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-332">It is covered in more detail in a later module.</span></span>

## <a name="sitemapdatasource-control"></a><span data-ttu-id="58e0f-333">SiteMapDataSource コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-333">SiteMapDataSource Control</span></span>

<span data-ttu-id="58e0f-334">SiteMapDataSource コントロールは、サイトマップに基づいてサイトナビゲーションコントロールのデータバインディングを提供します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-334">The SiteMapDataSource control provides data binding for site navigation controls based on a site map.</span></span> <span data-ttu-id="58e0f-335">詳細については、後のモジュールで説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-335">It will be discussed in more detail in a later module.</span></span>

## <a name="sitemappath-control"></a><span data-ttu-id="58e0f-336">SiteMapPath コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-336">SiteMapPath Control</span></span>

<span data-ttu-id="58e0f-337">SiteMapPath コントロールは、一般的に階層リンクと呼ばれる一連のナビゲーションリンクを表示します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-337">The SiteMapPath control displays a series of navigation links commonly referred to as breadcrumbs.</span></span> <span data-ttu-id="58e0f-338">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-338">It is covered in more detail in a later module.</span></span>

## <a name="menu-control"></a><span data-ttu-id="58e0f-339">メニュー コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-339">Menu Control</span></span>

<span data-ttu-id="58e0f-340">メニューコントロールには、DHTML を使用した動的メニューが表示されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-340">The Menu control displays dynamic menus using DHTML.</span></span> <span data-ttu-id="58e0f-341">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-341">It is covered in more detail in a later module.</span></span>

## <a name="treeview-control"></a><span data-ttu-id="58e0f-342">TreeView コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-342">TreeView Control</span></span>

<span data-ttu-id="58e0f-343">TreeView コントロールは、データの階層ツリービューを表示するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-343">The TreeView control is used to display a hierarchical tree view of data.</span></span> <span data-ttu-id="58e0f-344">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-344">It is covered in more detail in a later module.</span></span>

## <a name="login-control"></a><span data-ttu-id="58e0f-345">ログイン制御</span><span class="sxs-lookup"><span data-stu-id="58e0f-345">Login Control</span></span>

<span data-ttu-id="58e0f-346">ログインコントロールは、Web サイトにログインするためのメカニズムを提供します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-346">The Login control provides for a mechanism to log into a Web site.</span></span> <span data-ttu-id="58e0f-347">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-347">It is covered in more detail in a later module.</span></span>

## <a name="loginview-control"></a><span data-ttu-id="58e0f-348">LoginView コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-348">LoginView Control</span></span>

<span data-ttu-id="58e0f-349">LoginView コントロールを使用すると、ユーザーのログインの状態に基づいてさまざまなテンプレートを表示できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-349">The LoginView control allows for the display of different templates based upon a user's login status.</span></span> <span data-ttu-id="58e0f-350">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-350">It is covered in more detail in a later module.</span></span>

## <a name="passwordrecovery-control"></a><span data-ttu-id="58e0f-351">PasswordRecovery コントロール</span><span class="sxs-lookup"><span data-stu-id="58e0f-351">PasswordRecovery Control</span></span>

<span data-ttu-id="58e0f-352">PasswordRecovery コントロールは、ASP.NET アプリケーションのユーザーが忘れたパスワードを取得するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-352">The PasswordRecovery control is used to retrieve forgotten passwords by users of an ASP.NET application.</span></span> <span data-ttu-id="58e0f-353">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-353">It is covered in more detail in a later module.</span></span>

## <a name="loginstatus"></a><span data-ttu-id="58e0f-354">LoginStatus</span><span class="sxs-lookup"><span data-stu-id="58e0f-354">LoginStatus</span></span>

<span data-ttu-id="58e0f-355">LoginStatus コントロールには、ユーザーのログイン状態が表示されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-355">The LoginStatus control displays a user's login status.</span></span> <span data-ttu-id="58e0f-356">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-356">It is covered in more detail in a later module.</span></span>

## <a name="loginname"></a><span data-ttu-id="58e0f-357">LoginName</span><span class="sxs-lookup"><span data-stu-id="58e0f-357">LoginName</span></span>

<span data-ttu-id="58e0f-358">ASP.NET アプリケーションにログインした後、[ログイン] コントロールにユーザーのユーザー名が表示されます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-358">The LoginName control displays a user's username after being logged into an ASP.NET application.</span></span> <span data-ttu-id="58e0f-359">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-359">It is covered in more detail in a later module.</span></span>

## <a name="createuserwizard"></a><span data-ttu-id="58e0f-360">CreateUserWizard</span><span class="sxs-lookup"><span data-stu-id="58e0f-360">CreateUserWizard</span></span>

<span data-ttu-id="58e0f-361">CreateUserWizard は構成可能なウィザードであり、ASP.NET アプリケーションで使用する ASP.NET メンバーシップアカウントをユーザーが作成することができます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-361">The CreateUserWizard is a configurable wizard which gives users the ability to create an ASP.NET Membership account for use in an ASP.NET application.</span></span> <span data-ttu-id="58e0f-362">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-362">It is covered in more detail in a later module.</span></span>

## <a name="changepassword"></a><span data-ttu-id="58e0f-363">ChangePassword</span><span class="sxs-lookup"><span data-stu-id="58e0f-363">ChangePassword</span></span>

<span data-ttu-id="58e0f-364">ChangePassword コントロールを使用すると、ユーザーは ASP.NET アプリケーションのパスワードを変更できます。</span><span class="sxs-lookup"><span data-stu-id="58e0f-364">The ChangePassword control allows users to change their password for an ASP.NET application.</span></span> <span data-ttu-id="58e0f-365">詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-365">It is covered in more detail in a later module.</span></span>

## <a name="various-webparts"></a><span data-ttu-id="58e0f-366">さまざまな Web パーツ</span><span class="sxs-lookup"><span data-stu-id="58e0f-366">Various WebParts</span></span>

<span data-ttu-id="58e0f-367">ASP.NET 2.0 には、さまざまな Web パーツが付属しています。</span><span class="sxs-lookup"><span data-stu-id="58e0f-367">ASP.NET 2.0 ships with various Web Parts.</span></span> <span data-ttu-id="58e0f-368">これらの詳細については、後のモジュールで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="58e0f-368">These will be covered in detail in a later module.</span></span>
