---
uid: web-forms/overview/older-versions-security/introduction/security-basics-and-asp-net-support-cs
title: セキュリティの基礎と ASP.NET のサポート (C#) |Microsoft Docs
author: rick-anderson
description: これは、web フォームを介して訪問者を認証し、partic へのアクセスを承認するための手法を紹介するチュートリアルシリーズの最初のチュートリアルです。
ms.author: riande
ms.date: 01/13/2008
ms.assetid: 07e15538-2f29-40c6-b2e7-e6115075ac83
msc.legacyurl: /web-forms/overview/older-versions-security/introduction/security-basics-and-asp-net-support-cs
msc.type: authoredcontent
ms.openlocfilehash: 1ccaac101a83d0e28b07b220b8b7b61a9039227e
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78520072"
---
# <a name="security-basics-and-aspnet-support-c"></a><span data-ttu-id="6041e-103">セキュリティの基礎と ASP.NET のサポート (C#)</span><span class="sxs-lookup"><span data-stu-id="6041e-103">Security Basics and ASP.NET Support (C#)</span></span>

<span data-ttu-id="6041e-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="6041e-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="6041e-105">[[Download PDF]\(PDF をダウンロード\)](https://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial01_Basics_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="6041e-105">[Download PDF](https://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial01_Basics_cs.pdf)</span></span>

> <span data-ttu-id="6041e-106">このチュートリアルでは、web フォームから訪問者を認証したり、特定のページや機能へのアクセスを承認したり、ASP.NET アプリケーションでユーザーアカウントを管理したりするための手法について説明します。</span><span class="sxs-lookup"><span data-stu-id="6041e-106">This is the first tutorial in a series of tutorials that will explore techniques for authenticating visitors through a web form, authorizing access to particular pages and functionality, and managing user accounts in an ASP.NET application.</span></span>

## <a name="introduction"></a><span data-ttu-id="6041e-107">はじめに</span><span class="sxs-lookup"><span data-stu-id="6041e-107">Introduction</span></span>

<span data-ttu-id="6041e-108">1つのフォーラム、e コマースサイト、オンライン電子メール web サイト、ポータル web サイト、およびソーシャルネットワークサイトは、すべて共通していますか。</span><span class="sxs-lookup"><span data-stu-id="6041e-108">What is the one thing forums, eCommerce sites, online email websites, portal websites, and social network sites all have in common?</span></span> <span data-ttu-id="6041e-109">すべての*ユーザーアカウント*を提供します。</span><span class="sxs-lookup"><span data-stu-id="6041e-109">They all offer *user accounts*.</span></span> <span data-ttu-id="6041e-110">ユーザーアカウントを提供するサイトは、多数のサービスを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6041e-110">Sites that offer user accounts must provide a number of services.</span></span> <span data-ttu-id="6041e-111">少なくとも、新しい訪問者はアカウントを作成する必要があり、訪問者を返すにはログインできる必要があります。</span><span class="sxs-lookup"><span data-stu-id="6041e-111">At a minimum, new visitors need to be able to create an account and returning visitors must be able to log in.</span></span> <span data-ttu-id="6041e-112">このような web アプリケーションは、ログインしているユーザーに基づいて意思決定を行うことができます。一部のページまたはアクションは、ログインしているユーザーまたは特定のユーザーのサブセットのみに制限されることがあります。他のページでは、ログインしているユーザーに固有の情報が表示される場合があります。また、ページを表示しているユーザーによっては、表示される情報が増減する場合もあります。</span><span class="sxs-lookup"><span data-stu-id="6041e-112">Such web applications can make decisions based on the logged in user: some pages or actions might be restricted to only logged in users, or to a certain subset of users; other pages might show information specific to the logged in user, or might show more or less information, depending on what user is viewing the page.</span></span>

<span data-ttu-id="6041e-113">このチュートリアルでは、web フォームから訪問者を認証したり、特定のページや機能へのアクセスを承認したり、ASP.NET アプリケーションでユーザーアカウントを管理したりするための手法について説明します。</span><span class="sxs-lookup"><span data-stu-id="6041e-113">This is the first tutorial in a series of tutorials that will explore techniques for authenticating visitors through a web form, authorizing access to particular pages and functionality, and managing user accounts in an ASP.NET application.</span></span> <span data-ttu-id="6041e-114">これらのチュートリアルでは、次の方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="6041e-114">Over the course of these tutorials we will examine how to:</span></span>

- <span data-ttu-id="6041e-115">ユーザーを特定し、web サイトにログインする</span><span class="sxs-lookup"><span data-stu-id="6041e-115">Identify and log users in to a website</span></span>
- <span data-ttu-id="6041e-116">ASP を使用します。ユーザーアカウントを管理するための NET のメンバーシップフレームワーク</span><span class="sxs-lookup"><span data-stu-id="6041e-116">Use ASP.NET's Membership framework to manage user accounts</span></span>
- <span data-ttu-id="6041e-117">ユーザーアカウントの作成、更新、削除</span><span class="sxs-lookup"><span data-stu-id="6041e-117">Create, update, and delete user accounts</span></span>
- <span data-ttu-id="6041e-118">ログインしているユーザーに基づいて、web ページ、ディレクトリ、または特定の機能へのアクセスを制限する</span><span class="sxs-lookup"><span data-stu-id="6041e-118">Limit access to a web page, directory, or specific functionality based on the logged in user</span></span>
- <span data-ttu-id="6041e-119">ASP を使用します。ユーザーアカウントをロールに関連付ける NET のロールフレームワーク</span><span class="sxs-lookup"><span data-stu-id="6041e-119">Use ASP.NET's Roles framework to associate user accounts with roles</span></span>
- <span data-ttu-id="6041e-120">ユーザー ロールの管理</span><span class="sxs-lookup"><span data-stu-id="6041e-120">Manage user roles</span></span>
- <span data-ttu-id="6041e-121">ログインしているユーザーのロールに基づいて、web ページ、ディレクトリ、または特定の機能へのアクセスを制限する</span><span class="sxs-lookup"><span data-stu-id="6041e-121">Limit access to a web page, directory, or specific functionality based on the logged in user's role</span></span>
- <span data-ttu-id="6041e-122">ASP をカスタマイズおよび拡張します。NET のセキュリティ Web コントロール</span><span class="sxs-lookup"><span data-stu-id="6041e-122">Customize and extend ASP.NET's security Web controls</span></span>

<span data-ttu-id="6041e-123">これらのチュートリアルは簡潔にすることを目的としており、プロセスを視覚的に説明するためのさまざまなスクリーンショットを含む詳細な手順を説明しています。</span><span class="sxs-lookup"><span data-stu-id="6041e-123">These tutorials are geared to be concise and provide step-by-step instructions with plenty of screen shots to walk you through the process visually.</span></span> <span data-ttu-id="6041e-124">各チュートリアルは、およびC# Visual Basic バージョンで使用でき、使用されている完全なコードのダウンロードが含まれています。</span><span class="sxs-lookup"><span data-stu-id="6041e-124">Each tutorial is available in C# and Visual Basic versions and includes a download of the complete code used.</span></span> <span data-ttu-id="6041e-125">(この最初のチュートリアルでは、高レベルの視点からのセキュリティの概念に焦点を当てているため、関連付けられているコードは含まれていません)。</span><span class="sxs-lookup"><span data-stu-id="6041e-125">(This first tutorial focuses on security concepts from a high-level viewpoint and therefore does not contain any associated code.)</span></span>

<span data-ttu-id="6041e-126">このチュートリアルでは、フォーム認証、承認、ユーザーアカウント、およびロールの実装を支援するために、重要なセキュリティの概念と、ASP.NET で使用できる機能について説明します。</span><span class="sxs-lookup"><span data-stu-id="6041e-126">In this tutorial we will discuss important security concepts and what facilities are available in ASP.NET to assist in implementing forms authentication, authorization, user accounts, and roles.</span></span> <span data-ttu-id="6041e-127">作業開始</span><span class="sxs-lookup"><span data-stu-id="6041e-127">Let's get started!</span></span>

> [!NOTE]
> <span data-ttu-id="6041e-128">セキュリティは、物理的、技術的、およびポリシーの決定にまたがるアプリケーションの重要な側面であり、高いレベルの計画とドメインの知識が必要です。</span><span class="sxs-lookup"><span data-stu-id="6041e-128">Security is an important aspect of any application that spans physical, technological, and policy decisions and requires a high degree of planning and domain knowledge.</span></span> <span data-ttu-id="6041e-129">このチュートリアルシリーズは、セキュリティで保護された web アプリケーションを開発するためのガイドとしてのものではありません。</span><span class="sxs-lookup"><span data-stu-id="6041e-129">This tutorial series is not intended as a guide for developing secure web applications.</span></span> <span data-ttu-id="6041e-130">代わりに、フォーム認証、承認、ユーザーアカウント、およびロールに焦点を当てています。</span><span class="sxs-lookup"><span data-stu-id="6041e-130">Rather, it focuses specifically on forms authentication, authorization, user accounts, and roles.</span></span> <span data-ttu-id="6041e-131">このシリーズでは、これらの問題の一部であるセキュリティの概念について説明しますが、その他の概念については未探索していません。</span><span class="sxs-lookup"><span data-stu-id="6041e-131">While some security concepts revolving around these issues are discussed in this series, others are left unexplored.</span></span>

## <a name="authentication-authorization-user-accounts-and-roles"></a><span data-ttu-id="6041e-132">認証、承認、ユーザーアカウント、およびロール</span><span class="sxs-lookup"><span data-stu-id="6041e-132">Authentication, Authorization, User Accounts, and Roles</span></span>

<span data-ttu-id="6041e-133">認証、承認、ユーザーアカウント、およびロールは、このチュートリアルシリーズで非常によく使用される4つの用語です。そのため、web セキュリティのコンテキスト内でこれらの用語を定義するための時間を短縮したいと思います。</span><span class="sxs-lookup"><span data-stu-id="6041e-133">Authentication, authorization, user accounts, and roles are four terms that will be used very often throughout this tutorial series, so I'd like to take a quick moment to define these terms within the context of web security.</span></span> <span data-ttu-id="6041e-134">クライアント/サーバーモデル (インターネットなど) では、要求を行うクライアントをサーバーが識別する必要があるシナリオが多数あります。</span><span class="sxs-lookup"><span data-stu-id="6041e-134">In a client-server model, such as the Internet, there are many scenarios in which the server needs to identify the client making the request.</span></span> <span data-ttu-id="6041e-135">*認証*は、クライアントの id を突き止めるするプロセスです。</span><span class="sxs-lookup"><span data-stu-id="6041e-135">*Authentication* is the process of ascertaining the client's identity.</span></span> <span data-ttu-id="6041e-136">正常に識別されたクライアントは、*認証*されていると言います。</span><span class="sxs-lookup"><span data-stu-id="6041e-136">A client who has been successfully identified is said to be *authenticated*.</span></span> <span data-ttu-id="6041e-137">不明なクライアントは、*認証*されていないか、*匿名*であると言われます。</span><span class="sxs-lookup"><span data-stu-id="6041e-137">An unidentified client is said to be *unauthenticated* or *anonymous*.</span></span>

<span data-ttu-id="6041e-138">セキュリティで保護された認証システムには、次の3つのファセットのうち少なくとも1つが含まれています:[既知のもの、ユーザーが持っているもの、またはユーザー](http://www.cs.cornell.edu/Courses/cs513/2005fa/NNLauthPeople.html)のもの</span><span class="sxs-lookup"><span data-stu-id="6041e-138">Secure authentication systems involve at least one of the following three facets: [something you know, something you have, or something you are](http://www.cs.cornell.edu/Courses/cs513/2005fa/NNLauthPeople.html).</span></span> <span data-ttu-id="6041e-139">ほとんどの web アプリケーションは、パスワードや PIN など、クライアントが知っているものに依存しています。</span><span class="sxs-lookup"><span data-stu-id="6041e-139">Most web applications rely on something the client knows, such as a password or a PIN.</span></span> <span data-ttu-id="6041e-140">たとえば、ユーザーのユーザー名とパスワードを識別するために使用される情報は、*資格情報*と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="6041e-140">The information used to identify a user - her username and password, for example - are referred to as *credentials*.</span></span> <span data-ttu-id="6041e-141">このチュートリアルシリーズでは、フォーム認証に焦点を当てています。*フォーム認証*は、ユーザーが web ページフォームで資格情報を提供することによってサイトにログインする認証モデルです。</span><span class="sxs-lookup"><span data-stu-id="6041e-141">This tutorial series focuses on *forms authentication*, which is an authentication model where users log in to the site by providing their credentials in a web page form.</span></span> <span data-ttu-id="6041e-142">以前は、この種類の認証をすべて経験しています。</span><span class="sxs-lookup"><span data-stu-id="6041e-142">We have all experienced this type of authentication before.</span></span> <span data-ttu-id="6041e-143">すべての e コマースサイトにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="6041e-143">Go to any eCommerce site.</span></span> <span data-ttu-id="6041e-144">チェックアウトの準備ができたら、web ページのテキストボックスにユーザー名とパスワードを入力してログインするように求められます。</span><span class="sxs-lookup"><span data-stu-id="6041e-144">When you are ready to check out you are asked to log in by entering your username and password into textboxes on a web page.</span></span>

<span data-ttu-id="6041e-145">クライアントを識別するだけでなく、サーバーは、要求を行っているクライアントに応じて、アクセス可能なリソースや機能を制限する必要がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="6041e-145">In addition to identifying clients, a server may need to limit what resources or functionalities are accessible depending on the client making the request.</span></span> <span data-ttu-id="6041e-146">*承認*とは、特定のユーザーが特定のリソースまたは機能にアクセスする権限を持っているかどうかを判断するプロセスです。</span><span class="sxs-lookup"><span data-stu-id="6041e-146">*Authorization* is the process of determining whether a particular user has the authority to access a specific resource or functionality.</span></span>

<span data-ttu-id="6041e-147">*ユーザーアカウント*は、特定のユーザーに関する情報を保持するためのストアです。</span><span class="sxs-lookup"><span data-stu-id="6041e-147">A *user account* is a store for persisting information about a particular user.</span></span> <span data-ttu-id="6041e-148">ユーザーアカウントには、ユーザーのログイン名やパスワードなど、ユーザーを一意に識別する情報を最低限含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="6041e-148">User accounts must minimally include information that uniquely identifies the user, such as the user's login name and password.</span></span> <span data-ttu-id="6041e-149">この重要な情報と共に、ユーザーアカウントには、ユーザーの電子メールアドレスなどが含まれる場合があります。アカウントが作成された日付と時刻。最後にログインした日付と時刻。姓と名電話番号;住所を郵送します。</span><span class="sxs-lookup"><span data-stu-id="6041e-149">Along with this essential information, user accounts may include things like: the user's email address; the date and time the account was created; the date and time they last logged in; first and last name; phone number; and mailing address.</span></span> <span data-ttu-id="6041e-150">フォーム認証を使用する場合、ユーザーアカウント情報は通常、Microsoft SQL Server のようなリレーショナルデータベースに格納されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-150">When using forms authentication, user account information is typically stored in a relational database like Microsoft SQL Server.</span></span>

<span data-ttu-id="6041e-151">ユーザーアカウントをサポートする Web アプリケーションでは、必要に応じてユーザーを*ロール*にグループ化することができます。</span><span class="sxs-lookup"><span data-stu-id="6041e-151">Web applications that support user accounts may optionally group users into *roles*.</span></span> <span data-ttu-id="6041e-152">ロールは単なるラベルであり、ユーザーに適用され、承認規則とページレベル機能を定義するための抽象化を提供します。</span><span class="sxs-lookup"><span data-stu-id="6041e-152">A role is simply a label that is applied to a user and provides an abstraction for defining authorization rules and page-level functionality.</span></span> <span data-ttu-id="6041e-153">たとえば、web サイトには、管理者が特定の web ページのセットにアクセスすることを禁止する承認規則を持つ管理者ロールが含まれている場合があります。</span><span class="sxs-lookup"><span data-stu-id="6041e-153">For example, a website might include an Administrator role with authorization rules that prohibit anyone but an Administrator to access a particular set of web pages.</span></span> <span data-ttu-id="6041e-154">さらに、すべてのユーザーがアクセスできるさまざまなページ (管理者以外のユーザーも含む) は、追加データを表示したり、管理者ロールのユーザーがアクセスしたときに追加の機能を提供したりすることがあります。</span><span class="sxs-lookup"><span data-stu-id="6041e-154">Moreover, a variety of pages that are accessible to all users (including non-Administrators) might display additional data or offer extra functionality when visited by users in the Administrators role.</span></span> <span data-ttu-id="6041e-155">ロールを使用すると、ユーザーごとではなくロールごとにこれらの承認規則を定義できます。</span><span class="sxs-lookup"><span data-stu-id="6041e-155">Using roles, we can define these authorization rules on a role-by-role basis rather than user-by-user.</span></span>

## <a name="authenticating-users-in-an-aspnet-application"></a><span data-ttu-id="6041e-156">ASP.NET アプリケーションでのユーザーの認証</span><span class="sxs-lookup"><span data-stu-id="6041e-156">Authenticating Users in an ASP.NET Application</span></span>

<span data-ttu-id="6041e-157">ユーザーがブラウザーのアドレスウィンドウに URL を入力するか、リンクをクリックすると、ブラウザーは web サーバーに対して、指定されたコンテンツの[ハイパーテキスト転送プロトコル (HTTP)](http://en.wikipedia.org/wiki/HTTP)要求を送信します。この要求は、ASP.NET ページ、イメージ、JavaScript ファイル、またはその他の種類のコンテンツのいずれかになります。</span><span class="sxs-lookup"><span data-stu-id="6041e-157">When a user enters a URL into their browser's address window or clicks on a link, the browser makes a [Hypertext Transfer Protocol (HTTP)](http://en.wikipedia.org/wiki/HTTP) request to the web server for the specified content, be it an ASP.NET page, an image, a JavaScript file, or any other type of content.</span></span> <span data-ttu-id="6041e-158">Web サーバーは、要求されたコンテンツを返します。</span><span class="sxs-lookup"><span data-stu-id="6041e-158">The web server is tasked with returning the requested content.</span></span> <span data-ttu-id="6041e-159">その場合は、要求を行ったユーザー、要求されたコンテンツを取得する権限が id に与えられているかどうかなど、要求に関するさまざまな事柄を決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6041e-159">In doing so, it must determine a number of things about the request, including who made the request and whether the identity is authorized to retrieve the requested content.</span></span>

<span data-ttu-id="6041e-160">既定では、ブラウザーは特定の種類の情報を持たない HTTP 要求を送信します。</span><span class="sxs-lookup"><span data-stu-id="6041e-160">By default, browsers send HTTP requests that lack any sort of identification information.</span></span> <span data-ttu-id="6041e-161">ただし、ブラウザーに認証情報が含まれている場合、web サーバーは認証ワークフローを開始します。これにより、要求を行っているクライアントが識別されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-161">But if the browser does include authentication information then the web server starts the authentication workflow, which attempts to identify the client making the request.</span></span> <span data-ttu-id="6041e-162">認証ワークフローの手順は、web アプリケーションによって使用されている認証の種類によって異なります。</span><span class="sxs-lookup"><span data-stu-id="6041e-162">The steps of the authentication workflow depend on the type of authentication being used by the web application.</span></span> <span data-ttu-id="6041e-163">ASP.NET は、Windows、Passport、およびフォームの3種類の認証をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="6041e-163">ASP.NET supports three types of authentication: Windows, Passport, and forms.</span></span> <span data-ttu-id="6041e-164">このチュートリアルシリーズではフォーム認証に焦点を当てていますが、Windows 認証のユーザーストアとワークフローを比較対照してみましょう。</span><span class="sxs-lookup"><span data-stu-id="6041e-164">This tutorial series focuses on forms authentication, but let's take a minute to compare and contrast Windows authentication user stores and workflow.</span></span>

### <a name="authentication-via-windows-authentication"></a><span data-ttu-id="6041e-165">Windows 認証を使用した認証</span><span class="sxs-lookup"><span data-stu-id="6041e-165">Authentication via Windows Authentication</span></span>

<span data-ttu-id="6041e-166">Windows 認証ワークフローでは、次のいずれかの認証方法を使用します。</span><span class="sxs-lookup"><span data-stu-id="6041e-166">The Windows authentication workflow uses one of the following authentication techniques:</span></span>

- <span data-ttu-id="6041e-167">[基本認証]</span><span class="sxs-lookup"><span data-stu-id="6041e-167">Basic authentication</span></span>
- <span data-ttu-id="6041e-168">ダイジェスト認証</span><span class="sxs-lookup"><span data-stu-id="6041e-168">Digest authentication</span></span>
- <span data-ttu-id="6041e-169">Windows 統合認証</span><span class="sxs-lookup"><span data-stu-id="6041e-169">Windows Integrated Authentication</span></span>

<span data-ttu-id="6041e-170">この3つの方法はほぼ同じように機能します。承認されていない匿名要求が到着すると、web サーバーは HTTP 応答を送信して、承認が必要であることを示します。</span><span class="sxs-lookup"><span data-stu-id="6041e-170">All three techniques work in roughly the same way: when an unauthorized, anonymous request arrives, the web server sends back an HTTP response that indicates that authorization is required to continue.</span></span> <span data-ttu-id="6041e-171">ブラウザーには、ユーザーにユーザー名とパスワードの入力を求めるモーダルダイアログボックスが表示されます (図1を参照)。</span><span class="sxs-lookup"><span data-stu-id="6041e-171">The browser then displays a modal dialog box that prompts the user for their username and password (see Figure 1).</span></span> <span data-ttu-id="6041e-172">この情報は、HTTP ヘッダーを介して web サーバーに送り返されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-172">This information is then sent back to the web server via an HTTP header.</span></span>

![モーダルダイアログボックスによってユーザーに資格情報の入力が求められます](security-basics-and-asp-net-support-cs/_static/image1.png)

<span data-ttu-id="6041e-174">**図 1**: モーダルダイアログボックスでユーザーに資格情報の入力を求める</span><span class="sxs-lookup"><span data-stu-id="6041e-174">**Figure 1**: A Modal Dialog Box Prompts the User for His Credentials</span></span>

<span data-ttu-id="6041e-175">指定された資格情報は、web サーバーの Windows ユーザーストアに対して検証されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-175">The supplied credentials are validated against the web server's Windows User Store.</span></span> <span data-ttu-id="6041e-176">これは、web アプリケーション内の認証された各ユーザーが、組織内の Windows アカウントを持っている必要があることを意味します。</span><span class="sxs-lookup"><span data-stu-id="6041e-176">This means that each authenticated user in your web application must have a Windows account in your organization.</span></span> <span data-ttu-id="6041e-177">これは、イントラネットのシナリオでは一般的です。</span><span class="sxs-lookup"><span data-stu-id="6041e-177">This is commonplace in intranet scenarios.</span></span> <span data-ttu-id="6041e-178">実際、イントラネット設定で Windows 統合認証を使用する場合、ブラウザーは、ネットワークへのログオンに使用される資格情報を web サーバーに自動的に提供し、図1に示すダイアログボックスを非表示にします。</span><span class="sxs-lookup"><span data-stu-id="6041e-178">In fact, when using Windows Integrated Authentication in an intranet setting, the browser automatically provides the web server with the credentials used to log on to the network, thereby suppressing the dialog box shown in Figure 1.</span></span> <span data-ttu-id="6041e-179">Windows 認証はイントラネットアプリケーションには適していますが、サイトにサインアップするすべてのユーザーに対して Windows アカウントを作成するのではなく、通常はインターネットアプリケーションに不可能ます。</span><span class="sxs-lookup"><span data-stu-id="6041e-179">While Windows authentication is great for intranet applications, it is usually unfeasible for Internet applications since you do not want to create Windows accounts for each and every user who signs up at your site.</span></span>

### <a name="authentication-via-forms-authentication"></a><span data-ttu-id="6041e-180">フォーム認証を使用した認証</span><span class="sxs-lookup"><span data-stu-id="6041e-180">Authentication via Forms Authentication</span></span>

<span data-ttu-id="6041e-181">一方、フォーム認証は、インターネット web アプリケーションに最適です。</span><span class="sxs-lookup"><span data-stu-id="6041e-181">Forms authentication, on the other hand, is ideal for Internet web applications.</span></span> <span data-ttu-id="6041e-182">フォーム認証では、web フォームを使用して資格情報を入力するように求めるメッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-182">Recall that forms authentication identifies the user by prompting them to enter their credentials through a web form.</span></span> <span data-ttu-id="6041e-183">その結果、ユーザーが承認されていないリソースにアクセスしようとすると、ログインページに自動的にリダイレクトされ、そこで資格情報を入力できます。</span><span class="sxs-lookup"><span data-stu-id="6041e-183">Consequently, when a user attempts to access an unauthorized resource, they are automatically redirected to the login page where they can enter their credentials.</span></span> <span data-ttu-id="6041e-184">送信された資格情報は、カスタムユーザーストア (通常はデータベース) に対して検証されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-184">The submitted credentials are then validated against a custom user store - usually a database.</span></span>

<span data-ttu-id="6041e-185">送信された資格情報を確認すると、ユーザーに対して*フォーム認証チケット*が作成されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-185">After verifying the submitted credentials, a *forms authentication ticket* is created for the user.</span></span> <span data-ttu-id="6041e-186">このチケットは、ユーザーが認証されており、ユーザー名などの識別情報が含まれていることを示します。</span><span class="sxs-lookup"><span data-stu-id="6041e-186">This ticket indicates that the user has been authenticated and includes identifying information, such as the username.</span></span> <span data-ttu-id="6041e-187">フォーム認証チケットは、(通常は) クライアントコンピューターに cookie として格納されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-187">The forms authentication ticket is (typically) stored as a cookie on the client computer.</span></span> <span data-ttu-id="6041e-188">そのため、以降の web サイトへのアクセスには、HTTP 要求にフォーム認証チケットが含まれているので、web アプリケーションはログインした後にユーザーを識別できます。</span><span class="sxs-lookup"><span data-stu-id="6041e-188">Therefore, subsequent visits to the website include the forms authentication ticket in the HTTP request, thereby enabling the web application to identify the user once they have logged in.</span></span>

<span data-ttu-id="6041e-189">図2は、高レベルの視点ポイントからのフォーム認証ワークフローを示しています。</span><span class="sxs-lookup"><span data-stu-id="6041e-189">Figure 2 illustrates the forms authentication workflow from a high-level vantage point.</span></span> <span data-ttu-id="6041e-190">ASP.NET の認証と承認の部分は、2つの異なるエンティティとして機能することに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6041e-190">Notice how the authentication and authorization pieces in ASP.NET act as two separate entities.</span></span> <span data-ttu-id="6041e-191">フォーム認証システムは、ユーザーを識別します (または、匿名であることを報告します)。</span><span class="sxs-lookup"><span data-stu-id="6041e-191">The forms authentication system identifies the user (or reports that they are anonymous).</span></span> <span data-ttu-id="6041e-192">認証システムは、ユーザーが要求されたリソースにアクセスできるかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="6041e-192">The authorization system is what determines whether the user has access to the requested resource.</span></span> <span data-ttu-id="6041e-193">ユーザーが承認されていない場合 (ProtectedPage に匿名でアクセスしようとしたときに図2のように)、承認システムはユーザーが拒否されたことを報告し、フォーム認証システムはユーザーをログインページに自動的にリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="6041e-193">If the user is unauthorized (as they are in Figure 2 when attempting to anonymously visit ProtectedPage.aspx), the authorization system reports that the user is denied, causing the forms authentication system to automatically redirect the user to the login page.</span></span>

<span data-ttu-id="6041e-194">ユーザーが正常にログインすると、その後の HTTP 要求にはフォーム認証チケットが含まれます。</span><span class="sxs-lookup"><span data-stu-id="6041e-194">Once the user has successfully logged in, subsequent HTTP requests include the forms authentication ticket.</span></span> <span data-ttu-id="6041e-195">フォーム認証システムは、ユーザーを識別するだけで、ユーザーが要求されたリソースにアクセスできるかどうかを判断する承認システムです。</span><span class="sxs-lookup"><span data-stu-id="6041e-195">The forms authentication system merely identifies the user - it is the authorization system that determines whether the user can access the requested resource.</span></span>

![フォーム認証ワークフロー](security-basics-and-asp-net-support-cs/_static/image2.png)

<span data-ttu-id="6041e-197">**図 2**: フォーム認証ワークフロー</span><span class="sxs-lookup"><span data-stu-id="6041e-197">**Figure 2**: The Forms Authentication Workflow</span></span>

<span data-ttu-id="6041e-198">次の2つのチュートリアルでは、フォーム認証とフォーム認証構成[の概要](an-overview-of-forms-authentication-cs.md)[と高度なトピック](forms-authentication-configuration-and-advanced-topics-cs.md)について詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="6041e-198">We will dig into forms authentication in much greater detail in the next two tutorials,[An Overview of Forms Authentication](an-overview-of-forms-authentication-cs.md) and [Forms Authentication Configuration and Advanced Topics](forms-authentication-configuration-and-advanced-topics-cs.md).</span></span> <span data-ttu-id="6041e-199">ASP の詳細については、こちらを参照してください。NET の認証オプション、「 [ASP.NET authentication](https://msdn.microsoft.com/library/eeyk640h.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6041e-199">For more on ASP.NET's authentication options, see [ASP.NET Authentication](https://msdn.microsoft.com/library/eeyk640h.aspx).</span></span>

## <a name="limiting-access-to-web-pages-directories-and-page-functionality"></a><span data-ttu-id="6041e-200">Web ページ、ディレクトリ、およびページ機能へのアクセスの制限</span><span class="sxs-lookup"><span data-stu-id="6041e-200">Limiting Access to Web Pages, Directories, and Page Functionality</span></span>

<span data-ttu-id="6041e-201">ASP.NET には、特定のユーザーが特定のファイルまたはディレクトリにアクセスする権限を持っているかどうかを判断する2つの方法があります。</span><span class="sxs-lookup"><span data-stu-id="6041e-201">ASP.NET includes two ways to determine whether a particular user has authority to access a specific file or directory:</span></span>

- <span data-ttu-id="6041e-202">**ファイルの承認**-ASP.NET ページと web サービスは、web サーバーのファイルシステム上に存在するファイルとして実装されるため、これらのファイルへのアクセスは Access Control リスト (acl) を使用して指定できます。</span><span class="sxs-lookup"><span data-stu-id="6041e-202">**File authorization** - since ASP.NET pages and web services are implemented as files that reside on the web server's file system, access to these files can be specified through Access Control Lists (ACLs).</span></span> <span data-ttu-id="6041e-203">Acl は Windows アカウントに適用されるアクセス許可であるため、ファイル承認は Windows 認証で最も一般的に使用されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-203">File authorization is most commonly used with Windows authentication because ACLs are permissions that apply to Windows accounts.</span></span> <span data-ttu-id="6041e-204">フォーム認証を使用する場合、すべてのオペレーティングシステムとファイルシステムレベルの要求は、サイトにアクセスしているユーザーに関係なく、同じ Windows アカウントによって実行されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-204">When using forms authentication, all operating system- and file system-level requests are executed by the same Windows account, regardless of the user visiting the site.</span></span>
- <span data-ttu-id="6041e-205">**Url 認証**-url 承認を使用すると、ページ開発者は web.config で承認規則を指定します。これらの承認規則は、アプリケーション内の特定のページまたはディレクトリへのアクセスを許可または拒否するユーザーまたはロールを指定します。</span><span class="sxs-lookup"><span data-stu-id="6041e-205">**URL authorization**- with URL authorization, the page developer specifies authorization rules in Web.config. These authorization rules specify what users or roles are allowed to access or are denied from accessing certain pages or directories in the application.</span></span>

<span data-ttu-id="6041e-206">ファイル承認と URL 承認は、特定の ASP.NET ページまたは特定のディレクトリ内のすべての ASP.NET ページにアクセスするための承認規則を定義します。</span><span class="sxs-lookup"><span data-stu-id="6041e-206">File authorization and URL authorization define authorization rules for accessing a particular ASP.NET page or for all ASP.NET pages in a particular directory.</span></span> <span data-ttu-id="6041e-207">これらの手法を使用すると、特定のユーザーの特定のページへの要求を拒否するように ASP.NET に指示したり、一連のユーザーへのアクセスを許可したり、他のすべてのユーザーにアクセスを拒否したりできます。</span><span class="sxs-lookup"><span data-stu-id="6041e-207">Using these techniques we can instruct ASP.NET to deny requests to a particular page for a particular user, or allow access to a set of users and deny access to everyone else.</span></span> <span data-ttu-id="6041e-208">すべてのユーザーがページにアクセスできるが、ページの機能はユーザーによって異なります。</span><span class="sxs-lookup"><span data-stu-id="6041e-208">What about scenarios where all of the users can access the page, but the page's functionality depends on the user?</span></span> <span data-ttu-id="6041e-209">たとえば、ユーザーアカウントをサポートする多くのサイトには、認証されたユーザーと匿名ユーザーの間で異なるコンテンツまたはデータを表示するページがあります。</span><span class="sxs-lookup"><span data-stu-id="6041e-209">For example, many sites that support user accounts have pages that display different content or data for authenticated users versus anonymous users.</span></span> <span data-ttu-id="6041e-210">匿名ユーザーには、サイトにログインするためのリンクが表示される場合があります。一方、認証されたユーザーには、[ようこそ]、[*ユーザー名*]、および log out へのリンクというメッセージが表示されます。別の例: オークションサイトで項目を表示すると、入札しているのか、それとも項目をオークションしているのかによって、異なる情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-210">An anonymous user might see a link to log in to the site, whereas an authenticated user would instead see a message like, Welcome back, *Username* along with a link to log out. Another example: when viewing an item at an auction site you see different information depending on whether you are a bidder or the one auctioning the item.</span></span>

<span data-ttu-id="6041e-211">このようなページレベルの調整は、宣言またはプログラムによって行うことができます。</span><span class="sxs-lookup"><span data-stu-id="6041e-211">Such page-level adjustments can be accomplished declaratively or programmatically.</span></span> <span data-ttu-id="6041e-212">認証されたユーザー以外の匿名コンテンツを表示するには、 [LoginView コントロール](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx)をページにドラッグし、その AnonymousTemplate テンプレートと LoggedInTemplate テンプレートに適切なコンテンツを入力するだけです。</span><span class="sxs-lookup"><span data-stu-id="6041e-212">To show different content for anonymous than authenticated users, simply drag a [LoginView control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) onto your page and enter the appropriate content into its AnonymousTemplate and LoggedInTemplate templates.</span></span> <span data-ttu-id="6041e-213">または、現在の要求が認証されているかどうか、ユーザーがだれであるか、どのロールが属しているか (存在する場合) をプログラムで判断することもできます。</span><span class="sxs-lookup"><span data-stu-id="6041e-213">Alternatively, you can programmatically determine whether the current request is authenticated, who the user is, and what roles they belong to (if any).</span></span> <span data-ttu-id="6041e-214">この情報を使用して、ページ上のグリッドまたはパネルの列の表示と非表示を切り替えることができます。</span><span class="sxs-lookup"><span data-stu-id="6041e-214">You can use this information to then show or hide columns in a grid or Panels on the page.</span></span>

<span data-ttu-id="6041e-215">このシリーズには、承認に焦点を当てた3つのチュートリアルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="6041e-215">This series includes three tutorials that focus on authorization.</span></span> <span data-ttu-id="6041e-216">***ユーザーベースの承認***では、特定のユーザーアカウントについて、ディレクトリ内の1つまたは複数のページへのアクセスを制限する方法を調べます。***ロールベースの承認***では、ロールレベルで承認規則を指定します。最後に、***現在ログイン***しているユーザーに基づいてコンテンツを表示するチュートリアルでは、ページにアクセスするユーザーに基づいて、特定のページのコンテンツと機能を変更します。</span><span class="sxs-lookup"><span data-stu-id="6041e-216">***User-Based Authorization***examines how to limit access to a page or pages in a directory for specific user accounts; ***Role-Based Authorization*** looks at supplying authorization rules at the role level; lastly, the ***Displaying Content Based on the Currently Logged In User*** tutorial explores modifying a particular page's content and functionality based on the user visiting the page.</span></span> <span data-ttu-id="6041e-217">ASP の詳細については、こちらを参照してください。NET の承認オプション、「 [ASP.NET authorization](https://msdn.microsoft.com/library/wce3kxhd.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6041e-217">For more on ASP.NET's authorization options, see [ASP.NET Authorization](https://msdn.microsoft.com/library/wce3kxhd.aspx).</span></span>

## <a name="user-accounts-and-roles"></a><span data-ttu-id="6041e-218">ユーザーアカウントとロール</span><span class="sxs-lookup"><span data-stu-id="6041e-218">User Accounts and Roles</span></span>

<span data-ttu-id="6041e-219">ASP.NET のフォーム認証は、ユーザーがサイトにログインし、ページアクセス間で認証済みの状態を保持するためのインフラストラクチャを提供します。</span><span class="sxs-lookup"><span data-stu-id="6041e-219">ASP.NET's forms authentication provides an infrastructure for users to log in to a site and have their authenticated state remembered across page visits.</span></span> <span data-ttu-id="6041e-220">URL 承認は、ASP.NET アプリケーション内の特定のファイルまたはフォルダーへのアクセスを制限するためのフレームワークを提供します。</span><span class="sxs-lookup"><span data-stu-id="6041e-220">And URL authorization offers a framework for limiting access to specific files or folders in an ASP.NET application.</span></span> <span data-ttu-id="6041e-221">ただし、どちらの機能も、ユーザーアカウント情報の保存や役割の管理を行う手段を提供します。</span><span class="sxs-lookup"><span data-stu-id="6041e-221">Neither feature, however, supplies a means for storing user account information or managing roles.</span></span>

<span data-ttu-id="6041e-222">ASP.NET 2.0 より前の開発者は、独自のユーザーおよびロールストアを作成する責任がありました。</span><span class="sxs-lookup"><span data-stu-id="6041e-222">Prior to ASP.NET 2.0, developers were responsible for creating their own user and role stores.</span></span> <span data-ttu-id="6041e-223">また、ユーザーインターフェイスを設計し、ログインページやページなどの重要なユーザーアカウント関連ページのコードを記述して、他のユーザーと新しいアカウントを作成することもできました。</span><span class="sxs-lookup"><span data-stu-id="6041e-223">They were also on the hook for designing the user interfaces and writing the code for essential user account-related pages like the login page and the page to create a new account, among others.</span></span> <span data-ttu-id="6041e-224">ASP.NET に組み込まれているユーザーアカウントフレームワークを使用しない場合、ユーザーアカウントを実装する各開発者は操作方法、パスワードやその他の機密情報などの質問に対する独自の設計上の決定を行う必要がありましたか。パスワードの長さと強度に関しては、どのようなガイドラインが必要ですか。</span><span class="sxs-lookup"><span data-stu-id="6041e-224">Without any built-in user account framework in ASP.NET, each developer implementing user accounts had to arrive at his own design decisions on questions like, How do I store passwords or other sensitive information? and What guidelines should I impose regarding password length and strength?</span></span>

<span data-ttu-id="6041e-225">現在、ASP.NET アプリケーションでのユーザーアカウントの実装は、*メンバーシップフレームワーク*と組み込みのログイン Web コントロールにより、はるかに簡単になりました。</span><span class="sxs-lookup"><span data-stu-id="6041e-225">Today, implementing user accounts in an ASP.NET application is much simpler thanks to the *Membership framework* and the built-in Login Web controls.</span></span> <span data-ttu-id="6041e-226">メンバーシップフレームワークは、重要なユーザーアカウント関連タスクを実行するための機能を提供する、 [system.web. Security 名前空間](https://msdn.microsoft.com/library/system.web.security.aspx)のいくつかのクラスです。</span><span class="sxs-lookup"><span data-stu-id="6041e-226">The Membership framework is a handful of classes in the [System.Web.Security namespace](https://msdn.microsoft.com/library/system.web.security.aspx) that provide functionality for performing essential user account-related tasks.</span></span> <span data-ttu-id="6041e-227">メンバーシップフレームワークのキークラスは[メンバーシップクラス](https://msdn.microsoft.com/library/system.web.security.membership.aspx)であり、次のようなメソッドがあります。</span><span class="sxs-lookup"><span data-stu-id="6041e-227">The key class in the Membership framework is the [Membership class](https://msdn.microsoft.com/library/system.web.security.membership.aspx), which has methods like:</span></span>

- <span data-ttu-id="6041e-228">CreateUser</span><span class="sxs-lookup"><span data-stu-id="6041e-228">CreateUser</span></span>
- <span data-ttu-id="6041e-229">DeleteUser</span><span class="sxs-lookup"><span data-stu-id="6041e-229">DeleteUser</span></span>
- <span data-ttu-id="6041e-230">GetAllUsers</span><span class="sxs-lookup"><span data-stu-id="6041e-230">GetAllUsers</span></span>
- <span data-ttu-id="6041e-231">GetUser</span><span class="sxs-lookup"><span data-stu-id="6041e-231">GetUser</span></span>
- <span data-ttu-id="6041e-232">UpdateUser</span><span class="sxs-lookup"><span data-stu-id="6041e-232">UpdateUser</span></span>
- <span data-ttu-id="6041e-233">ValidateUser</span><span class="sxs-lookup"><span data-stu-id="6041e-233">ValidateUser</span></span>

<span data-ttu-id="6041e-234">メンバーシップフレームワークは、[プロバイダーモデル](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx)を使用します。これにより、メンバーシップフレームワークの API が実装から明確に分離されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-234">The Membership framework uses the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which cleanly separates the Membership framework's API from its implementation.</span></span> <span data-ttu-id="6041e-235">これにより、開発者は共通の API を使用できますが、アプリケーションのカスタムニーズを満たす実装を使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="6041e-235">This enables developers to use a common API, but empowers them to use an implementation that meets their application's custom needs.</span></span> <span data-ttu-id="6041e-236">つまり、メンバーシップクラスは、フレームワークの重要な機能 (メソッド、プロパティ、およびイベント) を定義しますが、実際には実装の詳細を提供しません。</span><span class="sxs-lookup"><span data-stu-id="6041e-236">In short, the Membership class defines the essential functionality of the framework (the methods, properties, and events), but does not actually supply any implementation details.</span></span> <span data-ttu-id="6041e-237">代わりに、メンバーシップクラスのメソッドは、構成されたプロバイダーを呼び出します。これは、実際の作業を実行します。</span><span class="sxs-lookup"><span data-stu-id="6041e-237">Instead, the methods of the Membership class invoke the configured provider, which is what performs the actual work.</span></span> <span data-ttu-id="6041e-238">たとえば、メンバーシップクラスの CreateUser メソッドが呼び出された場合、メンバーシップクラスはユーザーストアの詳細を認識しません。</span><span class="sxs-lookup"><span data-stu-id="6041e-238">For example, when the Membership class's CreateUser method is invoked, the Membership class doesn't know the details of the user store.</span></span> <span data-ttu-id="6041e-239">ユーザーがデータベース、XML ファイル、またはその他のストアで管理されているかどうかはわかりません。</span><span class="sxs-lookup"><span data-stu-id="6041e-239">It doesn't know if users are being maintained in a database or in an XML file or in some other store.</span></span> <span data-ttu-id="6041e-240">メンバーシップクラスは、web アプリケーションの構成を調べて、呼び出しを委任するプロバイダーを決定します。このプロバイダークラスは、適切なユーザーストアに新しいユーザーアカウントを実際に作成する役割を担います。</span><span class="sxs-lookup"><span data-stu-id="6041e-240">The Membership class examines the web application's configuration to determine what provider to delegate the call to, and that provider class is responsible for actually creating the new user account in the appropriate user store.</span></span> <span data-ttu-id="6041e-241">この相互作用を図3に示します。</span><span class="sxs-lookup"><span data-stu-id="6041e-241">This interaction is illustrated in Figure 3.</span></span>

<span data-ttu-id="6041e-242">Microsoft は、.NET Framework に2つのメンバーシッププロバイダークラスを出荷しています。</span><span class="sxs-lookup"><span data-stu-id="6041e-242">Microsoft ships two Membership provider classes in the .NET Framework:</span></span>

- <span data-ttu-id="6041e-243">[ActiveDirectoryMembershipProvider](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) -Active Directory および ACTIVE DIRECTORY APPLICATION MODE (ADAM) サーバーでメンバーシップ API を実装します。</span><span class="sxs-lookup"><span data-stu-id="6041e-243">[ActiveDirectoryMembershipProvider](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) - implements the Membership API in Active Directory and Active Directory Application Mode (ADAM) servers.</span></span>
- <span data-ttu-id="6041e-244">[SqlMembershipProvider](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx) -SQL Server データベースでメンバーシップ API を実装します。</span><span class="sxs-lookup"><span data-stu-id="6041e-244">[SqlMembershipProvider](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx) - implements the Membership API in a SQL Server database.</span></span>

<span data-ttu-id="6041e-245">このチュートリアルシリーズでは、SqlMembershipProvider のみを中心に説明します。</span><span class="sxs-lookup"><span data-stu-id="6041e-245">This tutorial series focuses exclusively on the SqlMembershipProvider.</span></span>

<span data-ttu-id="6041e-246">[![プロバイダーモデルを使用すると、さまざまな実装をフレームワークにシームレスに接続することができ&lt;/強力&gt;](security-basics-and-asp-net-support-cs/_static/image4.png)](security-basics-and-asp-net-support-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="6041e-246">[![The Provider Model Enables Different Implementations to be Seamlessly Plugged Into the Framework&lt;/strong&gt;](security-basics-and-asp-net-support-cs/_static/image4.png)](security-basics-and-asp-net-support-cs/_static/image3.png)</span></span>

<span data-ttu-id="6041e-247">**図 03**: プロバイダーモデルを使用すると、さまざまな実装をフレームワークにシームレスに接続できます ([クリックすると、フルサイズのイメージが表示](security-basics-and-asp-net-support-cs/_static/image5.png)されます)</span><span class="sxs-lookup"><span data-stu-id="6041e-247">**Figure 03**: The Provider Model Enables Different Implementations to be Seamlessly Plugged Into the Framework ([Click to view full-size image](security-basics-and-asp-net-support-cs/_static/image5.png))</span></span>

<span data-ttu-id="6041e-248">プロバイダーモデルの利点は、代替の実装を Microsoft、サードパーティベンダー、または個人の開発者が開発し、メンバーシップフレームワークにシームレスに接続できることです。</span><span class="sxs-lookup"><span data-stu-id="6041e-248">The benefit of the provider model is that alternative implementations can be developed by Microsoft, third-party vendors, or individual developers and seamlessly plugged into the Membership framework.</span></span> <span data-ttu-id="6041e-249">たとえば、microsoft は[Microsoft access データベースのメンバーシッププロバイダーを](https://download.microsoft.com/download/5/5/b/55bc291f-4316-4fd7-9269-dbf9edbaada8/sampleaccessproviders.vsi)リリースしています。</span><span class="sxs-lookup"><span data-stu-id="6041e-249">For example, Microsoft has released [a Membership provider for Microsoft Access databases](https://download.microsoft.com/download/5/5/b/55bc291f-4316-4fd7-9269-dbf9edbaada8/sampleaccessproviders.vsi).</span></span> <span data-ttu-id="6041e-250">メンバーシッププロバイダーの詳細については、[プロバイダーツールキット](https://msdn.microsoft.com/asp.net/aa336558.aspx)に関するページを参照してください。このツールキットには、メンバーシッププロバイダーのチュートリアル、サンプルカスタムプロバイダー、プロバイダーモデルに関するドキュメントの100ページ以上、組み込みメンバーシッププロバイダーの完全なソースコード (つまり、ActiveDirectoryMembershipProvider と SqlMembershipProvider) が含まれています。</span><span class="sxs-lookup"><span data-stu-id="6041e-250">For more information on the Membership providers, refer to the [Provider Toolkit](https://msdn.microsoft.com/asp.net/aa336558.aspx), which includes a walkthrough of the Membership providers, sample custom providers, over 100 pages of documentation on the provider model, and the complete source code for the built-in Membership providers (namely, ActiveDirectoryMembershipProvider and SqlMembershipProvider).</span></span>

<span data-ttu-id="6041e-251">ASP.NET 2.0 では、ロールフレームワークも導入されました。</span><span class="sxs-lookup"><span data-stu-id="6041e-251">ASP.NET 2.0 also introduced the Roles framework.</span></span> <span data-ttu-id="6041e-252">メンバーシップフレームワークと同様に、ロールフレームワークはプロバイダーモデルの上に構築されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-252">Like the Membership framework, the Roles framework is built atop the provider model.</span></span> <span data-ttu-id="6041e-253">その API は[Roles クラス](https://msdn.microsoft.com/library/system.web.security.roles.aspx)を介して公開され、.NET Framework には次の3つのプロバイダークラスが付属しています。</span><span class="sxs-lookup"><span data-stu-id="6041e-253">Its API is exposed via the [Roles class](https://msdn.microsoft.com/library/system.web.security.roles.aspx) and the .NET Framework ships with three provider classes:</span></span>

- <span data-ttu-id="6041e-254">[Authorizationstoreroleprovider](https://msdn.microsoft.com/library/system.web.security.authorizationstoreroleprovider.aspx) -ACTIVE DIRECTORY や ADAM など、承認マネージャーポリシーストアのロール情報を管理します。</span><span class="sxs-lookup"><span data-stu-id="6041e-254">[AuthorizationStoreRoleProvider](https://msdn.microsoft.com/library/system.web.security.authorizationstoreroleprovider.aspx) - manages role information in an authorization-manager policy store, such as Active Directory or ADAM.</span></span>
- <span data-ttu-id="6041e-255">[SqlRoleProvider](https://msdn.microsoft.com/library/system.web.security.sqlroleprovider.aspx) -SQL Server データベースでロールを実装します。</span><span class="sxs-lookup"><span data-stu-id="6041e-255">[SqlRoleProvider](https://msdn.microsoft.com/library/system.web.security.sqlroleprovider.aspx) - implements roles in a SQL Server database.</span></span>
- <span data-ttu-id="6041e-256">[WindowsTokenRoleProvider](https://msdn.microsoft.com/library/system.web.security.windowstokenroleprovider.aspx) -ビジターの Windows グループに基づいてロール情報を関連付けます。</span><span class="sxs-lookup"><span data-stu-id="6041e-256">[WindowsTokenRoleProvider](https://msdn.microsoft.com/library/system.web.security.windowstokenroleprovider.aspx) - associates role information based on the visitor's Windows group.</span></span> <span data-ttu-id="6041e-257">このメソッドは、通常、Windows 認証で使用されます。</span><span class="sxs-lookup"><span data-stu-id="6041e-257">This method is typically used with Windows authentication.</span></span>

<span data-ttu-id="6041e-258">このチュートリアルシリーズでは、SqlRoleProvider のみを中心に説明します。</span><span class="sxs-lookup"><span data-stu-id="6041e-258">This tutorial series focuses exclusively on the SqlRoleProvider.</span></span>

<span data-ttu-id="6041e-259">プロバイダーモデルには、1つの前方参照 API (Membership クラスと Roles クラス) が含まれているので、実装の詳細について心配しなくても、その API に関連する機能を構築することができます。これらは、ページによって選択されたプロバイダーによって処理されます。向け.</span><span class="sxs-lookup"><span data-stu-id="6041e-259">Since the provider model includes a single forward-facing API (the Membership and Roles classes), it is possible to build functionality around that API without having to worry about the implementation details - those are handled by the providers selected by the page developer.</span></span> <span data-ttu-id="6041e-260">この統合された API を使用すると、Microsoft およびサードパーティベンダーは、メンバーシップとロールのフレームワークとのインターフェイスを持つ Web コントロールを構築できます。</span><span class="sxs-lookup"><span data-stu-id="6041e-260">This unified API allows for Microsoft and third-party vendors to build Web controls that interface with the Membership and Roles frameworks.</span></span> <span data-ttu-id="6041e-261">ASP.NET には、一般的なユーザーアカウントのユーザーインターフェイスを実装するための多数の[ログイン Web コントロール](https://msdn.microsoft.com/library/ms178329.aspx)が付属しています。</span><span class="sxs-lookup"><span data-stu-id="6041e-261">ASP.NET ships with a number of [Login Web controls](https://msdn.microsoft.com/library/ms178329.aspx) for implementing common user account user interfaces.</span></span> <span data-ttu-id="6041e-262">たとえば、[ログインコントロール](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx)は、ユーザーに資格情報の入力を求め、検証した後、フォーム認証を使用してそれらをログに記録します。</span><span class="sxs-lookup"><span data-stu-id="6041e-262">For example, the [Login control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) prompts a user for their credentials, validates them, and then logs them in via forms authentication.</span></span> <span data-ttu-id="6041e-263">[LoginView コントロール](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx)には、匿名ユーザーと認証されたユーザー、またはユーザーのロールに基づいた異なるマークアップを表示するためのテンプレートが用意されています。</span><span class="sxs-lookup"><span data-stu-id="6041e-263">The [LoginView control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) offers templates for displaying different markup to anonymous users versus authenticated users, or different markup based on the user's role.</span></span> <span data-ttu-id="6041e-264">また、 [CreateUserWizard コントロール](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.aspx)には、新しいユーザーアカウントを作成するためのステップバイステップのユーザーインターフェイスが用意されています。</span><span class="sxs-lookup"><span data-stu-id="6041e-264">And the [CreateUserWizard control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.aspx) provides a step-by-step user interface for creating a new user account.</span></span>

<span data-ttu-id="6041e-265">の下には、さまざまなログインコントロールがメンバーシップとロールのフレームワークと対話します。</span><span class="sxs-lookup"><span data-stu-id="6041e-265">Underneath the covers the various Login controls interact with the Membership and Roles frameworks.</span></span> <span data-ttu-id="6041e-266">ほとんどのログインコントロールは、1行のコードを記述しなくても実装できます。</span><span class="sxs-lookup"><span data-stu-id="6041e-266">Most Login controls can be implemented without having to write a single line of code.</span></span> <span data-ttu-id="6041e-267">これらのコントロールの詳細については、今後のチュートリアル (機能の拡張とカスタマイズの手法を含む) で詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="6041e-267">We will examine these controls in greater detail in future tutorials, including techniques for extending and customizing their functionality.</span></span>

## <a name="summary"></a><span data-ttu-id="6041e-268">まとめ</span><span class="sxs-lookup"><span data-stu-id="6041e-268">Summary</span></span>

<span data-ttu-id="6041e-269">ユーザーアカウントをサポートするすべての web アプリケーションは、同様の機能を必要とします。たとえば、ユーザーがログインして、ページにアクセスしたときにログの状態を記録しておくことができます。新しい訪問者がアカウントを作成するための web ページ。また、ページ開発者は、ユーザーまたはロールに対して使用できるリソース、データ、および機能を指定できます。</span><span class="sxs-lookup"><span data-stu-id="6041e-269">All web applications that support user accounts require similar features, such as: the ability for users to log in and have their log in status remembered across page visits; a web page for new visitors to create an account; and the ability to the page developer to specify what resource, data, and functionality are available to what users or roles.</span></span> <span data-ttu-id="6041e-270">ユーザーの認証と承認、およびユーザーアカウントとロールの管理のタスクは、フォーム認証、URL 承認、およびメンバーシップとロールのフレームワークにより、ASP.NET アプリケーションで非常に簡単に実行できます。</span><span class="sxs-lookup"><span data-stu-id="6041e-270">The tasks of authenticating and authorizing users and of managing user accounts and roles is remarkably easy to accomplish in ASP.NET applications thanks to forms authentication, URL authorization, and the Membership and Roles frameworks.</span></span>

<span data-ttu-id="6041e-271">次のいくつかのチュートリアルでは、作業中の web アプリケーションを段階的に作成することで、これらの側面を調査します。</span><span class="sxs-lookup"><span data-stu-id="6041e-271">Over the course of the next several tutorials we will examine these aspects by building a working web application from the ground up in a step-by-step fashion.</span></span> <span data-ttu-id="6041e-272">次の2つのチュートリアルでは、フォーム認証の詳細について説明します。</span><span class="sxs-lookup"><span data-stu-id="6041e-272">In the next two tutorial we will explore forms authentication in detail.</span></span> <span data-ttu-id="6041e-273">フォーム認証ワークフローが動作中であることを確認し、フォーム認証チケットを詳しく分析、セキュリティの問題について説明します。また、ユーザーがログインしてログアウトできる web アプリケーションを構築するときに、フォーム認証システム全体を構成する方法についても説明します。</span><span class="sxs-lookup"><span data-stu-id="6041e-273">We will see the forms authentication workflow in action, dissect the forms authentication ticket, discuss security concerns, and see how to configure the forms authentication system - all while building a web application that allows visitors to log in and log out.</span></span>

<span data-ttu-id="6041e-274">プログラミングを楽しんでください。</span><span class="sxs-lookup"><span data-stu-id="6041e-274">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="6041e-275">参考資料</span><span class="sxs-lookup"><span data-stu-id="6041e-275">Further Reading</span></span>

<span data-ttu-id="6041e-276">このチュートリアルで説明しているトピックの詳細については、次のリソースを参照してください。</span><span class="sxs-lookup"><span data-stu-id="6041e-276">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="6041e-277">ASP.NET 2.0 メンバーシップ、ロール、フォーム認証、およびセキュリティリソース</span><span class="sxs-lookup"><span data-stu-id="6041e-277">ASP.NET 2.0 Membership, Roles, Forms Authentication, and Security Resources</span></span>](https://weblogs.asp.net/scottgu/ASP.NET-2.0-Membership_2C00_-Roles_2C00_-Forms-Authentication_2C00_-and-Security-Resources-)
- [<span data-ttu-id="6041e-278">ASP.NET 2.0 のセキュリティガイドライン</span><span class="sxs-lookup"><span data-stu-id="6041e-278">ASP.NET 2.0 Security Guidelines</span></span>](https://msdn.microsoft.com/library/ms998258.aspx)
- [<span data-ttu-id="6041e-279">ASP.NET の認証</span><span class="sxs-lookup"><span data-stu-id="6041e-279">ASP.NET Authentication</span></span>](https://msdn.microsoft.com/library/eeyk640h.aspx)
- [<span data-ttu-id="6041e-280">ASP.NET 承認</span><span class="sxs-lookup"><span data-stu-id="6041e-280">ASP.NET Authorization</span></span>](https://msdn.microsoft.com/library/wce3kxhd.aspx)
- [<span data-ttu-id="6041e-281">ASP.NET ログインコントロールの概要</span><span class="sxs-lookup"><span data-stu-id="6041e-281">ASP.NET Login Controls Overview</span></span>](https://msdn.microsoft.com/library/ms178329.aspx)
- [<span data-ttu-id="6041e-282">ASP.NET 2.0 のメンバーシップ、ロール、およびプロファイルを調べています</span><span class="sxs-lookup"><span data-stu-id="6041e-282">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="6041e-283">操作方法: メンバーシップと役割を使用してサイトをセキュリティで保護する</span><span class="sxs-lookup"><span data-stu-id="6041e-283">How Do I: Secure My Site Using Membership and Roles?</span></span>](https://asp.net/learn/videos/video-45.aspx) <span data-ttu-id="6041e-284">Video</span><span class="sxs-lookup"><span data-stu-id="6041e-284">(Video)</span></span>
- [<span data-ttu-id="6041e-285">メンバーシップの概要</span><span class="sxs-lookup"><span data-stu-id="6041e-285">Introduction to Membership</span></span>](https://msdn.microsoft.com/library/yh26yfzy.aspx)
- [<span data-ttu-id="6041e-286">MSDN セキュリティデベロッパーセンター</span><span class="sxs-lookup"><span data-stu-id="6041e-286">MSDN Security Developer Center</span></span>](https://msdn.microsoft.com/security/default.aspx)
- <span data-ttu-id="6041e-287">[Professional ASP.NET 2.0 のセキュリティ、メンバーシップ、およびロール管理](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html)(ISBN: 978-0-7645-9698-8)</span><span class="sxs-lookup"><span data-stu-id="6041e-287">[Professional ASP.NET 2.0 Security, Membership, and Role Management](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html) (ISBN: 978-0-7645-9698-8)</span></span>
- [<span data-ttu-id="6041e-288">プロバイダーツールキット</span><span class="sxs-lookup"><span data-stu-id="6041e-288">Provider Toolkit</span></span>](https://msdn.microsoft.com/asp.net/aa336558.aspx)

## <a name="about-the-author"></a><span data-ttu-id="6041e-289">著者について</span><span class="sxs-lookup"><span data-stu-id="6041e-289">About the Author</span></span>

<span data-ttu-id="6041e-290">1998以来、 [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)は 7 asp/創設者 of [4GuysFromRolla.com](http://www.4guysfromrolla.com)の執筆者であり、Microsoft Web テクノロジを使用しています。</span><span class="sxs-lookup"><span data-stu-id="6041e-290">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="6041e-291">Scott は、独立したコンサルタント、トレーナー、およびライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="6041e-291">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="6041e-292">彼の最新の書籍は[ *、ASP.NET 2.0 を24時間以内に教え*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ています。</span><span class="sxs-lookup"><span data-stu-id="6041e-292">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="6041e-293">mitchell@4GuysFromRolla.comでアクセスでき[ます。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="6041e-293">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="6041e-294">または彼のブログを参照してください。これは[http://ScottOnWriting.NET](http://ScottOnWriting.NET)にあります。</span><span class="sxs-lookup"><span data-stu-id="6041e-294">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="6041e-295">ありがとうございました。</span><span class="sxs-lookup"><span data-stu-id="6041e-295">Special Thanks To</span></span>

<span data-ttu-id="6041e-296">このチュートリアルシリーズは、役に立つ多くのレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="6041e-296">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="6041e-297">このチュートリアルのリーダーレビュー担当者は、このチュートリアルシリーズは多くの便利なレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="6041e-297">Lead reviewer for this tutorial was This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="6041e-298">このチュートリアルのリードレビュー担当者には、Alicja Maziarz、John 加藤 u、Teresa Murphy が含まれています。</span><span class="sxs-lookup"><span data-stu-id="6041e-298">Lead reviewers for this tutorial include Alicja Maziarz, John Suru, and Teresa Murphy.</span></span> <span data-ttu-id="6041e-299">今後の MSDN 記事を確認することに興味がありますか?</span><span class="sxs-lookup"><span data-stu-id="6041e-299">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="6041e-300">その場合は、mitchell@4GuysFromRolla.comの行を削除[します。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="6041e-300">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="6041e-301">Next</span><span class="sxs-lookup"><span data-stu-id="6041e-301">Next</span></span>](an-overview-of-forms-authentication-cs.md)
