---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
title: SQL Server でのメンバーシップスキーマの作成 (VB) |Microsoft Docs
author: rick-anderson
description: このチュートリアルでは、まず、SqlMembershipProvider を使用するために必要なスキーマをデータベースに追加する方法を調べます。 その後、私たちは...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: 112a674d-716f-41a6-99b8-4074d65a54c0
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
msc.type: authoredcontent
ms.openlocfilehash: 96fd72d1f368b1f7947ef0a2293161d97aaf7065
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78513046"
---
# <a name="creating-the-membership-schema-in-sql-server-vb"></a><span data-ttu-id="599d3-104">SQL Server でメンバーシップ スキーマを作成する (VB)</span><span class="sxs-lookup"><span data-stu-id="599d3-104">Creating the Membership Schema in SQL Server (VB)</span></span>

<span data-ttu-id="599d3-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="599d3-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="599d3-106">[コードのダウンロード](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip)または[PDF のダウンロード](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="599d3-106">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span></span>

> <span data-ttu-id="599d3-107">このチュートリアルでは、まず、SqlMembershipProvider を使用するために必要なスキーマをデータベースに追加する方法を調べます。</span><span class="sxs-lookup"><span data-stu-id="599d3-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="599d3-108">ここでは、スキーマの主要なテーブルを調べ、その目的と重要性について説明します。</span><span class="sxs-lookup"><span data-stu-id="599d3-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="599d3-109">このチュートリアルでは、メンバーシップフレームワークが使用するプロバイダーを ASP.NET アプリケーションに通知する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="599d3-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

## <a name="introduction"></a><span data-ttu-id="599d3-110">はじめに</span><span class="sxs-lookup"><span data-stu-id="599d3-110">Introduction</span></span>

<span data-ttu-id="599d3-111">前の2つのチュートリアルでは、フォーム認証を使用して web サイトの訪問者を識別しています。</span><span class="sxs-lookup"><span data-stu-id="599d3-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="599d3-112">フォーム認証フレームワークを使用すると、開発者は、ユーザーを web サイトに簡単に記録し、認証チケットを使用してページにアクセスしてそれらを記憶することが容易になります。</span><span class="sxs-lookup"><span data-stu-id="599d3-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="599d3-113">`FormsAuthentication` クラスには、チケットを生成して訪問者の cookie に追加するためのメソッドが含まれています。</span><span class="sxs-lookup"><span data-stu-id="599d3-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="599d3-114">`FormsAuthenticationModule` は、すべての受信要求を調べ、有効な認証チケットがある場合は、`GenericPrincipal` と `FormsIdentity` オブジェクトを作成し、現在の要求に関連付けます。</span><span class="sxs-lookup"><span data-stu-id="599d3-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="599d3-115">フォーム認証は、ログイン時に訪問者に認証チケットを付与するメカニズムであり、後続の要求ではそのチケットを解析してユーザーの id を決定します。</span><span class="sxs-lookup"><span data-stu-id="599d3-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="599d3-116">Web アプリケーションでユーザーアカウントをサポートするには、ユーザーストアを実装し、資格情報を検証し、新しいユーザーを登録し、その他のユーザーアカウント関連タスクを無数に登録する機能を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="599d3-117">ASP.NET 2.0 より前の開発者は、これらのユーザーアカウント関連のタスクをすべて実装するためのフックを使用していました。</span><span class="sxs-lookup"><span data-stu-id="599d3-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="599d3-118">幸い、ASP.NET チームはこの欠点を認識し、ASP.NET 2.0 を使用してメンバーシップフレームワークを導入しました。</span><span class="sxs-lookup"><span data-stu-id="599d3-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="599d3-119">メンバーシップフレームワークは、ユーザーアカウント関連の主要なタスクを実現するためのプログラムインターフェイスを提供する、.NET Framework のクラスのセットです。</span><span class="sxs-lookup"><span data-stu-id="599d3-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="599d3-120">このフレームワークは、[プロバイダーモデル](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx)の上に構築されています。これにより、開発者は、カスタマイズされた実装を標準化された API に組み込むことができます。</span><span class="sxs-lookup"><span data-stu-id="599d3-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="599d3-121"><a id="Tutorial1"> </a>[*セキュリティの基本と ASP.NET のサポート*](../introduction/security-basics-and-asp-net-support-vb.md)に関するチュートリアルで説明したように、.NET Framework には、 [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx)と[`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx)という2つの組み込みのメンバーシッププロバイダーが付属しています。</span><span class="sxs-lookup"><span data-stu-id="599d3-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-vb.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="599d3-122">その名前が示すように、`SqlMembershipProvider` では、ユーザーストアとして Microsoft SQL Server データベースが使用されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="599d3-123">アプリケーションでこのプロバイダーを使用するには、ストアとして使用するデータベースをプロバイダーに指示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="599d3-124">ご想像のとおり、`SqlMembershipProvider` では、ユーザーストアデータベースに特定のデータベーステーブル、ビュー、およびストアドプロシージャが含まれていることを想定しています。</span><span class="sxs-lookup"><span data-stu-id="599d3-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="599d3-125">この予想されるスキーマを選択したデータベースに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="599d3-126">このチュートリアルでは、まず、`SqlMembershipProvider`を使用するために必要なスキーマをデータベースに追加する方法を調べます。</span><span class="sxs-lookup"><span data-stu-id="599d3-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="599d3-127">ここでは、スキーマの主要なテーブルを調べ、その目的と重要性について説明します。</span><span class="sxs-lookup"><span data-stu-id="599d3-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="599d3-128">このチュートリアルでは、メンバーシップフレームワークが使用するプロバイダーを ASP.NET アプリケーションに通知する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="599d3-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="599d3-129">作業開始</span><span class="sxs-lookup"><span data-stu-id="599d3-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="599d3-130">手順 1: ユーザーストアを配置する場所を決定する</span><span class="sxs-lookup"><span data-stu-id="599d3-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="599d3-131">ASP.NET アプリケーションのデータは、通常、データベース内の複数のテーブルに格納されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="599d3-132">`SqlMembershipProvider` データベーススキーマを実装する場合は、メンバーシップスキーマをアプリケーションデータと同じデータベースに配置するか、別のデータベースに配置するかを決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="599d3-133">次の理由から、アプリケーションデータと同じデータベースにメンバーシップスキーマを配置することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="599d3-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="599d3-134">**保守性**データが1つのデータベースにカプセル化されたアプリケーションは、2つの異なるデータベースを持つアプリケーションよりも理解、保守、配置が容易になります。</span><span class="sxs-lookup"><span data-stu-id="599d3-134">**Maintainability** � an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="599d3-135">**リレーショナル整合性**: メンバーシップ関連テーブルをアプリケーションテーブルと同じデータベース内に配置することによって、メンバーシップ関連テーブルと関連アプリケーションテーブルの主キーの間に[外部キー制約](http://en.wikipedia.org/wiki/Foreign_key)を設定することができます。</span><span class="sxs-lookup"><span data-stu-id="599d3-135">**Relational Integrity** � by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="599d3-136">ユーザーストアとアプリケーションデータを別々のデータベースに分離することは、それぞれが別々のデータベースを使用し、共通のユーザーストアを共有する必要がある複数のアプリケーションがある場合に、意味があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="599d3-137">データベースを作成します。</span><span class="sxs-lookup"><span data-stu-id="599d3-137">Creating a Database</span></span>

<span data-ttu-id="599d3-138">2番目のチュートリアルで作成したアプリケーションは、まだデータベースを必要としていません。</span><span class="sxs-lookup"><span data-stu-id="599d3-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="599d3-139">ただし、ここではユーザーストアに対して1つが必要です。</span><span class="sxs-lookup"><span data-stu-id="599d3-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="599d3-140">1つを作成し、`SqlMembershipProvider` プロバイダーが必要とするスキーマを追加してみましょう (手順2を参照)。</span><span class="sxs-lookup"><span data-stu-id="599d3-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="599d3-141">このチュートリアルシリーズでは、 [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx)データベースを使用して、アプリケーションテーブルと `SqlMembershipProvider` スキーマを格納します。</span><span class="sxs-lookup"><span data-stu-id="599d3-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="599d3-142">この決定は次の2つの理由で行われました。まず、コストがかからないことから、Express Edition は、SQL Server 2005 の読み取り専用のバージョンです。次に、SQL Server 2005 Express Edition データベースを web アプリケーションの `App_Data` フォルダーに直接配置して、データベースと web アプリケーションを1つの ZIP ファイルにパッケージ化し、特別なセットアップ手順や構成オプションを使用せずに再展開するたいしたを作成できます。</span><span class="sxs-lookup"><span data-stu-id="599d3-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="599d3-143">Express Edition 以外のバージョンの SQL Server を使用したい場合は、無料でご利用いただけます。</span><span class="sxs-lookup"><span data-stu-id="599d3-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="599d3-144">手順はほぼ同じです。</span><span class="sxs-lookup"><span data-stu-id="599d3-144">The steps are virtually identical.</span></span> <span data-ttu-id="599d3-145">`SqlMembershipProvider` スキーマは、Microsoft SQL Server 2000 およびそれ以降のすべてのバージョンで動作します。</span><span class="sxs-lookup"><span data-stu-id="599d3-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>

<span data-ttu-id="599d3-146">ソリューションエクスプローラーから、`App_Data` フォルダーを右クリックし、[新しい項目の追加] を選択します。</span><span class="sxs-lookup"><span data-stu-id="599d3-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="599d3-147">(プロジェクトに `App_Data` フォルダーが表示されない場合はソリューションエクスプローラーでプロジェクトを右クリックし、[ASP.NET フォルダーの追加] を選択して `App_Data`を選択します)。[新しい項目の追加] ダイアログボックスで、`SecurityTutorials.mdf`という名前の新しい SQL Database を追加することを選択します。</span><span class="sxs-lookup"><span data-stu-id="599d3-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="599d3-148">このチュートリアルでは、`SqlMembershipProvider` スキーマをこのデータベースに追加します。以降のチュートリアルでは、アプリケーションデータをキャプチャするための追加のテーブルを作成します。</span><span class="sxs-lookup"><span data-stu-id="599d3-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>

<span data-ttu-id="599d3-149">[SecurityTutorials .mdf データベースという名前の新しい SQL Database を App_Data フォルダーに追加 ![ます。](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="599d3-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span></span>

<span data-ttu-id="599d3-150">**図 1**: `SecurityTutorials.mdf` Database という名前の新しい SQL Database を `App_Data` フォルダーに追加する ([クリックすると、フルサイズの画像が表示](creating-the-membership-schema-in-sql-server-vb/_static/image3.png)されます)</span><span class="sxs-lookup"><span data-stu-id="599d3-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span></span>

<span data-ttu-id="599d3-151">`App_Data` フォルダーにデータベースを追加すると、そのデータベースがデータベースエクスプローラービューに自動的に追加されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="599d3-152">(Express Edition 以外のバージョンの Visual Studio では、データベースエクスプローラーはサーバーエクスプローラーと呼ばれます)。データベースエクスプローラーにアクセスし、先ほど追加した `SecurityTutorials` データベースを展開します。</span><span class="sxs-lookup"><span data-stu-id="599d3-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="599d3-153">画面にデータベースエクスプローラーが表示されない場合は、[表示] メニューの [データベースエクスプローラー] をクリックするか、Ctrl + Alt + S キーを押します。</span><span class="sxs-lookup"><span data-stu-id="599d3-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="599d3-154">図2に示すように、`SecurityTutorials` データベースは空であり、テーブル、ビュー、およびストアドプロシージャは含まれていません。</span><span class="sxs-lookup"><span data-stu-id="599d3-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>

<span data-ttu-id="599d3-155">[SecurityTutorials データベースが現在空で ![](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="599d3-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span></span>

<span data-ttu-id="599d3-156">**図 2**: `SecurityTutorials` データベースは現在空です ([クリックすると、フルサイズの画像が表示](creating-the-membership-schema-in-sql-server-vb/_static/image6.png)されます)</span><span class="sxs-lookup"><span data-stu-id="599d3-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span></span>

## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="599d3-157">手順 2: データベースへの`SqlMembershipProvider`スキーマの追加</span><span class="sxs-lookup"><span data-stu-id="599d3-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="599d3-158">`SqlMembershipProvider` には、ユーザーストアデータベースにインストールする特定のテーブル、ビュー、およびストアドプロシージャのセットが必要です。</span><span class="sxs-lookup"><span data-stu-id="599d3-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="599d3-159">これらの必要なデータベースオブジェクトは、 [`aspnet_regsql.exe` ツール](https://msdn.microsoft.com/library/ms229862.aspx)を使用して追加できます。</span><span class="sxs-lookup"><span data-stu-id="599d3-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="599d3-160">このファイルは `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` フォルダーにあります。</span><span class="sxs-lookup"><span data-stu-id="599d3-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="599d3-161">`aspnet_regsql.exe` ツールには、コマンドライン機能とグラフィカルユーザーインターフェイスの両方が用意されています。</span><span class="sxs-lookup"><span data-stu-id="599d3-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="599d3-162">グラフィカルインターフェイスは、ユーザーにとってわかりやすく、このチュートリアルで検証するものです。</span><span class="sxs-lookup"><span data-stu-id="599d3-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="599d3-163">コマンドラインインターフェイスは、ビルドスクリプトや自動テストのシナリオなどで、`SqlMembershipProvider` スキーマの追加を自動化する必要がある場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="599d3-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>

<span data-ttu-id="599d3-164">`aspnet_regsql.exe` ツールは、指定された SQL Server データベースに対して*ASP.NET アプリケーションサービス*を追加または削除するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="599d3-165">ASP.NET アプリケーションサービスには、`SqlMembershipProvider` と `SqlRoleProvider`のスキーマと、他の ASP.NET 2.0 フレームワークの SQL ベースのプロバイダーのスキーマが含まれています。</span><span class="sxs-lookup"><span data-stu-id="599d3-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="599d3-166">`aspnet_regsql.exe` ツールに2ビットの情報を提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="599d3-167">アプリケーションサービスを追加または削除するかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="599d3-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="599d3-168">アプリケーションサービススキーマの追加または削除の対象となるデータベース</span><span class="sxs-lookup"><span data-stu-id="599d3-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="599d3-169">データベースを使用するように求めるメッセージが表示されたら、`aspnet_regsql.exe` ツールで、データベースが存在するサーバーの名前、データベースに接続するためのセキュリティ資格情報、およびデータベース名を入力するように求められます。</span><span class="sxs-lookup"><span data-stu-id="599d3-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="599d3-170">Express Edition 以外の SQL Server を使用している場合は、この情報が既にわかっている必要があります。これは、ASP.NET web ページでデータベースを操作するときに接続文字列を使用して入力する必要がある情報と同じです。</span><span class="sxs-lookup"><span data-stu-id="599d3-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="599d3-171">ただし、`App_Data` フォルダー内の SQL Server 2005 Express Edition データベースを使用する場合は、サーバーとデータベースの名前を確認することが少し複雑になります。</span><span class="sxs-lookup"><span data-stu-id="599d3-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="599d3-172">次のセクションでは、`App_Data` フォルダー内の SQL Server 2005 Express Edition データベースのサーバー名とデータベース名を簡単に指定する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="599d3-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="599d3-173">を使用していない場合は SQL Server 2005 Express Edition 「アプリケーションサービスのインストール」のセクションに進んでください。</span><span class="sxs-lookup"><span data-stu-id="599d3-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theapp_datafolder"></a><span data-ttu-id="599d3-174">`App_Data`フォルダー内の SQL Server 2005 Express Edition データベースのサーバーとデータベース名を確認する</span><span class="sxs-lookup"><span data-stu-id="599d3-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="599d3-175">`aspnet_regsql.exe` ツールを使用するには、サーバー名とデータベース名を把握しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="599d3-176">サーバー名が `localhost\InstanceName`。</span><span class="sxs-lookup"><span data-stu-id="599d3-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="599d3-177">最も可能性が高いのは、 *InstanceName*が `SQLExpress`です。</span><span class="sxs-lookup"><span data-stu-id="599d3-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="599d3-178">ただし、SQL Server 2005 Express Edition 手動でインストールした場合 (つまり、Visual Studio のインストール時に自動的にインストールしなかった場合)、別のインスタンス名を選択した可能性があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="599d3-179">データベース名は、特定するのが少し厄介です。</span><span class="sxs-lookup"><span data-stu-id="599d3-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="599d3-180">通常、`App_Data` フォルダー内のデータベースには、データベースファイルへのパスと共に、[グローバル一意識別子](http://en.wikipedia.org/wiki/Globally_Unique_Identifier)を含むデータベース名が付けられます。</span><span class="sxs-lookup"><span data-stu-id="599d3-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="599d3-181">`aspnet_regsql.exe`を使用してアプリケーションサービススキーマを追加するには、このデータベース名を決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="599d3-182">データベース名を確認する最も簡単な方法は、SQL Server Management Studio を使用してデータベース名を調べることです。</span><span class="sxs-lookup"><span data-stu-id="599d3-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="599d3-183">SQL Server Management Studio には SQL Server 2005 データベースを管理するためのグラフィカルインターフェイスが用意されていますが、SQL Server 2005 の Express Edition には付属していません。</span><span class="sxs-lookup"><span data-stu-id="599d3-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="599d3-184">SQL Server Management Studio の無償 Express Edition を[ダウンロードでき](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)ます。</span><span class="sxs-lookup"><span data-stu-id="599d3-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="599d3-185">また、Express Edition 以外の SQL Server 2005 がデスクトップにインストールされている場合は、Management Studio の完全バージョンがインストールされている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="599d3-186">完全バージョンを使用してデータベース名を決定するには、次に示す Express Edition の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="599d3-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>

<span data-ttu-id="599d3-187">まず、Visual studio を終了して、データベースファイル上の Visual Studio によって設定されたロックが閉じられていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="599d3-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="599d3-188">次に、SQL Server Management Studio を起動して、SQL Server 2005 Express Edition の `localhost\InstanceName` データベースに接続します。</span><span class="sxs-lookup"><span data-stu-id="599d3-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="599d3-189">既に説明したように、インスタンス名は `SQLExpress`である可能性があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="599d3-190">[認証] オプションで、[Windows 認証] を選択します。</span><span class="sxs-lookup"><span data-stu-id="599d3-190">For the Authentication option, select Windows Authentication.</span></span>

<span data-ttu-id="599d3-191">[SQL Server 2005 Express Edition インスタンスに接続 ![には](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="599d3-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span></span>

<span data-ttu-id="599d3-192">**図 3**: SQL Server 2005 Express Edition インスタンスに接続する ([クリックすると、フルサイズの画像が表示](creating-the-membership-schema-in-sql-server-vb/_static/image9.png)されます)</span><span class="sxs-lookup"><span data-stu-id="599d3-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span></span>

<span data-ttu-id="599d3-193">SQL Server 2005 Express Edition インスタンスに接続すると、データベース、セキュリティ設定、サーバーオブジェクトなどのフォルダーが Management Studio に表示されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="599d3-194">[データベース] タブを展開すると、データベースインスタンスに `SecurityTutorials.mdf` データベースが登録されて*いない*ことがわかります。最初にデータベースをアタッチする必要があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="599d3-195">[データベース] フォルダーを右クリックし、コンテキストメニューの [アタッチ] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="599d3-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="599d3-196">これにより、[データベースのアタッチ] ダイアログボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="599d3-197">ここで、[追加] ボタンをクリックして `SecurityTutorials.mdf` データベースを参照し、[OK] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="599d3-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="599d3-198">図4は、`SecurityTutorials.mdf` データベースが選択された後の [データベースのアタッチ] ダイアログボックスを示しています。</span><span class="sxs-lookup"><span data-stu-id="599d3-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="599d3-199">図5は、データベースが正常にアタッチされた後の Management Studio のオブジェクトエクスプローラーを示しています。</span><span class="sxs-lookup"><span data-stu-id="599d3-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>

<span data-ttu-id="599d3-200">[SecurityTutorials .mdf データベースをアタッチ ![には](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="599d3-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span></span>

<span data-ttu-id="599d3-201">**図 4**: `SecurityTutorials.mdf` データベースをアタッチ[する (クリックすると、フルサイズの画像が表示](creating-the-membership-schema-in-sql-server-vb/_static/image12.png)されます)</span><span class="sxs-lookup"><span data-stu-id="599d3-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span></span>

<span data-ttu-id="599d3-202">[![データベースフォルダーに SecurityTutorials .mdf データベースが表示されます。](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="599d3-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span></span>

<span data-ttu-id="599d3-203">**図 5**: `SecurityTutorials.mdf` データベースが Databases フォルダーに表示される ([クリックすると、フルサイズの画像が表示](creating-the-membership-schema-in-sql-server-vb/_static/image15.png)されます)</span><span class="sxs-lookup"><span data-stu-id="599d3-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span></span>

<span data-ttu-id="599d3-204">図5に示すように、`SecurityTutorials.mdf` データベースの名前は abstruse になります。</span><span class="sxs-lookup"><span data-stu-id="599d3-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="599d3-205">覚えやすい名前に変更してください (より簡単な型)。</span><span class="sxs-lookup"><span data-stu-id="599d3-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="599d3-206">データベースを右クリックし、コンテキストメニューから [名前の変更] を選択して、名前を `SecurityTutorialsDatabase`に変更します。</span><span class="sxs-lookup"><span data-stu-id="599d3-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="599d3-207">このようにしても、ファイル名は変更されません。データベースが SQL Server するために使用する名前だけが変更されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>

<span data-ttu-id="599d3-208">[データベースの名前を SecurityTutorialsDatabase に変更 ![には](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="599d3-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span></span>

<span data-ttu-id="599d3-209">**図 6**: データベースの名前を `SecurityTutorialsDatabase`に変更する ([クリックすると、フルサイズの画像が表示](creating-the-membership-schema-in-sql-server-vb/_static/image18.png)されます)</span><span class="sxs-lookup"><span data-stu-id="599d3-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span></span>

<span data-ttu-id="599d3-210">この時点で、`SecurityTutorials.mdf` データベースファイルのサーバー名とデータベース名 (`localhost\InstanceName` と `SecurityTutorialsDatabase`) がわかります。</span><span class="sxs-lookup"><span data-stu-id="599d3-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="599d3-211">これで、`aspnet_regsql.exe` ツールを使用してアプリケーションサービスをインストールする準備が整いました。</span><span class="sxs-lookup"><span data-stu-id="599d3-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="599d3-212">アプリケーションサービスのインストール</span><span class="sxs-lookup"><span data-stu-id="599d3-212">Installing the Application Services</span></span>

<span data-ttu-id="599d3-213">`aspnet_regsql.exe` ツールを起動するには、[スタート] メニューにアクセスし、[実行] を選択します。</span><span class="sxs-lookup"><span data-stu-id="599d3-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="599d3-214">テキストボックスに `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` を入力し、[OK] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="599d3-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="599d3-215">または、エクスプローラーを使用して適切なフォルダーにドリルダウンし、`aspnet_regsql.exe` ファイルをダブルクリックすることもできます。</span><span class="sxs-lookup"><span data-stu-id="599d3-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="599d3-216">どちらの方法でも、同じ結果が得られます。</span><span class="sxs-lookup"><span data-stu-id="599d3-216">Either approach will net the same results.</span></span>

<span data-ttu-id="599d3-217">コマンドライン引数を指定せずに `aspnet_regsql.exe` ツールを実行すると、ASP.NET SQL Server セットアップウィザードのグラフィカルユーザーインターフェイスが起動します。</span><span class="sxs-lookup"><span data-stu-id="599d3-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="599d3-218">ウィザードを使用すると、指定したデータベースの ASP.NET アプリケーションサービスを簡単に追加または削除できます。</span><span class="sxs-lookup"><span data-stu-id="599d3-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="599d3-219">図7に示すように、ウィザードの最初の画面には、ツールの目的が示されています。</span><span class="sxs-lookup"><span data-stu-id="599d3-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>

<span data-ttu-id="599d3-220">[ASP.NET SQL Server セットアップウィザードを使用して、メンバーシップスキーマを追加 ![](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="599d3-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span></span>

<span data-ttu-id="599d3-221">**図 7**: ASP.NET SQL Server セットアップウィザードを使用してメンバーシップスキーマを追加する ([クリックすると、フルサイズの画像が表示](creating-the-membership-schema-in-sql-server-vb/_static/image21.png)されます)</span><span class="sxs-lookup"><span data-stu-id="599d3-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span></span>

<span data-ttu-id="599d3-222">ウィザードの2番目の手順では、アプリケーションサービスを追加するのか削除するのかを確認するメッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="599d3-223">`SqlMembershipProvider`に必要なテーブル、ビュー、ストアドプロシージャを追加する必要があるので、[アプリケーションサービスの SQL Server を構成する] オプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="599d3-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="599d3-224">後で、データベースからこのスキーマを削除する場合は、このウィザードを再実行しますが、代わりに [既存のデータベースからアプリケーションサービス情報を削除する] オプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="599d3-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>

<span data-ttu-id="599d3-225">[![[アプリケーションサービスの SQL Server を構成する] オプションを選択します。](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="599d3-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span></span>

<span data-ttu-id="599d3-226">**図 8**: [アプリケーションサービスの SQL Server を構成する] オプションを選択[する (クリックすると、フルサイズの画像が表示](creating-the-membership-schema-in-sql-server-vb/_static/image24.png)されます)</span><span class="sxs-lookup"><span data-stu-id="599d3-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span></span>

<span data-ttu-id="599d3-227">3番目の手順では、データベース情報の入力が求められます。これには、サーバー名、認証情報、およびデータベース名が表示されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="599d3-228">このチュートリアルに従っていて、`SecurityTutorials.mdf` データベースを `App_Data`に追加し、`localhost\InstanceName`にアタッチして、名前を `SecurityTutorialsDatabase`に変更した場合は、次の値を使用します。</span><span class="sxs-lookup"><span data-stu-id="599d3-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="599d3-229">サーバー: `localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="599d3-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="599d3-230">Windows 認証</span><span class="sxs-lookup"><span data-stu-id="599d3-230">Windows authentication</span></span>
- <span data-ttu-id="599d3-231">データベース: `SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="599d3-231">Database: `SecurityTutorialsDatabase`</span></span>

<span data-ttu-id="599d3-232">[データベース情報を入力 ![には](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="599d3-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span></span>

<span data-ttu-id="599d3-233">**図 9**: データベース情報を入力[する (クリックすると、フルサイズの画像が表示](creating-the-membership-schema-in-sql-server-vb/_static/image27.png)されます)</span><span class="sxs-lookup"><span data-stu-id="599d3-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span></span>

<span data-ttu-id="599d3-234">データベース情報を入力したら、[次へ] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="599d3-234">After entering the database information, click Next.</span></span> <span data-ttu-id="599d3-235">最後の手順では、実行される手順の概要を示します。</span><span class="sxs-lookup"><span data-stu-id="599d3-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="599d3-236">[次へ] をクリックしてアプリケーションサービスをインストールし、[完了] をクリックしてウィザードを完了します。</span><span class="sxs-lookup"><span data-stu-id="599d3-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="599d3-237">Management Studio を使用してデータベースをアタッチし、データベースファイルの名前を変更した場合は、Visual Studio を再度開く前に、データベースをデタッチして Management Studio を閉じるようにしてください。</span><span class="sxs-lookup"><span data-stu-id="599d3-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="599d3-238">`SecurityTutorialsDatabase` データベースをデタッチするには、データベース名を右クリックし、[タスク] メニューの [デタッチ] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="599d3-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>

<span data-ttu-id="599d3-239">ウィザードが完了したら、Visual Studio に戻り、データベースエクスプローラーに移動します。</span><span class="sxs-lookup"><span data-stu-id="599d3-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="599d3-240">[テーブル] フォルダーを展開します。</span><span class="sxs-lookup"><span data-stu-id="599d3-240">Expand the Tables folder.</span></span> <span data-ttu-id="599d3-241">名前がプレフィックス `aspnet_`で始まる一連のテーブルが表示されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="599d3-242">同様に、さまざまなビューやストアドプロシージャは、[ビュー] フォルダーと [ストアドプロシージャ] フォルダーにあります。</span><span class="sxs-lookup"><span data-stu-id="599d3-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="599d3-243">これらのデータベースオブジェクトは、アプリケーションサービススキーマを構成します。</span><span class="sxs-lookup"><span data-stu-id="599d3-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="599d3-244">ここでは、手順 3. でメンバーシップとロール固有のデータベースオブジェクトについて説明します。</span><span class="sxs-lookup"><span data-stu-id="599d3-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>

<span data-ttu-id="599d3-245">[さまざまなテーブル、ビュー、およびストアドプロシージャがデータベースに追加された ![](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="599d3-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span></span>

<span data-ttu-id="599d3-246">**図 10**: さまざまなテーブル、ビュー、ストアドプロシージャがデータベースに追加されました ([クリックすると、フルサイズの画像が表示](creating-the-membership-schema-in-sql-server-vb/_static/image30.png)されます)</span><span class="sxs-lookup"><span data-stu-id="599d3-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="599d3-247">`aspnet_regsql.exe` ツールのグラフィカルユーザーインターフェイスによって、アプリケーションサービススキーマ全体がインストールされます。</span><span class="sxs-lookup"><span data-stu-id="599d3-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="599d3-248">ただし、コマンドラインから `aspnet_regsql.exe` を実行する場合は、インストールする特定のアプリケーションサービスコンポーネント (または削除) を指定できます。</span><span class="sxs-lookup"><span data-stu-id="599d3-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="599d3-249">したがって、`SqlMembershipProvider` および `SqlRoleProvider` プロバイダーに必要なテーブル、ビュー、ストアドプロシージャだけを追加する場合は、コマンドラインから `aspnet_regsql.exe` を実行します。</span><span class="sxs-lookup"><span data-stu-id="599d3-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="599d3-250">または、`aspnet_regsql.exe`によって使用される T-sql 作成スクリプトの適切なサブセットを手動で実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="599d3-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="599d3-251">これらのスクリプトは、`InstallCommon.sql`、`InstallMembership.sql`、`InstallRoles.sql`、`InstallProfile.sql`、`InstallSqlState.sql`などの名前を持つ `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` フォルダーにあります。</span><span class="sxs-lookup"><span data-stu-id="599d3-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`, and so on.</span></span>

<span data-ttu-id="599d3-252">この時点で、`SqlMembershipProvider`に必要なデータベースオブジェクトが作成されました。</span><span class="sxs-lookup"><span data-stu-id="599d3-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="599d3-253">ただし、メンバーシップフレームワークに対しては、`SqlMembershipProvider` (`ActiveDirectoryMembershipProvider`) を使用する必要があり、`SqlMembershipProvider` では `SecurityTutorials` データベースを使用する必要があることについても指示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="599d3-254">ここでは、使用するプロバイダーを指定する方法と、手順 4. で選択したプロバイダーの設定をカスタマイズする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="599d3-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="599d3-255">しかし、まず、作成したデータベースオブジェクトについて詳しく見ていきましょう。</span><span class="sxs-lookup"><span data-stu-id="599d3-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="599d3-256">手順 3: スキーマのコアテーブルを確認する</span><span class="sxs-lookup"><span data-stu-id="599d3-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="599d3-257">ASP.NET アプリケーションでメンバーシップとロールのフレームワークを使用する場合、実装の詳細はプロバイダーによってカプセル化されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="599d3-258">今後のチュートリアルでは、これらのフレームワークとのインターフェイスとして、.NET Framework の `Membership` クラスと `Roles` クラスを使用します。</span><span class="sxs-lookup"><span data-stu-id="599d3-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="599d3-259">これらの高レベルの Api を使用する場合、実行されるクエリや、`SqlMembershipProvider` および `SqlRoleProvider`によって変更されるテーブルなど、下位レベルの詳細について心配する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="599d3-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="599d3-260">これにより、手順2で作成したデータベーススキーマを調べることなく、メンバーシップとロールのフレームワークを自信を持って使用することができます。</span><span class="sxs-lookup"><span data-stu-id="599d3-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="599d3-261">ただし、アプリケーションデータを格納するテーブルを作成する場合は、ユーザーまたはロールに関連するエンティティの作成が必要になることがあります。</span><span class="sxs-lookup"><span data-stu-id="599d3-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="599d3-262">アプリケーションデータテーブルと手順 2. で作成したテーブルとの間で外部キー制約を確立するときに、`SqlMembershipProvider` スキーマと `SqlRoleProvider` スキーマについての知識を持つことができます。</span><span class="sxs-lookup"><span data-stu-id="599d3-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="599d3-263">また、まれに、ユーザーとロールのストアとのインターフェイスを、(`Membership` または `Roles` クラスではなく) データベースレベルで直接行う必要がある場合もあります。</span><span class="sxs-lookup"><span data-stu-id="599d3-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="599d3-264">ユーザーストアをアプリケーションにパーティション分割する</span><span class="sxs-lookup"><span data-stu-id="599d3-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="599d3-265">メンバーシップとロールのフレームワークは、1人のユーザーとロールストアをさまざまなアプリケーション間で共有できるように設計されています。</span><span class="sxs-lookup"><span data-stu-id="599d3-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="599d3-266">メンバーシップまたはロールのフレームワークを使用する ASP.NET アプリケーションでは、使用するアプリケーションパーティションを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="599d3-267">つまり、複数の web アプリケーションで同じユーザーおよびロールストアを使用できます。</span><span class="sxs-lookup"><span data-stu-id="599d3-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="599d3-268">図11は、HRSite、顧客サイト、SalesSite という3つのアプリケーションにパーティション分割されているユーザーとロールのストアを示しています。</span><span class="sxs-lookup"><span data-stu-id="599d3-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="599d3-269">これら3つの web アプリケーションはそれぞれ独自のユーザーとロールを持っていますが、ユーザーアカウントとロール情報は、物理的に同じデータベーステーブルに格納されています。</span><span class="sxs-lookup"><span data-stu-id="599d3-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>

<span data-ttu-id="599d3-270">[![のユーザーアカウントが複数のアプリケーションでパーティション分割される場合がある](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="599d3-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span></span>

<span data-ttu-id="599d3-271">**図 11**: ユーザーアカウントが複数のアプリケーションでパーティション分割されている場合 ([クリックすると、フルサイズの画像が表示](creating-the-membership-schema-in-sql-server-vb/_static/image33.png)されます)</span><span class="sxs-lookup"><span data-stu-id="599d3-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span></span>

<span data-ttu-id="599d3-272">`aspnet_Applications` テーブルでは、これらのパーティションを定義します。</span><span class="sxs-lookup"><span data-stu-id="599d3-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="599d3-273">データベースを使用してユーザーアカウント情報を格納する各アプリケーションは、このテーブルの行によって表されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="599d3-274">`aspnet_Applications` テーブルには、`ApplicationId`、`ApplicationName`、`LoweredApplicationName`、および `Description`の4つの列があります。`ApplicationId`</span><span class="sxs-lookup"><span data-stu-id="599d3-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.`ApplicationId`</span></span> <span data-ttu-id="599d3-275">は[`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx)型で、はテーブルの主キーです。`ApplicationName` には、アプリケーションごとにわかりやすい一意の名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="599d3-275">is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="599d3-276">その他のメンバーシップとロールに関連するテーブルは、`aspnet_Applications`の [`ApplicationId`] フィールドにリンクします。</span><span class="sxs-lookup"><span data-stu-id="599d3-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="599d3-277">たとえば、各ユーザーアカウントのレコードを含む `aspnet_Users` テーブルには、`ApplicationId` の外部キーフィールドがあります。`aspnet_Roles` テーブルの ditto。</span><span class="sxs-lookup"><span data-stu-id="599d3-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="599d3-278">これらのテーブルの `ApplicationId` フィールドでは、ユーザーアカウントまたはロールが属しているアプリケーションパーティションを指定します。</span><span class="sxs-lookup"><span data-stu-id="599d3-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="599d3-279">ユーザーアカウント情報の保存</span><span class="sxs-lookup"><span data-stu-id="599d3-279">Storing User Account Information</span></span>

<span data-ttu-id="599d3-280">ユーザーアカウント情報は、`aspnet_Users` と `aspnet_Membership`の2つのテーブルに格納されています。</span><span class="sxs-lookup"><span data-stu-id="599d3-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="599d3-281">`aspnet_Users` テーブルには、重要なユーザーアカウント情報を保持するフィールドが含まれています。</span><span class="sxs-lookup"><span data-stu-id="599d3-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="599d3-282">最も関連する3つの列は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="599d3-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="599d3-283">`UserId` は主キー (`uniqueidentifier`型) です。</span><span class="sxs-lookup"><span data-stu-id="599d3-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="599d3-284">`UserName` は `nvarchar(256)` 型で、パスワードと共に、ユーザーの資格情報を構成します。</span><span class="sxs-lookup"><span data-stu-id="599d3-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="599d3-285">(ユーザーのパスワードは `aspnet_Membership` テーブルに格納されます)。`ApplicationId` は、`aspnet_Applications`内の特定のアプリケーションにユーザーアカウントをリンクします。</span><span class="sxs-lookup"><span data-stu-id="599d3-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="599d3-286">`UserName` 列と `ApplicationId` 列には、複合[`UNIQUE` 制約](https://msdn.microsoft.com/library/ms191166.aspx)があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="599d3-287">これにより、特定のアプリケーションで各ユーザー名が一意であることが保証されますが、同じ `UserName` を異なるアプリケーションで使用することができます。</span><span class="sxs-lookup"><span data-stu-id="599d3-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="599d3-288">`aspnet_Membership` の表には、ユーザーのパスワード、電子メールアドレス、最後にログインした日付と時刻などの追加のユーザーアカウント情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="599d3-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="599d3-289">`aspnet_Users` テーブルと `aspnet_Membership` テーブルのレコードの間には1対1の対応があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="599d3-290">このリレーションシップは、テーブルの主キーとして機能する `aspnet_Membership`の [`UserId`] フィールドによって保証されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="599d3-291">`aspnet_Users` テーブルと同様に、`aspnet_Membership` には、この情報を特定のアプリケーションパーティションに結び付ける `ApplicationId` フィールドが含まれています。</span><span class="sxs-lookup"><span data-stu-id="599d3-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="599d3-292">パスワードのセキュリティ保護</span><span class="sxs-lookup"><span data-stu-id="599d3-292">Securing Passwords</span></span>

<span data-ttu-id="599d3-293">パスワード情報は `aspnet_Membership` テーブルに格納されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="599d3-294">`SqlMembershipProvider` では、次の3つの方法のいずれかを使用して、パスワードをデータベースに格納できます。</span><span class="sxs-lookup"><span data-stu-id="599d3-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="599d3-295">**[クリア]** -パスワードはプレーンテキストとしてデータベースに格納されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="599d3-296">このオプションを使用しないことを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="599d3-296">I strongly discourage using this option.</span></span> <span data-ttu-id="599d3-297">データベースが侵害された場合、データベースへのアクセスが許可されているハッカーがデータベースに侵入したとしても、すべてのユーザーの資格情報が存在することになります。</span><span class="sxs-lookup"><span data-stu-id="599d3-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="599d3-298">**ハッシュ**-パスワードは、一方向のハッシュアルゴリズムとランダムに生成された salt 値を使用してハッシュされます。</span><span class="sxs-lookup"><span data-stu-id="599d3-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="599d3-299">このハッシュ値 (salt) は、データベースに格納されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="599d3-300">**暗号化**-パスワードの暗号化されたバージョンがデータベースに格納されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="599d3-301">使用されるパスワードストレージ手法は、`Web.config`で指定された `SqlMembershipProvider` 設定によって異なります。</span><span class="sxs-lookup"><span data-stu-id="599d3-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="599d3-302">ここでは、手順 4. で `SqlMembershipProvider` 設定をカスタマイズする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="599d3-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="599d3-303">既定の動作では、パスワードのハッシュが保存されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="599d3-304">パスワードを格納する列は、`Password`、`PasswordFormat`、および `PasswordSalt`です。</span><span class="sxs-lookup"><span data-stu-id="599d3-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="599d3-305">`PasswordFormat` は、パスワードを格納するために使用される方法を示す値を持つ `int` 型のフィールドです。空の場合は0です。ハッシュされる場合は1。2暗号化されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="599d3-306">使用されるパスワードストレージの手法に関係なく、ランダムに生成された文字列が `PasswordSalt` に割り当てられます。`PasswordSalt` の値は、パスワードのハッシュを計算する場合にのみ使用されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="599d3-307">最後に、[`Password`] 列には、実際のパスワードデータ、プレーンテキストのパスワード、パスワードのハッシュ、または暗号化されたパスワードを入力します。</span><span class="sxs-lookup"><span data-stu-id="599d3-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="599d3-308">表1は、パスワード MySecret を格納するときに、これら3つの列がさまざまなストレージ手法でどのように表示されるかを示しています。</span><span class="sxs-lookup"><span data-stu-id="599d3-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="599d3-309">。</span><span class="sxs-lookup"><span data-stu-id="599d3-309">.</span></span>

| <span data-ttu-id="599d3-310">**ストレージ手法&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="599d3-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="599d3-311">**パスワード&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="599d3-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="599d3-312">**PasswordFormat&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="599d3-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="599d3-313">**PasswordSalt&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="599d3-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="599d3-314">Clear</span><span class="sxs-lookup"><span data-stu-id="599d3-314">Clear</span></span> | <span data-ttu-id="599d3-315">MySecret!</span><span class="sxs-lookup"><span data-stu-id="599d3-315">MySecret!</span></span> | <span data-ttu-id="599d3-316">0</span><span class="sxs-lookup"><span data-stu-id="599d3-316">0</span></span> | <span data-ttu-id="599d3-317">tTnkPlesqissc2y2SMEygA==</span><span class="sxs-lookup"><span data-stu-id="599d3-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="599d3-318">ハッシュ</span><span class="sxs-lookup"><span data-stu-id="599d3-318">Hashed</span></span> | <span data-ttu-id="599d3-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span><span class="sxs-lookup"><span data-stu-id="599d3-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="599d3-320">1</span><span class="sxs-lookup"><span data-stu-id="599d3-320">1</span></span> | <span data-ttu-id="599d3-321">wFgjUfhdUFOCKQiI61vtiQ==</span><span class="sxs-lookup"><span data-stu-id="599d3-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="599d3-322">Encrypted</span><span class="sxs-lookup"><span data-stu-id="599d3-322">Encrypted</span></span> | <span data-ttu-id="599d3-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="599d3-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="599d3-324">2</span><span class="sxs-lookup"><span data-stu-id="599d3-324">2</span></span> | <span data-ttu-id="599d3-325">LSRzhGS/aa/oqAXGLHJNBw==</span><span class="sxs-lookup"><span data-stu-id="599d3-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="599d3-326">**表 1**: パスワード Mysecret を保存するときのパスワード関連のフィールドの値の例</span><span class="sxs-lookup"><span data-stu-id="599d3-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="599d3-327">`SqlMembershipProvider` によって使用される特定の暗号化アルゴリズムまたはハッシュアルゴリズムは、`<machineKey>` 要素の設定によって決まります。</span><span class="sxs-lookup"><span data-stu-id="599d3-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="599d3-328"><a id="Tutorial3"> </a> [ *「フォーム認証の構成」と「高度なトピック*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md)」のチュートリアルの手順3で、この構成要素について説明しました。</span><span class="sxs-lookup"><span data-stu-id="599d3-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial.</span></span>

### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="599d3-329">ロールとロールの関連付けの格納</span><span class="sxs-lookup"><span data-stu-id="599d3-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="599d3-330">ロールフレームワークを使用すると、開発者は一連のロールを定義し、ユーザーがどのロールに属しているかを指定できます。</span><span class="sxs-lookup"><span data-stu-id="599d3-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="599d3-331">この情報は、`aspnet_Roles` と `aspnet_UsersInRoles`の2つのテーブルによってデータベースにキャプチャされます。</span><span class="sxs-lookup"><span data-stu-id="599d3-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="599d3-332">`aspnet_Roles` テーブル内の各レコードは、特定のアプリケーションのロールを表します。</span><span class="sxs-lookup"><span data-stu-id="599d3-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="599d3-333">`aspnet_Users` テーブルと同様に、`aspnet_Roles` テーブルには、ここで説明する3つの列があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="599d3-334">`RoleId` は主キー (`uniqueidentifier`型) です。</span><span class="sxs-lookup"><span data-stu-id="599d3-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="599d3-335">`RoleName` は `nvarchar(256)` 型です。</span><span class="sxs-lookup"><span data-stu-id="599d3-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="599d3-336">と `ApplicationId` は、`aspnet_Applications`内の特定のアプリケーションにユーザーアカウントをリンクします。</span><span class="sxs-lookup"><span data-stu-id="599d3-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="599d3-337">`RoleName` 列と `ApplicationId` 列には複合 `UNIQUE` 制約があるため、特定のアプリケーションで各ロール名が一意であることが保証されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="599d3-338">`aspnet_UsersInRoles` テーブルは、ユーザーとロールの間のマッピングとして機能します。</span><span class="sxs-lookup"><span data-stu-id="599d3-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="599d3-339">列には、`UserId` と `RoleId` という2つの列があり、それらの組み合わせによって複合主キーが構成されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="599d3-340">手順 4: プロバイダーを指定し、その設定をカスタマイズする</span><span class="sxs-lookup"><span data-stu-id="599d3-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="599d3-341">メンバーシップやロールのフレームワークなど、プロバイダーモデルをサポートするすべてのフレームワーク-実装の詳細がないため、その責任をプロバイダークラスに委任します。</span><span class="sxs-lookup"><span data-stu-id="599d3-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="599d3-342">メンバーシップフレームワークの場合、`Membership` クラスは、ユーザーアカウントを管理するための API を定義しますが、ユーザーストアと直接対話することはありません。</span><span class="sxs-lookup"><span data-stu-id="599d3-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="599d3-343">代わりに、`Membership` クラスのメソッドは、構成されたプロバイダーに要求を渡します。 `SqlMembershipProvider`を使用します。</span><span class="sxs-lookup"><span data-stu-id="599d3-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="599d3-344">`Membership` クラスのメソッドのいずれかを呼び出すと、メンバーシップフレームワークは、`SqlMembershipProvider`への呼び出しを委任することをどのように認識しますか。</span><span class="sxs-lookup"><span data-stu-id="599d3-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="599d3-345">`Membership` クラスには、メンバーシップフレームワークで使用できるすべての登録済みプロバイダークラスへの参照を含む[`Providers` プロパティ](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx)があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="599d3-346">登録された各プロバイダーには、関連付けられた名前と型があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="599d3-347">名前には、`Providers` コレクション内の特定のプロバイダーを参照するためのわかりやすい方法が用意されていますが、型はプロバイダークラスを識別します。</span><span class="sxs-lookup"><span data-stu-id="599d3-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="599d3-348">さらに、登録された各プロバイダーには、構成設定が含まれる場合があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="599d3-349">メンバーシップフレームワークの構成設定には、他の多くの `PasswordFormat` と `requiresUniqueEmail`が含まれます。</span><span class="sxs-lookup"><span data-stu-id="599d3-349">Configuration settings for the Membership framework include `PasswordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="599d3-350">`SqlMembershipProvider`によって使用される構成設定の完全な一覧については、表2を参照してください。</span><span class="sxs-lookup"><span data-stu-id="599d3-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="599d3-351">`Providers` プロパティの内容は、web アプリケーションの構成設定によって指定されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="599d3-352">既定では、すべての web アプリケーションに `SqlMembershipProvider`型の `AspNetSqlMembershipProvider` という名前のプロバイダーがあります。</span><span class="sxs-lookup"><span data-stu-id="599d3-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="599d3-353">この既定のメンバーシッププロバイダーは `machine.config` (`%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`にあります) に登録されています。</span><span class="sxs-lookup"><span data-stu-id="599d3-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample1.xml)]

<span data-ttu-id="599d3-354">上のマークアップが示すように、 [`<membership>` 要素](https://msdn.microsoft.com/library/1b9hw62f.aspx)は、メンバーシップフレームワークの構成設定を定義します。一方、 [`<providers>` 子要素](https://msdn.microsoft.com/library/6d4936ht.aspx)は、登録されているプロバイダーを指定します。</span><span class="sxs-lookup"><span data-stu-id="599d3-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="599d3-355">プロバイダーは、 [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx)要素または[`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx)要素を使用して追加または削除できます。現在登録されているすべてのプロバイダーを削除するには、 [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx)要素を使用します。</span><span class="sxs-lookup"><span data-stu-id="599d3-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="599d3-356">上のマークアップが示すように、`machine.config` `SqlMembershipProvider`型の `AspNetSqlMembershipProvider` という名前のプロバイダーを追加します。</span><span class="sxs-lookup"><span data-stu-id="599d3-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="599d3-357">`name` 属性と `type` 属性に加えて、`<add>` 要素には、さまざまな構成設定の値を定義する属性が含まれています。</span><span class="sxs-lookup"><span data-stu-id="599d3-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="599d3-358">表2に、使用可能な `SqlMembershipProvider`固有の構成設定と、それぞれの説明を示します。</span><span class="sxs-lookup"><span data-stu-id="599d3-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="599d3-359">表2に示されている既定値は、`SqlMembershipProvider` クラスで定義されている既定値を示します。</span><span class="sxs-lookup"><span data-stu-id="599d3-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="599d3-360">`AspNetSqlMembershipProvider` のすべての構成設定が `SqlMembershipProvider` クラスの既定値に対応しているわけではないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="599d3-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="599d3-361">たとえば、メンバーシッププロバイダーで指定されていない場合、`requiresUniqueEmail` 設定の既定値は true になります。</span><span class="sxs-lookup"><span data-stu-id="599d3-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="599d3-362">ただし、`AspNetSqlMembershipProvider` は、`false`の値を明示的に指定することによって、この既定値をオーバーライドします。</span><span class="sxs-lookup"><span data-stu-id="599d3-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>

| <span data-ttu-id="599d3-363">**&lt;の設定 \_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="599d3-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="599d3-364">**説明&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="599d3-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="599d3-365">メンバーシップフレームワークによって、単一のユーザーストアを複数のアプリケーションでパーティション分割できることを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="599d3-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="599d3-366">この設定は、メンバーシッププロバイダーによって使用されるアプリケーションパーティションの名前を示します。</span><span class="sxs-lookup"><span data-stu-id="599d3-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="599d3-367">この値が明示的に指定されていない場合は、実行時にアプリケーションの仮想ルートパスの値に設定されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="599d3-368">SQL コマンドのタイムアウト値を秒単位で指定します。</span><span class="sxs-lookup"><span data-stu-id="599d3-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="599d3-369">既定値は 30 です。</span><span class="sxs-lookup"><span data-stu-id="599d3-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="599d3-370">ユーザーストアデータベースへの接続に使用する `<connectionStrings>` 要素内の接続文字列の名前。</span><span class="sxs-lookup"><span data-stu-id="599d3-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="599d3-371">この値は必須です。</span><span class="sxs-lookup"><span data-stu-id="599d3-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="599d3-372">登録されているプロバイダーについてのわかりやすい説明を提供します。</span><span class="sxs-lookup"><span data-stu-id="599d3-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="599d3-373">ユーザーが忘れたパスワードを取得できるかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="599d3-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="599d3-374">既定値は `false` です。</span><span class="sxs-lookup"><span data-stu-id="599d3-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="599d3-375">ユーザーがパスワードのリセットを許可されているかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="599d3-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="599d3-376">既定値は `true` です。</span><span class="sxs-lookup"><span data-stu-id="599d3-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="599d3-377">ユーザーがロックアウトされる前に、指定された `passwordAttemptWindow` 中に特定のユーザーに対して失敗したログイン試行の最大回数。既定値は5です。</span><span class="sxs-lookup"><span data-stu-id="599d3-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="599d3-378">ユーザーのパスワードに表示する必要がある英数字以外の文字の最小数。</span><span class="sxs-lookup"><span data-stu-id="599d3-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="599d3-379">この値は 0 ~ 128 の範囲で指定する必要があります。既定値は1です。</span><span class="sxs-lookup"><span data-stu-id="599d3-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="599d3-380">パスワードに必要な最小文字数。</span><span class="sxs-lookup"><span data-stu-id="599d3-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="599d3-381">この値は 0 ~ 128 の範囲で指定する必要があります。既定値は7です。</span><span class="sxs-lookup"><span data-stu-id="599d3-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="599d3-382">登録されているプロバイダーの名前。</span><span class="sxs-lookup"><span data-stu-id="599d3-382">The name of the registered provider.</span></span> <span data-ttu-id="599d3-383">この値は必須です。</span><span class="sxs-lookup"><span data-stu-id="599d3-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="599d3-384">失敗したログイン試行が追跡される時間 (分単位)。</span><span class="sxs-lookup"><span data-stu-id="599d3-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="599d3-385">この指定した期間内にユーザーが無効なログイン資格情報を `maxInvalidPasswordAttempts` 入力した場合は、ロックアウトされます。既定値は10です。</span><span class="sxs-lookup"><span data-stu-id="599d3-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="599d3-386">パスワードの保存形式: `Clear`、`Hashed`、または `Encrypted`。</span><span class="sxs-lookup"><span data-stu-id="599d3-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="599d3-387">既定では、 `Hashed`です。</span><span class="sxs-lookup"><span data-stu-id="599d3-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="599d3-388">指定されている場合、この正規表現を使用して、新しいアカウントを作成するとき、またはパスワードを変更するときに、ユーザーが選択したパスワードの強度を評価します。</span><span class="sxs-lookup"><span data-stu-id="599d3-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="599d3-389">既定値は空の文字列です。</span><span class="sxs-lookup"><span data-stu-id="599d3-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="599d3-390">パスワードを取得またはリセットするときに、ユーザーがセキュリティの質問に答える必要があるかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="599d3-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="599d3-391">既定値は `true` です。</span><span class="sxs-lookup"><span data-stu-id="599d3-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="599d3-392">特定のアプリケーションパーティション内のすべてのユーザーアカウントが一意の電子メールアドレスを持つ必要があるかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="599d3-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="599d3-393">既定値は `true` です。</span><span class="sxs-lookup"><span data-stu-id="599d3-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="599d3-394">プロバイダーの種類を指定します。</span><span class="sxs-lookup"><span data-stu-id="599d3-394">Specifies the type of the provider.</span></span> <span data-ttu-id="599d3-395">この値は必須です。</span><span class="sxs-lookup"><span data-stu-id="599d3-395">This value is required.</span></span> |

<span data-ttu-id="599d3-396">**表 2**: メンバーシップと `SqlMembershipProvider` 構成設定</span><span class="sxs-lookup"><span data-stu-id="599d3-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="599d3-397">`AspNetSqlMembershipProvider`に加えて、他のメンバーシッププロバイダーは、`Web.config` ファイルに同様のマークアップを追加することによって、アプリケーションごとに登録できます。</span><span class="sxs-lookup"><span data-stu-id="599d3-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="599d3-398">ロールフレームワークは同じように機能します。 `machine.config` に既定で登録されたロールプロバイダーがあり、登録されているプロバイダーは `Web.config`でアプリケーションごとにカスタマイズできます。</span><span class="sxs-lookup"><span data-stu-id="599d3-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="599d3-399">ロールフレームワークとその構成マークアップについては、今後のチュートリアルで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="599d3-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>

### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="599d3-400">`SqlMembershipProvider`設定のカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="599d3-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="599d3-401">既定の `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) では、`connectionStringName` 属性が `LocalSqlServer`に設定されています。</span><span class="sxs-lookup"><span data-stu-id="599d3-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="599d3-402">`AspNetSqlMembershipProvider` プロバイダーと同様に、接続文字列名 `LocalSqlServer` は `machine.config`で定義されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample2.xml)]

<span data-ttu-id="599d3-403">ご覧のとおり、この接続文字列では | にある SQL 2005 Express Edition データベースが定義されています。DataDirectory | aspnetdb.mdf。</span><span class="sxs-lookup"><span data-stu-id="599d3-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf.</span></span> <span data-ttu-id="599d3-404">String |DataDirectory |実行時には、`~/App_Data/` ディレクトリを指すように変換されます。そのため、データベース path |DataDirectory | aspnetdb.mdf は、`~/App_Data`/`aspnet.mdf`に変換します。</span><span class="sxs-lookup"><span data-stu-id="599d3-404">The string |DataDirectory| is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="599d3-405">アプリケーションの `Web.config` ファイルでメンバーシッププロバイダー情報を指定しなかった場合、アプリケーションは既定の登録されたメンバーシッププロバイダー、`AspNetSqlMembershipProvider`を使用します。</span><span class="sxs-lookup"><span data-stu-id="599d3-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="599d3-406">`~/App_Data/aspnet.mdf` データベースが存在しない場合は、ASP.NET ランタイムによって自動的に作成され、アプリケーションサービススキーマが追加されます。</span><span class="sxs-lookup"><span data-stu-id="599d3-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="599d3-407">ただし、`aspnet.mdf` データベースは使用しません。代わりに、手順 2. で作成した `SecurityTutorials.mdf` データベースを使用します。</span><span class="sxs-lookup"><span data-stu-id="599d3-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="599d3-408">この変更は、次の2つの方法のいずれかで行うことができます。</span><span class="sxs-lookup"><span data-stu-id="599d3-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="599d3-409"><strong>`Web.config`</strong>で、<strong>`LocalSqlServer`</strong><strong>接続文字列名</strong><strong>の値を指定</strong>し<strong>ます。</strong></span><span class="sxs-lookup"><span data-stu-id="599d3-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="599d3-410">`Web.config`の `LocalSqlServer` 接続文字列名の値を上書きすることにより、既定の登録済みメンバーシッププロバイダー (`AspNetSqlMembershipProvider`) を使用して、`SecurityTutorials.mdf` データベースと正しく連携させることができます。</span><span class="sxs-lookup"><span data-stu-id="599d3-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="599d3-411">`AspNetSqlMembershipProvider`によって指定された構成設定を使用してコンテンツを作成する場合は、この方法が適しています。</span><span class="sxs-lookup"><span data-stu-id="599d3-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="599d3-412">この手法の詳細については、 [Scott Guthrie](https://weblogs.asp.net/scottgu/)のブログ記事「 [SQL Server 2000 または SQL Server 2005 を使用するように ASP.NET 2.0 アプリケーションサービスを構成する](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="599d3-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="599d3-413"><strong>`SqlMembershipProvider`</strong><strong>種類の新しい登録済みプロバイダーを追加</strong>し、<strong>`SecurityTutorials.mdf`</strong>データベース<strong>を指すようにその`connectionStringName`設定を</strong><strong>構成し</strong><strong>ます。</strong></span><span class="sxs-lookup"><span data-stu-id="599d3-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="599d3-414">この方法は、データベース接続文字列に加えて他の構成プロパティをカスタマイズする場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="599d3-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="599d3-415">独自のプロジェクトでは、柔軟性と読みやすさのため、常にこの方法を使用します。</span><span class="sxs-lookup"><span data-stu-id="599d3-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="599d3-416">`SecurityTutorials.mdf` データベースを参照する新しい登録済みプロバイダーを追加する前に、まず `Web.config`の `<connectionStrings>` セクションに適切な接続文字列値を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="599d3-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="599d3-417">次のマークアップは、`App_Data` フォルダー内の SQL Server 2005 Express Edition `SecurityTutorials.mdf` データベースを参照する `SecurityTutorialsConnectionString` という名前の新しい接続文字列を追加します。</span><span class="sxs-lookup"><span data-stu-id="599d3-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="599d3-418">代替データベースファイルを使用する場合は、必要に応じて接続文字列を更新します。</span><span class="sxs-lookup"><span data-stu-id="599d3-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="599d3-419">正しい接続文字列を形成する方法の詳細については、 [ConnectionStrings.com](http://www.connectionstrings.com/)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="599d3-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="599d3-420">次に、次のメンバーシップ構成マークアップを `Web.config` ファイルに追加します。</span><span class="sxs-lookup"><span data-stu-id="599d3-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="599d3-421">このマークアップは、`SecurityTutorialsSqlMembershipProvider`という名前の新しいプロバイダーを登録します。</span><span class="sxs-lookup"><span data-stu-id="599d3-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample4.xml)]

<span data-ttu-id="599d3-422">上のマークアップでは、`SecurityTutorialsSqlMembershipProvider` プロバイダーの登録に加えて、`SecurityTutorialsSqlMembershipProvider` を既定のプロバイダーとして定義しています (`<membership>` 要素の `defaultProvider` 属性を使用)。</span><span class="sxs-lookup"><span data-stu-id="599d3-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="599d3-423">メンバーシップフレームワークは複数の登録済みプロバイダーを持つことができることを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="599d3-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="599d3-424">`AspNetSqlMembershipProvider` は `machine.config`の最初のプロバイダーとして登録されるため、特に指定しない限り、既定のプロバイダーとして機能します。</span><span class="sxs-lookup"><span data-stu-id="599d3-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="599d3-425">現在、アプリケーションには、`AspNetSqlMembershipProvider` と `SecurityTutorialsSqlMembershipProvider`の2つの登録済みプロバイダーがあります。</span><span class="sxs-lookup"><span data-stu-id="599d3-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="599d3-426">ただし、`SecurityTutorialsSqlMembershipProvider` プロバイダーを登録する前に、`<add>` 要素の直前に[`<clear />` 要素](https://msdn.microsoft.com/library/t062y6yc.aspx)を追加することで、以前に登録されていたすべてのプロバイダーを消去できます。</span><span class="sxs-lookup"><span data-stu-id="599d3-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="599d3-427">これにより、登録されているプロバイダーの一覧から `AspNetSqlMembershipProvider` がクリアされます。つまり、`SecurityTutorialsSqlMembershipProvider` が唯一の登録済みメンバーシッププロバイダーになります。</span><span class="sxs-lookup"><span data-stu-id="599d3-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="599d3-428">この方法を使用した場合は、登録されている唯一のメンバーシッププロバイダーであるため、`SecurityTutorialsSqlMembershipProvider` を既定のプロバイダーとしてマークする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="599d3-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="599d3-429">`<clear />`の使用方法の詳細については、「[プロバイダーを追加するときの `<clear />` の使用](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="599d3-429">For more information on using `<clear />`, see [Using `<clear />` When Adding providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="599d3-430">`SecurityTutorialsSqlMembershipProvider`の `connectionStringName` 設定は、追加された `SecurityTutorialsConnectionString` 接続文字列名を参照し、その `applicationName` 設定が SecurityTutorials の値に設定されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="599d3-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="599d3-431">さらに、`requiresUniqueEmail` 設定は `true`に設定されています。</span><span class="sxs-lookup"><span data-stu-id="599d3-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="599d3-432">他のすべての構成オプションは、`AspNetSqlMembershipProvider`の値と同じです。</span><span class="sxs-lookup"><span data-stu-id="599d3-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="599d3-433">必要に応じて、ここで自由に構成を変更することができます。</span><span class="sxs-lookup"><span data-stu-id="599d3-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="599d3-434">たとえば、1つではなく2つの英数字以外の文字を必要とすることによって、または7ではなく8文字になるようにパスワードの長さを増やすことで、パスワードの強度を強化することができます。</span><span class="sxs-lookup"><span data-stu-id="599d3-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="599d3-435">メンバーシップフレームワークによって、単一のユーザーストアを複数のアプリケーションでパーティション分割できることを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="599d3-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="599d3-436">メンバーシッププロバイダーの `applicationName` 設定は、ユーザーストアを操作するときにプロバイダーが使用するアプリケーションを示します。</span><span class="sxs-lookup"><span data-stu-id="599d3-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="599d3-437">`applicationName` が明示的に設定されていない場合は、実行時に web アプリケーションの仮想ルートパスに割り当てられるため、`applicationName` 構成設定の値を明示的に設定することが重要です。</span><span class="sxs-lookup"><span data-stu-id="599d3-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="599d3-438">アプリケーションの仮想ルートパスが変更されない限り、これは問題なく動作しますが、アプリケーションを別のパスに移動した場合、`applicationName` 設定も変わります。</span><span class="sxs-lookup"><span data-stu-id="599d3-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="599d3-439">この場合、メンバーシッププロバイダーは、以前に使用されていたものとは異なるアプリケーションパーティションを使用して作業を開始します。</span><span class="sxs-lookup"><span data-stu-id="599d3-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="599d3-440">移動前に作成されたユーザーアカウントは別のアプリケーションパーティションに存在するため、これらのユーザーはサイトにログインできなくなります。</span><span class="sxs-lookup"><span data-stu-id="599d3-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="599d3-441">この問題の詳細については、「 [ASP.NET 2.0 のメンバーシップとその他のプロバイダーを構成するときに常に `applicationName` プロパティを設定する](https://weblogs.asp.net/scottgu/443634)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="599d3-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers](https://weblogs.asp.net/scottgu/443634).</span></span>

## <a name="summary"></a><span data-ttu-id="599d3-442">まとめ</span><span class="sxs-lookup"><span data-stu-id="599d3-442">Summary</span></span>

<span data-ttu-id="599d3-443">この時点で、アプリケーションサービス (`SecurityTutorials.mdf`) が構成されたデータベースがあり、メンバーシップフレームワークが登録した `SecurityTutorialsSqlMembershipProvider` プロバイダーを使用するように web アプリケーションを構成しました。</span><span class="sxs-lookup"><span data-stu-id="599d3-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="599d3-444">この登録されたプロバイダーは `SqlMembershipProvider` 型で、`connectionStringName` が適切な接続文字列 (`SecurityTutorialsConnectionString`) に設定され、`applicationName` 値が明示的に設定されています。</span><span class="sxs-lookup"><span data-stu-id="599d3-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="599d3-445">これで、アプリケーションからメンバーシップフレームワークを使用する準備ができました。</span><span class="sxs-lookup"><span data-stu-id="599d3-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="599d3-446">次のチュートリアルでは、新しいユーザーアカウントを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="599d3-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="599d3-447">次に、ユーザーの認証、ユーザーベースの承認の実行、およびデータベースへの追加のユーザー関連情報の格納について説明します。</span><span class="sxs-lookup"><span data-stu-id="599d3-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="599d3-448">プログラミングを楽しんでください。</span><span class="sxs-lookup"><span data-stu-id="599d3-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="599d3-449">参考資料</span><span class="sxs-lookup"><span data-stu-id="599d3-449">Further Reading</span></span>

<span data-ttu-id="599d3-450">このチュートリアルで説明しているトピックの詳細については、次のリソースを参照してください。</span><span class="sxs-lookup"><span data-stu-id="599d3-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="599d3-451">ASP.NET 2.0 メンバーシップとその他のプロバイダーを構成するときは常に `applicationName` プロパティを設定する</span><span class="sxs-lookup"><span data-stu-id="599d3-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="599d3-452">SQL Server 2000 または SQL Server 2005 を使用するように ASP.NET 2.0 アプリケーションサービスを構成する</span><span class="sxs-lookup"><span data-stu-id="599d3-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="599d3-453">Express Edition のダウンロード SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="599d3-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="599d3-454">ASP.NET 2.0 s のメンバーシップ、ロール、およびプロファイルを調べています</span><span class="sxs-lookup"><span data-stu-id="599d3-454">Examining ASP.NET 2.0�s Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="599d3-455">メンバーシップのプロバイダーの `<add>` 要素</span><span class="sxs-lookup"><span data-stu-id="599d3-455">The `<add>` Element for providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="599d3-456">`<membership>` 要素</span><span class="sxs-lookup"><span data-stu-id="599d3-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="599d3-457">メンバーシップの `<providers>` 要素</span><span class="sxs-lookup"><span data-stu-id="599d3-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="599d3-458">プロバイダーを追加するときに `<clear />` を使用する</span><span class="sxs-lookup"><span data-stu-id="599d3-458">Using `<clear />` When Adding providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="599d3-459">`SqlMembershipProvider` を直接操作する</span><span class="sxs-lookup"><span data-stu-id="599d3-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="599d3-460">このチュートリアルに含まれるトピックのビデオトレーニング</span><span class="sxs-lookup"><span data-stu-id="599d3-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="599d3-461">ASP.NET メンバーシップについて理解する</span><span class="sxs-lookup"><span data-stu-id="599d3-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="599d3-462">メンバーシップ スキーマと連動するように SQL を構成する</span><span class="sxs-lookup"><span data-stu-id="599d3-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="599d3-463">既定のメンバーシップ スキーマのメンバーシップ設定を変更する</span><span class="sxs-lookup"><span data-stu-id="599d3-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="599d3-464">著者について</span><span class="sxs-lookup"><span data-stu-id="599d3-464">About the Author</span></span>

<span data-ttu-id="599d3-465">1998以降、Microsoft の Web テクノロジを使用して、Scott Mitchell (複数の ASP/創設者4GuysFromRolla.com の執筆者) が Microsoft の Web テクノロジを使用しています。</span><span class="sxs-lookup"><span data-stu-id="599d3-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="599d3-466">Scott は、独立したコンサルタント、トレーナー、およびライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="599d3-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="599d3-467">彼の最新の書籍は *[、ASP.NET 2.0 を24時間以内に教え](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* ています。</span><span class="sxs-lookup"><span data-stu-id="599d3-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="599d3-468">Scott は、 [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com)またはブログで[http://ScottOnWriting.NET](http://scottonwriting.net/)にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="599d3-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="599d3-469">ありがとうございました。</span><span class="sxs-lookup"><span data-stu-id="599d3-469">Special Thanks To</span></span>

<span data-ttu-id="599d3-470">このチュートリアルシリーズは、役に立つ多くのレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="599d3-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="599d3-471">このチュートリアルのリードレビューアーは Alicja Maziarz でした。</span><span class="sxs-lookup"><span data-stu-id="599d3-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="599d3-472">今後の MSDN 記事を確認することに興味がありますか?</span><span class="sxs-lookup"><span data-stu-id="599d3-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="599d3-473">その場合は、 [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)の行を削除します。</span><span class="sxs-lookup"><span data-stu-id="599d3-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="599d3-474">[前へ](storing-additional-user-information-cs.md)
> [次へ](creating-user-accounts-vb.md)</span><span class="sxs-lookup"><span data-stu-id="599d3-474">[Previous](storing-additional-user-information-cs.md)
[Next](creating-user-accounts-vb.md)</span></span>
