---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-cs
title: データベースの開発と配置 (c#) の戦略 |Microsoft Docs
author: rick-anderson
description: 最初に、データ駆動型アプリケーションをデプロイするときに、開発環境を運用環境で無条件、データベースをコピーできます。 B..
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 3e8b0627-3eb7-488e-807e-067cba7cec05
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-cs
msc.type: authoredcontent
ms.openlocfilehash: 7efdb13ae67c8485fc35bf759901fec85c31669c
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2019
ms.locfileid: "65109270"
---
# <a name="strategies-for-database-development-and-deployment-c"></a><span data-ttu-id="b5c85-104">データベースの開発と配置のための戦略 (C#)</span><span class="sxs-lookup"><span data-stu-id="b5c85-104">Strategies for Database Development and Deployment (C#)</span></span>

<span data-ttu-id="b5c85-105">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b5c85-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="b5c85-106">PDF のダウンロード</span><span class="sxs-lookup"><span data-stu-id="b5c85-106">Download PDF</span></span>](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial10_DBDevel_cs.pdf)

> <span data-ttu-id="b5c85-107">最初に、データ駆動型アプリケーションをデプロイするときに、開発環境を運用環境で無条件、データベースをコピーできます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-107">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="b5c85-108">ブラインドを実行する、以降のデプロイでのコピーで、実稼働データベースに入力データが上書きされます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-108">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="b5c85-109">代わりに、データベースを展開するには、開発用データベースを実稼働データベースへの最後の配置以降に行われた変更を適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-109">Instead, deploying a database involves applying the changes made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="b5c85-110">このチュートリアルは、これらの課題を調べ、chronicling と最後の配置以降のデータベースに加えられた変更を適用することを支援するさまざまな方法を提供しています。</span><span class="sxs-lookup"><span data-stu-id="b5c85-110">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="introduction"></a><span data-ttu-id="b5c85-111">はじめに</span><span class="sxs-lookup"><span data-stu-id="b5c85-111">Introduction</span></span>

<span data-ttu-id="b5c85-112">前のチュートリアルで既に説明した、ASP.NET アプリケーションの配置、開発環境から運用環境に関連するコンテンツをコピーがあります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-112">As discussed in previous tutorials, deploying an ASP.NET application entails copying the pertinent content from the development environment to the production environment.</span></span> <span data-ttu-id="b5c85-113">展開は、1 回限りのイベントがありません。 ではなく場合や、ソフトウェアの新しいバージョンがリリースされるたびに発生するバグまたはセキュリティ上の問題を特定して対処します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-113">Deployment is not a one-time event, but rather something that happens every time a new version of the software is released or when bugs or security concerns have been identified and addressed.</span></span> <span data-ttu-id="b5c85-114">ASP.NET ページをコピーするときに前回の配置以降のイメージ、JavaScript ファイル、およびこれらのファイルに配慮する必要はありません、運用環境にこのようなその他のファイルが変更されました。</span><span class="sxs-lookup"><span data-stu-id="b5c85-114">When copying ASP.NET pages, images, JavaScript files, and other such files to the production environment you do not need to concern yourself with how these file have been changed since the last deployment.</span></span> <span data-ttu-id="b5c85-115">できます盲目的に、ファイルをコピーする運用環境では、既存のコンテンツを上書きします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-115">You can blindly copy the file to production, overwriting the existing content.</span></span> <span data-ttu-id="b5c85-116">残念ながら、この単純さは、データベースを展開するのには拡張されません。</span><span class="sxs-lookup"><span data-stu-id="b5c85-116">Unfortunately, this simplicity does not extend to deploying the database.</span></span>

<span data-ttu-id="b5c85-117">最初に、データ駆動型アプリケーションをデプロイするときに、開発環境を運用環境で無条件、データベースをコピーできます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-117">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="b5c85-118">ブラインドを実行する、以降のデプロイでのコピーで、実稼働データベースに入力データが上書きされます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-118">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="b5c85-119">適用する代わりに、データベースの配置は、*変更*開発用データベースを実稼働データベースへの最後の配置以降に行われました。</span><span class="sxs-lookup"><span data-stu-id="b5c85-119">Instead, deploying a database involves applying the *changes* made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="b5c85-120">このチュートリアルは、これらの課題を調べ、chronicling と最後の配置以降のデータベースに加えられた変更を適用することを支援するさまざまな方法を提供しています。</span><span class="sxs-lookup"><span data-stu-id="b5c85-120">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="the-challenges-of-deploying-a-database"></a><span data-ttu-id="b5c85-121">データベースの配置の課題</span><span class="sxs-lookup"><span data-stu-id="b5c85-121">The Challenges of Deploying a Database</span></span>

<span data-ttu-id="b5c85-122">最初に、データ駆動型アプリケーションをデプロイする前に 1 つのデータベースがある、盲目的にすることが最初に、データ駆動型アプリケーションをデプロイするときに開発環境でデータベースが namely でデータベースをコピーします開発環境、運用環境にします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-122">Before a data-driven application has been deployed for the first time, there is only one database, namely the database in the development environment, which is why when deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="b5c85-123">データベースの 2 つのコピーがあるアプリケーションをデプロイした後: 開発環境および実稼働環境で 1 つで 1 つ。</span><span class="sxs-lookup"><span data-stu-id="b5c85-123">But once the application has been deployed there are two copies of the database: one in development and one in production.</span></span>

<span data-ttu-id="b5c85-124">展開の間で開発および運用データベースは同期になります。実稼働データベースのスキーマが変更されていない、開発データベースのスキーマはの新機能が追加されるとを変更できます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-124">Between deployments the development and production databases can become out of sync. While the production database s schema remains unchanged, the development database s schema may change as new features are added.</span></span> <span data-ttu-id="b5c85-125">追加または列、テーブル、ビュー、またはストアド プロシージャを削除する場合があります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-125">You might add or remove columns, tables, views, or stored procedures.</span></span> <span data-ttu-id="b5c85-126">開発用データベースに追加される重要なデータもあります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-126">There may also be important data that gets added to the development database.</span></span> <span data-ttu-id="b5c85-127">多くのデータ ドリブン アプリケーションには、ルックアップ テーブルがないユーザーが編集可能なハード コーディングされた、アプリケーション固有のデータが設定が含まれます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-127">Many data-driven applications include lookup tables populated with hard-coded, application-specific data that are not user-editable.</span></span> <span data-ttu-id="b5c85-128">たとえば、オークションの web サイトには、落札されている項目の条件を記述するための選択肢のドロップダウン リストがあります。新規などの新しい好適、およびフェアします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-128">For example, an auction website might have a drop-down list with choices that describe the condition of the item being auctioned: New, Like New, Good, and Fair.</span></span> <span data-ttu-id="b5c85-129">ドロップダウン リストで直接これらのオプションをハード コーディングするのではなく、データベース テーブル内に配置する、通常はお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-129">Rather than hard-coding these options directly in the drop-down list it is usually better to place them in a database table.</span></span> <span data-ttu-id="b5c85-130">開発中は、役に立たなかったという名前の新しい条件がテーブルに追加し、アプリケーションをデプロイするときに場合、この同じレコードを実稼働データベースでルックアップ テーブルに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-130">If, during development, a new condition named Poor is added to the table then when deploying the application this same record needs to be added to the lookup table in the production database.</span></span>

<span data-ttu-id="b5c85-131">理想的には、データベースの配置は、開発から運用環境にデータベースをコピーします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-131">Ideally, deploying the database would involve copying the database from development to production.</span></span> <span data-ttu-id="b5c85-132">ただし、アプリケーションを展開し、開発を再開後、実稼働データベースがされている表示されている実際のユーザーからの実際のデータに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b5c85-132">But keep in mind that after you have deployed the application and resumed development, the production database is being populated with real data from real users.</span></span> <span data-ttu-id="b5c85-133">そのため、運用環境で、[次へ] の展開に、開発からデータベースを単純にコピーした場合は、実稼働データベースを上書きして、既存のデータを失います。</span><span class="sxs-lookup"><span data-stu-id="b5c85-133">Therefore, if you were to simply copy the database from development to production at the next deployment you would overwrite the production database and lose its existing data.</span></span> <span data-ttu-id="b5c85-134">最終的な結果は、こと、データベースの配置を要約する最後の展開以降、開発用データベースに加えられた変更を適用します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-134">The net result is that deploying the database boils down to applying the changes made to the development database since the last deployment.</span></span>

<span data-ttu-id="b5c85-135">データベースを展開するには、前回の配置以降のスキーマと、場合によっては、データの変更を適用することが含まれているため、変更の履歴をする必要がありますある維持 (または展開時に決定されます) これらの変更を運用環境に適用できるようにします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-135">Because deploying a database involves applying the changes in the schema and, possibly, the data since the last deployment, a history of changes must be maintained (or determined at deploy-time) so that those changes can be applied on production.</span></span> <span data-ttu-id="b5c85-136">さまざまな管理およびデータ モデルに変更を適用するための手法があります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-136">There are a variety of techniques for managing and applying changes to the data model.</span></span>

### <a name="defining-the-baseline"></a><span data-ttu-id="b5c85-137">ベースラインを定義します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-137">Defining the Baseline</span></span>

<span data-ttu-id="b5c85-138">アプリケーションのデータベースに変更を維持するには、いくつか開始状態に変更を適用する基準がある必要があります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-138">To maintain the changes to your application s database you need to have some starting state, a baseline to which the changes are applied to.</span></span> <span data-ttu-id="b5c85-139">極端な開始状態にないテーブル、ビュー、またはストアド プロシージャで空のデータベースが可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-139">At one extreme the starting state could be an empty database with no tables, views, or stored procedures.</span></span> <span data-ttu-id="b5c85-140">このような基準は、すべてのデータベースのテーブル、ビュー、および初期デプロイ後に加えられた変更とストアド プロシージャの作成を含める必要があるために、大きな変化がログに発生します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-140">Such a baseline results in a large change log because it must include the creation of all of the database s tables, views, and stored procedures along with any changes made after the initial deployment.</span></span> <span data-ttu-id="b5c85-141">スペクトルのもう一方の端には、最初に、実稼働環境に配置されているデータベースのバージョンとしてベースラインを設定できます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-141">At the other end of the spectrum you could set the baseline as the version of the database that is initially deployed to the production environment.</span></span> <span data-ttu-id="b5c85-142">この選択は、次の最初のデプロイ、データベースに加えられた変更のみが含まれるために、変更ログはこれより小さな量で生成されます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-142">This choice results in a much smaller change log because it only includes the changes made to the database following the first deployment.</span></span> <span data-ttu-id="b5c85-143">これは、ことをお勧めするアプローチです。</span><span class="sxs-lookup"><span data-stu-id="b5c85-143">This is the approach I prefer.</span></span> <span data-ttu-id="b5c85-144">もちろんできます道路アプローチの複数の中間ベースラインを定義するいくつかのポイント間、データベースの最初の作成と最初にデータベースがデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-144">And of course you can choose a more middle of the road approach, defining the baseline as some point between the initial creation of the database and when the database is first deployed.</span></span>

<span data-ttu-id="b5c85-145">したら選択基準では、構成基準のバージョンを再作成を実行できる SQL スクリプトを生成して検討してください。</span><span class="sxs-lookup"><span data-stu-id="b5c85-145">Once you have chosen a baseline consider generating a SQL script that can be executed to recreate the baseline version.</span></span> <span data-ttu-id="b5c85-146">このようなスクリプトを使うと、データベースのベースライン バージョンをすばやく再作成できます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-146">Such a script makes it possible to quickly recreate the baseline version of the database.</span></span> <span data-ttu-id="b5c85-147">この機能は、大型のプロジェクトで特に便利なプロジェクトやテスト、ステージングなどの追加の環境で作業する複数の開発者である可能性がありますでそれぞれに独自のデータベースのコピーを必要があります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-147">This functionality is especially useful in larger projects, where there may be multiple developers working on the project or additional environments, such as testing or staging, that each need their own copy of the database.</span></span>

<span data-ttu-id="b5c85-148">さまざまな構成基準のバージョンの SQL スクリプトの生成に使用できるツールがあります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-148">There are a variety of tools at your disposal to generate a SQL script of the baseline version.</span></span> <span data-ttu-id="b5c85-149">SQL Server Management Studio (SSMS)、データベースを右クリックしては、タスクのサブメニューに移動し、スクリプトの生成オプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-149">From SQL Server Management Studio (SSMS) you can right-click on the database, go to the Tasks submenu, and choose the Generate Scripts option.</span></span> <span data-ttu-id="b5c85-150">データベース オブジェクトを作成する SQL コマンドを含むファイルを生成するように指示できるスクリプト ウィザードが起動します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-150">This launches the Script Wizard, which you can instruct to generate a file that contains the SQL commands to create your database s objects.</span></span> <span data-ttu-id="b5c85-151">別のオプションは、だけでなく、データベース テーブルで、データベース スキーマも、データを作成する SQL コマンドが生成できるデータベース公開ウィザードです。</span><span class="sxs-lookup"><span data-stu-id="b5c85-151">Another option is the Database Publishing Wizard, which can generate the SQL commands to not only create the database schema, but also the data in the database tables.</span></span> <span data-ttu-id="b5c85-152">データベース パブリッシュ ウィザードの詳細を説明したに戻り、*データベースを配置する*チュートリアル。</span><span class="sxs-lookup"><span data-stu-id="b5c85-152">The Database Publishing Wizard was examined in detail back in the *Deploying a Database* tutorial.</span></span> <span data-ttu-id="b5c85-153">どのようなツールを使用するのに関係なく末尾が必要で、データベースのベースライン バージョンを再作成に使用できるスクリプト ファイルを必要な発生します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-153">Regardless of what tool you use, in the end you should have a script file that you can use to recreate the baseline version of your database, should the need arise.</span></span>

## <a name="documenting-the-database-changes-in-prose"></a><span data-ttu-id="b5c85-154">Prose でデータベースの変更を文書化</span><span class="sxs-lookup"><span data-stu-id="b5c85-154">Documenting the Database Changes in Prose</span></span>

<span data-ttu-id="b5c85-155">開発フェーズ中に、データ モデルへの変更のログを保持する最も簡単な方法では、prose で変更を記録します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-155">The simplest way to maintain a log of changes to the data model during the development phase is to record the changes in prose.</span></span> <span data-ttu-id="b5c85-156">たとえば、展開済みアプリケーションの開発中に新しい列を追加する場合、`Employees`テーブルから列を削除する、`Orders`テーブル、および新しいテーブルを追加 (`ProductCategories`)、テキスト ファイルや Microsoft Word 文書を維持します。次の履歴。</span><span class="sxs-lookup"><span data-stu-id="b5c85-156">For example, if during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`), you would maintain a text file or Microsoft Word document with the following history:</span></span>

<a id="0.4_table01"></a>

| <span data-ttu-id="b5c85-157">**変更日**</span><span class="sxs-lookup"><span data-stu-id="b5c85-157">**Change Date**</span></span> | <span data-ttu-id="b5c85-158">**変更の詳細**</span><span class="sxs-lookup"><span data-stu-id="b5c85-158">**Change Details**</span></span> |
| --- | --- |
| <span data-ttu-id="b5c85-159">2009-02-03:</span><span class="sxs-lookup"><span data-stu-id="b5c85-159">2009-02-03:</span></span> | <span data-ttu-id="b5c85-160">追加された列`DepartmentID`(`int`、NOT NULL) を`Employees`テーブル。</span><span class="sxs-lookup"><span data-stu-id="b5c85-160">Added column `DepartmentID` (`int`, NOT NULL) to the `Employees` table.</span></span> <span data-ttu-id="b5c85-161">外部キー制約を追加`Departments.DepartmentID`に`Employees.DepartmentID`します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-161">Added a foreign key constraint from `Departments.DepartmentID` to `Employees.DepartmentID`.</span></span> |
| <span data-ttu-id="b5c85-162">2009-02-05:</span><span class="sxs-lookup"><span data-stu-id="b5c85-162">2009-02-05:</span></span> | <span data-ttu-id="b5c85-163">削除された列`TotalWeight`から、`Orders`テーブル。</span><span class="sxs-lookup"><span data-stu-id="b5c85-163">Removed column `TotalWeight` from the `Orders` table.</span></span> <span data-ttu-id="b5c85-164">既にでキャプチャしたデータが関連付けられている`OrderDetails`レコード。</span><span class="sxs-lookup"><span data-stu-id="b5c85-164">Data already captured in associated `OrderDetails` records.</span></span> |
| <span data-ttu-id="b5c85-165">2009-02-12:</span><span class="sxs-lookup"><span data-stu-id="b5c85-165">2009-02-12:</span></span> | <span data-ttu-id="b5c85-166">作成、`ProductCategories`テーブル。</span><span class="sxs-lookup"><span data-stu-id="b5c85-166">Created the `ProductCategories` table.</span></span> <span data-ttu-id="b5c85-167">次の 3 つの列がある: `ProductCategoryID` (`int`、 `IDENTITY`、 `NOT NULL`)、 `CategoryName` (`nvarchar(50)`、 `NOT NULL`)、および`Active`(`bit`、 `NOT NULL`)。</span><span class="sxs-lookup"><span data-stu-id="b5c85-167">There are three columns: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`), and `Active` (`bit`, `NOT NULL`).</span></span> <span data-ttu-id="b5c85-168">主キー制約を追加`ProductCategoryID`、既定値は 1 ~`Active`します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-168">Added a primary key constraint to `ProductCategoryID`, and a default value of 1 to `Active`.</span></span> |

<span data-ttu-id="b5c85-169">このアプローチの欠点を数多くあります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-169">There are a number of drawbacks to this approach.</span></span> <span data-ttu-id="b5c85-170">まず、automation のことを期待することはありません。</span><span class="sxs-lookup"><span data-stu-id="b5c85-170">For starters, there is no hope for automation.</span></span> <span data-ttu-id="b5c85-171">いつでもこれらの変更は、アプリケーションの展開時に開発者が手動で実装する必要があります変更、一度に 1 つずつなどデータベースに適用する必要。</span><span class="sxs-lookup"><span data-stu-id="b5c85-171">Anytime these changes need to be applied to a database - such as when the application is deployed - a developer must manually implement each change, one at a time.</span></span> <span data-ttu-id="b5c85-172">さらに、変更ログを使用してベースラインからのデータベースの特定のバージョンを再構築する場合は、そのため時間がかかりますますます多くログのサイズの拡大に合わせて。</span><span class="sxs-lookup"><span data-stu-id="b5c85-172">Moreover, if you need to reconstruct a particular version of the database from the baseline using the change log, doing so will take more and more time as the size of the log grows.</span></span> <span data-ttu-id="b5c85-173">このメソッドのもう 1 つは、わかりやすくするため、各変更ログ エントリの詳細レベルは左から人の変更を記録することです。</span><span class="sxs-lookup"><span data-stu-id="b5c85-173">Another drawback to this method is that the clarity and level of detail of each change log entry is left to the person recording the change.</span></span> <span data-ttu-id="b5c85-174">複数の開発者のチームで他よりも詳細なより読みやすい、またはより正確なのエントリが作成一部可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-174">In a team with multiple developers some may make more detailed, more readable, or more precise entries than others.</span></span> <span data-ttu-id="b5c85-175">また、入力ミスおよびその他の人に関連するデータ エントリ エラー場合があります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-175">Also, typos and other human-related data entry errors are possible.</span></span>

<span data-ttu-id="b5c85-176">Prose でデータベースの変更を文書化の主な利点は、わかりやすくするためです。</span><span class="sxs-lookup"><span data-stu-id="b5c85-176">The primary benefit of documenting the database changes in prose is simplicity.</span></span> <span data-ttu-id="b5c85-177">作成およびデータベース オブジェクトを変更するための SQL 構文知識の t 必要はありません。</span><span class="sxs-lookup"><span data-stu-id="b5c85-177">You don t need familiarity with the SQL syntax for creating and altering database objects.</span></span> <span data-ttu-id="b5c85-178">代わりに、prose で変更を記録し、SQL Server Management Studio のグラフィカル ユーザー インターフェイスからそれらを実装できます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-178">Instead, you can record the changes in prose and implement them through SQL Server Management Studio s graphical user interface.</span></span>

<span data-ttu-id="b5c85-179">Prose で、変更ログが、正直なところ、できません非常に高度なし、スコープ内に大きいものなど、特定のプロジェクトではうまくいきませんを維持し、データ モデルに頻繁に変更または複数の開発者が関係します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-179">Maintaining your change log in prose is, admittedly, not very sophisticated and won't work well with certain projects, such as ones that are large in scope, have frequent changes to the data model, or involve multiple developers.</span></span> <span data-ttu-id="b5c85-180">ただし、このアプローチを勝ち取る、小規模プロジェクト データ モデルに不定期の変更のみを持ち、個人の開発者がない強力なバック グラウンドで作成およびデータベース オブジェクトを変更するための SQL 構文で非常にうまく機能させる見てきました。</span><span class="sxs-lookup"><span data-stu-id="b5c85-180">But I have seen this approach work quite well in small, one-man projects that have only occasional changes to the data model and where the solo developer does not have a strong background in the SQL syntax for creating and altering database objects.</span></span>

> [!NOTE]
> <span data-ttu-id="b5c85-181">変更ログの情報は技術的には、展開時までに必要なだけの変更履歴を維持することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-181">While the information in the change log is, technically, only needed until deploy-time, I recommend keeping a history of changes.</span></span> <span data-ttu-id="b5c85-182">1 つを保持することではなく変更のログ ファイル、成長し続けることを検討データベース バージョンごとに別の変更のログ ファイル。</span><span class="sxs-lookup"><span data-stu-id="b5c85-182">But rather than maintaining a single, ever growing change log file, consider having a different change log file for each database version.</span></span> <span data-ttu-id="b5c85-183">通常はするバージョン、データベースが展開されている各時間。</span><span class="sxs-lookup"><span data-stu-id="b5c85-183">Typically you will want to version the database each time it is deployed.</span></span> <span data-ttu-id="b5c85-184">変更ログのログを維持することにより、ベースラインから開始を再作成する任意のデータベース バージョン バージョン 1 以降では変更ログ スクリプトを実行してとを再作成する必要があります、バージョンに到達するまで続行します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-184">By maintaining a log of change logs you can, starting from the baseline, recreate any database version by executing the change log scripts starting from version 1 and continuing until you reach the version you need to recreate.</span></span>

## <a name="recording-the-sql-change-statements"></a><span data-ttu-id="b5c85-185">変更の SQL ステートメントを記録</span><span class="sxs-lookup"><span data-stu-id="b5c85-185">Recording the SQL Change Statements</span></span>

<span data-ttu-id="b5c85-186">Prose の変更ログを維持するための主な欠点は、自動化に未対応です。</span><span class="sxs-lookup"><span data-stu-id="b5c85-186">The primary drawback of maintaining the change log in prose is the lack of automation.</span></span> <span data-ttu-id="b5c85-187">理想的には、デプロイ時に運用データベースにデータベースの変更の実装は手順の一覧を手動で実行する必要がなくスクリプトを実行するボタンをクリックすると同じくらい簡単でしょう。</span><span class="sxs-lookup"><span data-stu-id="b5c85-187">Ideally, implementing the database changes to the production database at deploy-time would be as easy as clicking a button to execute a script rather than having to manually perform a list of instructions.</span></span> <span data-ttu-id="b5c85-188">そのような自動化は、データ モデルを変更するために使用するこれらの SQL コマンドを含む変更ログを保持することで。</span><span class="sxs-lookup"><span data-stu-id="b5c85-188">Such automation is possible by maintaining a change log that contains those SQL commands used to alter the data model.</span></span>

<span data-ttu-id="b5c85-189">SQL 構文では、複数のステートメントを作成すると、さまざまなデータベース オブジェクトの変更が含まれています。</span><span class="sxs-lookup"><span data-stu-id="b5c85-189">The SQL syntax includes a number of statements for creating and modifying various database objects.</span></span> <span data-ttu-id="b5c85-190">たとえば、 [ *CREATE TABLE ステートメント*](https://msdn.microsoft.com/library/ms174979.aspx)を実行すると、指定した列と制約で新しいテーブルを作成します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-190">For example, the [*CREATE TABLE statement*](https://msdn.microsoft.com/library/ms174979.aspx), when executed, creates a new table with the specified columns and constraints.</span></span> <span data-ttu-id="b5c85-191">[ *ALTER TABLE ステートメント*](https://msdn.microsoft.com/library/ms190273.aspx) 、追加、削除、またはその列または制約を変更することは、既存のテーブルを変更します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-191">The [*ALTER TABLE statement*](https://msdn.microsoft.com/library/ms190273.aspx) modifies an existing table, adding, removing, or modifying its columns or constraints.</span></span> <span data-ttu-id="b5c85-192">作成、変更、およびインデックス、ビュー、ユーザー定義関数、ストアド プロシージャ、トリガー、およびその他のデータベース オブジェクトを削除するステートメントもあります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-192">There are also statements to create, modify, and drop indexes, views, user-defined functions, stored procedures, triggers, and other database objects.</span></span>

<span data-ttu-id="b5c85-193">新しい列を追加する展開済みアプリケーションの開発中にイメージを前の例に戻る、`Employees`テーブルから列を削除する、`Orders`テーブル、および新しいテーブルの追加 (`ProductCategories`)。</span><span class="sxs-lookup"><span data-stu-id="b5c85-193">Returning to our earlier example, image that during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`).</span></span> <span data-ttu-id="b5c85-194">このようなアクションは、次の SQL コマンドの変更のログ ファイルになります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-194">Such actions would result in a change log file with the following SQL commands:</span></span>

[!code-sql[Main](strategies-for-database-development-and-deployment-cs/samples/sample1.sql)]

<span data-ttu-id="b5c85-195">1 回のクリック操作は、デプロイ時に実稼働データベースにこれらの変更をプッシュします。 SQL Server Management Studio を開き、実稼働データベースに接続する、新しいクエリ ウィンドウを開き、変更ログの内容を貼り付けますおよび実行スクリプトを実行する をクリックします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-195">Pushing these changes to the production database at deploy-time is a one-click operation: open SQL Server Management Studio, connect to your production database, open a New Query window, paste the contents of the change log, and click Execute to run the script.</span></span>

## <a name="using-a-comparison-tool-to-synchronize-the-data-models"></a><span data-ttu-id="b5c85-196">比較ツールを使用して、データ モデルを同期するには</span><span class="sxs-lookup"><span data-stu-id="b5c85-196">Using a Comparison Tool to Synchronize the Data Models</span></span>

<span data-ttu-id="b5c85-197">Prose でデータベースの変更を文書化は簡単ですが、開発者は一度に 1 つ、実稼働データベースの各変更を行う、変更を実装する必要があります。これらの変更を実装する、ボタンをクリックすると簡単で、実稼働データベースでは、変更、SQL コマンドを文書化、学習し、SQL ステートメントと作成およびデータベース オブジェクトを変更するための構文を使いこなすが必要です。</span><span class="sxs-lookup"><span data-stu-id="b5c85-197">Documenting database changes in prose is easy, but implementing the changes requires a developer to make each change on the production database one at a time; documenting the change SQL commands makes implementing those changes on the production database as easy and quick as clicking a button, but requires learning and mastering the SQL statements and syntax for creating and altering database objects.</span></span> <span data-ttu-id="b5c85-198">データベースの比較ツールは、両方のアプローチから最良のものを受け取り、最悪の事態を破棄します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-198">Database comparison tools take the best from both approaches and discard the worst.</span></span>

<span data-ttu-id="b5c85-199">データベースの比較ツールは、スキーマまたは 2 つのデータベースのデータを比較し、データベースの違いを示すサマリー レポートが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-199">A database comparison tool compares the schema or data of two databases and displays a summary report showing you how the databases differ.</span></span> <span data-ttu-id="b5c85-200">次に、ボタンをクリックして、1 つまたは複数のデータベース オブジェクトを同期するための SQL コマンドを生成できます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-200">Then, with the click of a button, you can generate the SQL commands for synchronizing one or more database objects.</span></span> <span data-ttu-id="b5c85-201">データベースの比較ツールを使用するには、開発を比較して、実行時に変更が適用される実稼働データベースのスキーマにそのため、実稼働データベースで、展開時、SQL を含むファイルを生成するコマンドを簡単に言うと、その it開発データベースのスキーマを反映しています。</span><span class="sxs-lookup"><span data-stu-id="b5c85-201">In a nutshell, you can use a database comparison tool to compare the development and production databases at deploy-time, generating a file that contains the SQL commands that, when executed, will apply the changes to the production database s schema so that it mirrors the development database s schema.</span></span>

<span data-ttu-id="b5c85-202">これは、さまざまなサード パーティのデータベースの比較ツールがさまざまなベンダーによって提供されます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-202">There are a variety of third-party database comparison tools offered by many different vendors.</span></span> <span data-ttu-id="b5c85-203">このような 1 つの例は、 [ *SQL Compare*](http://www.red-gate.com/products/SQL_Compare/)により、 [ *Red Gate Software*](http://www.red-gate.com/)します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-203">One such example is [*SQL Compare*](http://www.red-gate.com/products/SQL_Compare/), by [*Red Gate Software*](http://www.red-gate.com/).</span></span> <span data-ttu-id="b5c85-204">%S を SQL の比較を使用して、比較し、開発および運用データベース スキーマを同期するプロセスを説明を使用できます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-204">Let s walk through the process of using SQL Compare to compare and synchronize the development and production databases schemas.</span></span>

> [!NOTE]
> <span data-ttu-id="b5c85-205">この記事の執筆時に、現在のバージョンの SQL の比較は、395 ドルのコストを Standard Edition では、バージョン 7.1 では、でした。</span><span class="sxs-lookup"><span data-stu-id="b5c85-205">At the time of this writing the current version of SQL Compare was version 7.1, with the Standard Edition costing $395.</span></span> <span data-ttu-id="b5c85-206">14 日間の無料試用版をダウンロードして理解できます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-206">You can follow along by downloading a free 14-day trial.</span></span>

<span data-ttu-id="b5c85-207">SQL Compare の開始時に比較プロジェクト ダイアログ ボックスが開き、保存されている SQL Compare プロジェクトを表示します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-207">When SQL Compare starts the Comparison Projects dialog box opens, showing the saved SQL Compare projects.</span></span> <span data-ttu-id="b5c85-208">新しいプロジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-208">Create a new project.</span></span> <span data-ttu-id="b5c85-209">比較するデータベースに関する情報を入力するプロジェクト構成ウィザードが起動 (図 1 参照)。</span><span class="sxs-lookup"><span data-stu-id="b5c85-209">This launches the Project Configuration wizard, which prompts for information about the databases to compare (see Figure 1).</span></span> <span data-ttu-id="b5c85-210">開発および運用環境のデータベースの情報を入力します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-210">Enter the information for the development and production environment databases.</span></span>

<span data-ttu-id="b5c85-211">[![開発と実稼働データベースを比較します。](strategies-for-database-development-and-deployment-cs/_static/image2.jpg)](strategies-for-database-development-and-deployment-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="b5c85-211">[![Compare the Development and Production Databases](strategies-for-database-development-and-deployment-cs/_static/image2.jpg)](strategies-for-database-development-and-deployment-cs/_static/image1.jpg)</span></span>

<span data-ttu-id="b5c85-212">**図 1**:開発と実稼働データベースの比較 ([フルサイズの画像を表示する をクリックします](strategies-for-database-development-and-deployment-cs/_static/image3.jpg))。</span><span class="sxs-lookup"><span data-stu-id="b5c85-212">**Figure 1**: Compare the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image3.jpg))</span></span>

> [!NOTE]
> <span data-ttu-id="b5c85-213">かどうか、開発環境のデータベースには、SQL Express Edition のデータベース ファイルで、`App_Data`図 1 に示すダイアログ ボックスで選択するには、SQL Server Express データベース サーバーでデータベースを登録する必要がありますが、web サイトのフォルダー。</span><span class="sxs-lookup"><span data-stu-id="b5c85-213">If your development environment database is a SQL Express Edition database file in the `App_Data` folder of your website you will need to register the database in the SQL Server Express database server in order to select it from the dialog box shown in Figure 1.</span></span> <span data-ttu-id="b5c85-214">これを実現する最も簡単な方法では、SQL Server Management Studio (SSMS) を開き、SQL Server Express データベース サーバーに接続して、データベースをアタッチします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-214">The easiest way to accomplish this is to open SQL Server Management Studio (SSMS), connect to the SQL Server Express database server, and attach the database.</span></span> <span data-ttu-id="b5c85-215">SSMS のコンピューターにインストールされていない場合は、ダウンロードしてから無料でインストール[*バージョンの SQL Server 2008 Management Studio Basic*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en)します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-215">If you do not have SSMS installed on your computer you can download and install the free [*SQL Server 2008 Management Studio Basic version*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span></span>

<span data-ttu-id="b5c85-216">に加えて、比較するデータベースを選択すると、さまざまなオプション タブから比較設定を指定することもできます。1 つのオプションをオンにすることがありますが、「無視制約とインデックス名」</span><span class="sxs-lookup"><span data-stu-id="b5c85-216">In addition to selecting the databases to compare, you can also specify a variety of comparison settings from the Options tab. One option you may want to turn on is the "Ignore constraint and index names."</span></span> <span data-ttu-id="b5c85-217">前のチュートリアルで追加されています、アプリケーション サービスの開発と運用環境のデータベースにデータベース オブジェクトを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="b5c85-217">Recall that in the preceding tutorial we added the application services database objects to the development and production databases.</span></span> <span data-ttu-id="b5c85-218">使用した場合、`aspnet_regsql.exe`ツールを開発および運用データベースとの間に主キーと一意の制約名が異なることがわかりますし、実稼働データベースでこれらのオブジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-218">If you used the `aspnet_regsql.exe` tool to create these objects on the production database then you will find that the primary key and unique constraint names differ between the development and production databases.</span></span> <span data-ttu-id="b5c85-219">その結果、SQL Compare フラグが設定されるすべての異なるとしてアプリケーション サービスのテーブル。</span><span class="sxs-lookup"><span data-stu-id="b5c85-219">Consequently, SQL Compare will flag all of the application services tables as differing.</span></span> <span data-ttu-id="b5c85-220">「を無視する制約とインデックス名」のままにすることができますか、オフにして、制約名を同期または SQL の比較をこれらの相違を無視するように指示します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-220">You can either leave the "Ignore constraint and index names" unchecked and synchronize the constraint names, or instruct SQL Compare to ignore these differences.</span></span>

<span data-ttu-id="b5c85-221">データベースを選択した後比較 (および比較オプションの確認)、比較を開始します [今すぐ比較] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-221">After selecting the databases to compare (and reviewing the comparison options), click the Compare Now button to begin the comparison.</span></span> <span data-ttu-id="b5c85-222">次のいくつか秒間に SQL Compare は 2 つのデータベースのスキーマを検査し、どのように異なるかのレポートを生成します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-222">Over the next several seconds, SQL Compare examines the schemas of the two databases and generates a report of how they differ.</span></span> <span data-ttu-id="b5c85-223">SQL Compare インターフェイスでこのような相違点を説明する方法を表示する開発用データベースにいくつかの変更を意図的加えました。</span><span class="sxs-lookup"><span data-stu-id="b5c85-223">I ve purposefully made some modifications to the development database to show how such discrepancies are noted in the SQL Compare interface.</span></span> <span data-ttu-id="b5c85-224">図 2 に示すようは追加したら、`BirthDate`列を`Authors`テーブルを削除、`ISBN`列から、`Books`テーブル、および、新しいテーブルを追加`Ratings`、ユーザー サイト率をレビュー対象のブックにアクセスできるようにすることは。</span><span class="sxs-lookup"><span data-stu-id="b5c85-224">As Figure 2 shows, I ve added a `BirthDate` column to the `Authors` table, removed the `ISBN` column from the `Books` table, and added a new table, `Ratings`, which is meant to let users visiting the site rate the reviewed books.</span></span>

> [!NOTE]
> <span data-ttu-id="b5c85-225">このチュートリアルで行われたデータ モデルの変更は、データベースの比較ツールを使用して説明するために行われました。</span><span class="sxs-lookup"><span data-stu-id="b5c85-225">The data model changes made in this tutorial were done to illustrate using a database comparison tool.</span></span> <span data-ttu-id="b5c85-226">今後のチュートリアルでデータベースにこれらの変更が表示されますされません。</span><span class="sxs-lookup"><span data-stu-id="b5c85-226">You will not find these changes in the database in future tutorials.</span></span>

<span data-ttu-id="b5c85-227">[![SQL の比較は、開発と実稼働データベースの違いを示します](strategies-for-database-development-and-deployment-cs/_static/image5.jpg)](strategies-for-database-development-and-deployment-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="b5c85-227">[![SQL Compare Lists the Differences Between the Development and Production Databases](strategies-for-database-development-and-deployment-cs/_static/image5.jpg)](strategies-for-database-development-and-deployment-cs/_static/image4.jpg)</span></span>

<span data-ttu-id="b5c85-228">**図 2**:SQL の比較には、開発の間の相違点と実稼働データベースが一覧表示されます ([フルサイズの画像を表示する をクリックします](strategies-for-database-development-and-deployment-cs/_static/image6.jpg))。</span><span class="sxs-lookup"><span data-stu-id="b5c85-228">**Figure 2**: SQL Compare Lists the Differences Between the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image6.jpg))</span></span>

<span data-ttu-id="b5c85-229">グループにデータベース オブジェクトを分解 SQL Compare、どのようなオブジェクトをすばやく表示する両方のデータベースに存在しますが、さまざまなオブジェクトが 1 つのデータベースが、一方に存在してがオブジェクトは同じです。</span><span class="sxs-lookup"><span data-stu-id="b5c85-229">SQL Compare breaks down the database objects into groups, quickly showing you what objects exist in both databases but are different, which objects exist in one database but not the other, and which objects are identical.</span></span> <span data-ttu-id="b5c85-230">両方のデータベースに存在しますが、異なる 2 つのオブジェクトがあるように、:`Authors`テーブルで、追加の列がある、および`Books`テーブルで、1 つ削除します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-230">As you can see, there are two objects that exist in both databases but are different: the `Authors` table, which had a column added, and the `Books` table, which had one removed.</span></span> <span data-ttu-id="b5c85-231">開発用データベース、つまり、新しく作成にのみ存在する 1 つのオブジェクトがある`Ratings`テーブル。</span><span class="sxs-lookup"><span data-stu-id="b5c85-231">There is one object that exists only in the development database, namely the newly created `Ratings` table.</span></span> <span data-ttu-id="b5c85-232">117 オブジェクトは両方のデータベースで同じですが。</span><span class="sxs-lookup"><span data-stu-id="b5c85-232">And there are 117 objects that are identical in both databases.</span></span>

<span data-ttu-id="b5c85-233">データベース オブジェクトを選択するには、これらのオブジェクトの違いを示す [SQL の相違点] ウィンドウが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-233">Selecting a database object displays the SQL Differences window, which shows how these objects differ.</span></span> <span data-ttu-id="b5c85-234">図 2 では、下部に表示される、SQL の相違点 ウィンドウで強調表示する、`Authors`開発用データベース内のテーブルが、`BirthDate`列に含まれていない、`Authors`実稼働データベースのテーブル。</span><span class="sxs-lookup"><span data-stu-id="b5c85-234">The SQL Differences window, displayed at the bottom in Figure 2, highlights that the `Authors` table in the development database has the `BirthDate` column, which is not found in the `Authors` table on the production database.</span></span>

<span data-ttu-id="b5c85-235">相違点を確認し、同期するオブジェクトを選択すると、した後は、次の手順は、開発用データベースに一致するように、運用データベースのスキーマを更新するために必要な SQL コマンドを生成します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-235">After reviewing the differences and selecting which objects you want to synchronize, the next step is to generate the SQL commands needed to update the production database s schema to match the development database.</span></span> <span data-ttu-id="b5c85-236">これは、同期ウィザードによって実現されます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-236">This is accomplished through the Synchronization Wizard.</span></span> <span data-ttu-id="b5c85-237">オブジェクトを同期して、操作をまとめたものです。 同期ウィザードを確認します (図 3 参照) を計画します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-237">The Synchronization Wizard confirms what objects to synchronize and summarizes the action plan (see Figure 3).</span></span> <span data-ttu-id="b5c85-238">データベースをすぐに同期したり、都合のよいタイミングで実行できる SQL コマンドのスクリプトを生成できます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-238">You can synchronize the databases immediately or generate a script with the SQL commands that can be run at your leisure.</span></span>

<span data-ttu-id="b5c85-239">[![同期ウィザードを使用して、データベース スキーマを同期](strategies-for-database-development-and-deployment-cs/_static/image8.jpg)](strategies-for-database-development-and-deployment-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="b5c85-239">[![Use the Synchronization Wizard to Synchronize Your Databases Schemas](strategies-for-database-development-and-deployment-cs/_static/image8.jpg)](strategies-for-database-development-and-deployment-cs/_static/image7.jpg)</span></span>

<span data-ttu-id="b5c85-240">**図 3**:データベース スキーマの同期の同期ウィザードを使用して ([フルサイズの画像を表示する をクリックします](strategies-for-database-development-and-deployment-cs/_static/image9.jpg))。</span><span class="sxs-lookup"><span data-stu-id="b5c85-240">**Figure 3**: Use the Synchronization Wizard to Synchronize Your Databases Schemas ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image9.jpg))</span></span>

<span data-ttu-id="b5c85-241">データベースの比較ツールなどの Red Gate Software の SQL Compare s、ポイント アンド クリックするだけの実稼働データベースには、開発データベースのスキーマに変更を適用します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-241">Database comparison tools like Red Gate Software s SQL Compare make applying the changes to the development database schema to the production database as easy as point and click.</span></span>

> [!NOTE]
> <span data-ttu-id="b5c85-242">SQL Compare を比較し、2 つのデータベースを同期*スキーマ*します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-242">SQL Compare compares and synchronizes two databases *schemas*.</span></span> <span data-ttu-id="b5c85-243">残念ながら、ありませんを比較し、2 つのデータベース テーブル内のデータを同期します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-243">Unfortunately, it does not compare and synchronize the data within two databases tables.</span></span> <span data-ttu-id="b5c85-244">Red Gate Software という製品を提供して[ *SQL データの比較*](http://www.red-gate.com/products/SQL_Data_Compare/)を比較し、2 つのデータベース間でデータを同期するが、SQL の比較から別の製品であり別 395 ドルのコストします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-244">Red Gate Software does offer a product named [*SQL Data Compare*](http://www.red-gate.com/products/SQL_Data_Compare/) that compares and synchronizes the data between two databases, but it is a separate product from SQL Compare and costs another $395.</span></span>

## <a name="taking-the-application-offline-during-deployment"></a><span data-ttu-id="b5c85-245">デプロイ時にアプリケーションをオフライン</span><span class="sxs-lookup"><span data-stu-id="b5c85-245">Taking the Application Offline During Deployment</span></span>

<span data-ttu-id="b5c85-246">としてこれらのチュートリアルでは、全体の文言展開は複数の手順を含むプロセス: 開発環境から運用環境に ASP.NET ページ、マスター ページ、CSS ファイル、JavaScript ファイル、画像、およびその他の必要なコンテンツをコピー環境です。が必要な場合は、実稼働環境に固有の構成情報をコピー最後の配置以降のデータ モデルに変更を適用しています。</span><span class="sxs-lookup"><span data-stu-id="b5c85-246">As we ve seen throughout these tutorials, deployment is a process that involves multiple steps: copying the ASP.NET pages, master pages, CSS files, JavaScript files, images, and other necessary content from the development environment to the production environment; copying up the production environment-specific configuration information, if needed; and applying the changes to the data model since the last deployment.</span></span> <span data-ttu-id="b5c85-247">ファイルの数、データベースの変更の複雑さに応じて次の手順できます任意の場所数秒からに数分かかるを完了します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-247">Depending on the number of files and the complexity of your database changes, these steps can take anywhere from a few seconds to several minutes to complete.</span></span> <span data-ttu-id="b5c85-248">この期間中に、web アプリケーションは flux では、サイトにアクセスするユーザー エラーまたは予期しない動作が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-248">During this window the web application is in flux and users visiting the site may experience errors or unexpected behavior.</span></span>

<span data-ttu-id="b5c85-249">Web サイトをデプロイするときに、デプロイが完了するまで、「オフライン」web アプリケーションを実行することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b5c85-249">When deploying a website it is best to take the web application "offline" until deployment has completed.</span></span> <span data-ttu-id="b5c85-250">アプリケーションをオフライン (バックアップしておくと、展開プロセスが完了すると) ファイルをアップロードして、削除することと同じくらい簡単です。</span><span class="sxs-lookup"><span data-stu-id="b5c85-250">Taking the application offline (and bringing it back up once the deployment process has finished) is as easy as uploading a file and then deleting it.</span></span> <span data-ttu-id="b5c85-251">ASP.NET 2.0 では、という名前のファイルが存在するだけで始まる`app_offline.htm`でアプリケーションのルート ディレクトリが全体の web サイト「オフライン」です。</span><span class="sxs-lookup"><span data-stu-id="b5c85-251">Starting with ASP.NET 2.0, the mere presence of a file named `app_offline.htm` in the application s root directory takes the entire website "offline."</span></span> <span data-ttu-id="b5c85-252">内容では、そのサイトの ASP.NET ページへの要求は応答が自動的に、`app_offline.htm`ファイル。</span><span class="sxs-lookup"><span data-stu-id="b5c85-252">Any request to an ASP.NET page on that site is automatically responded with the contents of the `app_offline.htm` file.</span></span> <span data-ttu-id="b5c85-253">そのファイルが削除されると、アプリケーションがオンラインに戻る。</span><span class="sxs-lookup"><span data-stu-id="b5c85-253">Once that file is removed, the application comes back online.</span></span>

<span data-ttu-id="b5c85-254">アップロードする同じくらい簡単ですし、デプロイ時にオフライン アプリケーション、`app_offline.htm`の運用環境にファイルのルート ディレクトリ、展開プロセスを開始し、後に削除する (または別のものに名前を変更する) の前に 1 回の展開完了しました。</span><span class="sxs-lookup"><span data-stu-id="b5c85-254">Taking an application offline during deployment, then, is as simple as uploading an `app_offline.htm` file to the production environment s root directory prior to beginning the deployment process and then deleting it (or renaming it to something else) once deployment is complete.</span></span> <span data-ttu-id="b5c85-255">詳細についてはこの手法に John Peterson 記事を参照してくださいを[ *ASP.NET アプリケーション オフライン*](http://www.15seconds.com/issue/061207.htm)します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-255">For more information on this technique refer to John Peterson s article, Taking an [*ASP.NET Application Offline*](http://www.15seconds.com/issue/061207.htm).</span></span>

## <a name="summary"></a><span data-ttu-id="b5c85-256">まとめ</span><span class="sxs-lookup"><span data-stu-id="b5c85-256">Summary</span></span>

<span data-ttu-id="b5c85-257">データ ドリブン アプリケーションを展開する主な課題は、データベースの配置を中心として展開します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-257">The main challenge in deploying a data-driven application centers around deploying the database.</span></span> <span data-ttu-id="b5c85-258">開発環境で 1 - と運用環境で 1 つのデータベースの 2 つのバージョンがあるためは、開発の新機能が追加されるとこれらの 2 つのデータベース スキーマが同期なります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-258">Because there are two versions of the database - one in the development environment and one in the production environment - these two databases schemas can become out of sync as new features are added in development.</span></span> <span data-ttu-id="b5c85-259">新機能は、運用データベースとして、実際のユーザーからの実際のデータが設定されて、することはできませんを上書きするため、実稼働データベースで変更された開発用データベース (ASP.NET ページ、アプリケーションを構成するファイルを展開する場合とは異なりイメージ ファイル、およびなど)。</span><span class="sxs-lookup"><span data-stu-id="b5c85-259">What s more, because the production database as being populated with real data from real users, you cannot overwrite the production database with the modified development database like you can when deploying the files that make up the application (the ASP.NET pages, image files, and so forth).</span></span> <span data-ttu-id="b5c85-260">代わりに、データベースを展開するには、前回の配置以降に、実稼働データベースの開発用データベースに加えられた変更の正確なセットを実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b5c85-260">Instead, deploying a database entails implementing the precise set of changes made to the development database on the production database since the last deployment.</span></span>

<span data-ttu-id="b5c85-261">このチュートリアルを保守し、データベースの変更のログの適用、3 つの手法について説明しました。</span><span class="sxs-lookup"><span data-stu-id="b5c85-261">This tutorial looked at three techniques for maintaining and applying a log of database changes.</span></span> <span data-ttu-id="b5c85-262">最も簡単な方法で prose の変更を記録することです。</span><span class="sxs-lookup"><span data-stu-id="b5c85-262">The simplest approach is to record the changes in prose.</span></span> <span data-ttu-id="b5c85-263">この手法を使用する実稼働データベースの手動プロセスでこれらの変更を実装する、これは必要ありません SQL コマンドのサポート技術情報の作成およびデータベース オブジェクトを変更するため。</span><span class="sxs-lookup"><span data-stu-id="b5c85-263">While this tactic makes implementing these changes on the production database a manual process, it does not require knowledge of the SQL commands for creating and altering database objects.</span></span> <span data-ttu-id="b5c85-264">高度なアプローチとつながります大規模なプロジェクトまたはプロジェクトで複数の開発者である 1 つとして一連の SQL コマンドを変更を記録することです。</span><span class="sxs-lookup"><span data-stu-id="b5c85-264">A more sophisticated approach, and one that is much more palatable in larger projects or projects with multiple developers, is to record the changes as a series of SQL commands.</span></span> <span data-ttu-id="b5c85-265">これは、ターゲット データベースにこれらの変更をロールアウトが大幅に hastens します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-265">This greatly hastens rolling out these changes to the target database.</span></span> <span data-ttu-id="b5c85-266">両方のアプローチの長所は、SQL Compare Red Gate Software s など、データベースの比較ツールを使用して実現できます。</span><span class="sxs-lookup"><span data-stu-id="b5c85-266">The best of both approaches can be achieved by using a database comparison tool, such as Red Gate Software s SQL Compare.</span></span>

<span data-ttu-id="b5c85-267">このチュートリアルでは、データ ドリブン アプリケーションの配置への取り組みで終了します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-267">This tutorial concludes our focus on deploying a data-driven application.</span></span> <span data-ttu-id="b5c85-268">次の一連のチュートリアルは、運用環境でエラーに応答する方法を検索します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-268">The next set of tutorials looks at how to respond to errors in the production environment.</span></span> <span data-ttu-id="b5c85-269">死の黄色い画面ではなくではなくフレンドリ エラー ページを表示する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="b5c85-269">We'll look at how to display a friendly error page rather instead of the Yellow Screen of Death.</span></span> <span data-ttu-id="b5c85-270">エラーの詳細をログ記録する方法と、このようなエラーが発生したときにアラートを見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="b5c85-270">And we'll see how to log the error s details and how to alert you when such errors occur.</span></span>

<span data-ttu-id="b5c85-271">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="b5c85-271">Happy Programming!</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b5c85-272">[前へ](configuring-a-website-that-uses-application-services-cs.md)
> [次へ](displaying-a-custom-error-page-cs.md)</span><span class="sxs-lookup"><span data-stu-id="b5c85-272">[Previous](configuring-a-website-that-uses-application-services-cs.md)
[Next](displaying-a-custom-error-page-cs.md)</span></span>
