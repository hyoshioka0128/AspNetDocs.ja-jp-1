---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-cs
title: データベースを展開する (c#) |Microsoft Docs
author: rick-anderson
description: ASP.NET web アプリケーションを展開するには、開発環境から運用環境に必要なファイルとリソースを取得する必要があります。 Da. の
ms.author: riande
ms.date: 04/23/2009
ms.assetid: ff537a10-9f1f-43fe-9bcb-3dda161ba8f5
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-cs
msc.type: authoredcontent
ms.openlocfilehash: 7c0c563308df56594c518e15a9ef3088017b6d71
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2019
ms.locfileid: "65108968"
---
# <a name="deploying-a-database-c"></a><span data-ttu-id="a7c52-104">データベースを配置する (C#)</span><span class="sxs-lookup"><span data-stu-id="a7c52-104">Deploying a Database (C#)</span></span>

<span data-ttu-id="a7c52-105">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a7c52-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a7c52-106">[コードのダウンロード](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_CS.zip)または[PDF のダウンロード](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="a7c52-106">[Download Code](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_CS.zip) or [Download PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_cs.pdf)</span></span>

> <span data-ttu-id="a7c52-107">ASP.NET web アプリケーションを展開するには、開発環境から運用環境に必要なファイルとリソースを取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-107">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="a7c52-108">データ ドリブン web アプリケーションには、データベース スキーマとデータが含まれます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-108">For data-driven web applications this includes the database schema and data.</span></span> <span data-ttu-id="a7c52-109">このチュートリアルでは、開発環境から運用環境にデータベースを正常に展開するために必要な手順について説明するシリーズの初回です。</span><span class="sxs-lookup"><span data-stu-id="a7c52-109">This tutorial is the first in a series that explores the steps needed to successfully deploy the database from the development environment to production.</span></span>

## <a name="introduction"></a><span data-ttu-id="a7c52-110">はじめに</span><span class="sxs-lookup"><span data-stu-id="a7c52-110">Introduction</span></span>

<span data-ttu-id="a7c52-111">ASP.NET web アプリケーションを展開するには、開発環境から運用環境に必要なファイルとリソースを取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-111">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="a7c52-112">過去の 6 つのチュートリアルの過程で書籍レビューの単純な web アプリケーションの展開について説明しました。</span><span class="sxs-lookup"><span data-stu-id="a7c52-112">Over the course of the past six tutorials we looked at deploying a simple Book Reviews web application.</span></span> <span data-ttu-id="a7c52-113">このデモ サイトが ASP.NET ページ、構成ファイルでは、サーバー側リソース数から成る、`Web.sitemap`イメージや CSS ファイルなどのファイルとクライアント側のリソースと一緒に - など。</span><span class="sxs-lookup"><span data-stu-id="a7c52-113">This demo site was comprised of a number of server-side resources - ASP.NET pages, configuration files, a `Web.sitemap` file, and so forth - along with client-side resources, like images and CSS files.</span></span> <span data-ttu-id="a7c52-114">しかし、web アプリケーションをデータ ドリブンのでしょうか。</span><span class="sxs-lookup"><span data-stu-id="a7c52-114">But what about data-driven web applications?</span></span> <span data-ttu-id="a7c52-115">どのような追加の手順は、データベースを使用する web アプリケーションを展開するためにする必要がありますか。</span><span class="sxs-lookup"><span data-stu-id="a7c52-115">What extra steps must be taken to deploy a web application that uses a database?</span></span>

<span data-ttu-id="a7c52-116">次のいくつかのチュートリアルでは、データ駆動型 web アプリケーションをデプロイするために必要な手順を対処します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-116">Over the next several tutorials we will address the steps needed to deploy a data-driven web application.</span></span> <span data-ttu-id="a7c52-117">取得する方法、データベースのスキーマおよび内容、開発環境、運用環境に後続のチュートリアルは、必要な構成の変更中に調べることでこのチュートリアルを開始します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-117">This tutorial starts by examining how to get a database s schema and contents from the development environment to the production environment, while the subsequent tutorial looks at the needed configuration changes.</span></span> <span data-ttu-id="a7c52-118">次のこと (メンバーシップ、ロール、プロファイル、およびなど) は、アプリケーション サービスを使用するデータベースの展開の課題について説明します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-118">Following that we'll explore challenges of deploying a database that uses the Application Services (Membership, Roles, Profile, and so on).</span></span>

## <a name="examining-the-updated-book-reviews-web-application"></a><span data-ttu-id="a7c52-119">更新された書籍レビューの Web アプリケーションの検証</span><span class="sxs-lookup"><span data-stu-id="a7c52-119">Examining the Updated Book Reviews Web Application</span></span>

<span data-ttu-id="a7c52-120">データ ドリブン web アプリケーションの展開を示すためには書籍レビューの web アプリケーションが簡単で静的な web サイトからデータに基づく 1 つを更新します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-120">In order to demonstrate deploying a data-driven web application, I ve updated the Book Reviews web application from a simple, static website to a data-driven one.</span></span> <span data-ttu-id="a7c52-121">前に、このチュートリアルのダウンロードに、アプリケーションの 2 つのバージョンがある: Web アプリケーション プロジェクト モデルと Web サイト プロジェクト モデルを使用する 1 つを使用する 1 つ。</span><span class="sxs-lookup"><span data-stu-id="a7c52-121">As before, there are two versions of the application in this tutorial s download: one that uses the Web Application Project model and one that uses the Web Site Project model.</span></span>

<span data-ttu-id="a7c52-122">更新された書籍レビューの web アプリケーションで使用する、 [SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx)サイト %s に格納されているデータベース、`App_Data`フォルダー (`~/App_Data/Reviews.mdf`)。</span><span class="sxs-lookup"><span data-stu-id="a7c52-122">The updated Book Reviews web application uses a [SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx) database, which is stored in the site s `App_Data` folder (`~/App_Data/Reviews.mdf`).</span></span> <span data-ttu-id="a7c52-123">SQL Server 2008 がコンピューターにインストールされている必要がある場合、デモは、エラーなし実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-123">If you have SQL Server 2008 installed on your computer then the demo should run without error.</span></span> <span data-ttu-id="a7c52-124">以前のバージョンがある場合は、SQL Server のいずれかを実行できますが、無料の SQL Server 2008 Express Edition をインストールまたは自分でデータベースを作成するこのチュートリアルで使用可能なスクリプトをダウンロードするデータベースを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-124">If you have an older version of SQL Server you can either install the free SQL Server 2008 Express Edition or you can use the database scripts available in this tutorial s download to create the database yourself.</span></span>

<span data-ttu-id="a7c52-125">`Reviews.mdf`データベースには、4 つのテーブルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="a7c52-125">The `Reviews.mdf` database contains four tables:</span></span>

- <span data-ttu-id="a7c52-126">`Genres` -各ジャンル、テクノロジ、Fiction、およびビジネスなどのレコードが含まれています。</span><span class="sxs-lookup"><span data-stu-id="a7c52-126">`Genres` - includes a record for each genre, such as Technology, Fiction, and Business.</span></span>
- <span data-ttu-id="a7c52-127">`Books` ような列を含む、レビューごとのレコードが含まれています`Title`、 `GenreId`、 `ReviewDate`、および`Review`、他のユーザーの間で。</span><span class="sxs-lookup"><span data-stu-id="a7c52-127">`Books` - includes a record for each review, with columns like `Title`, `GenreId`, `ReviewDate`, and `Review`, among others.</span></span>
- <span data-ttu-id="a7c52-128">`Authors` -確認済みのブックに提供した各作成者に関する情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="a7c52-128">`Authors` - includes information about each author who has contributed to a reviewed book.</span></span>
- <span data-ttu-id="a7c52-129">`BooksAuthors` -どのような作成者は、どのような書籍を執筆を指定する多対多結合テーブルです。</span><span class="sxs-lookup"><span data-stu-id="a7c52-129">`BooksAuthors` - a many-to-many join table that specifies what authors have written what books.</span></span>

<span data-ttu-id="a7c52-130">図 1 は、これら 4 つのテーブルの ER ダイアグラムを示します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-130">Figure 1 shows an ER diagram of these four tables.</span></span>

<span data-ttu-id="a7c52-131">[![書籍レビューの Web アプリケーションのデータベースは 4 つのテーブルの構成](deploying-a-database-cs/_static/image2.jpg)](deploying-a-database-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-131">[![The Book Reviews Web Application s Database is Comprised of Four Tables](deploying-a-database-cs/_static/image2.jpg)](deploying-a-database-cs/_static/image1.jpg)</span></span> 

<span data-ttu-id="a7c52-132">**図 1**:書籍レビューの Web アプリケーションのデータベースは 4 つのテーブルの構成 ([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image3.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-132">**Figure 1**: The Book Reviews Web Application s Database is Comprised of Four Tables ([Click to view full-size image](deploying-a-database-cs/_static/image3.jpg))</span></span>

<span data-ttu-id="a7c52-133">書籍レビューの web サイトの以前のバージョンでは、各書籍の個別の ASP.NET ページがありました。</span><span class="sxs-lookup"><span data-stu-id="a7c52-133">The previous version of the Book Reviews website had a separate ASP.NET page for each book.</span></span> <span data-ttu-id="a7c52-134">たとえば、という名前のページが`~/Tech/TYASP35.aspx`のレビューに含まれている*教える自分で ASP.NET 3.5 in 24 時間*します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-134">For example, there was a page named `~/Tech/TYASP35.aspx` that contained the review for *Teach Yourself ASP.NET 3.5 in 24 Hours*.</span></span> <span data-ttu-id="a7c52-135">この新しいデータ ドリブン バージョンを web サイトには、データベースと 1 つの ASP.NET ページ、Review.aspx?ID= に格納されているレビュー*bookId*、指定されたこの本のレビューが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-135">This new data-driven version of the website has the reviews stored in the database and a single ASP.NET page, Review.aspx?ID=*bookId*, which displays the review for the specified book.</span></span> <span data-ttu-id="a7c52-136">同様は、Genre.aspx?ID=*genreId*指定ジャンルの確認済みのブックを一覧表示されたページ。</span><span class="sxs-lookup"><span data-stu-id="a7c52-136">Likewise, there is a Genre.aspx?ID=*genreId* page that lists the reviewed books in the specified genre.</span></span>

<span data-ttu-id="a7c52-137">図 2 および 3 つの表示、`Genre.aspx`と`Review.aspx`ページの動作。</span><span class="sxs-lookup"><span data-stu-id="a7c52-137">Figures 2 and 3 show the `Genre.aspx` and `Review.aspx` pages in action.</span></span> <span data-ttu-id="a7c52-138">各ページのアドレス バーの URL に注意してください。</span><span class="sxs-lookup"><span data-stu-id="a7c52-138">Note the URL in the Address bar for each page.</span></span> <span data-ttu-id="a7c52-139">図 2 it s Genre.aspx? ID = 85d164ba-1123-4 c 47-82a0-c8ec75de7e0e します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-139">In Figure 2 it s Genre.aspx?ID=85d164ba-1123-4c47-82a0-c8ec75de7e0e.</span></span> <span data-ttu-id="a7c52-140">85d164ba-1123-4c47-82a0-c8ec75de7e0e があるため、`GenreId`テクノロジのジャンル、「テクノロジのレビュー」ページの見出しの読み取りと箇条書きリストの値がこのジャンルに該当するサイトでのこれらのレビューを列挙します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-140">Because 85d164ba-1123-4c47-82a0-c8ec75de7e0e is the `GenreId` value for the Technology genre, the page s heading reads "Technology Reviews" and the bulleted list enumerates those reviews on the site that fall under this genre.</span></span>

<span data-ttu-id="a7c52-141">[![テクノロジのジャンル ページ](deploying-a-database-cs/_static/image5.jpg)](deploying-a-database-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-141">[![The Technology Genre Page](deploying-a-database-cs/_static/image5.jpg)](deploying-a-database-cs/_static/image4.jpg)</span></span> 

<span data-ttu-id="a7c52-142">**図 2**:テクノロジのジャンル ページ ([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image6.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-142">**Figure 2**: The Technology Genre Page ([Click to view full-size image](deploying-a-database-cs/_static/image6.jpg))</span></span>

<span data-ttu-id="a7c52-143">[![に関するレビュー Teach Yourself ASP.NET 3.5 in 24 Hours](deploying-a-database-cs/_static/image8.jpg)](deploying-a-database-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-143">[![The Review for Teach Yourself ASP.NET 3.5 in 24 Hours](deploying-a-database-cs/_static/image8.jpg)](deploying-a-database-cs/_static/image7.jpg)</span></span> 

<span data-ttu-id="a7c52-144">**図 3**:に関するレビュー*教える自分で ASP.NET 3.5 in 24 時間*([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image9.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-144">**Figure 3**: The Review for *Teach Yourself ASP.NET 3.5 in 24 Hours* ([Click to view full-size image](deploying-a-database-cs/_static/image9.jpg))</span></span>

<span data-ttu-id="a7c52-145">書籍レビューの web アプリケーションには、管理者ことができます追加、編集、および削除ジャンル、レビュー、および情報を作成、管理セクションも含まれます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-145">The Book Reviews web application also includes an administration section where administrators can add, edit, and delete genres, reviews, and author information.</span></span> <span data-ttu-id="a7c52-146">現時点では、[管理] セクションのすべての利用者にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-146">Currently, any visitor can access the administration section.</span></span> <span data-ttu-id="a7c52-147">今後のチュートリアルでユーザー アカウントのサポートを追加し、[管理] ページに承認されたユーザーのみが許可します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-147">In a future tutorial we'll add support for user accounts and only permit authorized users into the administration pages.</span></span>

<span data-ttu-id="a7c52-148">ダウンロードする場合、書籍レビュー アプリケーションくださいの目的は、データ ドリブン アプリケーションの配置をデモンストレーションすることに注意しています。</span><span class="sxs-lookup"><span data-stu-id="a7c52-148">If you download the Book Reviews application please keep in mind that its purpose is to demonstrate deploying a data-driven application.</span></span> <span data-ttu-id="a7c52-149">アプリケーションの設計に関して言えば、ベスト プラクティスは発生しません。</span><span class="sxs-lookup"><span data-stu-id="a7c52-149">It does not exhibit best practices as far as application design.</span></span> <span data-ttu-id="a7c52-150">たとえば、別のデータ アクセス層 (DAL); はありません。ASP.NET ページは、SqlDataSource コントロールまたはその分離コード クラスでの ADO.NET コードを使用して、データベースと直接通信します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-150">For example, there is no separate Data Access Layer (DAL); the ASP.NET pages communicate directly with the database through the SqlDataSource control or ADO.NET code in their code-behind classes.</span></span> <span data-ttu-id="a7c52-151">階層型アーキテクチャを使用してデータ駆動型アプリケーションの作成の詳細についてを参照してください、 [*データを扱う*チュートリアル](../../data-access/index.md)します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-151">For a more in-depth look at creating data-driven applications using a tiered architecture, refer to my [*Working with Data* tutorials](../../data-access/index.md).</span></span>

## <a name="databases-on-development-versus-production"></a><span data-ttu-id="a7c52-152">運用環境と開発上のデータベース</span><span class="sxs-lookup"><span data-stu-id="a7c52-152">Databases on Development Versus Production</span></span>

<span data-ttu-id="a7c52-153">データ ドリブン web アプリケーションの開発を開始すると、データベースに接続する方法については、アプリケーションの詳細を提供する、データベースの接続文字列を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-153">When you start development on a data-driven web application you must specify a database connection string, which provides the application details on how to connect to the database.</span></span> <span data-ttu-id="a7c52-154">この接続文字列など、データベース サーバー、データベース名、およびセキュリティ情報間を指定します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-154">This connection string specifies, among other things, the database server, the database name, and security information.</span></span> <span data-ttu-id="a7c52-155">開発時にアプリケーションによって使用されるデータベースのときに、データベースが使用されるものと異なる場合は、ほとんどの場合、運用環境で s。</span><span class="sxs-lookup"><span data-stu-id="a7c52-155">Most often, the database used by the application during development is different than the database used when it s in production.</span></span> <span data-ttu-id="a7c52-156">開発と運用における異なるデータベースを使用する多くの利点があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-156">There are many benefits of using different databases for development versus production.</span></span> <span data-ttu-id="a7c52-157">Don t は異なる開発方法でデータベースを誤って変更またはライブ データを削除を心配する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-157">Having a different database in development means you don t have to worry about accidentally modifying or deleting live data.</span></span> <span data-ttu-id="a7c52-158">ダミーのテスト データに配置したり、実稼働環境でアプリケーションに与える影響について心配することがなくデータ モデルに重大な変更を加えることもできます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-158">It also lets you put in dummy test data or make breaking changes to the data model without having to worry about the effects on the application in production.</span></span> <span data-ttu-id="a7c52-159">データベースのスキーマにデータベースおよび関連する変更点が、増やすことの欠点別のデータベース開発および運用環境では、アプリケーションの場合に展開するか、データも展開する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-159">The downside of having a different database in the development and production environments is that when the application is deployed the database and any pertinent changes to the database s schema or data must also be deployed.</span></span>

<span data-ttu-id="a7c52-160">最初のデプロイの前に、データベースの 1 つだけのインスタンスがあるし、そのインスタンスが、開発環境では。</span><span class="sxs-lookup"><span data-stu-id="a7c52-160">Prior to the first deployment, there is only one instance of the database, and that instance is in the development environment.</span></span> <span data-ttu-id="a7c52-161">最初に実稼働環境にアプリケーションをデプロイするときに必要なサーバー側とクライアント側のファイルをコピーするだけでなく、開発環境から運用環境にデータベースをコピーすることもする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-161">When deploying the application to production for the first time we must not only copy up the necessary server-side and client-side files, but also copy the database from the development environment to the production environment.</span></span> <span data-ttu-id="a7c52-162">これは、私たちの立場右側で、書籍レビューの web アプリケーション - とデータベースが存在するので、`App_Data`の開発環境でのフォルダーがされていない、実稼働環境にプッシュされていません。</span><span class="sxs-lookup"><span data-stu-id="a7c52-162">This is where we stand right now with the Book Reviews web application - the database resides in the `App_Data` folder in our development environment but has not yet been pushed up to the production environment.</span></span>

<span data-ttu-id="a7c52-163">アプリケーションをデプロイした後は、データベースのコピーが 2 つがあります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-163">Once the application has been deployed there are two copies of the database.</span></span> <span data-ttu-id="a7c52-164">アプリケーションに近づくにつれて、データ モデルへの変更を加えなくて、新機能を追加することがあります (既存のテーブルに新しい列を追加するなど、新しいテーブルを追加、既存の列に変更を加えるとなど)。</span><span class="sxs-lookup"><span data-stu-id="a7c52-164">As the application matures, new features may be added, necessitating a change to the data model (such as adding new columns to existing tables, making changes to existing columns, adding new tables, and so on).</span></span> <span data-ttu-id="a7c52-165">次に、web アプリケーションが展開されると、変更は、最後の配置を運用データベースに適用する必要があるため、開発環境でデータベースに適用されます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-165">When the web application is next deployed, the changes applied to the database in the development environment since the last deployment must be applied to the production database.</span></span> <span data-ttu-id="a7c52-166">今後のチュートリアルでは、このプロセスを管理するためのいくつかの方法が説明します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-166">Some strategies for managing this process are discussed in a future tutorial.</span></span> <span data-ttu-id="a7c52-167">このチュートリアルでは、運用環境に、開発環境からデータベース全体の展開について説明します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-167">This tutorial focuses on deploying the entire database from the development environment to production.</span></span>

## <a name="deploying-the-database-to-the-production-environment"></a><span data-ttu-id="a7c52-168">データベースを実稼働環境に展開します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-168">Deploying the Database to the Production Environment</span></span>

<span data-ttu-id="a7c52-169">このチュートリアルの残りの部分は、開発環境から運用環境へのデータベースを展開する方法を検索します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-169">The remainder of this tutorial looks at how to deploy the database from the development environment to the production environment.</span></span> <span data-ttu-id="a7c52-170">に沿ってをフォローしている場合、web ホスト プロバイダーを使用して、アカウントが Microsoft SQL Server が含まれているかどうかを確認するデータベースをサポートする必要です。</span><span class="sxs-lookup"><span data-stu-id="a7c52-170">If you are following along you need to make sure that your account with your web host provider includes Microsoft SQL Server database support.</span></span> <span data-ttu-id="a7c52-171">また、いくつかの情報、つまり、データベース サーバー名、データベース名、および、ユーザー名とパスワード、データベースに接続するために使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-171">You'll also need to have some information at hand, namely the database server name, the database name, and the username and password used to connect to the database.</span></span>

<span data-ttu-id="a7c52-172">このチュートリアルで前に書籍レビューの web サイトのデータベースは、SQL Server 2008 Express Edition データベースに格納されている、`App_Data`フォルダー。</span><span class="sxs-lookup"><span data-stu-id="a7c52-172">As noted earlier in this tutorial, the Book Reviews website s database is a SQL Server 2008 Express Edition database stored in the `App_Data` folder.</span></span> <span data-ttu-id="a7c52-173">このようなデータベースを展開することは、簡単なコピーを理由に、スタンバイは、`App_Data`フォルダーを開発環境から運用環境にします。</span><span class="sxs-lookup"><span data-stu-id="a7c52-173">It would stand to reason that deploying such a database would be as simple as copying the `App_Data` folder from the development environment to the production environment.</span></span> <span data-ttu-id="a7c52-174">ただし、ほとんどの web ホスト プロバイダーがホストのデータベースをサポートして、`App_Data`セキュリティ上の理由のためのフォルダー。</span><span class="sxs-lookup"><span data-stu-id="a7c52-174">However, most web host providers do not support hosting databases in the `App_Data` folder because of security reasons.</span></span> <span data-ttu-id="a7c52-175">代わりに、web ホストは、環境内の SQL Server データベース サーバーでアカウントを提供します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-175">Instead, web hosts provide an account on a SQL Server database server within their environment.</span></span> <span data-ttu-id="a7c52-176">開発環境から運用環境へのデータベースを配置するには、web ホストのデータベース サーバーに登録されているデータベースを取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-176">Deploying the database from your development environment to the production environment requires getting your database registered on your web host s database server.</span></span>

<span data-ttu-id="a7c52-177">どのようになぜ、データベース、開発環境から運用環境にしますか。</span><span class="sxs-lookup"><span data-stu-id="a7c52-177">So how do you get your database from the development environment to the production environment?</span></span> <span data-ttu-id="a7c52-178">どのようなサービス、web ホストのプランによってこれを実現するいくつかの方法はあります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-178">There are a couple ways to accomplish this depending on what services your web host offers.</span></span> <span data-ttu-id="a7c52-179">DiscountASP.NET などのいくつかのホストと、データベースまたは実際のバックアップを FTP できます`.mdf`web サイトにファイルし、[コントロール パネル] からバックアップ ファイルを復元またはアタッチ、`.mdf`ファイルを SQL Server データベース サーバー。</span><span class="sxs-lookup"><span data-stu-id="a7c52-179">With some hosts, such as DiscountASP.NET, you can FTP a backup of the database or the actual `.mdf` file to your website and then, from the Control Panel, restore the backup file or attach the `.mdf` file to the SQL Server database server.</span></span> <span data-ttu-id="a7c52-180">このようなツールではコピーだけです、データベースの配置、`App_Data`運用環境とし、コントロール パネルを使用して追加するフォルダー。</span><span class="sxs-lookup"><span data-stu-id="a7c52-180">With such tools deploying the database is as simple as copying the `App_Data` folder to the production environment and then attaching it via the Control Panel.</span></span> <span data-ttu-id="a7c52-181">これは、おそらく、最初に、データベースをパブリッシュする最も簡単で最も簡単な方法です。</span><span class="sxs-lookup"><span data-stu-id="a7c52-181">This is perhaps the easiest and quickest way to publish your database for the first time.</span></span>

<span data-ttu-id="a7c52-182">別の方法では、データベース パブリッシュ ウィザードを使用します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-182">Another approach is to use the Database Publishing Wizard.</span></span> <span data-ttu-id="a7c52-183">データベース パブリッシュ ウィザードとは、そのテーブルで、-、テーブル、ストアド プロシージャ、ビュー、ユーザー定義関数、およびなどのデータベースのスキーマと、必要に応じて、データを作成する SQL コマンドを生成する Windows デスクトップ アプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="a7c52-183">The Database Publishing Wizard is a Windows desktop application that will generate the SQL commands to create your database s schema - the tables, stored procedures, views, user-defined functions, and so forth - and, optionally, the data in its tables.</span></span> <span data-ttu-id="a7c52-184">SQL Server Management Studio を通じて web ホスト プロバイダーのデータベース サーバーに接続し、でき、運用上のデータベースを複製するには、このスクリプトを実行できます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-184">You can then connect to your web host provider s database server through SQL Server Management Studio and then execute this script to duplicate the database on production.</span></span> <span data-ttu-id="a7c52-185">、、Web ホスト プロバイダーには、Microsoft の s がサポートしている場合、より高い[Database Publishing Services](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home) 、あなたに代わってデータベース サーバーで自動的に実行されるデータベース公開ウィザードによって生成されたスクリプトがあることができます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-185">Even better, if your web host provider supports Microsoft s [Database Publishing Services](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home) you can have the script generated by the Database Publishing Wizard automatically executed on the database server on your behalf.</span></span> <span data-ttu-id="a7c52-186">データベース パブリッシュ ウィザードでは、データベースのスキーマとデータを作成するスクリプトを生成するので、web ホスト プロバイダーは、アップロードのアタッチなどの機能を提供するかどうかに関係なく動作`.mdf`ファイル。</span><span class="sxs-lookup"><span data-stu-id="a7c52-186">Because the Database Publishing Wizard generates a script that creates the database s schema and data, it will work regardless of whether your web host provider offers features like attaching an uploaded `.mdf` file.</span></span>

### <a name="generating-the-sql-commands-to-create-the-database-schema-and-data-using-the-database-publishing-wizard"></a><span data-ttu-id="a7c52-187">データベース スキーマおよびデータベース公開ウィザードを使用してデータを作成する SQL コマンドを生成します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-187">Generating the SQL Commands to Create the Database Schema and Data Using the Database Publishing Wizard</span></span>

<span data-ttu-id="a7c52-188">ブック_レビュー データベースを運用環境にデプロイするデータベース公開ウィザードを使用して行います s を使用できます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-188">Let s walk through using the Database Publishing Wizard to deploy the Book Reviews database to production.</span></span> <span data-ttu-id="a7c52-189">Visual Studio 2008 を使用している場合、またはを超えて、Database Publishing Wizard は既にインストールされています。</span><span class="sxs-lookup"><span data-stu-id="a7c52-189">If you are using Visual Studio 2008 or beyond, the Database Publishing Wizard is already installed.</span></span> <span data-ttu-id="a7c52-190">Visual Studio 2005 を使用しているかどうかは、最初に必要[をダウンロードしてインストール](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en)ウィザード。</span><span class="sxs-lookup"><span data-stu-id="a7c52-190">If you are using Visual Studio 2005 then you will need to first [download and install](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en) the wizard.</span></span>

<span data-ttu-id="a7c52-191">Visual Studio を開きに移動し、`Reviews.mdf`データベース。</span><span class="sxs-lookup"><span data-stu-id="a7c52-191">Open Visual Studio and navigate to the `Reviews.mdf` database.</span></span> <span data-ttu-id="a7c52-192">Visual Web Developer を使用している場合、データベース エクスプ ローラーに移動します。Visual Studio を使用している場合は、サーバー エクスプ ローラーを使用します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-192">If you are using Visual Web Developer, go to the Database Explorer; if you are using Visual Studio, use the Server Explorer.</span></span> <span data-ttu-id="a7c52-193">図 4 は、 `Reviews.mdf` Visual Web Developer で データベース エクスプ ローラーでデータベース。</span><span class="sxs-lookup"><span data-stu-id="a7c52-193">Figure 4 shows the `Reviews.mdf` database in the Database Explorer in Visual Web Developer.</span></span> <span data-ttu-id="a7c52-194">図 4 に示すよう、`Reviews.mdf`データベースはの 4 つのテーブル、次の 3 つのストアド プロシージャおよびユーザー定義関数で構成されます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-194">As Figure 4 shows, the `Reviews.mdf` database is composed of four tables, three stored procedures, and a user-defined function.</span></span>

<span data-ttu-id="a7c52-195">[![データベース エクスプ ローラーまたはサーバー エクスプ ローラーでデータベースを検索します。](deploying-a-database-cs/_static/image11.jpg)](deploying-a-database-cs/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-195">[![Locate the Database in the Database Explorer or Server Explorer](deploying-a-database-cs/_static/image11.jpg)](deploying-a-database-cs/_static/image10.jpg)</span></span> 

<span data-ttu-id="a7c52-196">**図 4**:データベース エクスプ ローラーまたはサーバー エクスプ ローラーでデータベースを検索 ([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image12.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-196">**Figure 4**: Locate the Database in the Database Explorer or Server Explorer ([Click to view full-size image](deploying-a-database-cs/_static/image12.jpg))</span></span>

<span data-ttu-id="a7c52-197">データベース名を右クリックし、コンテキスト メニューから「プロバイダーにパブリッシュ」オプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-197">Right-click on the database name and choose the "Publish to provider" option from the context menu.</span></span> <span data-ttu-id="a7c52-198">データベース パブリッシュ ウィザードが起動 (図 5 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="a7c52-198">This launches the Database Publishing Wizard (see Figure 5).</span></span> <span data-ttu-id="a7c52-199">スプラッシュ画面からの事前の横にあるをクリックします。</span><span class="sxs-lookup"><span data-stu-id="a7c52-199">Click Next to advance past the splash screen.</span></span>

<span data-ttu-id="a7c52-200">[![データベース パブリッシュ ウィザードのスプラッシュ スクリーン](deploying-a-database-cs/_static/image14.jpg)](deploying-a-database-cs/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-200">[![The Database Publishing Wizard Splash Screen](deploying-a-database-cs/_static/image14.jpg)](deploying-a-database-cs/_static/image13.jpg)</span></span> 

<span data-ttu-id="a7c52-201">**図 5**:データベース パブリッシュ ウィザードのスプラッシュ画面 ([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image15.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-201">**Figure 5**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-cs/_static/image15.jpg))</span></span>

<span data-ttu-id="a7c52-202">ウィザードでは、2 番目の画面では、Database Publishing Wizard にアクセスできるデータベースの一覧し、選択したデータベース内のすべてのオブジェクトのスクリプトを作成するスクリプトにオブジェクトを選択するかを選択することができます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-202">The second screen in the wizard lists the databases accessible to the Database Publishing Wizard and lets you choose whether to script all objects in the selected database or to pick which objects to script.</span></span> <span data-ttu-id="a7c52-203">適切なデータベースを選択し、「すべてのスクリプトは、選択したデータベースでオブジェクト」オプションをオンのままにします。</span><span class="sxs-lookup"><span data-stu-id="a7c52-203">Select the appropriate database and leave the "Script all objects in the selected database" option checked.</span></span>

> [!NOTE]
> <span data-ttu-id="a7c52-204">エラーが発生した場合"データベースにオブジェクトが存在しない*databaseName*このウィザードでスクリプトを作成できる型の"を図 6 に示す画面で [次へ] をクリックすると、データベース ファイルへのパスが長すぎると確認できます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-204">If you get the error "There are no objects in database *databaseName* of the types scriptable by this wizard" when clicking Next in the screen shown in Figure 6, make sure that the path to your database file is not overly long.</span></span> <span data-ttu-id="a7c52-205">データベース ファイルへのパスが長すぎる場合は、このエラーが発生する可能性が検出されました。</span><span class="sxs-lookup"><span data-stu-id="a7c52-205">It has been discovered that this error can arise if the path to the database file is too long.</span></span>

<span data-ttu-id="a7c52-206">[![データベース パブリッシュ ウィザードのスプラッシュ スクリーン](deploying-a-database-cs/_static/image17.jpg)](deploying-a-database-cs/_static/image16.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-206">[![The Database Publishing Wizard Splash Screen](deploying-a-database-cs/_static/image17.jpg)](deploying-a-database-cs/_static/image16.jpg)</span></span> 

<span data-ttu-id="a7c52-207">**図 6**:データベース パブリッシュ ウィザードのスプラッシュ画面 ([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image18.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-207">**Figure 6**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-cs/_static/image18.jpg))</span></span>

<span data-ttu-id="a7c52-208">次の画面からスクリプト ファイルを生成したり、web ホストがサポートしている場合は、web ホスト プロバイダーのデータベース サーバーに直接、データベースを発行できます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-208">From the next screen you can generate a script file or, if your web host supports it, publish the database directly to your web host provider s database server.</span></span> <span data-ttu-id="a7c52-209">図 7 に示すファイルに記述されたスクリプトが`C:\REVIEWS.MDF.sql`します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-209">As Figure 7 shows, I am having the script written to the file `C:\REVIEWS.MDF.sql`.</span></span>

<span data-ttu-id="a7c52-210">[![ファイルにデータベースのスクリプトまたは Your Web ホスト プロバイダーに直接発行](deploying-a-database-cs/_static/image20.jpg)](deploying-a-database-cs/_static/image19.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-210">[![Script the Database to a File or Publish it Directly to Your Web Host Provider](deploying-a-database-cs/_static/image20.jpg)](deploying-a-database-cs/_static/image19.jpg)</span></span> 

<span data-ttu-id="a7c52-211">**図 7**:ファイルにデータベースのスクリプトを Web ホスト プロバイダーに直接公開したり ([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image21.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-211">**Figure 7**: Script the Database to a File or Publish it Directly to Your Web Host Provider ([Click to view full-size image](deploying-a-database-cs/_static/image21.jpg))</span></span>

<span data-ttu-id="a7c52-212">後続の画面には、スクリプト作成オプションのさまざまなことが要求されます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-212">The subsequent screen prompts you for a variety of scripting options.</span></span> <span data-ttu-id="a7c52-213">スクリプトがこれらの既存のオブジェクトを削除する drop ステートメントを含めるかどうかを指定することができます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-213">You can specify whether the script should include drop statements to remove these existing objects.</span></span> <span data-ttu-id="a7c52-214">既定値は true の場合、最初にデータベースをデプロイするときにこれは問題ありません。</span><span class="sxs-lookup"><span data-stu-id="a7c52-214">This defaults to True, which is fine when deploying a database for the first time.</span></span> <span data-ttu-id="a7c52-215">ターゲット データベースが SQL Server 2000、SQL Server 2005、または SQL Server 2008 であるかどうかを指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-215">You can also specify whether the target database is SQL Server 2000, SQL Server 2005, or SQL Server 2008.</span></span> <span data-ttu-id="a7c52-216">最後に、スキーマとデータ、スクリプトを作成するかどうかを指定できますのデータまたはスキーマだけです。</span><span class="sxs-lookup"><span data-stu-id="a7c52-216">Finally, you can indicate whether to script the schema and data, just the data, or just the schema.</span></span> <span data-ttu-id="a7c52-217">スキーマは、データベース オブジェクト、テーブル、ストアド プロシージャ、ビュー、およびなどのコレクションです。</span><span class="sxs-lookup"><span data-stu-id="a7c52-217">The schema is the collection of database objects, the tables, stored procedures, views, and so on.</span></span> <span data-ttu-id="a7c52-218">データは、テーブル内に存在する情報です。</span><span class="sxs-lookup"><span data-stu-id="a7c52-218">The data is the information residing in the tables.</span></span>

<span data-ttu-id="a7c52-219">図 8 に示すようには、SQL Server 2008 データベース用スクリプトの生成、スキーマとデータの両方を公開するために既存のデータベース オブジェクトを削除するように構成ウィザードがあります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-219">As Figure 8 illustrates, I ve got the wizard configured to drop existing database objects, to generate script for a SQL Server 2008 database, and to publish both the schema and data.</span></span>

<span data-ttu-id="a7c52-220">[![指定の発行オプション](deploying-a-database-cs/_static/image23.jpg)](deploying-a-database-cs/_static/image22.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-220">[![Specify the Publishing Options](deploying-a-database-cs/_static/image23.jpg)](deploying-a-database-cs/_static/image22.jpg)</span></span> 

<span data-ttu-id="a7c52-221">**図 8**:パブリッシング オプションを指定 ([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image24.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-221">**Figure 8**: Specify the Publishing Options ([Click to view full-size image](deploying-a-database-cs/_static/image24.jpg))</span></span>

<span data-ttu-id="a7c52-222">最後の 2 つの画面は、実行すると、スクリプトのステータスを表示し、操作をまとめたものです。</span><span class="sxs-lookup"><span data-stu-id="a7c52-222">The final two screens summarize the actions that are about to be taken and then display the status of the scripting.</span></span> <span data-ttu-id="a7c52-223">ウィザードの実行の最終的な結果は、実稼働データベースを作成し、開発のと同じデータを追加するための SQL コマンドを含むスクリプト ファイルがあること。</span><span class="sxs-lookup"><span data-stu-id="a7c52-223">The net result of running the wizard is that we have a script file that contains the SQL commands needed to create the database on production and populate it with the same data as on development.</span></span>

### <a name="executing-the-sql-commands-on-the-production-environment-database"></a><span data-ttu-id="a7c52-224">実稼働環境のデータベースで SQL コマンドを実行します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-224">Executing the SQL Commands On the Production Environment Database</span></span>

<span data-ttu-id="a7c52-225">あるのでに残っているデータベースとそのデータを作成する SQL コマンドを含むスクリプトが、実稼働データベースでスクリプトを実行します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-225">Now that we have the script that contains the SQL commands to create the database and its data all that remains is to execute the script on the production database.</span></span> <span data-ttu-id="a7c52-226">一部の web ホスト プロバイダーは、データベースで実行する SQL コマンドを入力できますがコントロール パネルのテキスト ボックスを提供します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-226">Some web host providers offer a textbox in their Control Panel where you can enter SQL commands to execute on your database.</span></span> <span data-ttu-id="a7c52-227">非常に大きいスクリプト ファイルがあるかどうかは、このオプションは機能しない可能性があります (、 `REVIEWS.MDF.sql` 425 KB を超えるサイズは、スクリプト ファイル、インスタンスは)。</span><span class="sxs-lookup"><span data-stu-id="a7c52-227">If you have a very large script file then this option might not work (the `REVIEWS.MDF.sql` script file is over 425 KB in size, for instance).</span></span>

<span data-ttu-id="a7c52-228">SQL Server Management Studio (SSMS) を使用して実稼働データベース サーバーに直接接続することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="a7c52-228">A better approach is to connect directly to the production database server using SQL Server Management Studio (SSMS).</span></span> <span data-ttu-id="a7c52-229">非 Express エディションの SQL Server コンピューターにインストールした場合、可能性がありますが既にある SSMS をインストールします。</span><span class="sxs-lookup"><span data-stu-id="a7c52-229">If you have a non-Express Edition of SQL Server installed on your computer then you likely already have SSMS installed.</span></span> <span data-ttu-id="a7c52-230">それ以外の場合、実行できます[をダウンロードしてインストール](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)SQL Server Management Studio Express Edition の無料コピーします。</span><span class="sxs-lookup"><span data-stu-id="a7c52-230">Otherwise, you can [download and install](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) a free copy of SQL Server Management Studio Express Edition.</span></span>

<span data-ttu-id="a7c52-231">SSMS を起動し、web ホスト プロバイダーによって提供される情報を使用して web ホストのデータベース サーバーに接続します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-231">Launch SSMS and connect to your web host s database server using the information provided by your web host provider.</span></span>

<span data-ttu-id="a7c52-232">[![Web ホスト プロバイダーのデータベース サーバーに接続します。](deploying-a-database-cs/_static/image26.jpg)](deploying-a-database-cs/_static/image25.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-232">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-cs/_static/image26.jpg)](deploying-a-database-cs/_static/image25.jpg)</span></span> 

<span data-ttu-id="a7c52-233">**図 9**:データベース サーバー、Web ホスト プロバイダーに接続 ([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image27.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-233">**Figure 9**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-cs/_static/image27.jpg))</span></span>

<span data-ttu-id="a7c52-234">[データベース] タブを展開し、データベースを探します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-234">Expand the Databases tab and locate your database.</span></span> <span data-ttu-id="a7c52-235">ツールバーの左上隅にある 新しいクエリ ボタンをクリックします。 データベース公開ウィザードによって作成されたスクリプト ファイルから SQL コマンドに貼り付けますや実稼働データベース サーバーでこれらのコマンドを実行する実行 ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="a7c52-235">Click the New Query button in the upper left corner of the Toolbar, paste in the SQL commands from the script file created by the Database Publishing Wizard, and click the Execute button to run these commands on the production database server.</span></span> <span data-ttu-id="a7c52-236">スクリプト ファイルが非常に大きくなる場合、コマンドを実行するまでに数分かかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-236">If your script file is especially large it may take several minutes to execute the commands.</span></span>

<span data-ttu-id="a7c52-237">[![Web ホスト プロバイダーのデータベース サーバーに接続します。](deploying-a-database-cs/_static/image29.jpg)](deploying-a-database-cs/_static/image28.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-237">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-cs/_static/image29.jpg)](deploying-a-database-cs/_static/image28.jpg)</span></span> 

<span data-ttu-id="a7c52-238">**図 10**:データベース サーバー、Web ホスト プロバイダーに接続 ([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image30.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-238">**Figure 10**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-cs/_static/image30.jpg))</span></span>

<span data-ttu-id="a7c52-239">すべてが s で終了です。</span><span class="sxs-lookup"><span data-stu-id="a7c52-239">That s all there is to it!</span></span> <span data-ttu-id="a7c52-240">この時点で、開発用データベースが運用環境に複製されました。</span><span class="sxs-lookup"><span data-stu-id="a7c52-240">At this point the development database has been duplicated to production.</span></span> <span data-ttu-id="a7c52-241">SSMS でデータベースを更新する場合は、新しいデータベース オブジェクトが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-241">If you Refresh the database in SSMS you should see the new database objects.</span></span> <span data-ttu-id="a7c52-242">図 11 では、実稼働データベースのテーブル、ストアド プロシージャ、および開発用データベースのミラー化ユーザー定義関数を示します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-242">Figure 11 shows the production database s tables, stored procedures, and user-defined functions, which mirror those on the development database.</span></span> <span data-ttu-id="a7c52-243">実稼働データベースの s テーブルに、ウィザードの実行時に、開発データベースのテーブルと同じデータがあるためデータをパブリッシュするデータベース公開ウィザードの指示に従って、します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-243">And because we instructed the Database Publishing Wizard to publish the data, the production database s tables have the same data as the development database s tables at the time the wizard was executed.</span></span> <span data-ttu-id="a7c52-244">図 12 でデータを示しています、`Books`実稼働データベースのテーブル。</span><span class="sxs-lookup"><span data-stu-id="a7c52-244">Figure 12 shows the data in the `Books` table on the production database.</span></span>

<span data-ttu-id="a7c52-245">[![データベース オブジェクトが、実稼働データベースで重複しています](deploying-a-database-cs/_static/image32.jpg)](deploying-a-database-cs/_static/image31.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-245">[![The Database Objects Have Been Duplicated on the Production Database](deploying-a-database-cs/_static/image32.jpg)](deploying-a-database-cs/_static/image31.jpg)</span></span> 

<span data-ttu-id="a7c52-246">**図 11**:データベース オブジェクトがある重複しています、実稼働データベースで ([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image33.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-246">**Figure 11**: The Database Objects Have Been Duplicated on the Production Database ([Click to view full-size image](deploying-a-database-cs/_static/image33.jpg))</span></span>

<span data-ttu-id="a7c52-247">[![実稼働データベースには、開発用データベースのと同じデータが含まれています。](deploying-a-database-cs/_static/image35.jpg)](deploying-a-database-cs/_static/image34.jpg)</span><span class="sxs-lookup"><span data-stu-id="a7c52-247">[![The Production Database Contains the Same Data as on the Development Database](deploying-a-database-cs/_static/image35.jpg)](deploying-a-database-cs/_static/image34.jpg)</span></span> 

<span data-ttu-id="a7c52-248">**図 12**:実稼働データベースには開発用データベースに同じデータが含まれています ([フルサイズの画像を表示する をクリックします](deploying-a-database-cs/_static/image36.jpg))。</span><span class="sxs-lookup"><span data-stu-id="a7c52-248">**Figure 12**: The Production Database Contains the Same Data as on the Development Database ([Click to view full-size image](deploying-a-database-cs/_static/image36.jpg))</span></span>

<span data-ttu-id="a7c52-249">この時点で、開発用データベースを運用環境にデプロイしましたがのみです。</span><span class="sxs-lookup"><span data-stu-id="a7c52-249">At this point we have only deployed the development database to production.</span></span> <span data-ttu-id="a7c52-250">Web アプリケーション自体の導入を検索されていないまたは実稼働アプリケーションで、実稼働データベースを使用するどのような構成の変更が必要かを確認しました。</span><span class="sxs-lookup"><span data-stu-id="a7c52-250">We have not yet looked at deploying the web application itself or examined what configuration changes are needed to have the application on production use the production database.</span></span> <span data-ttu-id="a7c52-251">次のチュートリアルではこれらの問題について説明します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-251">We'll cover these issues in the next tutorial!</span></span>

## <a name="summary"></a><span data-ttu-id="a7c52-252">まとめ</span><span class="sxs-lookup"><span data-stu-id="a7c52-252">Summary</span></span>

<span data-ttu-id="a7c52-253">データ ドリブン web アプリケーションを配置するには、開発時に、実稼働環境に使用されるデータベースをコピーする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-253">Deploying a data-driven web application requires copying the database used during development to the production environment.</span></span> <span data-ttu-id="a7c52-254">多くの web ホスト プロバイダーは、データベースをデプロイするプロセスを簡略化するためのツールを提供します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-254">Many web host providers offer tools to simplify the process of deploying a database.</span></span> <span data-ttu-id="a7c52-255">たとえば、DiscountASP.NET データベース FTP できます`.mdf`ファイル (またはバックアップ) と、コントロール パネルからデータベース サーバーにデータベースをアタッチします。</span><span class="sxs-lookup"><span data-stu-id="a7c52-255">For example, with DiscountASP.NET you can FTP your database `.mdf` file (or a backup) and then attach the database to the database server from the Control Panel.</span></span> <span data-ttu-id="a7c52-256">どのような機能に関係なく動作する別のオプション、web ホスト プロバイダーのプランは、開発データベースのスキーマとデータを作成する SQL コマンドのスクリプトを生成します Microsoft の Database Publishing Wizard ツールです。</span><span class="sxs-lookup"><span data-stu-id="a7c52-256">Another option that works regardless of what features your web host provider offers is Microsoft s Database Publishing Wizard tool, which generates a script of SQL commands to create the development database s schema and data.</span></span> <span data-ttu-id="a7c52-257">このスクリプトが生成されたら、実稼働データベースで実行できます。</span><span class="sxs-lookup"><span data-stu-id="a7c52-257">Once this script has been generated you can execute it on the production database.</span></span>

<span data-ttu-id="a7c52-258">ブック_レビュー web アプリケーションのデータベースが実稼働になったできるアプリケーションをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="a7c52-258">Now that the Book Reviews web application s database is on production we can deploy the application.</span></span> <span data-ttu-id="a7c52-259">ただし、web アプリケーションの構成情報が、データベースへの接続文字列を指定し、その接続文字列は、開発用データベースを参照します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-259">However, the web application s configuration information specifies the connection string to the database, and that connection string references the development database.</span></span> <span data-ttu-id="a7c52-260">サイトを運用環境にデプロイするときに、この接続文字列情報を更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a7c52-260">We need to update this connection string information when deploying the site to production.</span></span> <span data-ttu-id="a7c52-261">次のチュートリアルを使用して、これらの構成の違いを調べ、運用環境へのデータ駆動型サイト、書籍レビューの公開に必要な手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="a7c52-261">The next tutorial looks at these configuration differences and walks through the steps needed to publish the data-driven Book Reviews site to production.</span></span>

<span data-ttu-id="a7c52-262">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="a7c52-262">Happy Programming!</span></span>

#### <a name="further-reading"></a><span data-ttu-id="a7c52-263">関連項目</span><span class="sxs-lookup"><span data-stu-id="a7c52-263">Further Reading</span></span>

<span data-ttu-id="a7c52-264">このチュートリアルで説明したトピックの詳細については、次の情報を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7c52-264">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="a7c52-265">Microsoft SQL Server Database Publishing Wizard 1.1 のダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="a7c52-265">Download the Microsoft SQL Server Database Publishing Wizard 1.1</span></span>](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en)
- [<span data-ttu-id="a7c52-266">Microsoft SQL Server Management Studio の Express Edition をダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="a7c52-266">Download the Microsoft SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)

> [!div class="step-by-step"]
> <span data-ttu-id="a7c52-267">[前へ](core-differences-between-iis-and-the-asp-net-development-server-cs.md)
> [次へ](configuring-the-production-web-application-to-use-the-production-database-cs.md)</span><span class="sxs-lookup"><span data-stu-id="a7c52-267">[Previous](core-differences-between-iis-and-the-asp-net-development-server-cs.md)
[Next](configuring-the-production-web-application-to-use-the-production-database-cs.md)</span></span>
