---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/displaying-a-custom-error-page-cs
title: カスタムエラーページを表示するC#() |Microsoft Docs
author: rick-anderson
description: ASP.NET web アプリケーションでランタイムエラーが発生した場合、ユーザーには何が表示されますか。 回答は、web サイトの &lt;customErrors&gt; 構成によって異なります。
ms.author: riande
ms.date: 06/09/2009
ms.assetid: cb061642-faf3-41b2-9372-69e13444d458
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/displaying-a-custom-error-page-cs
msc.type: authoredcontent
ms.openlocfilehash: c1ff4c112b9a489b8fb9ef3443663cd71eda7965
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78420616"
---
# <a name="displaying-a-custom-error-page-c"></a><span data-ttu-id="a0ad2-104">カスタム エラー ページを表示する (C#)</span><span class="sxs-lookup"><span data-stu-id="a0ad2-104">Displaying a Custom Error Page (C#)</span></span>

<span data-ttu-id="a0ad2-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a0ad2-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a0ad2-106">[コードのダウンロード](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_11_CS.zip)または[PDF のダウンロード](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial11_CustomErrors_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="a0ad2-106">[Download Code](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_11_CS.zip) or [Download PDF](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial11_CustomErrors_cs.pdf)</span></span>

> <span data-ttu-id="a0ad2-107">ASP.NET web アプリケーションでランタイムエラーが発生した場合、ユーザーには何が表示されますか。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-107">What does the user see when a runtime error occurs in an ASP.NET web application?</span></span> <span data-ttu-id="a0ad2-108">回答は、web サイトの &lt;customErrors&gt; 構成によって異なります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-108">The answer depends on how the website's &lt;customErrors&gt; configuration.</span></span> <span data-ttu-id="a0ad2-109">既定では、ランタイムエラーが発生したことを示す unsightly 黄色の画面が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-109">By default, users are shown an unsightly yellow screen proclaiming that a runtime error has occurred.</span></span> <span data-ttu-id="a0ad2-110">このチュートリアルでは、これらの設定をカスタマイズして、サイトのルックアンドフィールに適した見た目のカスタムエラーページを表示する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-110">This tutorial shows how to customize these settings to display an aesthetically-pleasing custom error page that matches your site's look and feel.</span></span>

## <a name="introduction"></a><span data-ttu-id="a0ad2-111">はじめに</span><span class="sxs-lookup"><span data-stu-id="a0ad2-111">Introduction</span></span>

<span data-ttu-id="a0ad2-112">完全な世界では、実行時エラーは発生しません。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-112">In a perfect world there would be no run-time errors.</span></span> <span data-ttu-id="a0ad2-113">プログラマは、nary のバグがあり、信頼性の高いユーザー入力の検証でコードを記述することになります。また、データベースサーバーや電子メールサーバーなどの外部リソースがオフラインになることはありません。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-113">Programmers would write code with nary a bug and with robust user input validation, and external resources like database servers and email servers would never go offline.</span></span> <span data-ttu-id="a0ad2-114">もちろん、実際のエラーは避けられません。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-114">Of course, in reality errors are inevitable.</span></span> <span data-ttu-id="a0ad2-115">.NET Framework のクラスは、例外をスローすることによってエラーを通知します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-115">The classes in the .NET Framework signal an error by throwing an exception.</span></span> <span data-ttu-id="a0ad2-116">たとえば、SqlConnection オブジェクトの Open メソッドを呼び出すと、接続文字列によって指定されたデータベースへの接続が確立されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-116">For example, calling a SqlConnection object's Open method establishes a connection to the database specified by a connection string.</span></span> <span data-ttu-id="a0ad2-117">ただし、データベースがダウンしている場合、または接続文字列の資格情報が無効な場合は、Open メソッドによって `SqlException`がスローされます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-117">However, if the database is down or if the credentials in the connection string are invalid then the Open method throws a `SqlException`.</span></span> <span data-ttu-id="a0ad2-118">例外は、`try/catch/finally` ブロックを使用して処理できます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-118">Exceptions can be handled by the use of `try/catch/finally` blocks.</span></span> <span data-ttu-id="a0ad2-119">`try` ブロック内のコードが例外をスローした場合、開発者がエラーからの回復を試みることができる適切な catch ブロックに制御が移ります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-119">If code within a `try` block throws an exception, control is transferred to the appropriate catch block where the developer can attempt to recover from the error.</span></span> <span data-ttu-id="a0ad2-120">一致する catch ブロックがない場合、または例外をスローしたコードが try ブロックに含まれていない場合は、例外によって `try/catch/finally` ブロックの検索でコールスタックが作成されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-120">If there is no matching catch block, or if the code that threw the exception is not in a try block, the exception percolates up the call stack in search of `try/catch/finally` blocks.</span></span>

<span data-ttu-id="a0ad2-121">例外が処理されずにすべての ASP.NET ランタイムに対して発生した場合は、 [`HttpApplication` クラス](https://msdn.microsoft.com/library/system.web.httpapplication.aspx)の[`Error` イベント](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx)が発生し、構成された*エラーページ*が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-121">If the exception bubbles all the way up to the ASP.NET runtime without being handled, the [`HttpApplication` class](https://msdn.microsoft.com/library/system.web.httpapplication.aspx)'s [`Error` event](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx) is raised and the configured *error page* is displayed.</span></span> <span data-ttu-id="a0ad2-122">既定では、ASP.NET[は、こと (YSOD](http://en.wikipedia.org/wiki/Yellow_Screen_of_Death#Yellow) ) と呼ばれるエラーページを表示します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-122">By default, ASP.NET displays an error page that is affectionately referred to as the [Yellow Screen of Death](http://en.wikipedia.org/wiki/Yellow_Screen_of_Death#Yellow) (YSOD).</span></span> <span data-ttu-id="a0ad2-123">YSOD には2つのバージョンがあります。1つは例外の詳細、スタックトレース、および開発者がアプリケーションをデバッグする際に役立つその他の情報を示しています (**図 1**を参照)。もう1つは、実行時エラーが発生したことを示すだけです (**図 2**を参照)。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-123">There are two versions of the YSOD: one shows the exception details, a stack trace, and other information helpful to developers debugging the application (see **Figure 1**); the other simply states that there was a run-time error (see **Figure 2**).</span></span>

<span data-ttu-id="a0ad2-124">例外の詳細 YSOD はアプリケーションをデバッグする開発者にとって非常に役に立ちますが、エンドユーザーの YSOD は tacky と不自然見えるであることを示しています。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-124">The exception details YSOD is quite helpful for developers debugging the application, but showing a YSOD to end users is tacky and unprofessional.</span></span> <span data-ttu-id="a0ad2-125">代わりに、エンドユーザーは、サイトのルックアンドフィールを維持するエラーページに移動して、状況を説明するよりわかりやすい prose を作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-125">Instead, end users should be taken to an error page that maintains the site's look and feel with more user-friendly prose describing the situation.</span></span> <span data-ttu-id="a0ad2-126">このようなカスタムエラーページを作成するのは非常に簡単です。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-126">The good news is that creating such a custom error page is quite easy.</span></span> <span data-ttu-id="a0ad2-127">このチュートリアルでは、まず ASP を見てみましょう。ネットワークのさまざまなエラーページ。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-127">This tutorial starts with a look at ASP.NET's different error pages.</span></span> <span data-ttu-id="a0ad2-128">次に、エラー発生時にユーザーにカスタムエラーページを表示するように web アプリケーションを構成する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-128">It then shows how to configure the web application to show users a custom error page in the face of an error.</span></span>

### <a name="examining-the-three-types-of-error-pages"></a><span data-ttu-id="a0ad2-129">エラーページの3種類の検証</span><span class="sxs-lookup"><span data-stu-id="a0ad2-129">Examining the Three Types of Error Pages</span></span>

<span data-ttu-id="a0ad2-130">ASP.NET アプリケーションでハンドルされない例外が発生すると、次の3種類のエラーページのいずれかが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-130">When an unhandled exception arises in an ASP.NET application one of three types of error pages is displayed:</span></span>

- <span data-ttu-id="a0ad2-131">例外の詳細は、死亡エラーページの黄色の画面です。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-131">The Exception Details Yellow Screen of Death error page,</span></span>
- <span data-ttu-id="a0ad2-132">実行時エラーページの黄色い画面、</span><span class="sxs-lookup"><span data-stu-id="a0ad2-132">The Runtime Error Yellow Screen of Death error page, or</span></span>
- <span data-ttu-id="a0ad2-133">カスタムエラーページ</span><span class="sxs-lookup"><span data-stu-id="a0ad2-133">A custom error page</span></span>

<span data-ttu-id="a0ad2-134">開発者が最もよく知られているエラーページは、例外の詳細 YSOD です。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-134">The error page developers are most familiar with is the Exception Details YSOD.</span></span> <span data-ttu-id="a0ad2-135">既定では、このページはローカルにアクセスしているユーザーに表示されます。したがって、開発環境でサイトをテストするときにエラーが発生した場合に表示されるページです。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-135">By default, this page is displayed to users who are visiting locally and therefore is the page that you see when an error occurs when testing the site in the development environment.</span></span> <span data-ttu-id="a0ad2-136">その名前が示すように、例外の詳細 YSOD は、例外の種類、メッセージ、スタックトレースなどの詳細を提供します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-136">As its name implies, the Exception Details YSOD provides details about the exception - the type, the message, and the stack trace.</span></span> <span data-ttu-id="a0ad2-137">さらに、ASP.NET ページの分離コードクラスのコードによって例外が発生し、アプリケーションがデバッグ用に構成されている場合、例外の詳細 YSOD にも、次のコード行 (およびその上と下の数行のコード) が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-137">What's more, if the exception was raised by code in your ASP.NET page's code-behind class and if the application is configured for debugging then the Exception Details YSOD will also show this line of code (and a few lines of code above and below it).</span></span>

<span data-ttu-id="a0ad2-138">**図 1**は、例外の詳細 YSOD ページを示しています。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-138">**Figure 1** shows the Exception Details YSOD page.</span></span> <span data-ttu-id="a0ad2-139">ブラウザーのアドレスウィンドウの URL に注意してください: `http://localhost:62275/Genre.aspx?ID=foo`。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-139">Note the URL in the browser's address window: `http://localhost:62275/Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="a0ad2-140">`Genre.aspx` のページに、特定のジャンルの書籍のレビューが一覧表示されていることを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-140">Recall that the `Genre.aspx` page lists the book reviews in a particular genre.</span></span> <span data-ttu-id="a0ad2-141">`GenreId` 値 (`uniqueidentifier`) を querystring で渡す必要があります。たとえば、架空のレビューを表示するための適切な URL は `Genre.aspx?ID=7683ab5d-4589-4f03-a139-1c26044d0146`です。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-141">It requires that `GenreId` value (a `uniqueidentifier`) be passed through the querystring; for example, the appropriate URL to view the fiction reviews is `Genre.aspx?ID=7683ab5d-4589-4f03-a139-1c26044d0146`.</span></span> <span data-ttu-id="a0ad2-142">非`uniqueidentifier` 値が querystring ("foo" など) を介して渡された場合は、例外がスローされます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-142">If a non-`uniqueidentifier` value is passed in through the querystring (such as "foo") an exception is thrown.</span></span>

> [!NOTE]
> <span data-ttu-id="a0ad2-143">ダウンロード可能なデモ web アプリケーションでこのエラーを再現するには、`Genre.aspx?ID=foo` 直接参照するか、`Default.aspx`の [ランタイムエラーの生成] リンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-143">To reproduce this error in the demo web application available for download you can either visit `Genre.aspx?ID=foo` directly or click the "Generate a Runtime Error" link in `Default.aspx`.</span></span>

<span data-ttu-id="a0ad2-144">**図 1**に示されている例外情報に注意してください。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-144">Note the exception information presented in **Figure 1**.</span></span> <span data-ttu-id="a0ad2-145">例外メッセージ "文字列から uniqueidentifier への変換中に変換に失敗しました" がページの上部に存在します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-145">The exception message, "Conversion failed when converting from a character string to uniqueidentifier" is present at the top of the page.</span></span> <span data-ttu-id="a0ad2-146">例外の種類 (`System.Data.SqlClient.SqlException`) も表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-146">The type of the exception, `System.Data.SqlClient.SqlException`, is listed, as well.</span></span> <span data-ttu-id="a0ad2-147">スタックトレースもあります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-147">There's also the stack trace.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image2.png)](displaying-a-custom-error-page-cs/_static/image1.png)

<span data-ttu-id="a0ad2-148">**図 1**: 例外の詳細 YSOD に例外に関する情報が含まれる</span><span class="sxs-lookup"><span data-stu-id="a0ad2-148">**Figure 1**: The Exception Details YSOD Includes Information About the Exception</span></span>  
 <span data-ttu-id="a0ad2-149">([クリックすると、フルサイズの画像が表示](displaying-a-custom-error-page-cs/_static/image3.png)される)</span><span class="sxs-lookup"><span data-stu-id="a0ad2-149">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image3.png))</span></span>

<span data-ttu-id="a0ad2-150">もう1つの種類の YSOD はランタイムエラー YSOD であり、**図 2**に示します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-150">The other type of YSOD is the Runtime Error YSOD, and is shown in **Figure 2**.</span></span> <span data-ttu-id="a0ad2-151">ランタイムエラー YSOD は、実行時エラーが発生したことをビジターに通知しますが、スローされた例外に関する情報は含まれていません。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-151">The Runtime Error YSOD informs the visitor that a run-time error has occurred, but it does not include any information about the exception that was thrown.</span></span> <span data-ttu-id="a0ad2-152">(ただし、このような YSOD ルック不自然見えるの一部である `Web.config` ファイルを変更することによって、エラーの詳細を表示する方法について説明します)。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-152">(It does, however, provide instructions on how to make the error details viewable by modifying the `Web.config` file, which is part of what makes such a YSOD look unprofessional.)</span></span>

<span data-ttu-id="a0ad2-153">既定では、ランタイムエラー YSOD は、ブラウザーのアドレスバーの URL (**図 2**: `http://httpruntime.web703.discountasp.net/Genre.aspx?ID=foo`) で示されているように、 http://www.yoursite.com)を通じてリモートでアクセスしているユーザーに表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-153">By default, the Runtime Error YSOD is shown to users visiting remotely (through http://www.yoursite.com), as evidenced by the URL in the browser's Address bar in **Figure 2**: `http://httpruntime.web703.discountasp.net/Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="a0ad2-154">この2つの異なる YSOD 画面は、開発者がエラーの詳細を知りたいと考えていますが、このような情報をライブサイトに表示することはできません。これは、潜在的なセキュリティの脆弱性やその他の機密情報が、サイト.</span><span class="sxs-lookup"><span data-stu-id="a0ad2-154">The two different YSOD screens exist because developers are interested in knowing the error details, but such information should not be shown on a live site as it may reveal potential security vulnerabilities or other sensitive information to anyone who visits your site.</span></span>

> [!NOTE]
> <span data-ttu-id="a0ad2-155">後で DiscountASP.NET を web ホストとして使用している場合は、ライブサイトにアクセスしたときにランタイムエラー YSOD が表示されないことがあります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-155">If you are following along and are using DiscountASP.NET as your web host, you may notice that the Runtime Error YSOD does not display when visiting the live site.</span></span> <span data-ttu-id="a0ad2-156">これは、既定では、DiscountASP.NET には例外の詳細を表示するようにサーバーが構成されているためです。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-156">This is because DiscountASP.NET has their servers configured to show the Exception Details YSOD by default.</span></span> <span data-ttu-id="a0ad2-157">この既定の動作は、`Web.config` ファイルに `<customErrors>` セクションを追加することでオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-157">The good news is that you can override this default behavior by adding a `<customErrors>` section to your `Web.config` file.</span></span> <span data-ttu-id="a0ad2-158">「どのエラーページが表示されるかを構成する」セクションでは、`<customErrors>` について詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-158">The "Configuring Which Error Page is Displayed" section examines the `<customErrors>` section in detail.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image5.png)](displaying-a-custom-error-page-cs/_static/image4.png)

<span data-ttu-id="a0ad2-159">**図 2**: ランタイムエラー YSOD にエラーの詳細が含まれていない</span><span class="sxs-lookup"><span data-stu-id="a0ad2-159">**Figure 2**: The Runtime Error YSOD Does Not Include Any Error Details</span></span>  
 <span data-ttu-id="a0ad2-160">([クリックすると、フルサイズの画像が表示](displaying-a-custom-error-page-cs/_static/image6.png)される)</span><span class="sxs-lookup"><span data-stu-id="a0ad2-160">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image6.png))</span></span>

<span data-ttu-id="a0ad2-161">エラーページの3番目の種類は、ユーザーが作成する web ページであるカスタムエラーページです。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-161">The third type of error page is the custom error page, which is a web page that you create.</span></span> <span data-ttu-id="a0ad2-162">カスタムエラーページの利点は、ページのルックアンドフィールと共にユーザーに表示される情報を完全に制御できることです。カスタムエラーページでは、他のページと同じマスターページとスタイルを使用できます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-162">The benefit of a custom error page is that you have complete control over the information that is displayed to the user along with the page's look and feel; the custom error page can use the same master page and styles as your other pages.</span></span> <span data-ttu-id="a0ad2-163">「カスタムエラーページの使用」セクションでは、カスタムエラーページを作成し、未処理の例外が発生した場合に表示されるように構成する手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-163">The "Using a Custom Error Page" section walks through creating a custom error page and configuring it to display in the event of an unhandled exception.</span></span> <span data-ttu-id="a0ad2-164">**図 3**に、このカスタムエラーページのヒントを提供します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-164">**Figure 3** offers a sneak peak of this custom error page.</span></span> <span data-ttu-id="a0ad2-165">ご覧のように、エラーページのルックアンドフィールは、図1と2に示されている死亡の黄色の画面よりも、より専門的なものです。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-165">As you can see, the look and feel of the error page is much more professional-looking than either of the Yellow Screens of Death shown in Figures 1 and 2.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image8.png)](displaying-a-custom-error-page-cs/_static/image7.png)

<span data-ttu-id="a0ad2-166">**図 3**: カスタムエラーページにより、より調整されたルックアンドフィールが提供される</span><span class="sxs-lookup"><span data-stu-id="a0ad2-166">**Figure 3**: A Custom Error Page Offers a More Tailored Look and Feel</span></span>  
 <span data-ttu-id="a0ad2-167">([クリックすると、フルサイズの画像が表示](displaying-a-custom-error-page-cs/_static/image9.png)される)</span><span class="sxs-lookup"><span data-stu-id="a0ad2-167">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image9.png))</span></span>

<span data-ttu-id="a0ad2-168">**図 3**のブラウザーのアドレスバーを調べてみましょう。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-168">Take a moment to inspect the browser's Address bar in **Figure 3**.</span></span> <span data-ttu-id="a0ad2-169">アドレスバーには、カスタムエラーページ (`/ErrorPages/Oops.aspx`) の URL が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-169">Note that the Address bar shows the URL of the custom error page (`/ErrorPages/Oops.aspx`).</span></span> <span data-ttu-id="a0ad2-170">図1および2では、エラーの発生元と同じページ (`Genre.aspx`) で、死亡の黄色い画面が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-170">In Figures 1 and 2 the Yellow Screens of Death are shown in the same page that the error originated from (`Genre.aspx`).</span></span> <span data-ttu-id="a0ad2-171">カスタムエラーページには、`aspxerrorpath` querystring パラメーターを使用してエラーが発生したページの URL が渡されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-171">The custom error page is passed the URL of the page where the error occurred via the `aspxerrorpath` querystring parameter.</span></span>

## <a name="configuring-which-error-page-is-displayed"></a><span data-ttu-id="a0ad2-172">表示されるエラーページの構成</span><span class="sxs-lookup"><span data-stu-id="a0ad2-172">Configuring Which Error Page is Displayed</span></span>

<span data-ttu-id="a0ad2-173">表示される3つのエラーページは、2つの変数に基づいています。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-173">Which of the three possible error pages is displayed is based on two variables:</span></span>

- <span data-ttu-id="a0ad2-174">`<customErrors>` セクションの構成情報</span><span class="sxs-lookup"><span data-stu-id="a0ad2-174">The configuration information in the `<customErrors>` section, and</span></span>
- <span data-ttu-id="a0ad2-175">ユーザーがローカルまたはリモートのどちらでサイトにアクセスしているか。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-175">Whether the user is visiting the site locally or remotely.</span></span>

<span data-ttu-id="a0ad2-176">`Web.config` の[`<customErrors>` セクション](https://msdn.microsoft.com/library/h0hfz6fc.aspx)には、表示されるエラーページ (`defaultRedirect` および `mode`) に影響する2つの属性があります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-176">The [`<customErrors>` section](https://msdn.microsoft.com/library/h0hfz6fc.aspx) in `Web.config` has two attributes that affect what error page is shown: `defaultRedirect` and `mode`.</span></span> <span data-ttu-id="a0ad2-177">`defaultRedirect` 属性は省略できます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-177">The `defaultRedirect` attribute is optional.</span></span> <span data-ttu-id="a0ad2-178">指定されている場合は、カスタムエラーページの URL を指定し、ランタイムエラー YSOD の代わりにカスタムエラーページを表示することを示します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-178">If provided, it specifies the URL of the custom error page and indicates that the custom error page should be shown instead of the Runtime Error YSOD.</span></span> <span data-ttu-id="a0ad2-179">`mode` 属性は必須であり、`On`、`Off`、または `RemoteOnly`の3つの値のいずれかを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-179">The `mode` attribute is required and accepts one of three values: `On`, `Off`, or `RemoteOnly`.</span></span> <span data-ttu-id="a0ad2-180">これらの値の動作は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-180">These values have the following behavior:</span></span>

- <span data-ttu-id="a0ad2-181">`On`-ローカルかリモートかに関係なく、すべての訪問者にカスタムエラーページまたはランタイムエラー YSOD が表示されることを示します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-181">`On` - indicates that the custom error page or the Runtime Error YSOD is shown to all visitors, regardless of whether they are local or remote.</span></span>
- <span data-ttu-id="a0ad2-182">`Off`-ローカルかリモートかに関係なく、すべての訪問者に例外の詳細 YSOD が表示されることを指定します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-182">`Off` - specifies that the Exception Details YSOD is displayed to all visitors, regardless of whether they are local or remote.</span></span>
- <span data-ttu-id="a0ad2-183">`RemoteOnly`-カスタムエラーページまたはランタイムエラー YSOD がリモート訪問者に表示され、例外の詳細 YSOD はローカル訪問者に表示されることを示します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-183">`RemoteOnly` - indicates that the custom error page or the Runtime Error YSOD is shown to remote visitors, while the Exception Details YSOD is shown to local visitors.</span></span>

<span data-ttu-id="a0ad2-184">特に指定しない限り、ASP.NET は mode 属性を `RemoteOnly` に設定し、`defaultRedirect` 値を指定しなかったかのように動作します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-184">Unless you specify otherwise, ASP.NET acts as if you had set the mode attribute to `RemoteOnly` and had not specified a `defaultRedirect` value.</span></span> <span data-ttu-id="a0ad2-185">つまり、既定の動作では、例外の詳細 YSOD がローカル訪問者に表示されるのに対し、ランタイムエラー YSOD がリモート訪問者に表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-185">In other words, the default behavior is that the Exception Details YSOD is displayed to local visitors while the Runtime Error YSOD is shown to remote visitors.</span></span> <span data-ttu-id="a0ad2-186">この既定の動作をオーバーライドするには、web アプリケーションの `Web.config file.` に `<customErrors>` セクションを追加します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-186">You can override this default behavior by adding a `<customErrors>` section to your web application's `Web.config file.`</span></span>

## <a name="using-a-custom-error-page"></a><span data-ttu-id="a0ad2-187">カスタムエラーページの使用</span><span class="sxs-lookup"><span data-stu-id="a0ad2-187">Using a Custom Error Page</span></span>

<span data-ttu-id="a0ad2-188">すべての web アプリケーションには、カスタムエラーページが必要です。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-188">Every web application should have a custom error page.</span></span> <span data-ttu-id="a0ad2-189">これにより、ランタイムエラー YSOD に代わるより専門的な方法が提供され、簡単に作成できます。また、カスタムエラーページを使用するようにアプリケーションを構成するには、少し時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-189">It provides a more professional-looking alternative to the Runtime Error YSOD, it is easy to create, and configuring the application to use the custom error page takes only a few moments.</span></span> <span data-ttu-id="a0ad2-190">最初の手順では、カスタムエラーページを作成します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-190">The first step is creating the custom error page.</span></span> <span data-ttu-id="a0ad2-191">`ErrorPages` という名前の新しいフォルダーを書籍レビューアプリケーションに追加し、`Oops.aspx`という名前の新しい ASP.NET ページに追加しました。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-191">I've added a new folder to the Book Reviews application named `ErrorPages` and added to that a new ASP.NET page named `Oops.aspx`.</span></span> <span data-ttu-id="a0ad2-192">同じ外観を自動的に継承するために、ページがサイトの他のページと同じマスターページを使用していることを確認します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-192">Have the page use the same master page as the rest of the pages on your site so that it automatically inherits the same look and feel.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image11.png)](displaying-a-custom-error-page-cs/_static/image10.png)

<span data-ttu-id="a0ad2-193">**図 4**: カスタムエラーページを作成する</span><span class="sxs-lookup"><span data-stu-id="a0ad2-193">**Figure 4**: Create a Custom Error Page</span></span>

<span data-ttu-id="a0ad2-194">次に、エラーページのコンテンツを作成するために数分かかります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-194">Next, spend a few minutes creating the content for the error page.</span></span> <span data-ttu-id="a0ad2-195">予期しないエラーが発生し、サイトのホームページへのリンクが戻ったことを示すメッセージを含む、単純なカスタムエラーページを作成しました。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-195">I've created a rather simple custom error page with a message indicating that there was an unexpected error and a link back to the site's homepage.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image13.png)](displaying-a-custom-error-page-cs/_static/image12.png)

<span data-ttu-id="a0ad2-196">**図 5**: カスタムエラーページをデザインする</span><span class="sxs-lookup"><span data-stu-id="a0ad2-196">**Figure 5**: Design Your Custom Error Page</span></span>  
 <span data-ttu-id="a0ad2-197">([クリックすると、フルサイズの画像が表示](displaying-a-custom-error-page-cs/_static/image14.png)される)</span><span class="sxs-lookup"><span data-stu-id="a0ad2-197">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image14.png))</span></span>

<span data-ttu-id="a0ad2-198">エラーページが完了したら、ランタイムエラー YSOD の代わりに、カスタムエラーページを使用するように web アプリケーションを構成します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-198">With the error page completed, configure the web application to use the custom error page in lieu of the Runtime Error YSOD.</span></span> <span data-ttu-id="a0ad2-199">これを行うには、`<customErrors>` セクションの `defaultRedirect` 属性にエラーページの URL を指定します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-199">This is accomplished by specifying the URL of the error page in the `<customErrors>` section's `defaultRedirect` attribute.</span></span> <span data-ttu-id="a0ad2-200">次のマークアップをアプリケーションの `Web.config` ファイルに追加します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-200">Add the following markup to your application's `Web.config` file:</span></span>

[!code-xml[Main](displaying-a-custom-error-page-cs/samples/sample1.xml)]

<span data-ttu-id="a0ad2-201">上のマークアップは、ローカルでアクセスしているユーザーに例外の詳細を表示するようにアプリケーションを構成し、リモートでアクセスしているユーザーに対してカスタムエラーページ YSOD を使用します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-201">The above markup configures the application to show the Exception Details YSOD to users visiting locally, while using the custom error page Oops.aspx for those users visiting remotely.</span></span> <span data-ttu-id="a0ad2-202">実際の動作を確認するには、web サイトを運用環境にデプロイし、無効な querystring の値を使用してライブサイトの Genre .aspx ページにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-202">To see this in action, deploy your website to the production environment and then visit the Genre.aspx page on the live site with an invalid querystring value.</span></span> <span data-ttu-id="a0ad2-203">カスタムエラーページが表示されます (**図 3**を参照)。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-203">You should see the custom error page (refer back to **Figure 3**).</span></span>

<span data-ttu-id="a0ad2-204">カスタムエラーページがリモートユーザーにのみ表示されることを確認するには、開発環境からの無効なクエリ文字列を使用して `Genre.aspx` のページにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-204">To verify that the custom error page is only shown to remote users, visit the `Genre.aspx` page with an invalid querystring from the development environment.</span></span> <span data-ttu-id="a0ad2-205">ただし、例外の詳細は YSOD に表示されます (**図 1**を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-205">You should still see the Exception Details YSOD (refer back to **Figure 1**).</span></span> <span data-ttu-id="a0ad2-206">`RemoteOnly` 設定を使用すると、運用環境のサイトにアクセスするユーザーはカスタムエラーページを表示し、ローカルで作業している開発者は引き続き例外の詳細を確認できます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-206">The `RemoteOnly` setting ensures that users visiting the site on the production environment see the custom error page while developers working locally continue to see the details of the exception.</span></span>

## <a name="notifying-developers-and-logging-error-details"></a><span data-ttu-id="a0ad2-207">開発者に通知し、エラーの詳細をログに記録する</span><span class="sxs-lookup"><span data-stu-id="a0ad2-207">Notifying Developers and Logging Error Details</span></span>

<span data-ttu-id="a0ad2-208">開発環境で発生したエラーは、開発者が自分のコンピューターを使っているために発生したものです。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-208">Errors that occur in the development environment were caused by the developer sitting at her computer.</span></span> <span data-ttu-id="a0ad2-209">例外の情報が例外の詳細 YSOD に表示され、エラーが発生したときに実行していた手順がわかっています。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-209">She is shown the exception's information in the Exception Details YSOD, and she knows what steps she was performing when the error occurred.</span></span> <span data-ttu-id="a0ad2-210">ただし、運用環境でエラーが発生した場合、エンドユーザーがサイトにアクセスしてエラーを報告しない限り、開発者はエラーが発生したことを知らせることはできません。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-210">But when an error occurs on production, the developer has no knowledge that an error occurred unless the end user visiting the site takes the time to report the error.</span></span> <span data-ttu-id="a0ad2-211">また、例外の種類、メッセージ、スタックトレースがわからなくても、エラーが発生したことを開発チームに通知する方法がユーザーにない場合でも、エラーの原因を診断するのは困難な場合があります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-211">And even if the user goes out of his way to alert the development team that an error occurred, without knowing the exception type, message, and stack trace it can be difficult to diagnose the cause of the error, let alone fix it.</span></span>

<span data-ttu-id="a0ad2-212">このような理由から、運用環境のすべてのエラーが永続的なストア (データベースなど) に記録され、開発者にこのエラーが通知されることが最も重要です。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-212">For these reasons it is paramount that any error in the production environment is logged to some persistent store (such as a database) and that the developers are alerted of this error.</span></span> <span data-ttu-id="a0ad2-213">カスタムエラーページは、このログ記録と通知を行うための適切な場所と思われる場合があります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-213">The custom error page may seem like a good place to do this logging and notification.</span></span> <span data-ttu-id="a0ad2-214">残念ながら、カスタムエラーページはエラーの詳細にアクセスできないため、この情報をログに記録するために使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-214">Unfortunately, the custom error page does not have access to the error details and therefore cannot be used to log this information.</span></span> <span data-ttu-id="a0ad2-215">エラーの詳細をインターセプトしてログを記録する方法はいくつかあります。次の3つのチュートリアルでは、このトピックについて詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-215">The good news is that there are a number of ways to intercept the error details and to log them, and the next three tutorials explore this topic in more detail.</span></span>

## <a name="using-different-custom-error-pages-for-different-http-error-statuses"></a><span data-ttu-id="a0ad2-216">異なる HTTP エラー状態に対して異なるカスタムエラーページを使用する</span><span class="sxs-lookup"><span data-stu-id="a0ad2-216">Using Different Custom Error Pages for Different HTTP Error Statuses</span></span>

<span data-ttu-id="a0ad2-217">ASP.NET ページによって例外がスローされ、処理されない場合、ASP.NET ランタイムに例外が発生します。これにより、構成されたエラーページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-217">When an exception is thrown by an ASP.NET page and is not handled, the exception percolates up to the ASP.NET runtime, which displays the configured error page.</span></span> <span data-ttu-id="a0ad2-218">要求が ASP.NET エンジンに送られても、何らかの理由で処理できない場合 (要求されたファイルが見つからない場合や、ファイルに対する読み取りアクセス許可が無効になっている場合など) は、ASP.NET エンジンによって `HttpException`が発生します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-218">If a request comes into the ASP.NET engine but cannot be processed for some reason - perhaps the requested file is not found or Read permissions have been disabled for the file - then the ASP.NET engine raises an `HttpException`.</span></span> <span data-ttu-id="a0ad2-219">この例外は、ASP.NET ページから発生した例外と同様に、ランタイムにバブルアップして、適切なエラーページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-219">This exception, like exceptions raised from ASP.NET pages, bubbles up to the runtime, causing the appropriate error page to be displayed.</span></span>

<span data-ttu-id="a0ad2-220">これは、運用環境の web アプリケーションでは、ユーザーが見つからないページを要求すると、カスタムエラーページが表示されることを意味します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-220">What this means for the web application in production is that if a user requests a page that is not found then they will see the custom error page.</span></span> <span data-ttu-id="a0ad2-221">**図 6**は、このような例を示しています。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-221">**Figure 6** shows such an example.</span></span> <span data-ttu-id="a0ad2-222">要求が存在しないページ (`NoSuchPage.aspx`) に対して行われるため、`HttpException` がスローされ、カスタムエラーページが表示されます (`aspxerrorpath` querystring パラメーターの `NoSuchPage.aspx` への参照に注意してください)。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-222">Because the request is for a non-existent page (`NoSuchPage.aspx`), an `HttpException` is thrown and the custom error page is displayed (note the reference to `NoSuchPage.aspx` in the `aspxerrorpath` querystring parameter).</span></span>

[![](displaying-a-custom-error-page-cs/_static/image16.png)](displaying-a-custom-error-page-cs/_static/image15.png)

<span data-ttu-id="a0ad2-223">**図 6**: ASP.NET ランタイムは、無効な要求に応答して構成されたエラーページを表示します ([クリックすると、フルサイズの画像が表示](displaying-a-custom-error-page-cs/_static/image17.png)されます)</span><span class="sxs-lookup"><span data-stu-id="a0ad2-223">**Figure 6**: The ASP.NET Runtime Displays the Configured Error Page In Response to an Invalid Request ([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image17.png))</span></span>

<span data-ttu-id="a0ad2-224">既定では、すべての種類のエラーによって同じカスタムエラーページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-224">By default, all types of errors cause the same custom error page to be displayed.</span></span> <span data-ttu-id="a0ad2-225">ただし、`<customErrors>` セクション内の `<error>` の子要素を使用して、特定の HTTP 状態コードに対して別のカスタムエラーページを指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-225">However, you can specify a different custom error page for a specific HTTP status code using `<error>` children elements within the `<customErrors>` section.</span></span> <span data-ttu-id="a0ad2-226">たとえば、HTTP ステータスコード404を含む "ページが見つかりません" というエラーが発生した場合に別のエラーページが表示されるようにするには、`<customErrors>` セクションを更新して、次のマークアップを含めます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-226">For example, to have a different error page displayed in the event of a page not found error, which has an HTTP status code of 404, update the `<customErrors>` section to include the following markup:</span></span>

[!code-xml[Main](displaying-a-custom-error-page-cs/samples/sample2.xml)]

<span data-ttu-id="a0ad2-227">この変更を適用すると、リモートでアクセスしているユーザーが、存在しない ASP.NET リソースを要求するたびに、`Oops.aspx`ではなく、`404.aspx` のカスタムエラーページにリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-227">With this change in place, whenever a user visiting remotely requests an ASP.NET resource that does not exist, they will be redirected to the `404.aspx` custom error page instead of `Oops.aspx`.</span></span> <span data-ttu-id="a0ad2-228">**図 7**に示すように、[`404.aspx`] ページには、一般的なカスタムエラーページよりも具体的なメッセージを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-228">As **Figure 7** illustrates, the `404.aspx` page can include a more specific message than the general custom error page.</span></span>

> [!NOTE]
> <span data-ttu-id="a0ad2-229">[404 エラーページを参照](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/)してください。有効な404エラーページを作成するためのガイダンスがもう1つあります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-229">Check out [404 Error Pages, One More Time](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/) for guidance on creating effective 404 error pages.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image19.png)](displaying-a-custom-error-page-cs/_static/image18.png)

<span data-ttu-id="a0ad2-230">**図 7**: カスタム404エラーページにより対象となるメッセージが表示される `Oops.aspx`</span><span class="sxs-lookup"><span data-stu-id="a0ad2-230">**Figure 7**: The Custom 404 Error Page Displays a More Targeted Message Than `Oops.aspx`</span></span>  
<span data-ttu-id="a0ad2-231">([クリックすると、フルサイズの画像が表示](displaying-a-custom-error-page-cs/_static/image20.png)される)</span><span class="sxs-lookup"><span data-stu-id="a0ad2-231">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image20.png))</span></span> 

<span data-ttu-id="a0ad2-232">`404.aspx` ページは、ユーザーが見つからなかったページの要求を行ったときにのみ到達することがわかっているので、このカスタムエラーページを拡張して、ユーザーがこの特定の種類のエラーに対処するのに役立つ機能を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-232">Because you know that the `404.aspx` page is only reached when the user makes a request for a page that was not found, you can enhance this custom error page to include functionality to help the user address this specific type of error.</span></span> <span data-ttu-id="a0ad2-233">たとえば、既知の不適切な Url を適切な Url にマップするデータベーステーブルを作成し、そのテーブルに対してクエリを実行し、ユーザーが移動しようとしている可能性のあるページを提示するように `404.aspx` します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-233">For example, you could build a database table that maps known bad URLs to good URLs, and then have the `404.aspx` custom error page run a query against that table and suggest pages the user may be trying to reach.</span></span>

> [!NOTE]
> <span data-ttu-id="a0ad2-234">カスタムエラーページは、ASP.NET エンジンによって処理されるリソースに対して要求が行われた場合にのみ表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-234">The custom error page is only displayed when a request is made to a resource handled by the ASP.NET engine.</span></span> <span data-ttu-id="a0ad2-235">[IIS と ASP.NET 開発サーバー](core-differences-between-iis-and-the-asp-net-development-server-cs.md)チュートリアルの主な違いについて説明したように、web サーバーは特定の要求を処理することがあります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-235">As we discussed in the [Core Differences Between IIS and the ASP.NET Development Server](core-differences-between-iis-and-the-asp-net-development-server-cs.md) tutorial, the web server may handle certain requests itself.</span></span> <span data-ttu-id="a0ad2-236">既定では、IIS web サーバーは、ASP.NET エンジンを呼び出さずに、イメージや HTML ファイルなどの静的なコンテンツに対する要求を処理します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-236">By default, the IIS web server processes requests for static content like images and HTML files without invoking the ASP.NET engine.</span></span> <span data-ttu-id="a0ad2-237">その結果、ユーザーが存在しないイメージファイルを要求した場合、ASP ではなく IIS の既定の404エラーメッセージが返されます。ネットワークの構成されたエラーページ。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-237">Consequently, if the user requests a non-existent image file they will get back IIS's default 404 error message rather than ASP.NET's configured error page.</span></span>

## <a name="summary"></a><span data-ttu-id="a0ad2-238">まとめ</span><span class="sxs-lookup"><span data-stu-id="a0ad2-238">Summary</span></span>

<span data-ttu-id="a0ad2-239">ASP.NET アプリケーションでハンドルされない例外が発生すると、次の3つのエラーページのいずれかが表示されます。例外の詳細: 黄色い画面実行時エラー: 黄色い画面またはカスタムエラーページ。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-239">When an unhandled exception occurs in an ASP.NET application, the user is shown one of three error pages: the Exception Details Yellow Screen of Death; the Runtime Error Yellow Screen of Death; or a custom error page.</span></span> <span data-ttu-id="a0ad2-240">表示されるエラーページは、アプリケーションの `<customErrors>` 構成と、ユーザーがローカルまたはリモートのどちらにアクセスしているかによって異なります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-240">Which error page is displayed depends on the application's `<customErrors>` configuration and whether the user is visiting locally or remotely.</span></span> <span data-ttu-id="a0ad2-241">既定の動作では、ローカル訪問者に YSOD 例外の詳細が表示され、リモート訪問者に対してランタイムエラー YSOD が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-241">The default behavior is to show the Exception Details YSOD to local visitors and the Runtime Error YSOD to remote visitors.</span></span>

<span data-ttu-id="a0ad2-242">ランタイムエラー YSOD は、サイトにアクセスしているユーザーからの重要なエラー情報を隠しますが、サイトのルックアンドフィールから切り離され、アプリケーションの外観がバグになる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-242">While the Runtime Error YSOD hides potentially sensitive error information from the user visiting the site, it breaks from your site's look and feel and makes your application look buggy.</span></span> <span data-ttu-id="a0ad2-243">より適切な方法は、カスタムエラーページを使用することです。このページでは、カスタムエラーページを作成して設計し、`<customErrors>` セクションの `defaultRedirect` 属性でその URL を指定します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-243">A better approach is to use a custom error page, which entails creating and designing the custom error page and specifying its URL in the `<customErrors>` section's `defaultRedirect` attribute.</span></span> <span data-ttu-id="a0ad2-244">HTTP エラーの状態ごとに、複数のカスタムエラーページを使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-244">You can even have multiple custom error pages for different HTTP error statuses.</span></span>

<span data-ttu-id="a0ad2-245">カスタムエラーページは、運用環境の web サイトの包括的なエラー処理戦略の最初の手順です。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-245">The custom error page is the first step in a comprehensive error handling strategy for a website in production.</span></span> <span data-ttu-id="a0ad2-246">エラーの開発者に警告を出し、その詳細をログに記録することも重要です。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-246">Alerting the developer of the error and logging its details are also important steps.</span></span> <span data-ttu-id="a0ad2-247">次の3つのチュートリアルでは、エラー通知とログ記録の手法を紹介します。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-247">The next three tutorials explore techniques for error notification and logging.</span></span>

<span data-ttu-id="a0ad2-248">プログラミングを楽しんでください。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-248">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="a0ad2-249">参考資料</span><span class="sxs-lookup"><span data-stu-id="a0ad2-249">Further Reading</span></span>

<span data-ttu-id="a0ad2-250">このチュートリアルで説明しているトピックの詳細については、次のリソースを参照してください。</span><span class="sxs-lookup"><span data-stu-id="a0ad2-250">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="a0ad2-251">エラーページ、もう1回</span><span class="sxs-lookup"><span data-stu-id="a0ad2-251">Error Pages, One More Time</span></span>](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/)
- [<span data-ttu-id="a0ad2-252">例外のデザインのガイドライン</span><span class="sxs-lookup"><span data-stu-id="a0ad2-252">Design Guidelines for Exceptions</span></span>](https://msdn.microsoft.com/library/ms229014.aspx)
- [<span data-ttu-id="a0ad2-253">ユーザーフレンドリなエラーページ</span><span class="sxs-lookup"><span data-stu-id="a0ad2-253">User-Friendly Error Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/090606-1.aspx)
- [<span data-ttu-id="a0ad2-254">例外の処理とスロー</span><span class="sxs-lookup"><span data-stu-id="a0ad2-254">Handling and Throwing Exceptions</span></span>](https://msdn.microsoft.com/library/5b2yeyab.aspx)
- [<span data-ttu-id="a0ad2-255">ASP.NET でカスタムエラーページを適切に使用する</span><span class="sxs-lookup"><span data-stu-id="a0ad2-255">Properly Using Custom Error Pages in ASP.NET</span></span>](http://professionalaspnet.com/archive/2007/09/30/Properly-Using-Custom-Error-Pages-in-ASP.NET.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="a0ad2-256">[前へ](strategies-for-database-development-and-deployment-cs.md)
> [次へ](processing-unhandled-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="a0ad2-256">[Previous](strategies-for-database-development-and-deployment-cs.md)
[Next](processing-unhandled-exceptions-cs.md)</span></span>
