---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-vb
title: データベースの配置 (VB) |Microsoft Docs
author: rick-anderson
description: ASP.NET web アプリケーションを配置するには、開発環境から運用環境に必要なファイルとリソースを取得する必要があります。 Da の場合...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 96ac3e69-04c7-4917-ad06-5f8968c3fbf1
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-vb
msc.type: authoredcontent
ms.openlocfilehash: 8221025bec06e052016070f74deabb3e6d936045
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78455140"
---
# <a name="deploying-a-database-vb"></a><span data-ttu-id="a0f1d-104">データベースを配置する (VB)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-104">Deploying a Database (VB)</span></span>

<span data-ttu-id="a0f1d-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a0f1d-106">[コードのダウンロード](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_VB.zip)または[PDF のダウンロード](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-106">[Download Code](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_VB.zip) or [Download PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_vb.pdf)</span></span>

> <span data-ttu-id="a0f1d-107">ASP.NET web アプリケーションを配置するには、開発環境から運用環境に必要なファイルとリソースを取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-107">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="a0f1d-108">データドリブン web アプリケーションの場合、これにはデータベーススキーマとデータが含まれます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-108">For data-driven web applications this includes the database schema and data.</span></span> <span data-ttu-id="a0f1d-109">このチュートリアルは、開発環境から実稼働環境にデータベースを正常に配置するために必要な手順を説明するシリーズの最初のものです。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-109">This tutorial is the first in a series that explores the steps needed to successfully deploy the database from the development environment to production.</span></span>

### <a name="introduction"></a><span data-ttu-id="a0f1d-110">はじめに</span><span class="sxs-lookup"><span data-stu-id="a0f1d-110">Introduction</span></span>

<span data-ttu-id="a0f1d-111">ASP.NET web アプリケーションを配置するには、開発環境から運用環境に必要なファイルとリソースを取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-111">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="a0f1d-112">これまでに説明した6つのチュートリアルの中で、単純な書籍レビュー web アプリケーションをデプロイしました。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-112">Over the course of the past six tutorials we looked at deploying a simple Book Reviews web application.</span></span> <span data-ttu-id="a0f1d-113">このデモサイトは、多くのサーバー側リソース (ASP.NET ページ、構成ファイル、`Web.sitemap` ファイルなど) で構成されており、イメージや CSS ファイルなどのクライアント側のリソースと共に使用されていました。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-113">This demo site was comprised of a number of server-side resources - ASP.NET pages, configuration files, a `Web.sitemap` file, and so forth - along with client-side resources, like images and CSS files.</span></span> <span data-ttu-id="a0f1d-114">しかし、データドリブンの web アプリケーションはどうでしょうか。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-114">But what about data-driven web applications?</span></span> <span data-ttu-id="a0f1d-115">データベースを使用する web アプリケーションをデプロイするには、追加の手順を実行する必要がありますか。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-115">What extra steps must be taken to deploy a web application that uses a database?</span></span>

<span data-ttu-id="a0f1d-116">次のいくつかのチュートリアルでは、データドリブン web アプリケーションを配置するために必要な手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-116">Over the next several tutorials we will address the steps needed to deploy a data-driven web application.</span></span> <span data-ttu-id="a0f1d-117">このチュートリアルでは、まず、データベースのスキーマとコンテンツを開発環境から運用環境に取得する方法について説明します。次のチュートリアルでは、必要な構成変更について説明します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-117">This tutorial starts by examining how to get a database s schema and contents from the development environment to the production environment, while the subsequent tutorial looks at the needed configuration changes.</span></span> <span data-ttu-id="a0f1d-118">ここでは、アプリケーションサービス (メンバーシップ、ロール、プロファイルなど) を使用するデータベースを配置する際の課題について説明します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-118">Following that we'll explore challenges of deploying a database that uses the Application Services (Membership, Roles, Profile, and so on).</span></span>

## <a name="examining-the-updated-book-reviews-web-application"></a><span data-ttu-id="a0f1d-119">更新された書籍レビュー Web アプリケーションを調べる</span><span class="sxs-lookup"><span data-stu-id="a0f1d-119">Examining the Updated Book Reviews Web Application</span></span>

<span data-ttu-id="a0f1d-120">データドリブン web アプリケーションのデプロイをデモンストレーションするために、ブックレビュー web アプリケーションを単純な静的な web サイトからデータドリブンの web サイトに更新しました。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-120">In order to demonstrate deploying a data-driven web application, I ve updated the Book Reviews web application from a simple, static website to a data-driven one.</span></span> <span data-ttu-id="a0f1d-121">前と同様に、このチュートリアルのダウンロードには、Web アプリケーションプロジェクトモデルを使用するアプリケーションと、Web サイトプロジェクトモデルを使用するアプリケーションの2つのバージョンがあります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-121">As before, there are two versions of the application in this tutorial s download: one that uses the Web Application Project model and one that uses the Web Site Project model.</span></span>

<span data-ttu-id="a0f1d-122">更新された書籍レビュー web アプリケーションでは、 [SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx)データベースが使用されています。このデータベースは、サイト `App_Data` フォルダー (`~/App_Data/Reviews.mdf`) に格納されています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-122">The updated Book Reviews web application uses a [SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx) database, which is stored in the site s `App_Data` folder (`~/App_Data/Reviews.mdf`).</span></span> <span data-ttu-id="a0f1d-123">コンピューターに SQL Server 2008 がインストールされている場合は、エラーなしでデモを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-123">If you have SQL Server 2008 installed on your computer then the demo should run without error.</span></span> <span data-ttu-id="a0f1d-124">以前のバージョンの SQL Server がある場合は、free SQL Server 2008 Express Edition をインストールするか、このチュートリアルのダウンロードで入手可能なデータベーススクリプトを使用してデータベースを自分で作成することができます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-124">If you have an older version of SQL Server you can either install the free SQL Server 2008 Express Edition or you can use the database scripts available in this tutorial s download to create the database yourself.</span></span>

<span data-ttu-id="a0f1d-125">`Reviews.mdf` データベースには、次の4つのテーブルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-125">The `Reviews.mdf` database contains four tables:</span></span>

- <span data-ttu-id="a0f1d-126">`Genres`-各ジャンルのレコード (テクノロジ、架空、ビジネスなど) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-126">`Genres` - includes a record for each genre, such as Technology, Fiction, and Business.</span></span>
- <span data-ttu-id="a0f1d-127">`Books`-各レビューのレコードと、`Title`、`GenreId`、`ReviewDate`、`Review`などの列が含まれます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-127">`Books` - includes a record for each review, with columns like `Title`, `GenreId`, `ReviewDate`, and `Review`, among others.</span></span>
- <span data-ttu-id="a0f1d-128">`Authors`-レビューされた本を投稿した各作成者に関する情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-128">`Authors` - includes information about each author who has contributed to a reviewed book.</span></span>
- <span data-ttu-id="a0f1d-129">`BooksAuthors`-作成者がどのブックを記述したかを指定する多対多の結合テーブル。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-129">`BooksAuthors` - a many-to-many join table that specifies what authors have written what books.</span></span>

<span data-ttu-id="a0f1d-130">図1は、これら4つのテーブルの ER 図を示しています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-130">Figure 1 shows an ER diagram of these four tables.</span></span>

<span data-ttu-id="a0f1d-131">[書籍レビュー Web アプリケーション s データベースは、4つのテーブルで構成されて ![ます。](deploying-a-database-vb/_static/image2.jpg)](deploying-a-database-vb/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-131">[![The Book Reviews Web Application s Database is Comprised of Four Tables](deploying-a-database-vb/_static/image2.jpg)](deploying-a-database-vb/_static/image1.jpg)</span></span> 

<span data-ttu-id="a0f1d-132">**図 1**: 書籍レビュー Web アプリケーション s データベースは4つのテーブルで構成されています ([クリックすると、フルサイズの画像が表示](deploying-a-database-vb/_static/image3.jpg)されます)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-132">**Figure 1**: The Book Reviews Web Application s Database is Comprised of Four Tables ([Click to view full-size image](deploying-a-database-vb/_static/image3.jpg))</span></span>

<span data-ttu-id="a0f1d-133">以前のバージョンの書籍レビュー web サイトには、書籍ごとに個別の ASP.NET ページがありました。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-133">The previous version of the Book Reviews website had a separate ASP.NET page for each book.</span></span> <span data-ttu-id="a0f1d-134">たとえば、`~/Tech/TYASP35.aspx` という名前のページがありました。このページには、 *24 時間で ASP.NET 3.5 を教える*ためのレビューが含まれていました。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-134">For example, there was a page named `~/Tech/TYASP35.aspx` that contained the review for *Teach Yourself ASP.NET 3.5 in 24 Hours*.</span></span> <span data-ttu-id="a0f1d-135">この新しいデータドリブンバージョンの web サイトには、データベースに保存されているレビューと1つの ASP.NET ページがあります。*これには*、指定された書籍のレビューが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-135">This new data-driven version of the website has the reviews stored in the database and a single ASP.NET page, Review.aspx?ID=*bookId*, which displays the review for the specified book.</span></span> <span data-ttu-id="a0f1d-136">同様に、指定したジャンルのレビュー対象のブックを一覧表示する Genre. .aspx? ID =*Genreid*ページがあります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-136">Likewise, there is a Genre.aspx?ID=*genreId* page that lists the reviewed books in the specified genre.</span></span>

<span data-ttu-id="a0f1d-137">図2と図3は、`Genre.aspx` と `Review.aspx` のページが動作していることを示しています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-137">Figures 2 and 3 show the `Genre.aspx` and `Review.aspx` pages in action.</span></span> <span data-ttu-id="a0f1d-138">各ページのアドレスバーの URL に注意してください。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-138">Note the URL in the Address bar for each page.</span></span> <span data-ttu-id="a0f1d-139">図2では、Genre. .aspx? ID = 85d164ba-112347 c47-82a0-c8ec75de7e0e です。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-139">In Figure 2 it s Genre.aspx?ID=85d164ba-1123-4c47-82a0-c8ec75de7e0e.</span></span> <span data-ttu-id="a0f1d-140">85d164ba112347 c47-82a0-c8ec75de7e0e はテクノロジのジャンルの `GenreId` 値であるため、ページの見出しは "テクノロジレビュー" を読み取り、箇条書きリストは、このジャンルに分類されているサイト上のレビューを列挙します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-140">Because 85d164ba-1123-4c47-82a0-c8ec75de7e0e is the `GenreId` value for the Technology genre, the page s heading reads "Technology Reviews" and the bulleted list enumerates those reviews on the site that fall under this genre.</span></span>

<span data-ttu-id="a0f1d-141">[[テクノロジのジャンル] ページ ![](deploying-a-database-vb/_static/image5.jpg)](deploying-a-database-vb/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-141">[![The Technology Genre Page](deploying-a-database-vb/_static/image5.jpg)](deploying-a-database-vb/_static/image4.jpg)</span></span> 

<span data-ttu-id="a0f1d-142">**図 2**: [テクノロジのジャンル] ページ ([クリックすると、フルサイズの画像が表示](deploying-a-database-vb/_static/image6.jpg)されます)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-142">**Figure 2**: The Technology Genre Page ([Click to view full-size image](deploying-a-database-vb/_static/image6.jpg))</span></span>

<span data-ttu-id="a0f1d-143">[ASP.NET 3.5 のレビューを24時間で ![](deploying-a-database-vb/_static/image8.jpg)](deploying-a-database-vb/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-143">[![The Review for Teach Yourself ASP.NET 3.5 in 24 Hours](deploying-a-database-vb/_static/image8.jpg)](deploying-a-database-vb/_static/image7.jpg)</span></span> 

<span data-ttu-id="a0f1d-144">**図 3**: *24 時間で3.5 を ASP.NET*していることを確認[する (クリックすると、フルサイズの画像が表示](deploying-a-database-vb/_static/image9.jpg)されます)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-144">**Figure 3**: The Review for *Teach Yourself ASP.NET 3.5 in 24 Hours* ([Click to view full-size image](deploying-a-database-vb/_static/image9.jpg))</span></span>

<span data-ttu-id="a0f1d-145">また、書籍レビュー web アプリケーションには、管理者がジャンル、レビュー、および作成者情報の追加、編集、削除を行うことができる管理セクションも含まれています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-145">The Book Reviews web application also includes an administration section where administrators can add, edit, and delete genres, reviews, and author information.</span></span> <span data-ttu-id="a0f1d-146">現在、すべての訪問者は、[管理] セクションにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-146">Currently, any visitor can access the administration section.</span></span> <span data-ttu-id="a0f1d-147">今後のチュートリアルでは、ユーザーアカウントのサポートを追加し、管理ページへの承認されたユーザーのみを許可します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-147">In a future tutorial we'll add support for user accounts and only permit authorized users into the administration pages.</span></span>

<span data-ttu-id="a0f1d-148">Book review アプリケーションをダウンロードする場合は、その目的はデータドリブンアプリケーションの配置を示すことを念頭に置いてください。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-148">If you download the Book Reviews application please keep in mind that its purpose is to demonstrate deploying a data-driven application.</span></span> <span data-ttu-id="a0f1d-149">アプリケーションの設計に関しては、ベストプラクティスは示されていません。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-149">It does not exhibit best practices as far as application design.</span></span> <span data-ttu-id="a0f1d-150">たとえば、個別のデータアクセス層 (DAL) はありません。ASP.NET ページは、分離コードクラスの SqlDataSource コントロールまたは ADO.NET コードを使用して、データベースと直接通信します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-150">For example, there is no separate Data Access Layer (DAL); the ASP.NET pages communicate directly with the database through the SqlDataSource control or ADO.NET code in their code-behind classes.</span></span> <span data-ttu-id="a0f1d-151">階層型アーキテクチャを使用したデータドリブンアプリケーションの作成の詳細については、「 [*データチュートリアルの*](../../data-access/index.md)使用」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-151">For a more in-depth look at creating data-driven applications using a tiered architecture, refer to my [*Working with Data* tutorials](../../data-access/index.md).</span></span>

## <a name="databases-on-development-versus-production"></a><span data-ttu-id="a0f1d-152">開発中のデータベースと運用環境</span><span class="sxs-lookup"><span data-stu-id="a0f1d-152">Databases on Development Versus Production</span></span>

<span data-ttu-id="a0f1d-153">データドリブン web アプリケーションで開発を開始する場合は、データベース接続文字列を指定する必要があります。これにより、データベースへの接続方法に関するアプリケーションの詳細が提供されます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-153">When you start development on a data-driven web application you must specify a database connection string, which provides the application details on how to connect to the database.</span></span> <span data-ttu-id="a0f1d-154">この接続文字列は、特にデータベースサーバー、データベース名、およびセキュリティ情報を指定します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-154">This connection string specifies, among other things, the database server, the database name, and security information.</span></span> <span data-ttu-id="a0f1d-155">多くの場合、開発中にアプリケーションで使用されるデータベースは、実稼働環境で使用されるデータベースとは異なります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-155">Most often, the database used by the application during development is different than the database used when it s in production.</span></span> <span data-ttu-id="a0f1d-156">開発と運用のために異なるデータベースを使用することには多くの利点があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-156">There are many benefits of using different databases for development versus production.</span></span> <span data-ttu-id="a0f1d-157">開発中のデータベースが異なると、ライブデータの変更や削除について心配する必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-157">Having a different database in development means you don t have to worry about accidentally modifying or deleting live data.</span></span> <span data-ttu-id="a0f1d-158">また、運用環境でのアプリケーションへの影響について心配することなく、ダミーのテストデータを作成したり、データモデルに重大な変更を加えたりすることができます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-158">It also lets you put in dummy test data or make breaking changes to the data model without having to worry about the effects on the application in production.</span></span> <span data-ttu-id="a0f1d-159">開発環境と運用環境で異なるデータベースを使用する場合の欠点は、アプリケーションがデータベースに配置され、データベースのスキーマまたはデータに対する関連する変更もデプロイする必要があることです。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-159">The downside of having a different database in the development and production environments is that when the application is deployed the database and any pertinent changes to the database s schema or data must also be deployed.</span></span>

<span data-ttu-id="a0f1d-160">最初の配置の前に、データベースのインスタンスは1つだけで、そのインスタンスは開発環境に存在します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-160">Prior to the first deployment, there is only one instance of the database, and that instance is in the development environment.</span></span> <span data-ttu-id="a0f1d-161">アプリケーションを初めて運用環境にデプロイする場合、必要なサーバー側とクライアント側のファイルをコピーするだけでなく、開発環境から運用環境にデータベースをコピーすることも必要です。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-161">When deploying the application to production for the first time we must not only copy up the necessary server-side and client-side files, but also copy the database from the development environment to the production environment.</span></span> <span data-ttu-id="a0f1d-162">ここでは、書籍レビュー web アプリケーションをご利用いただけます。データベースは開発環境の `App_Data` フォルダーにありますが、運用環境にはまだプッシュされていません。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-162">This is where we stand right now with the Book Reviews web application - the database resides in the `App_Data` folder in our development environment but has not yet been pushed up to the production environment.</span></span>

<span data-ttu-id="a0f1d-163">アプリケーションが配置されると、データベースのコピーが2つ存在します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-163">Once the application has been deployed there are two copies of the database.</span></span> <span data-ttu-id="a0f1d-164">アプリケーションが成熟するにつれて、新しい機能が追加され、データモデルに変更が必要になることがあります (既存のテーブルに新しい列を追加したり、既存の列に変更を加えたり、新しいテーブルを追加したりするなど)。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-164">As the application matures, new features may be added, necessitating a change to the data model (such as adding new columns to existing tables, making changes to existing columns, adding new tables, and so on).</span></span> <span data-ttu-id="a0f1d-165">Web アプリケーションが次に配置されるときに、前回の配置以降に開発環境でデータベースに適用された変更を運用データベースに適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-165">When the web application is next deployed, the changes applied to the database in the development environment since the last deployment must be applied to the production database.</span></span> <span data-ttu-id="a0f1d-166">このプロセスを管理するためのいくつかの戦略については、今後のチュートリアルで説明します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-166">Some strategies for managing this process are discussed in a future tutorial.</span></span> <span data-ttu-id="a0f1d-167">このチュートリアルでは、データベース全体を開発環境から運用環境に配置する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-167">This tutorial focuses on deploying the entire database from the development environment to production.</span></span>

## <a name="deploying-the-database-to-the-production-environment"></a><span data-ttu-id="a0f1d-168">実稼働環境へのデータベースの配置</span><span class="sxs-lookup"><span data-stu-id="a0f1d-168">Deploying the Database to the Production Environment</span></span>

<span data-ttu-id="a0f1d-169">このチュートリアルの残りの部分では、開発環境から運用環境にデータベースを配置する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-169">The remainder of this tutorial looks at how to deploy the database from the development environment to the production environment.</span></span> <span data-ttu-id="a0f1d-170">に従っている場合は、web ホストプロバイダーのアカウントに Microsoft SQL Server データベースのサポートが含まれていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-170">If you are following along you need to make sure that your account with your web host provider includes Microsoft SQL Server database support.</span></span> <span data-ttu-id="a0f1d-171">また、データベースサーバー名、データベース名、データベースへの接続に使用するユーザー名とパスワードなど、いくつかの情報が必要です。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-171">You'll also need to have some information at hand, namely the database server name, the database name, and the username and password used to connect to the database.</span></span>

<span data-ttu-id="a0f1d-172">このチュートリアルで前述したように、書籍のレビュー用 web サイトのデータベースは、`App_Data` フォルダーに格納されている SQL Server 2008 Express Edition データベースです。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-172">As noted earlier in this tutorial, the Book Reviews website s database is a SQL Server 2008 Express Edition database stored in the `App_Data` folder.</span></span> <span data-ttu-id="a0f1d-173">このようなデータベースの配置は、開発環境から運用環境に `App_Data` フォルダーをコピーするのと同じように簡単に行うことができます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-173">It would stand to reason that deploying such a database would be as simple as copying the `App_Data` folder from the development environment to the production environment.</span></span> <span data-ttu-id="a0f1d-174">ただし、ほとんどの web ホストプロバイダーでは、セキュリティ上の理由により、`App_Data` フォルダー内のデータベースのホスティングはサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-174">However, most web host providers do not support hosting databases in the `App_Data` folder because of security reasons.</span></span> <span data-ttu-id="a0f1d-175">代わりに、web ホストは、環境内の SQL Server データベースサーバーにアカウントを提供します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-175">Instead, web hosts provide an account on a SQL Server database server within their environment.</span></span> <span data-ttu-id="a0f1d-176">開発環境から運用環境にデータベースを配置するには、web ホスト s データベースサーバーにデータベースを登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-176">Deploying the database from your development environment to the production environment requires getting your database registered on your web host s database server.</span></span>

<span data-ttu-id="a0f1d-177">では、開発環境から運用環境にデータベースを取得するにはどうすればよいでしょうか。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-177">So how do you get your database from the development environment to the production environment?</span></span> <span data-ttu-id="a0f1d-178">これを実現するには、web ホストが提供するサービスに応じていくつかの方法があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-178">There are a couple ways to accomplish this depending on what services your web host offers.</span></span> <span data-ttu-id="a0f1d-179">DiscountASP.NET などの一部のホストでは、データベースまたは実際の `.mdf` ファイルのバックアップを web サイトに FTP 接続してから、コントロールパネルからバックアップファイルを復元するか、`.mdf` ファイルを SQL Server データベースサーバーにアタッチすることができます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-179">With some hosts, such as DiscountASP.NET, you can FTP a backup of the database or the actual `.mdf` file to your website and then, from the Control Panel, restore the backup file or attach the `.mdf` file to the SQL Server database server.</span></span> <span data-ttu-id="a0f1d-180">このようなツールを使用すると、`App_Data` フォルダーを実稼働環境にコピーしてから、コントロールパネルでアタッチするだけで、簡単にデータベースを配置できます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-180">With such tools deploying the database is as simple as copying the `App_Data` folder to the production environment and then attaching it via the Control Panel.</span></span> <span data-ttu-id="a0f1d-181">これは、データベースを初めてパブリッシュする最も簡単かつ迅速な方法です。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-181">This is perhaps the easiest and quickest way to publish your database for the first time.</span></span>

<span data-ttu-id="a0f1d-182">別の方法として、データベース公開ウィザードを使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-182">Another approach is to use the Database Publishing Wizard.</span></span> <span data-ttu-id="a0f1d-183">データベース発行ウィザードは、データベースのスキーマ (テーブル、ストアドプロシージャ、ビュー、ユーザー定義関数など) を作成するための SQL コマンドを生成する Windows デスクトップアプリケーションです。また、必要に応じて、テーブル内のデータを生成することもできます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-183">The Database Publishing Wizard is a Windows desktop application that will generate the SQL commands to create your database s schema - the tables, stored procedures, views, user-defined functions, and so forth - and, optionally, the data in its tables.</span></span> <span data-ttu-id="a0f1d-184">その後、SQL Server Management Studio を使用して web ホストプロバイダー s データベースサーバーに接続し、このスクリプトを実行して実稼働環境でデータベースを複製できます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-184">You can then connect to your web host provider s database server through SQL Server Management Studio and then execute this script to duplicate the database on production.</span></span> <span data-ttu-id="a0f1d-185">さらに、web ホストプロバイダーが Microsoft の[データベース公開サービス](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home)をサポートしている場合は、データベース発行ウィザードによって生成されたスクリプトをデータベースサーバーで自動的に実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-185">Even better, if your web host provider supports Microsoft s [Database Publishing Services](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home) you can have the script generated by the Database Publishing Wizard automatically executed on the database server on your behalf.</span></span> <span data-ttu-id="a0f1d-186">データベース発行ウィザードでは、データベースのスキーマとデータを作成するスクリプトが生成されるため、web ホストプロバイダーがアップロードされた `.mdf` ファイルのアタッチなどの機能を提供するかどうかに関係なく機能します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-186">Because the Database Publishing Wizard generates a script that creates the database s schema and data, it will work regardless of whether your web host provider offers features like attaching an uploaded `.mdf` file.</span></span>

### <a name="generating-the-sql-commands-to-create-the-database-schema-and-data-using-the-database-publishing-wizard"></a><span data-ttu-id="a0f1d-187">データベース発行ウィザードを使用してデータベーススキーマとデータを作成するための SQL コマンドを生成する</span><span class="sxs-lookup"><span data-stu-id="a0f1d-187">Generating the SQL Commands to Create the Database Schema and Data Using the Database Publishing Wizard</span></span>

<span data-ttu-id="a0f1d-188">データベース公開ウィザードを使用して、ブックレビューデータベースを運用環境に配置する手順を説明します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-188">Let s walk through using the Database Publishing Wizard to deploy the Book Reviews database to production.</span></span> <span data-ttu-id="a0f1d-189">Visual Studio 2008 以降を使用している場合は、データベース発行ウィザードが既にインストールされています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-189">If you are using Visual Studio 2008 or beyond, the Database Publishing Wizard is already installed.</span></span> <span data-ttu-id="a0f1d-190">Visual Studio 2005 を使用している場合は、最初にウィザードを[ダウンロードしてインストール](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en)する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-190">If you are using Visual Studio 2005 then you will need to first [download and install](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en) the wizard.</span></span>

<span data-ttu-id="a0f1d-191">Visual Studio を開き、`Reviews.mdf` データベースに移動します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-191">Open Visual Studio and navigate to the `Reviews.mdf` database.</span></span> <span data-ttu-id="a0f1d-192">Visual Web Developer を使用している場合は、データベースエクスプローラーにアクセスします。Visual Studio を使用している場合は、サーバーエクスプローラーを使用します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-192">If you are using Visual Web Developer, go to the Database Explorer; if you are using Visual Studio, use the Server Explorer.</span></span> <span data-ttu-id="a0f1d-193">図4は、Visual Web Developer のデータベースエクスプローラーの `Reviews.mdf` データベースを示しています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-193">Figure 4 shows the `Reviews.mdf` database in the Database Explorer in Visual Web Developer.</span></span> <span data-ttu-id="a0f1d-194">図4に示すように、`Reviews.mdf` データベースは4つのテーブル、3つのストアドプロシージャ、およびユーザー定義関数で構成されています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-194">As Figure 4 shows, the `Reviews.mdf` database is composed of four tables, three stored procedures, and a user-defined function.</span></span>

<span data-ttu-id="a0f1d-195">[![データベースエクスプローラーまたはサーバーエクスプローラーでデータベースを検索します。](deploying-a-database-vb/_static/image11.jpg)](deploying-a-database-vb/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-195">[![Locate the Database in the Database Explorer or Server Explorer](deploying-a-database-vb/_static/image11.jpg)](deploying-a-database-vb/_static/image10.jpg)</span></span> 

<span data-ttu-id="a0f1d-196">**図 4**: データベースエクスプローラーまたはサーバーエクスプローラーでデータベースを検索[する (クリックすると、フルサイズの画像が表示](deploying-a-database-vb/_static/image12.jpg)されます)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-196">**Figure 4**: Locate the Database in the Database Explorer or Server Explorer ([Click to view full-size image](deploying-a-database-vb/_static/image12.jpg))</span></span>

<span data-ttu-id="a0f1d-197">データベース名を右クリックし、コンテキストメニューから [プロバイダーに発行] オプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-197">Right-click on the database name and choose the "Publish to provider" option from the context menu.</span></span> <span data-ttu-id="a0f1d-198">これにより、データベース発行ウィザードが起動します (図5を参照)。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-198">This launches the Database Publishing Wizard (see Figure 5).</span></span> <span data-ttu-id="a0f1d-199">[次へ] をクリックして、スプラッシュスクリーンの前に進みます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-199">Click Next to advance past the splash screen.</span></span>

<span data-ttu-id="a0f1d-200">[データベース発行ウィザードのスプラッシュスクリーンの ![](deploying-a-database-vb/_static/image14.jpg)](deploying-a-database-vb/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-200">[![The Database Publishing Wizard Splash Screen](deploying-a-database-vb/_static/image14.jpg)](deploying-a-database-vb/_static/image13.jpg)</span></span> 

<span data-ttu-id="a0f1d-201">**図 5**: データベース発行ウィザードのスプラッシュスクリーン ([クリックすると、フルサイズの画像が表示](deploying-a-database-vb/_static/image15.jpg)されます)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-201">**Figure 5**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-vb/_static/image15.jpg))</span></span>

<span data-ttu-id="a0f1d-202">ウィザードの2番目の画面には、データベース発行ウィザードからアクセスできるデータベースが一覧表示され、選択したデータベース内のすべてのオブジェクトをスクリプト化するか、スクリプトを作成するオブジェクトを選択できます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-202">The second screen in the wizard lists the databases accessible to the Database Publishing Wizard and lets you choose whether to script all objects in the selected database or to pick which objects to script.</span></span> <span data-ttu-id="a0f1d-203">適切なデータベースを選択し、[選択したデータベースのすべてのオブジェクトをスクリプト化する] オプションをオンのままにします。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-203">Select the appropriate database and leave the "Script all objects in the selected database" option checked.</span></span>

> [!NOTE]
> <span data-ttu-id="a0f1d-204">図6に示されている画面で [次へ] をクリックしたときに "データベース*databaseName*に、このウィザードでスクリプト化されたオブジェクトがありません" というエラーが表示される場合は、データベースファイルへのパスが長すぎないことを確認してください。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-204">If you get the error "There are no objects in database *databaseName* of the types scriptable by this wizard" when clicking Next in the screen shown in Figure 6, make sure that the path to your database file is not overly long.</span></span> <span data-ttu-id="a0f1d-205">データベース発行ウィザードの [プロジェクト] ページの[このディスカッション項目](http://www.codeplex.com/sqlhost/Thread/View.aspx?ThreadId=11014)に示されているように、このエラーは、データベースファイルへのパスが長すぎる場合に発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-205">As noted in [this discussion item](http://www.codeplex.com/sqlhost/Thread/View.aspx?ThreadId=11014) on the Database Publishing Wizard project page, this error can arise if the path to the database file is too long.</span></span>

<span data-ttu-id="a0f1d-206">[データベース発行ウィザードのスプラッシュスクリーンの ![](deploying-a-database-vb/_static/image17.jpg)](deploying-a-database-vb/_static/image16.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-206">[![The Database Publishing Wizard Splash Screen](deploying-a-database-vb/_static/image17.jpg)](deploying-a-database-vb/_static/image16.jpg)</span></span> 

<span data-ttu-id="a0f1d-207">**図 6**: データベース発行ウィザードのスプラッシュスクリーン ([クリックすると、フルサイズの画像が表示](deploying-a-database-vb/_static/image18.jpg)されます)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-207">**Figure 6**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-vb/_static/image18.jpg))</span></span>

<span data-ttu-id="a0f1d-208">次の画面では、スクリプトファイルを生成することができます。また、web ホストでサポートされている場合は、web ホストプロバイダー s データベースサーバーにデータベースを直接パブリッシュすることもできます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-208">From the next screen you can generate a script file or, if your web host supports it, publish the database directly to your web host provider s database server.</span></span> <span data-ttu-id="a0f1d-209">図7に示すように、スクリプトは `C:\REVIEWS.MDF.sql`ファイルに書き込まれています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-209">As Figure 7 shows, I am having the script written to the file `C:\REVIEWS.MDF.sql`.</span></span>

<span data-ttu-id="a0f1d-210">[データベースをファイルにスクリプト化 ![か、Web ホストプロバイダーに直接パブリッシュします。](deploying-a-database-vb/_static/image20.jpg)](deploying-a-database-vb/_static/image19.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-210">[![Script the Database to a File or Publish it Directly to Your Web Host Provider](deploying-a-database-vb/_static/image20.jpg)](deploying-a-database-vb/_static/image19.jpg)</span></span> 

<span data-ttu-id="a0f1d-211">**図 7**: データベースをファイルにスクリプト化するか、Web ホストプロバイダーに直接発行する ([クリックすると、フルサイズのイメージが表示](deploying-a-database-vb/_static/image21.jpg)されます)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-211">**Figure 7**: Script the Database to a File or Publish it Directly to Your Web Host Provider ([Click to view full-size image](deploying-a-database-vb/_static/image21.jpg))</span></span>

<span data-ttu-id="a0f1d-212">後続の画面では、さまざまなスクリプト作成オプションを入力するように求められます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-212">The subsequent screen prompts you for a variety of scripting options.</span></span> <span data-ttu-id="a0f1d-213">これらの既存のオブジェクトを削除するために、スクリプトに drop ステートメントを含めるかどうかを指定できます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-213">You can specify whether the script should include drop statements to remove these existing objects.</span></span> <span data-ttu-id="a0f1d-214">これは既定で True に設定されています。初めてデータベースを配置する場合は問題ありません。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-214">This defaults to True, which is fine when deploying a database for the first time.</span></span> <span data-ttu-id="a0f1d-215">また、ターゲットデータベースが2000、SQL Server 2005、SQL Server 2008 のいずれである SQL Server かを指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-215">You can also specify whether the target database is SQL Server 2000, SQL Server 2005, or SQL Server 2008.</span></span> <span data-ttu-id="a0f1d-216">最後に、スキーマとデータの両方、データのみ、またはスキーマだけをスクリプトに含めるかどうかを指定できます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-216">Finally, you can indicate whether to script the schema and data, just the data, or just the schema.</span></span> <span data-ttu-id="a0f1d-217">スキーマは、データベースオブジェクト、テーブル、ストアドプロシージャ、ビューなどのコレクションです。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-217">The schema is the collection of database objects, the tables, stored procedures, views, and so on.</span></span> <span data-ttu-id="a0f1d-218">データは、テーブルに存在する情報です。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-218">The data is the information residing in the tables.</span></span>

<span data-ttu-id="a0f1d-219">図8に示すように、既存のデータベースオブジェクトを削除し、SQL Server 2008 データベースのスクリプトを生成し、スキーマとデータの両方をパブリッシュするようにウィザードを構成しました。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-219">As Figure 8 illustrates, I ve got the wizard configured to drop existing database objects, to generate script for a SQL Server 2008 database, and to publish both the schema and data.</span></span>

<span data-ttu-id="a0f1d-220">[パブリッシングオプションを指定 ![には](deploying-a-database-vb/_static/image23.jpg)](deploying-a-database-vb/_static/image22.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-220">[![Specify the Publishing Options](deploying-a-database-vb/_static/image23.jpg)](deploying-a-database-vb/_static/image22.jpg)</span></span> 

<span data-ttu-id="a0f1d-221">**図 8**: 発行オプションを指定[する (クリックすると、フルサイズの画像が表示](deploying-a-database-vb/_static/image24.jpg)されます)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-221">**Figure 8**: Specify the Publishing Options ([Click to view full-size image](deploying-a-database-vb/_static/image24.jpg))</span></span>

<span data-ttu-id="a0f1d-222">最後の2つの画面には、実行されようとしている操作がまとめられ、スクリプトの状態が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-222">The final two screens summarize the actions that are about to be taken and then display the status of the scripting.</span></span> <span data-ttu-id="a0f1d-223">ウィザードを実行した結果、実稼働環境でデータベースを作成し、開発時と同じデータを設定するために必要な SQL コマンドを含むスクリプトファイルが作成されます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-223">The net result of running the wizard is that we have a script file that contains the SQL commands needed to create the database on production and populate it with the same data as on development.</span></span>

### <a name="executing-the-sql-commands-on-the-production-environment-database"></a><span data-ttu-id="a0f1d-224">運用環境データベースでの SQL コマンドの実行</span><span class="sxs-lookup"><span data-stu-id="a0f1d-224">Executing the SQL Commands On the Production Environment Database</span></span>

<span data-ttu-id="a0f1d-225">これで、データベースとそのデータを作成するための SQL コマンドを含むスクリプトが完成したので、実稼働データベースでスクリプトを実行できます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-225">Now that we have the script that contains the SQL commands to create the database and its data all that remains is to execute the script on the production database.</span></span> <span data-ttu-id="a0f1d-226">一部の web ホストプロバイダーでは、コントロールパネルにテキストボックスが用意されており、データベースで実行する SQL コマンドを入力できます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-226">Some web host providers offer a textbox in their Control Panel where you can enter SQL commands to execute on your database.</span></span> <span data-ttu-id="a0f1d-227">非常に大きなスクリプトファイルがある場合、このオプションは機能しない可能性があります (たとえば、`REVIEWS.MDF.sql` スクリプトファイルのサイズが 425 KB を超えています)。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-227">If you have a very large script file then this option might not work (the `REVIEWS.MDF.sql` script file is over 425 KB in size, for instance).</span></span>

<span data-ttu-id="a0f1d-228">より優れたアプローチは、SQL Server Management Studio (SSMS) を使用して実稼働データベースサーバーに直接接続することです。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-228">A better approach is to connect directly to the production database server using SQL Server Management Studio (SSMS).</span></span> <span data-ttu-id="a0f1d-229">Express Edition 以外の SQL Server がコンピューターにインストールされている場合は、既に SSMS がインストールされている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-229">If you have a non-Express Edition of SQL Server installed on your computer then you likely already have SSMS installed.</span></span> <span data-ttu-id="a0f1d-230">それ以外の場合は、SQL Server Management Studio Express Edition の無料コピーを[ダウンロードしてインストール](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)することができます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-230">Otherwise, you can [download and install](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) a free copy of SQL Server Management Studio Express Edition.</span></span>

<span data-ttu-id="a0f1d-231">SSMS を起動し、web ホストプロバイダーから提供された情報を使用して、web ホスト s データベースサーバーに接続します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-231">Launch SSMS and connect to your web host s database server using the information provided by your web host provider.</span></span>

<span data-ttu-id="a0f1d-232">[Web ホストプロバイダー s データベースサーバーに接続 ![](deploying-a-database-vb/_static/image26.jpg)](deploying-a-database-vb/_static/image25.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-232">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-vb/_static/image26.jpg)](deploying-a-database-vb/_static/image25.jpg)</span></span> 

<span data-ttu-id="a0f1d-233">**図 9**: Web ホストプロバイダー s データベースサーバーに接続する ([クリックすると、フルサイズの画像が表示](deploying-a-database-vb/_static/image27.jpg)される)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-233">**Figure 9**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-vb/_static/image27.jpg))</span></span>

<span data-ttu-id="a0f1d-234">[データベース] タブを展開し、データベースを見つけます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-234">Expand the Databases tab and locate your database.</span></span> <span data-ttu-id="a0f1d-235">ツールバーの左上隅にある [新しいクエリ] ボタンをクリックし、データベース発行ウィザードによって作成されたスクリプトファイルから SQL コマンドを貼り付けます。次に、[実行] ボタンをクリックして、運用データベースサーバーでこれらのコマンドを実行します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-235">Click the New Query button in the upper left corner of the Toolbar, paste in the SQL commands from the script file created by the Database Publishing Wizard, and click the Execute button to run these commands on the production database server.</span></span> <span data-ttu-id="a0f1d-236">スクリプトファイルが特に大きい場合は、コマンドの実行に数分かかることがあります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-236">If your script file is especially large it may take several minutes to execute the commands.</span></span>

<span data-ttu-id="a0f1d-237">[Web ホストプロバイダー s データベースサーバーに接続 ![](deploying-a-database-vb/_static/image29.jpg)](deploying-a-database-vb/_static/image28.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-237">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-vb/_static/image29.jpg)](deploying-a-database-vb/_static/image28.jpg)</span></span> 

<span data-ttu-id="a0f1d-238">**図 10**: Web ホストプロバイダー s データベースサーバーに接続する ([クリックすると、フルサイズの画像が表示](deploying-a-database-vb/_static/image30.jpg)される)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-238">**Figure 10**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-vb/_static/image30.jpg))</span></span>

<span data-ttu-id="a0f1d-239">これで完了です。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-239">That s all there is to it!</span></span> <span data-ttu-id="a0f1d-240">この時点で、開発データベースが運用環境に複製されました。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-240">At this point the development database has been duplicated to production.</span></span> <span data-ttu-id="a0f1d-241">SSMS でデータベースを更新すると、新しいデータベースオブジェクトが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-241">If you Refresh the database in SSMS you should see the new database objects.</span></span> <span data-ttu-id="a0f1d-242">図11は、実稼働データベースのテーブル、ストアドプロシージャ、およびユーザー定義関数を示しています。これらの関数は、開発データベース上でそれらをミラー化します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-242">Figure 11 shows the production database s tables, stored procedures, and user-defined functions, which mirror those on the development database.</span></span> <span data-ttu-id="a0f1d-243">また、データをパブリッシュするようにデータベース発行ウィザードに指示したので、実稼働データベースのテーブルのデータは、ウィザードの実行時に開発データベースのテーブルと同じになります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-243">And because we instructed the Database Publishing Wizard to publish the data, the production database s tables have the same data as the development database s tables at the time the wizard was executed.</span></span> <span data-ttu-id="a0f1d-244">図12に、実稼働データベースの `Books` テーブルのデータを示します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-244">Figure 12 shows the data in the `Books` table on the production database.</span></span>

<span data-ttu-id="a0f1d-245">[データベースオブジェクトが実稼働データベースで複製された ![](deploying-a-database-vb/_static/image32.jpg)](deploying-a-database-vb/_static/image31.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-245">[![The Database Objects Have Been Duplicated on the Production Database](deploying-a-database-vb/_static/image32.jpg)](deploying-a-database-vb/_static/image31.jpg)</span></span> 

<span data-ttu-id="a0f1d-246">**図 11**: データベースオブジェクトが実稼働データベースで複製されている ([クリックしてフルサイズの画像を表示する](deploying-a-database-vb/_static/image33.jpg))</span><span class="sxs-lookup"><span data-stu-id="a0f1d-246">**Figure 11**: The Database Objects Have Been Duplicated on the Production Database ([Click to view full-size image](deploying-a-database-vb/_static/image33.jpg))</span></span>

<span data-ttu-id="a0f1d-247">[実稼働データベースに開発データベースと同じデータが含まれて ![](deploying-a-database-vb/_static/image35.jpg)](deploying-a-database-vb/_static/image34.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-247">[![The Production Database Contains the Same Data as on the Development Database](deploying-a-database-vb/_static/image35.jpg)](deploying-a-database-vb/_static/image34.jpg)</span></span> 

<span data-ttu-id="a0f1d-248">**図 12**: 運用データベースに開発データベースと同じデータが含まれている ([クリックしてフルサイズの画像を表示する](deploying-a-database-vb/_static/image36.jpg))</span><span class="sxs-lookup"><span data-stu-id="a0f1d-248">**Figure 12**: The Production Database Contains the Same Data as on the Development Database ([Click to view full-size image](deploying-a-database-vb/_static/image36.jpg))</span></span>

<span data-ttu-id="a0f1d-249">この時点で、開発データベースは運用環境にのみデプロイされています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-249">At this point we have only deployed the development database to production.</span></span> <span data-ttu-id="a0f1d-250">Web アプリケーション自体のデプロイ、または運用環境でアプリケーションが運用データベースを使用するために必要な構成変更を確認していません。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-250">We have not yet looked at deploying the web application itself or examined what configuration changes are needed to have the application on production use the production database.</span></span> <span data-ttu-id="a0f1d-251">これらの問題については、次のチュートリアルで説明します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-251">We'll cover these issues in the next tutorial!</span></span>

## <a name="summary"></a><span data-ttu-id="a0f1d-252">まとめ</span><span class="sxs-lookup"><span data-stu-id="a0f1d-252">Summary</span></span>

<span data-ttu-id="a0f1d-253">データドリブン web アプリケーションを配置するには、開発時に使用したデータベースを運用環境にコピーする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-253">Deploying a data-driven web application requires copying the database used during development to the production environment.</span></span> <span data-ttu-id="a0f1d-254">多くの web ホストプロバイダーには、データベースの配置プロセスを簡略化するツールが用意されています。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-254">Many web host providers offer tools to simplify the process of deploying a database.</span></span> <span data-ttu-id="a0f1d-255">たとえば、DiscountASP.NET を使用すると、データベース `.mdf` ファイル (またはバックアップ) に FTP 接続してから、コントロールパネルからデータベースサーバーにデータベースをアタッチすることができます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-255">For example, with DiscountASP.NET you can FTP your database `.mdf` file (or a backup) and then attach the database to the database server from the Control Panel.</span></span> <span data-ttu-id="a0f1d-256">Web ホストプロバイダーが提供する機能に関係なく機能するもう1つのオプションは、Microsoft のデータベース発行ウィザードツールです。これにより、開発用データベースのスキーマとデータを作成するための SQL コマンドのスクリプトが生成されます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-256">Another option that works regardless of what features your web host provider offers is Microsoft s Database Publishing Wizard tool, which generates a script of SQL commands to create the development database s schema and data.</span></span> <span data-ttu-id="a0f1d-257">このスクリプトが生成されたら、実稼働データベースで実行できます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-257">Once this script has been generated you can execute it on the production database.</span></span>

<span data-ttu-id="a0f1d-258">この書籍では、web アプリケーション s データベースが運用環境にあることを確認したので、アプリケーションをデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-258">Now that the Book Reviews web application s database is on production we can deploy the application.</span></span> <span data-ttu-id="a0f1d-259">ただし、web アプリケーションの構成情報によってデータベースへの接続文字列が指定され、その接続文字列によって開発データベースが参照されます。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-259">However, the web application s configuration information specifies the connection string to the database, and that connection string references the development database.</span></span> <span data-ttu-id="a0f1d-260">この接続文字列情報は、サイトを運用環境に展開するときに更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-260">We need to update this connection string information when deploying the site to production.</span></span> <span data-ttu-id="a0f1d-261">次のチュートリアルでは、これらの構成の違いについて説明し、データドリブンブックレビューサイトを運用環境に発行するために必要な手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-261">The next tutorial looks at these configuration differences and walks through the steps needed to publish the data-driven Book Reviews site to production.</span></span>

<span data-ttu-id="a0f1d-262">プログラミングを楽しんでください。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-262">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="a0f1d-263">参考資料</span><span class="sxs-lookup"><span data-stu-id="a0f1d-263">Further Reading</span></span>

<span data-ttu-id="a0f1d-264">このチュートリアルで説明しているトピックの詳細については、次のリソースを参照してください。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-264">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="a0f1d-265">Microsoft SQL Server Database Publishing Wizard 1.1 をダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="a0f1d-265">Download the Microsoft SQL Server Database Publishing Wizard 1.1</span></span>](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en)
- [<span data-ttu-id="a0f1d-266">Microsoft SQL Server Management Studio Express Edition のダウンロード</span><span class="sxs-lookup"><span data-stu-id="a0f1d-266">Download the Microsoft SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)

> [!div class="step-by-step"]
> <span data-ttu-id="a0f1d-267">[前へ](core-differences-between-iis-and-the-asp-net-development-server-vb.md)
> [次へ](configuring-the-production-web-application-to-use-the-production-database-vb.md)</span><span class="sxs-lookup"><span data-stu-id="a0f1d-267">[Previous](core-differences-between-iis-and-the-asp-net-development-server-vb.md)
[Next](configuring-the-production-web-application-to-use-the-production-database-vb.md)</span></span>
