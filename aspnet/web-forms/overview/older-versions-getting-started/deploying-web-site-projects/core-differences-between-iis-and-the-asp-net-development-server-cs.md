---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs
title: IIS と ASP.NET 開発サーバー (c#) の違いをコア |Microsoft Docs
author: rick-anderson
description: ローカルでの ASP.NET アプリケーションをテストする場合は、ASP.NET 開発 Web サーバーを使用している可能性があります。 ただし、運用 web サイトは、最も可能性の高い pow です.
ms.author: riande
ms.date: 04/01/2009
ms.assetid: 13a5a423-9235-4dde-b408-2fd10f791d63
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs
msc.type: authoredcontent
ms.openlocfilehash: a5b67728a2232d59ae879bac1d6480840744871b
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2019
ms.locfileid: "65132409"
---
# <a name="core-differences-between-iis-and-the-aspnet-development-server-c"></a><span data-ttu-id="6a055-104">IIS と ASP.NET 開発サーバーの間の中心的違い (C#)</span><span class="sxs-lookup"><span data-stu-id="6a055-104">Core Differences Between IIS and the ASP.NET Development Server (C#)</span></span>

<span data-ttu-id="6a055-105">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="6a055-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="6a055-106">[コードのダウンロード](http://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_CS.zip)または[PDF のダウンロード](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="6a055-106">[Download Code](http://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_CS.zip) or [Download PDF](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_cs.pdf)</span></span>

> <span data-ttu-id="6a055-107">ローカルでの ASP.NET アプリケーションをテストする場合は、ASP.NET 開発 Web サーバーを使用している可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6a055-107">When testing an ASP.NET application locally, chances are you are using the ASP.NET Development Web Server.</span></span> <span data-ttu-id="6a055-108">ただし、運用 web サイトは、最も可能性の高い電源 IIS です。</span><span class="sxs-lookup"><span data-stu-id="6a055-108">However, the production website is most likely powered IIS.</span></span> <span data-ttu-id="6a055-109">これらの web サーバーが、要求を処理する方法のいくつか違いがあるし、これらの相違点が重要な影響を及ぼすことができます。</span><span class="sxs-lookup"><span data-stu-id="6a055-109">There are some differences between how these web servers handle requests, and these differences can have important consequences.</span></span> <span data-ttu-id="6a055-110">このチュートリアルより密接な相違点について説明します。</span><span class="sxs-lookup"><span data-stu-id="6a055-110">This tutorial explores some of the more germane differences.</span></span>

## <a name="introduction"></a><span data-ttu-id="6a055-111">はじめに</span><span class="sxs-lookup"><span data-stu-id="6a055-111">Introduction</span></span>

<span data-ttu-id="6a055-112">ユーザーが、ASP.NET アプリケーションにアクセスするたびに、ブラウザーは、web サイトに要求を送信します。</span><span class="sxs-lookup"><span data-stu-id="6a055-112">Whenever a user visits an ASP.NET application his browser sends a request to the website.</span></span> <span data-ttu-id="6a055-113">その要求を生成し、要求されたリソースのコンテンツを返す、ASP.NET ランタイムと連携して、web サーバー ソフトウェアによって取得されます。</span><span class="sxs-lookup"><span data-stu-id="6a055-113">That request is picked up by the web server software, which coordinates with the ASP.NET runtime to generate and return the content for the requested resource.</span></span> <span data-ttu-id="6a055-114">[**は**インターネット**は**情報**S** ervices (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services)の一般的なインターネット ベースの機能を提供するサービスのスイートにはWindows サーバー。</span><span class="sxs-lookup"><span data-stu-id="6a055-114">The[**I** nternet **I** nformation **S** ervices (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services) are a suite of services that provide common Internet-based functionality for Windows servers.</span></span> <span data-ttu-id="6a055-115">IIS は運用環境以外での ASP.NET アプリケーションの最もよく使用される web サーバーです。ほとんどの場合は、ASP.NET アプリケーションをホストする web ホスト プロバイダーによって使用されている web サーバーのソフトウェアです。</span><span class="sxs-lookup"><span data-stu-id="6a055-115">IIS is the most commonly used web server for ASP.NET applications in production environments; it's most likely the web server software being used by your web host provider to serve your ASP.NET application.</span></span> <span data-ttu-id="6a055-116">IIS をインストールする必要がありますが、IIS を開発環境で web サーバーのソフトウェアとして使用もでき、適切に構成します。</span><span class="sxs-lookup"><span data-stu-id="6a055-116">IIS can also be used as the web server software in the development environment, although this entails installing IIS and properly configuring it.</span></span>

<span data-ttu-id="6a055-117">ASP.NET 開発サーバーは、開発環境用の代替 web サーバー オプションです。同梱され、Visual Studio に統合します。</span><span class="sxs-lookup"><span data-stu-id="6a055-117">The ASP.NET Development Server is an alternative web server option for the development environment; it ships with and is integrated into Visual Studio.</span></span> <span data-ttu-id="6a055-118">IIS を使用する web アプリケーションが構成されている場合を除き、ASP.NET 開発サーバーが自動的に開始および web サーバーとして使用する初めての Visual Studio 内から web ページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="6a055-118">Unless the web application has been configured to use IIS, the ASP.NET Development Server is automatically started and used as the web server the first time you visit a web page from within Visual Studio.</span></span> <span data-ttu-id="6a055-119">バックアップで作成したデモ web アプリケーション、 [*を決定する必要のあるファイルを展開する*](determining-what-files-need-to-be-deployed-cs.md)チュートリアルが IIS を使用して構成されていない両方のファイル システム ベースの web アプリケーション。</span><span class="sxs-lookup"><span data-stu-id="6a055-119">The demo web applications we created back in the [*Determining What Files Need to Be Deployed*](determining-what-files-need-to-be-deployed-cs.md) tutorial were both file system-based web applications that were not configured to use IIS.</span></span> <span data-ttu-id="6a055-120">そのため、Visual Studio 内からこれらの web サイトのいずれかにアクセスすると、ASP.NET 開発サーバーが使用されます。</span><span class="sxs-lookup"><span data-stu-id="6a055-120">Therefore, when visiting either of these websites from within Visual Studio the ASP.NET Development Server is used.</span></span>

<span data-ttu-id="6a055-121">理想の世界では、開発および運用環境を同一になります。</span><span class="sxs-lookup"><span data-stu-id="6a055-121">In a perfect world the development and production environments would be identical.</span></span> <span data-ttu-id="6a055-122">ただし、前のチュートリアルで説明したように異なる構成設定が環境にとって珍しいことではありません。</span><span class="sxs-lookup"><span data-stu-id="6a055-122">However, as we discussed in the preceding tutorial it is not uncommon for the environments to have differing configuration settings.</span></span> <span data-ttu-id="6a055-123">別の web サーバー ソフトウェアを使用して、環境でアプリケーションを展開する際の考慮事項に考慮すべきもう 1 つの変数を追加します。</span><span class="sxs-lookup"><span data-stu-id="6a055-123">Using different web server software in the environments adds another variable that must be taken into consideration when deploying an application.</span></span> <span data-ttu-id="6a055-124">このチュートリアルでは、IIS と ASP.NET 開発サーバーの間の主な違いについて説明します。</span><span class="sxs-lookup"><span data-stu-id="6a055-124">This tutorial covers the key differences between IIS and the ASP.NET Development Server.</span></span> <span data-ttu-id="6a055-125">これらの違いにより、開発環境で問題なく実行されるコードが例外をスローまたは実稼働環境で実行されるときの動作が異なるシナリオがあります。</span><span class="sxs-lookup"><span data-stu-id="6a055-125">Because of these differences there are scenarios where code that runs flawlessly in the development environment throws an exception or behaves differently when executed in production.</span></span>

## <a name="security-context-differences"></a><span data-ttu-id="6a055-126">セキュリティ コンテキストの相違点</span><span class="sxs-lookup"><span data-stu-id="6a055-126">Security Context Differences</span></span>

<span data-ttu-id="6a055-127">Web サーバー ソフトウェアは、受信要求を処理するたびに、特定のセキュリティ コンテキストをその要求を関連付けます。</span><span class="sxs-lookup"><span data-stu-id="6a055-127">Whenever the web server software handles an incoming request it associates that request with a particular security context.</span></span> <span data-ttu-id="6a055-128">オペレーティング システムによっては、このセキュリティ コンテキスト情報を使用して要求によってどのようなアクションは許容されます。 を決定します。</span><span class="sxs-lookup"><span data-stu-id="6a055-128">This security context information is used by the operating system to determine what actions are permissible by the request.</span></span> <span data-ttu-id="6a055-129">たとえば、ASP.NET ページには、ディスク上のファイルをいくつかのメッセージを記録するコードがあります。</span><span class="sxs-lookup"><span data-stu-id="6a055-129">For example, an ASP.NET page might include code that logs some message to a file on disk.</span></span> <span data-ttu-id="6a055-130">エラーなしで実行するには、この ASP.NET ページで、セキュリティ コンテキストが適切なファイル システム レベルのアクセス許可、つまり書き込みでそのファイルのアクセス許可が必要です。</span><span class="sxs-lookup"><span data-stu-id="6a055-130">In order for this ASP.NET page to execute without error, the security context must have the appropriate file system-level permissions, namely write permissions on that file.</span></span>

<span data-ttu-id="6a055-131">ASP.NET 開発サーバーは、受信要求を現在ログオンしているユーザーのセキュリティ コンテキストに関連付けます。</span><span class="sxs-lookup"><span data-stu-id="6a055-131">The ASP.NET Development Server associates incoming requests with the security context of the currently logged on user.</span></span> <span data-ttu-id="6a055-132">管理者として、デスクトップにログオンしている場合、ASP.NET 開発サーバーによって処理される ASP.NET ページは、管理者と同じアクセス権があります。</span><span class="sxs-lookup"><span data-stu-id="6a055-132">If you are logged on to your desktop as an administrator, then the ASP.NET pages served by the ASP.NET Development Server will have the same access rights as an administrator.</span></span> <span data-ttu-id="6a055-133">ただし、IIS によって処理される ASP.NET 要求は、特定のマシン アカウントに関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="6a055-133">However, ASP.NET requests handled by IIS are associated with a specific machine account.</span></span> <span data-ttu-id="6a055-134">既定では、web ホスト プロバイダーは、顧客ごとに一意のアカウント構成可能性がありますが IIS バージョン 6 および 7、によってネットワーク サービスのコンピューター アカウントが使用します。</span><span class="sxs-lookup"><span data-stu-id="6a055-134">By default, the Network Service machine account is used by IIS versions 6 and 7, although your web host provider may have configured a unique account for each customer.</span></span> <span data-ttu-id="6a055-135">さらに、web ホスト プロバイダーがこのコンピューター アカウントにアクセス許可が制限を指定する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6a055-135">What's more, your web host provider has likely given limited permissions to this machine account.</span></span> <span data-ttu-id="6a055-136">最終的な結果は、開発環境でエラーなしで実行が、運用環境でホストされている場合の承認に関連する例外を生成する web ページがあります。</span><span class="sxs-lookup"><span data-stu-id="6a055-136">The net result is that you may have web pages that execute without error in the development environment, but generate authorization-related exceptions when hosted in the production environment.</span></span>

<span data-ttu-id="6a055-137">ユーザーが最新の日付と時刻を格納するディスク上のファイルを作成する書籍レビューの web サイトでページを作成しましたアクションでこの種類のエラーを表示するには、表示、*教える自分で ASP.NET 3.5 in 24 時間*を確認します。</span><span class="sxs-lookup"><span data-stu-id="6a055-137">To show this type of error in action I've created a page in the Book Reviews website that creates a file on disk that stores the most recent date and time someone viewed the *Teach Yourself ASP.NET 3.5 in 24 Hours* review.</span></span> <span data-ttu-id="6a055-138">作業を進めるには、開く、`~/Tech/TYASP35.aspx`ページし、次のコードを追加、`Page_Load`イベント ハンドラー。</span><span class="sxs-lookup"><span data-stu-id="6a055-138">To follow along, open the `~/Tech/TYASP35.aspx` page and add the following code to the `Page_Load` event handler:</span></span>

[!code-csharp[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample1.cs)]

> [!NOTE]
> <span data-ttu-id="6a055-139">[ `File.WriteAllText`メソッド](https://msdn.microsoft.com/library/system.io.file.writealltext.aspx)に指定されたコンテンツを書き込みますが存在しない場合は、新しいファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="6a055-139">The [`File.WriteAllText` method](https://msdn.microsoft.com/library/system.io.file.writealltext.aspx) creates a new file if it does not exist and then writes the specified contents to it.</span></span> <span data-ttu-id="6a055-140">ファイルが既に存在する場合は、既存のコンテンツが上書きされます。</span><span class="sxs-lookup"><span data-stu-id="6a055-140">If the file already exists, it's existing content is overwritten.</span></span>

<span data-ttu-id="6a055-141">次を参照してください、*教える自分で ASP.NET 3.5 in 24 時間*ASP.NET 開発サーバーを使用して開発環境で書籍の確認 ページ。</span><span class="sxs-lookup"><span data-stu-id="6a055-141">Next, visit the *Teach Yourself ASP.NET 3.5 in 24 Hours* book review page in the development environment using the ASP.NET Development Server.</span></span> <span data-ttu-id="6a055-142">作成し、web でのテキスト ファイルを変更するには、適切なアクセス権を持つアカウントを使用してコンピューターにアプリケーションのルート ディレクトリ、書籍レビュー、以前と同じ表示されますが、ページが毎回アクセス日付と時刻、およびユーザーのログインするいると仮定 IP アドレスが格納されている、`LastTYASP35Access.txt`ファイル。</span><span class="sxs-lookup"><span data-stu-id="6a055-142">Assuming that you are logged on to your computer with an account that has adequate permissions to create and modify a text file in the web application's root directory the book review appears the same as before, but each time the page is visited the date and time and user's IP address is stored in the `LastTYASP35Access.txt` file.</span></span> <span data-ttu-id="6a055-143">このファイルをお使いのブラウザーをポイントします。図 1 のようなメッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6a055-143">Point your browser to this file; you should see a message similar to the one shown in Figure 1.</span></span>

<span data-ttu-id="6a055-144">[![テキスト ファイルには、最後の日付と時刻の書籍レビューのアクセスが含まれています。](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="6a055-144">[![The Text File Contains the Last Date and Time the Book Review was Visited](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image1.png)</span></span>

<span data-ttu-id="6a055-145">**図 1**:テキスト ファイルには、最後の日付と時刻の書籍レビューのアクセスが含まれています ([フルサイズの画像を表示する をクリックします](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image3.png))。</span><span class="sxs-lookup"><span data-stu-id="6a055-145">**Figure 1**: The Text File Contains the Last Date and Time the Book Review was Visited ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image3.png))</span></span>

<span data-ttu-id="6a055-146">Web アプリケーションを運用環境にデプロイして、ホストされているアクセス*教える自分で ASP.NET 3.5 in 24 時間*書籍の確認 ページ。</span><span class="sxs-lookup"><span data-stu-id="6a055-146">Deploy the web application to production and then visit the hosted *Teach Yourself ASP.NET 3.5 in 24 Hours* book review page.</span></span> <span data-ttu-id="6a055-147">この時点で書籍の確認 ページには、normal または図 2 に表示されるエラー メッセージとしても表示されます。</span><span class="sxs-lookup"><span data-stu-id="6a055-147">At this point you should either see the book review page as normal or the error message shown in Figure 2.</span></span> <span data-ttu-id="6a055-148">一部の web ホスト プロバイダーは、ASP.NET による匿名のコンピューター アカウントの場合、ページはエラーなしに書き込みアクセス許可を付与します。</span><span class="sxs-lookup"><span data-stu-id="6a055-148">Some web host providers grant write permissions to the anonymous ASP.NET machine account, in which case the page will work without error.</span></span> <span data-ttu-id="6a055-149">ただし、web ホスト プロバイダーは匿名アカウントへの書き込みアクセスを禁止する場合は、 [ `UnauthorizedAccessException`例外](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx)発生する状況、`TYASP35.aspx`ページが、現在の日付と時刻を記述しようとしています。、`LastTYASP35Access.txt`ファイル。</span><span class="sxs-lookup"><span data-stu-id="6a055-149">If, however, your web host provider prohibits write access for the anonymous account then an [`UnauthorizedAccessException` exception](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx) is raised when the `TYASP35.aspx` page attempts to write the current date and time to the `LastTYASP35Access.txt` file.</span></span>

<span data-ttu-id="6a055-150">[![IIS によって使用される既定のマシン アカウントには、ファイル システムに書き込むアクセス許可がありません。](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="6a055-150">[![The Default Machine Account Used by IIS Does Not Have Permissions to Write to the File System](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image4.png)</span></span>

<span data-ttu-id="6a055-151">**図 2**:既定のマシン使用されるアカウント IIS はありませんがあるアクセス許可によって、ファイル システムへの書き込みを ([フルサイズの画像を表示する をクリックします](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image6.png))。</span><span class="sxs-lookup"><span data-stu-id="6a055-151">**Figure 2**: The Default Machine Account Used by IIS Does Not Have Permissions to Write to the File System ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image6.png))</span></span>

<span data-ttu-id="6a055-152">良い知らせは、ほとんどの web ホスト プロバイダーが、web サイトのファイル システム権限を指定することを許可するアクセス許可ツールのいくつかの並べ替えがあることです。</span><span class="sxs-lookup"><span data-stu-id="6a055-152">The good news is that most web host providers have some sort of permissions tool that allows you to specify file system permissions in your website.</span></span> <span data-ttu-id="6a055-153">ルート ディレクトリに匿名の ASP.NET アカウント書き込みのアクセス権を付与し、書籍の確認 ページを再検討します。</span><span class="sxs-lookup"><span data-stu-id="6a055-153">Grant the anonymous ASP.NET account write access to the root directory and then revisit the book review page.</span></span> <span data-ttu-id="6a055-154">(必要な場合は、web ホスト プロバイダーに問い合わせてください既定の ASP.NET アカウントに対する書き込みアクセス許可を付与する方法です。)この時間のエラーが発生せず、ページを読み込む必要があります、`LastTYASP35Access.txt`ファイルを正常に作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6a055-154">(If needed, contact your web host provider for assistance on how to grant write permissions to the default ASP.NET account.) This time the page should load without error and the `LastTYASP35Access.txt` file should be created successfully.</span></span>

<span data-ttu-id="6a055-155">とると、すぐここでは、ASP.NET 開発サーバーは、IIS 以外の別のセキュリティ コンテキストで動作するため、ファイル システムに対する読み取りまたは書き込みする ASP.NET ページからの読み取りまたは Windows イベント ログに書き込むまたは読み取るか、Windows への書き込み レジストリは、開発で期待どおりに動作が、運用環境での例外を生成します。</span><span class="sxs-lookup"><span data-stu-id="6a055-155">The take away here is that because the ASP.NET Development Server operates under a different security context than IIS, it is possible that your ASP.NET pages that read or write to the file system, read from or write to the Windows Event Log, or read or write to the Windows registry will work as expected on development but generate exceptions when on production.</span></span> <span data-ttu-id="6a055-156">共有 web ホスト環境で web アプリケーションの構築がデプロイされるときに実行しない読み取りまたは書き込み、イベント ログまたは Windows レジストリに。</span><span class="sxs-lookup"><span data-stu-id="6a055-156">When building a web application that will be deployed to a shared web hosting environment, do not read or write to the Event Log or the Windows registry.</span></span> <span data-ttu-id="6a055-157">任意の ASP.NET ページからの読み取りまたは読み取りを許可し、運用環境で適切なフォルダーに対する権限を記述する必要があります、ファイル システムへの書き込みも書き留めます。</span><span class="sxs-lookup"><span data-stu-id="6a055-157">Also take note of any ASP.NET pages that read from or write to the file system as you may need to grant read and write privileges on the appropriate folders in the production environment.</span></span>

## <a name="differences-on-serving-static-content"></a><span data-ttu-id="6a055-158">静的なコンテンツの違い</span><span class="sxs-lookup"><span data-stu-id="6a055-158">Differences On Serving Static Content</span></span>

<span data-ttu-id="6a055-159">IIS と ASP.NET 開発サーバーの間のもう 1 つの主要な違いは、静的コンテンツの要求を処理する方法です。</span><span class="sxs-lookup"><span data-stu-id="6a055-159">Another core difference between IIS and the ASP.NET Development Server is how they handle requests for static content.</span></span> <span data-ttu-id="6a055-160">ASP.NET ページ、画像、または JavaScript ファイルを ASP.NET 開発サーバーに付属しているすべての要求は、ASP.NET ランタイムによって処理されます。</span><span class="sxs-lookup"><span data-stu-id="6a055-160">Every request that comes into the ASP.NET Development Server, whether for an ASP.NET page, an image, or a JavaScript file, is processed by the ASP.NET runtime.</span></span> <span data-ttu-id="6a055-161">既定では、IIS では、ASP.NET web ページや Web サービスなどなど、ASP.NET リソースの要求を受信すると、ASP.NET ランタイムがのみ呼び出します。</span><span class="sxs-lookup"><span data-stu-id="6a055-161">By default, IIS only invokes the ASP.NET runtime when a request comes in for an ASP.NET resource, such as an ASP.NET web page, a Web Service, and so forth.</span></span> <span data-ttu-id="6a055-162">イメージ、CSS ファイル、JavaScript ファイル、PDF ファイル、ZIP ファイル、およびなどの-静的コンテンツの要求は、IIS で ASP.NET ランタイムが関与しない取得されます。</span><span class="sxs-lookup"><span data-stu-id="6a055-162">Requests for static content - images, CSS files, JavaScript files, PDF files, ZIP files, and the like - are retrieved by IIS without the involvement of the ASP.NET runtime.</span></span> <span data-ttu-id="6a055-163">(、IIS の静的コンテンツを提供するときに、ASP.NET ランタイムで動作するよう指示することができます。 詳細については、このチュートリアルでは、「フォーム ベース認証を実行して IIS 7 でファイルに静的 URL 認証」セクションを参照してください)。</span><span class="sxs-lookup"><span data-stu-id="6a055-163">(It is possible to instruct IIS to work with the ASP.NET runtime when serving static content; consult the "Performing Forms-Based Authentication and URL Authentication on Static Files with IIS 7" section in this tutorial for more information.)</span></span>

<span data-ttu-id="6a055-164">ASP.NET ランタイムは、さまざまな認証 (要求元を識別する)、承認 (要求元に要求されたコンテンツを表示するアクセス許可がある場合を決定する) など、要求されたコンテンツを生成する手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="6a055-164">The ASP.NET runtime performs a number of steps to generate the requested content, including authentication (identifying the requestor) and authorization (determining if the requestor has permission to view the requested content).</span></span> <span data-ttu-id="6a055-165">認証の一般的な形式は*フォーム ベース認証*、web ページ上のテキスト ボックスに - 通常はユーザー名とパスワードの資格情報を入力して、ユーザーが識別されるのです。</span><span class="sxs-lookup"><span data-stu-id="6a055-165">A popular form of authentication is *forms-based authentication*, in which a user is identified by entering their credentials - usually a username and password - into textboxes on a web page.</span></span> <span data-ttu-id="6a055-166">自分の資格情報の検証時に、web サイトを格納、*認証チケット*は、後続の要求ごとに、web サイトに送信されはユーザーの認証に使われますユーザーのブラウザーの cookie。</span><span class="sxs-lookup"><span data-stu-id="6a055-166">Upon validating their credentials, the website stores an *authentication ticket* cookie on the user's browser, which is sent with every subsequent request to the website and is what is used to authenticate the user.</span></span> <span data-ttu-id="6a055-167">指定することはさらに、 *URL 承認*のルールをどのようなユーザーまたはできますが、特定のフォルダーにアクセスできません。</span><span class="sxs-lookup"><span data-stu-id="6a055-167">Moreover, it is possible to specify *URL authorization* rules that dictate what users can or cannot access a particular folder.</span></span> <span data-ttu-id="6a055-168">多くの ASP.NET web サイトは、ユーザー アカウントをサポートするために、認証されたユーザーまたは特定のロールに属しているユーザーにアクセスできるサイトの部分を定義したり、フォーム ベースの認証と承認の URL を使用します。</span><span class="sxs-lookup"><span data-stu-id="6a055-168">Many ASP.NET websites use forms-based authentication and URL authorization to support user accounts and to define portions of the site that are only accessible to authenticated users or users that belong to a certain role.</span></span>

> [!NOTE]
> <span data-ttu-id="6a055-169">ASP の徹底的な調査できるようにします。NET のフォーム ベース認証、URL 承認、およびその他のユーザー アカウントに関連する機能は、チェック アウトすることを確認するマイ[web サイトのセキュリティのチュートリアル](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md)します。</span><span class="sxs-lookup"><span data-stu-id="6a055-169">For a thorough examination of ASP.NET's forms-based authentication, URL authorization, and other user account-related features, be sure to check out my [Website Security Tutorials](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

<span data-ttu-id="6a055-170">フォーム ベースの承認を使用してユーザー アカウントをサポートし、フォルダー、URL の承認を使用して認証されたユーザーのみを許可するように構成する web サイトを検討してください。</span><span class="sxs-lookup"><span data-stu-id="6a055-170">Consider a website that supports user accounts using forms-based authorization and has a folder that, using URL authorization, is configured to only allow authenticated users.</span></span> <span data-ttu-id="6a055-171">このフォルダーには、ASP.NET ページが含まれています。 PDF ファイルを表示できるの PDF ファイルと目的は、認証されたユーザーのみが、想像してください。</span><span class="sxs-lookup"><span data-stu-id="6a055-171">Imagine that this folder contains ASP.NET pages and PDF files and that the intent is that only authenticated users can view these PDF files.</span></span>

<span data-ttu-id="6a055-172">訪問者が自分のブラウザーのアドレス バーに直接 URL を入力してこれらの PDF ファイルのいずれかを表示しようとすると、どうなりますか。</span><span class="sxs-lookup"><span data-stu-id="6a055-172">What happens if a visitor attempts to view one of these PDF files by entering the URL directly in his browser's Address bar?</span></span> <span data-ttu-id="6a055-173">確認するには、みましょう、書籍レビューのサイトに新しいフォルダーを作成、いくつかの PDF ファイルを追加および URL 承認を使用して、匿名ユーザーがこのフォルダーにアクセスすることを禁止するサイトを構成します。</span><span class="sxs-lookup"><span data-stu-id="6a055-173">To find out, let's create a new folder in the Book Reviews site, add some PDF files, and configure the site to use URL authorization to prohibit anonymous users from visiting this folder.</span></span> <span data-ttu-id="6a055-174">デモ アプリケーションをダウンロードする場合という名前のフォルダーを作成することが表示されます`PrivateDocs`から PDF を追加し、 [web サイトのセキュリティのチュートリアル](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md)(フィットする方法!)。</span><span class="sxs-lookup"><span data-stu-id="6a055-174">If you download the demo application you'll see that I created a folder called `PrivateDocs` and added a PDF from my [Website Security Tutorials](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) (how fitting!).</span></span> <span data-ttu-id="6a055-175">`PrivateDocs`フォルダーも含まれています、`Web.config`ファイルを匿名ユーザーを拒否する URL 承認規則を指定します。</span><span class="sxs-lookup"><span data-stu-id="6a055-175">The `PrivateDocs` folder also contains a `Web.config` file that specifies the URL authorization rules to deny anonymous users:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample2.xml)]

<span data-ttu-id="6a055-176">最後に、更新することで、フォーム ベース認証を使用する web アプリケーションを構成しました、`Web.config`ルート ディレクトリ内のファイルを交換します。</span><span class="sxs-lookup"><span data-stu-id="6a055-176">Finally, I configured the web application to use forms-based authentication by updating the `Web.config` file in the root directory, replacing:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample3.xml)]

<span data-ttu-id="6a055-177">代入:</span><span class="sxs-lookup"><span data-stu-id="6a055-177">With:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample4.xml)]

<span data-ttu-id="6a055-178">ASP.NET 開発サーバーを使用して、サイトにアクセスし、ブラウザーのアドレス バーで PDF ファイルのいずれかに直接 URL を入力します。</span><span class="sxs-lookup"><span data-stu-id="6a055-178">Using the ASP.NET Development Server, visit the site and enter the direct URL to one of the PDF files in your browser's Address bar.</span></span> <span data-ttu-id="6a055-179">: URL はようになりますが、このチュートリアルに関連付けられている web サイトをダウンロードしている場合 `http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`</span><span class="sxs-lookup"><span data-stu-id="6a055-179">If you downloaded the website associated with this tutorial the URL should look something like: `http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`</span></span>

<span data-ttu-id="6a055-180">ファイルの ASP.NET 開発サーバーに要求を送信するブラウザーは、アドレス バーにこの URL を入力します。</span><span class="sxs-lookup"><span data-stu-id="6a055-180">Entering this URL into the Address bar causes the browser to send a request to the ASP.NET Development Server for the file.</span></span> <span data-ttu-id="6a055-181">ASP.NET 開発サーバーは要求を処理するため、ASP.NET ランタイムに渡します。</span><span class="sxs-lookup"><span data-stu-id="6a055-181">The ASP.NET Development Server hands off the request to the ASP.NET runtime for processing.</span></span> <span data-ttu-id="6a055-182">では、まだログインしていないことがあるため、`Web.config`で、`PrivateDocs`フォルダーへの匿名アクセスを拒否するように構成を ASP.NET ランタイムに自動的にリダイレクトします私たち、ログイン ページに`Login.aspx`(図 3 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="6a055-182">Because we have not yet logged in, and because the `Web.config` in the `PrivateDocs` folder is configured to deny anonymous access, the ASP.NET runtime automatically redirects us to the login page, `Login.aspx` (see Figure 3).</span></span> <span data-ttu-id="6a055-183">ASP.NET には、ログイン ページにユーザーをリダイレクトしたときに、`ReturnUrl`ページを示すクエリ文字列パラメーター、ユーザーが表示しようとします。</span><span class="sxs-lookup"><span data-stu-id="6a055-183">When redirecting the user to the log in page, ASP.NET includes a `ReturnUrl` querystring parameter that indicates the page the user was attempting to view.</span></span> <span data-ttu-id="6a055-184">ユーザーに正常にログインした後は、このページに戻ってことができます。</span><span class="sxs-lookup"><span data-stu-id="6a055-184">After successfully logging in the user can be returned to this page.</span></span>

<span data-ttu-id="6a055-185">[![承認されていないユーザーがログイン ページに自動的にリダイレクトされます。](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="6a055-185">[![Unauthorized Users are Automatically Redirected to the Login Page](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image7.png)</span></span>

<span data-ttu-id="6a055-186">**図 3**:承認されていないユーザーがログイン ページに自動的にリダイレクト ([フルサイズの画像を表示する をクリックします](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image9.png))。</span><span class="sxs-lookup"><span data-stu-id="6a055-186">**Figure 3**: Unauthorized Users are Automatically Redirected to the Login Page ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image9.png))</span></span>

<span data-ttu-id="6a055-187">これで運用環境でこの動作を見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="6a055-187">Now let's see how this behaves on production.</span></span> <span data-ttu-id="6a055-188">アプリケーションを配置しで Pdf のいずれかに直接 URL を入力、`PrivateDocs`実稼働環境でのフォルダー。</span><span class="sxs-lookup"><span data-stu-id="6a055-188">Deploy your application and enter the direct URL to one of the PDFs in the `PrivateDocs` folder in production.</span></span> <span data-ttu-id="6a055-189">これは、ファイルの IIS 要求を送信するブラウザーを求めます。</span><span class="sxs-lookup"><span data-stu-id="6a055-189">This prompts your browser to send a request IIS for the file.</span></span> <span data-ttu-id="6a055-190">静的ファイルが要求されるため、IIS は取得し、ASP.NET ランタイムを呼び出さずに、ファイルを返します。</span><span class="sxs-lookup"><span data-stu-id="6a055-190">Because a static file is requested, IIS retrieves and returns the file without invoking the ASP.NET runtime.</span></span> <span data-ttu-id="6a055-191">その結果、URL 承認チェックが実行されます。 がありません。おそらくプライベート PDF の内容では、ファイルへの直接の URL を知っている人にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="6a055-191">As a result, there was no URL authorization check performed; the contents of the supposedly private PDF are accessible to anyone who knows the direct URL to the file.</span></span>

<span data-ttu-id="6a055-192">[![匿名ユーザーがファイルに直接 URL を入力して、プライベートの PDF ファイルをダウンロードできます。](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="6a055-192">[![Anonymous Users Can Download the Private PDF Files By Entering the Direct URL to the File](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image10.png)</span></span>

<span data-ttu-id="6a055-193">**図 4**:匿名ユーザーにダウンロードできる、プライベート PDF ファイルによって入力ダイレクト URL、ファイル ([フルサイズの画像を表示する をクリックします](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image12.png))。</span><span class="sxs-lookup"><span data-stu-id="6a055-193">**Figure 4**: Anonymous Users Can Download the Private PDF Files By Entering the Direct URL to the File ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image12.png))</span></span>

### <a name="performing-forms-based-authentication-and-url-authentication-on-static-files-with-iis-7"></a><span data-ttu-id="6a055-194">IIS 7 で静的ファイルにフォーム ベースの認証と URL の認証を実行します。</span><span class="sxs-lookup"><span data-stu-id="6a055-194">Performing Forms-Based Authentication and URL Authentication on Static Files with IIS 7</span></span>

<span data-ttu-id="6a055-195">承認されていないユーザーから静的コンテンツを保護するために使用できる手法のいくつかがあります。</span><span class="sxs-lookup"><span data-stu-id="6a055-195">There are a couple of techniques you can use to protect static content from unauthorized users.</span></span> <span data-ttu-id="6a055-196">IIS 7 の導入、*統合パイプライン*、ASP.NET ランタイムのワークフローで IIS のワークフローを結婚します。</span><span class="sxs-lookup"><span data-stu-id="6a055-196">IIS 7 introduced the *integrated pipeline*, which marries IIS's workflow with the ASP.NET runtime's workflow.</span></span> <span data-ttu-id="6a055-197">簡単に言うと、IIS、ASP.NET ランタイムの認証と承認モジュール (PDF ファイルなどの静的コンテンツを含む) すべての着信要求を起動するように指示できます。</span><span class="sxs-lookup"><span data-stu-id="6a055-197">In a nutshell, you can instruct IIS to invoke the ASP.NET runtime's authentication and authorization modules all incoming requests (including static content like PDF files).</span></span> <span data-ttu-id="6a055-198">統合パイプラインを使用する web サイトを構成する方法については、web ホスト プロバイダーにお問い合わせください。</span><span class="sxs-lookup"><span data-stu-id="6a055-198">Contact your web host provider to find out how to configure your website to use the integrated pipeline.</span></span>

<span data-ttu-id="6a055-199">統合パイプラインが次のマークアップを追加後、IIS が使用するよう構成されている、`Web.config`ルート ディレクトリ内のファイル。</span><span class="sxs-lookup"><span data-stu-id="6a055-199">Once IIS has been configured to use the integrated pipeline add the following markup to the `Web.config` file in the root directory:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample5.xml)]

<span data-ttu-id="6a055-200">このマークアップでは、IIS 7 ASP.NET ベースの認証と承認モジュールを使用するように指示します。</span><span class="sxs-lookup"><span data-stu-id="6a055-200">This markup instructs IIS 7 to use the ASP.NET-based authentication and authorization modules.</span></span> <span data-ttu-id="6a055-201">アプリケーションを再デプロイして、PDF ファイルを再度参照してください。</span><span class="sxs-lookup"><span data-stu-id="6a055-201">Re-deploy your application and then re-visit the PDF file.</span></span> <span data-ttu-id="6a055-202">IIS が要求を処理するときに、この時点では、ASP.NET ランタイムの認証と承認ロジックうなります要求を検査します。</span><span class="sxs-lookup"><span data-stu-id="6a055-202">This time when IIS handles the request it gives the ASP.NET runtime's authentication and authorization logic an opportunity to inspect the request.</span></span> <span data-ttu-id="6a055-203">認証されたユーザーのみがコンテンツを表示する権限があるため、`PrivateDocs`フォルダー、匿名の訪問者がログイン ページに自動的にリダイレクト (戻るは図 3 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="6a055-203">Because only authenticated users are authorized to view the contents in the `PrivateDocs` folder, the anonymous visitor is automatically redirected to the login page (refer back to Figure 3).</span></span>

> [!NOTE]
> <span data-ttu-id="6a055-204">場合は、web ホスト プロバイダーには、IIS 6 がまだ使用して、統合パイプライン機能を使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="6a055-204">If your web host provider is still using IIS 6 then you cannot use the integrated pipeline feature.</span></span> <span data-ttu-id="6a055-205">1 つの回避策は、プライベート ドキュメントを HTTP アクセスを禁止するフォルダーに配置する (など`App_Data`) し、これらのドキュメントを処理するためにページを作成します。</span><span class="sxs-lookup"><span data-stu-id="6a055-205">One workaround is to put your private documents in a folder that prohibits HTTP access (such as `App_Data`) and then create a page to serve these documents.</span></span> <span data-ttu-id="6a055-206">このページを呼び出すことがあります`GetPDF.aspx`、され、クエリ文字列パラメーターで PDF の名前が渡されます。</span><span class="sxs-lookup"><span data-stu-id="6a055-206">This page might be called `GetPDF.aspx`, and is passed the name of the PDF through a querystring parameter.</span></span> <span data-ttu-id="6a055-207">`GetPDF.aspx`ページは、ユーザーがファイルを表示するアクセス許可を持つし、そうである場合は使用しているに最初に確認しますが、 [ `Response.WriteFile(filePath)` ](https://msdn.microsoft.com/library/system.web.httpresponse.writefile.aspx)要求された PDF ファイルの内容を要求元のクライアントに送信するメソッド。</span><span class="sxs-lookup"><span data-stu-id="6a055-207">The `GetPDF.aspx` page would first verify that the user has permission to view the file and, if so, would use the [`Response.WriteFile(filePath)`](https://msdn.microsoft.com/library/system.web.httpresponse.writefile.aspx) method to send the contents of the requested PDF file back to the requesting client.</span></span> <span data-ttu-id="6a055-208">この手法は、統合パイプラインを有効にするたくはない場合も IIS 7 の機能。</span><span class="sxs-lookup"><span data-stu-id="6a055-208">This technique would also work for IIS 7 if you did not wish to enable the integrated pipeline.</span></span>

## <a name="summary"></a><span data-ttu-id="6a055-209">まとめ</span><span class="sxs-lookup"><span data-stu-id="6a055-209">Summary</span></span>

<span data-ttu-id="6a055-210">運用環境で web アプリケーションは、マイクロソフトの IIS web サーバー ソフトウェアを使用してホストされます。</span><span class="sxs-lookup"><span data-stu-id="6a055-210">Web applications in a production environment are hosted using Microsoft's IIS web server software.</span></span> <span data-ttu-id="6a055-211">開発環境でただし、アプリケーション ホストできます IIS または ASP.NET 開発サーバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="6a055-211">In the development environment, however, the application may be hosted using IIS or the ASP.NET Development Server.</span></span> <span data-ttu-id="6a055-212">理想的には、ミックスで変数を追加する別のソフトウェアを使用しているために、両方の環境で同じ web サーバーのソフトウェアを使用してください。</span><span class="sxs-lookup"><span data-stu-id="6a055-212">Ideally, the same web server software should be used in both environments because using different software adds another variable in the mix.</span></span> <span data-ttu-id="6a055-213">ただし、ASP.NET 開発サーバーの使いやすさは、有用な選択肢、開発環境でします。</span><span class="sxs-lookup"><span data-stu-id="6a055-213">However, the ease of use of the ASP.NET Development Server makes it an attractive choice in the development environment.</span></span> <span data-ttu-id="6a055-214">良い知らせはことのみの IIS と ASP.NET 開発サーバーで、いくつかの基本的な違いがあるし、のこれらの違いに注意する場合は手順を実行できますアプリケーションが動作し、同じ機能を確保する方法に関係なく、環境。</span><span class="sxs-lookup"><span data-stu-id="6a055-214">The good news is that there are only a few fundamental differences between IIS and the ASP.NET Development Server, and if you are aware of these differences you can take steps to help ensure that the application works and functions the same way regardless of the environment.</span></span>

<span data-ttu-id="6a055-215">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="6a055-215">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="6a055-216">関連項目</span><span class="sxs-lookup"><span data-stu-id="6a055-216">Further Reading</span></span>

<span data-ttu-id="6a055-217">このチュートリアルで説明したトピックの詳細については、次の情報を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6a055-217">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="6a055-218">IIS 7.0 と ASP.NET の統合</span><span class="sxs-lookup"><span data-stu-id="6a055-218">ASP.NET Integration with IIS 7.0</span></span>](https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/aspnet-integration-with-iis)
- <span data-ttu-id="6a055-219">[ASP.NET フォーラムの認証を使用して、IIS 7 のコンテンツのすべての種類で](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx)(ビデオ)</span><span class="sxs-lookup"><span data-stu-id="6a055-219">[Using ASP.NET Forums Authentication With All Types of Content on IIS 7](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx) (Video)</span></span>
- [<span data-ttu-id="6a055-220">Visual Web Developer で web サーバー</span><span class="sxs-lookup"><span data-stu-id="6a055-220">Web Servers in Visual Web Developer</span></span>](https://msdn.microsoft.com/library/58wxa9w5.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="6a055-221">[前へ](common-configuration-differences-between-development-and-production-cs.md)
> [次へ](deploying-a-database-cs.md)</span><span class="sxs-lookup"><span data-stu-id="6a055-221">[Previous](common-configuration-differences-between-development-and-production-cs.md)
[Next](deploying-a-database-cs.md)</span></span>
