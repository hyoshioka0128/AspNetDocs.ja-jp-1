---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/precompiling-your-website-cs
title: Web サイトをプリコンC#パイルする () |Microsoft Docs
author: rick-anderson
description: Visual Studio には、Web アプリケーションプロジェクト (Wap) と Web サイトプロジェクト (WSPs) という2種類のプロジェクトが用意されています。 ASP.NET の開発者です。 重要な違いの1つは...
ms.author: riande
ms.date: 06/09/2009
ms.assetid: ecd5a4de-beb7-4d1d-bbbb-e31003633267
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/precompiling-your-website-cs
msc.type: authoredcontent
ms.openlocfilehash: cb42398f44f3cd16ab83a9976e7b34f132384456
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78462874"
---
# <a name="precompiling-your-website-c"></a>Web サイトを事前コンパイルする (C#)

[Scott Mitchell](https://twitter.com/ScottOnWriting)

[コードのダウンロード](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_15_CS.zip)または[PDF のダウンロード](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial15_Precompiling_cs.pdf)

> Visual Studio には、Web アプリケーションプロジェクト (Wap) と Web サイトプロジェクト (WSPs) という2種類のプロジェクトが用意されています。 ASP.NET の開発者です。 2つのプロジェクトの種類の主な違いの1つは、Wap ではデプロイの前にコードを明示的にコンパイルする必要があるのに対し、WSP のコードは web サーバーで自動的にコンパイルできることです。 ただし、デプロイの前に WSP をプリコンパイルすることは可能です。 このチュートリアルでは、プリコンパイルの利点について説明し、Visual Studio 内およびコマンドラインから web サイトをプリコンパイルする方法を示します。

## <a name="introduction"></a>はじめに

Visual Studio には、Web アプリケーションプロジェクト (WAP) と Web サイトプロジェクト (WSP) という2種類のプロジェクトの開発者向けの ASP.NET が用意されています。 これらのプロジェクトの種類の主な違いの1つは、Wap では*明示的なコンパイル*が必要であるのに対し、wsps は*自動コンパイル*を既定で使用することです。 Wap では、web アプリケーションのコードを1つのアセンブリにコンパイルします。このアセンブリは、web サイトの `Bin` フォルダーに作成されます。 配置では、プロジェクト内のマークアップコンテンツ (`.aspx.ascx`、`.master` ファイル) を `Bin` フォルダー内のアセンブリと共にコピーすることがあります。分離コードクラスファイル自体を配置する必要はありません。 一方、マークアップページとそれに対応する分離コードクラスの両方を運用環境にコピーすることによって、WSPs をデプロイします。 分離コードクラスは、web サーバー上で要求時にコンパイルされます。

> [!NOTE]
> プロジェクトモデルの相違点、明示的なコンパイルと自動コンパイル、およびコンパイルモデルが配置に与える影響の詳細については、「 [*配置する必要があるファイルの決定*](determining-what-files-need-to-be-deployed-cs.md) 」の「明示的なコンパイルと自動コンパイル」セクションを参照してください。

自動コンパイルオプションは簡単に使用できます。 明示的なコンパイル手順はなく、変更されたファイルのみを配置する必要がありますが、明示的なコンパイルでは、変更されたマークアップページとコンパイル済みのアセンブリを配置する必要があります。 ただし、自動展開には、次の2つの潜在的な欠点があります。

- ページは最初にアクセスされたときに自動的にコンパイルされる必要があるため、ASP.NET ページが配置された後に初めて要求されると、短い遅延が発生する可能性があります。
- 自動コンパイルを行うには、宣言型マークアップとソースコードの両方が web サーバー上に存在している必要があります。 これは、web アプリケーションを web サーバーにインストールする顧客に対して web アプリケーションを販売する予定の場合に魅力的オプションになります。

上記の2つの欠点のいずれかが処理ブレーカーの場合は、WAP モデルに切り替えるか、デプロイの前に WSP を*プリコンパイル*することができます。 このチュートリアルでは、ホストされている web サイトに最適なプリコンパイルオプションを確認し、プリコンパイルプロセスとプリコンパイル済み web サイトの展開について説明します。

## <a name="an-overview-of-aspnet-code-generation-and-compilation"></a>ASP.NET のコード生成とコンパイルの概要

使用可能なプリコンパイルオプションを確認する前に、まず、ASP.NET ページが作成または最終更新された後に初めて要求されたときに発生するコード生成とコンパイルについて説明します。 ご存じのように、ASP.NET ページは2つの部分で構成されています。これは `.aspx` ファイル内の宣言型マークアップです。およびソースコード部分は、通常、別個の分離コードクラスファイル (`.aspx.cs`) にあります。 ASP.NET ページが要求されたときにランタイムによって実行される手順は、アプリケーションのコンパイルモデルによって異なります。

Wap では、ページのソースコードをデプロイする前に、1つのアセンブリに明示的にコンパイルする必要があります。 デプロイ時に、このアセンブリとさまざまなマークアップページが運用環境にコピーされます。 ASP.NET ページの web サーバーに要求が到着すると、ランタイムはページの分離コードクラスのインスタンスを作成し `ProcessRequest` メソッドを呼び出します。このメソッドは、ページのライフサイクルを開始し、最終的には、要求元に返されるページのコンテンツを生成します。 コードビハインドクラスは、配置前にアセンブリに既にコンパイルされているため、ランタイムは ASP.NET ページの分離コードクラスを使用できます。

WSPs と自動コンパイルでは、デプロイの前に明示的なコンパイル手順はありません。 代わりに、配置では、宣言型とソースコードの両方のコンテンツを運用環境にコピーする必要があります。 ページが作成された後、または最後に更新されてから初めて ASP.NET ページの web サーバーに要求が到着した場合、ランタイムは最初に、コードビハインドクラスをアセンブリにコンパイルする必要があります。 このコンパイル済みアセンブリは `%WINDIR%\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files`フォルダーに保存されます。ただし、このフォルダーの場所は `<system.web>`の `<compilation tempDirectory="" />` 要素 (通常は `Web.config`) を使用してカスタマイズできます。 アセンブリはディスクに保存されるため、同じページへの後続の要求で再コンパイルする必要はありません。

> [!NOTE]
> 必要に応じて、自動コンパイルを使用しているサイトで最初にページを要求するとき (または、変更されてから初めて)、サーバーがページのコードをコンパイルし、生成されたアセンブリをに保存するのにしばらく時間がかかるため、わずかな遅延が発生します。ディスク.

簡潔に言えば、明示的なコンパイルでは、配置する前に web サイトのソースコードをコンパイルする必要があります。この手順を実行する必要がないように、ランタイムを保存します。 自動コンパイルを使用すると、ランタイムはページのソースコードのコンパイルを処理しますが、ページが作成された後、または最後に更新されてからページに最初にアクセスしたときにわずかな初期化コストがかかります。

しかし、ASP.NET pages (`.aspx` ファイル) の宣言部分についてはどうでしょうか。 宣言型マークアップで定義されている Web コントロールがコードでアクセス可能であるため、`.aspx` ファイルと分離コードクラスのコードの間にリレーションシップがあることは明らかです。 また、`.aspx` ファイルの内容が、ページによって生成される表示マークアップに大きく影響することも明らかです。 では、要求されたページの表示内容を生成するために、ランタイムが `.aspx` ファイルで定義されているテキスト、HTML、および Web コントロール構文をどのように処理するのでしょうか。

Wap と WSPs で異なる低レベルの実装の詳細については、あまり追跡しないようにしたいと思いますが、簡単に言うと、ランタイムは、さまざまな Web コントロールを含むクラスファイルをプロテクトメンバーとメソッドとして自動的に生成します。 この生成されたファイルは、対応する分離コードクラスに*部分クラス*として実装されます。 ([部分クラス](http://www.dotnet-guide.com/partialclasses.html)を使用すると、1つのクラスの内容を複数のファイルに分散させることができます)。このため、分離コードクラスは、作成した `.aspx.cs` ファイルと、ランタイムによって作成されたこの自動生成クラスの2か所で定義されます。 この自動生成されたクラスは、`%WINDIR%\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files` フォルダーに格納されます。

ここで重要なのは、ASP.NET ページがランタイムによってレンダリングされるようにすることです。これは、宣言型とソースコード部分の両方をアセンブリにコンパイルする必要があるためです。 Wap では、ソースコードは配置前にアセンブリに明示的にコンパイルされますが、宣言型マークアップはコードに変換され、web サーバーのランタイムによってコンパイルされる必要があります。 自動コンパイルを使用する WSPs では、ソースコードと宣言マークアップの両方を web サーバーでコンパイルする必要があります。

WSP モデルでは、明示的なコンパイルを使用することができます。 WAP モデルと同様に、ソースコード部分を明示的にコンパイルできます。 さらに、宣言型マークアップをコンパイルすることもできます。

## <a name="precompilation-options"></a>プリコンパイルオプション

.NET Framework には、 [ASP.NET コンパイルツール (`aspnet_compiler.exe`)](https://msdn.microsoft.com/library/ms229863.aspx)が付属しています。このツールを使用すると、WSP モデルを使用して構築された ASP.NET アプリケーションのソースコード (およびコンテンツも含む) をコンパイルできます。 このツールは .NET Framework バージョン2.0 でリリースされ、`%WINDIR%\Microsoft.NET\Framework\v2.0.50727` フォルダーにあります。コマンドラインから使用することも、[ビルド] メニューの [Web サイトの発行] オプションを使用して Visual Studio 内から起動することもできます。

コンパイルツールには、配置のための組み込みプリコンパイルとプリコンパイルという2つの一般的なコンパイル形式が用意されています。 インプレースプリコンパイルでは、コマンドラインから `aspnet_compiler.exe` ツールを実行し、コンピューター上に存在する web サイトの仮想ディレクトリまたは物理パスへのパスを指定します。 次に、コンパイルツールは、プロジェクト内の各 ASP.NET ページをコンパイルし、コンパイルされたバージョンをブラウザーから初めてアクセスしたときと同じように、`%WINDIR%\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files` フォルダーに保存します。 インプレースプリコンパイルを使用すると、サイトに新しく配置された ASP.NET ページに対する最初の要求を高速化できます。これは、ランタイムがこの手順を実行する必要がなくなるためです。 ただし、ホストされている web サイトの大部分では、web サーバーのコマンドラインからプログラムを実行できる必要があるため、インプレースプリコンパイルは役に立ちません。 共有ホスティング環境では、このレベルのアクセスは許可されていません。

> [!NOTE]
> インプレースプリコンパイルの詳細については、「[方法: ASP.NET Web サイトをプリコンパイルする](https://msdn.microsoft.com/library/ms227972.aspx)」および「 [ASP.NET 2.0 でのプリコンパイル](http://www.odetocode.com/Articles/417.aspx)」を参照してください。

Web サイトのページを `Temporary ASP.NET Files` フォルダーにコンパイルするのではなく、配置のプリコンパイルによって、選択したディレクトリと、運用環境に配置できる形式でページがコンパイルされます。

このチュートリアルでは、「更新可能なユーザーインターフェイスを使用したプリコンパイル」と「更新不可能なユーザーインターフェイスを使用したプリコンパイル」の2種類のデプロイのプリコンパイルを使用します。 更新可能なユーザーインターフェイスを使用してプリコンパイルを行うと、`.aspx`、`.ascx`、および `.master` ファイルに宣言マークアップが残されるため、開発者は運用サーバー上の宣言型マークアップを表示して必要に応じて変更することができます。 更新不可能なユーザーインターフェイスを使用してプリコンパイルを行うと `.aspx` ページが生成され、`.ascx` ファイルと `.master` ファイルが削除されます。これにより、宣言型マークアップが非表示になり、開発者が運用環境から変更することを禁止できます。

### <a name="precompiling-for-deployment-with-an-updatable-user-interface"></a>更新可能なユーザーインターフェイスを使用した配置のためのプリコンパイル

デプロイのプリコンパイルを理解する最善の方法は、動作の例を確認することです。 更新可能なユーザーインターフェイスを使用して、デプロイ用の WSP をレビューするための書籍をプリコンパイルしてみましょう。 ASP.NET コンパイルツールは、Visual Studio の [ビルド] メニューから、またはコマンドラインから呼び出すことができます。 このセクションでは、Visual Studio 内からのツールの使用について説明します。「コマンドラインからのプリコンパイル」セクションでは、コマンドラインからのコンパイラツールの実行について見ていきます。

「Visual Studio での WSP のレビュー」を開き、[ビルド] メニューにアクセスして、[Web サイトの発行] メニューオプションを選択します。 これにより、[Web サイトの発行] ダイアログボックスが開きます (**図 1**を参照)。このダイアログボックスでは、ターゲットの場所、プリコンパイル済みサイトのユーザーインターフェイスが更新可能かどうか、およびその他のコンパイラツールオプションを指定できます。 ターゲットの場所には、リモート web サーバーまたは FTP サーバーを指定できますが、ここではコンピューターのハードドライブ上のフォルダーを選択します。 更新可能なユーザーインターフェイスを使用してサイトをプリコンパイルする場合は、[このプリコンパイル済みサイトを更新可能にする] チェックボックスをオンにしたまま、[OK] をクリックします。

[![](precompiling-your-website-cs/_static/image2.png)](precompiling-your-website-cs/_static/image1.png)

**図 1**: ASP.NET コンパイルツールは、指定されたターゲットの場所に web サイトをプリコンパイルします。  
 ([クリックすると、フルサイズの画像が表示](precompiling-your-website-cs/_static/image3.png)される)

> [!NOTE]
> [ビルド] メニューの [Web サイトの発行] オプションは、Visual Web Developer では使用できません。 Visual Web Developer を使用している場合は、ASP.NET コンパイルツールのコマンドラインバージョンを使用する必要があります。これについては、「コマンドラインからのプリコンパイル」を参照してください。

Web サイトをプリコンパイルした後、[Web サイトの発行] ダイアログボックスで入力したターゲットの場所に移動します。 このフォルダーの内容と web サイトの内容を比較してみてください。 **図 2**は、書籍のレビュー web サイトフォルダーを示しています。 `.aspx` と `.aspx.cs` ファイルの両方が含まれていることに注意してください。 また、`Bin` ディレクトリには、[前のチュートリアル](logging-error-details-with-elmah-cs.md)で追加したファイルとして `Elmah.dll`が1つだけ含まれていることに注意してください。

[![](precompiling-your-website-cs/_static/image5.png)](precompiling-your-website-cs/_static/image4.png)

**図 2**: プロジェクトディレクトリには `.aspx` ファイルと `.aspx.cs` ファイルが含まれています。`Bin` フォルダーには、だけが含まれてい `Elmah.dll`  
 ([クリックすると、フルサイズの画像が表示](precompiling-your-website-cs/_static/image6.png)される)

**図 3**は、ASP.NET コンパイルツールによってコンテンツが作成されたターゲットロケーションフォルダーを示しています。 このフォルダーには、分離コードファイルが含まれていません。 さらに、このフォルダーの `Bin` ディレクトリには、`Elmah.dll` アセンブリに加えて、複数のアセンブリと2つの `.compiled` ファイルが含まれています。

[![](precompiling-your-website-cs/_static/image8.png)](precompiling-your-website-cs/_static/image7.png)

**図 3**: ターゲットの場所フォルダーに配置用のファイルが含まれている  
 ([クリックすると、フルサイズの画像が表示](precompiling-your-website-cs/_static/image9.png)される)

Wap での明示的なコンパイルとは異なり、展開プロセスのプリコンパイルでは、サイト全体に対して1つのアセンブリが作成されるわけではありません。 代わりに、複数のページを1つのアセンブリにバッチ処理します。 また、`Global.asax` ファイル (存在する場合) も、`App_Code` フォルダー内のクラスだけでなく、独自のアセンブリにもコンパイルされます。 ASP.NET web ページ、ユーザーコントロール、およびマスターページ (`.aspx`、`.ascx`、および `.master` ファイル) の宣言型マークアップを保持するファイルは、そのままターゲットの場所のディレクトリにコピーされます。 同様に、`Web.config` ファイルは、イメージ、CSS クラス、PDF ファイルなどの静的ファイルと共に、すぐにコピーされます。 コンパイルツールがさまざまなファイルの種類を処理する方法の詳細については、「 [ASP.NET プリコンパイル中のファイル処理](https://msdn.microsoft.com/library/e22s60h9.aspx)」を参照してください。

> [!NOTE]
> [Web サイトの発行] ダイアログボックスの [固定名およびシングルページアセンブリを使用する] チェックボックスをオンにすることで、ASP.NET ページ、ユーザーコントロール、またはマスターページごとに1つのアセンブリを作成するようにコンパイルツールに指示できます。 各 ASP.NET ページを独自のアセンブリにコンパイルすることで、配置をより細かく制御できます。 たとえば、1つの ASP.NET web ページを更新し、その変更を配置する必要がある場合、そのページの `.aspx` ファイルと関連アセンブリを運用環境に配置するだけで済みます。 詳細について[は、「方法: ASP.NET コンパイルツールを使用して固定名を生成する](https://msdn.microsoft.com/library/ms228040.aspx)」を参照してください。

ターゲットの場所のディレクトリには、プリコンパイルされた web プロジェクトの一部ではないファイルも含まれています (つまり `PrecompiledApp.config`)。 このファイルは、アプリケーションがプリコンパイルされたこと、および更新可能な UI または正午の UI でプリコンパイルされているかどうかを ASP.NET ランタイムに通知します。

最後に、Visual Studio または任意のテキストエディターを使用して、ターゲットの場所にあるいずれかの `.aspx` ファイルを開きます。 更新可能なユーザーインターフェイスを使用して配置用にプリコンパイルする場合、ターゲットの場所ディレクトリの ASP.NET ページには、web サイト内の対応するファイルとまったく同じマークアップが含まれます。

### <a name="precompiling-for-deployment-with-a-non-updatable-user-interface"></a>更新不可能なユーザーインターフェイスを使用した配置のためのプリコンパイル

ASP.NET コンパイラツールを使用すると、更新できない UI を使用して配置するサイトをプリコンパイルすることもできます。 更新不可能な UI を使用したサイトのプリコンパイルは、更新可能な UI を使用したプリコンパイルと同様に機能します。つまり、ターゲットディレクトリの ASP.NET ページ、ユーザーコントロール、およびマスターページがマークアップによって削除されるという主な違いがあります。 更新不可能な UI で web サイトをデプロイ用にプリコンパイルするには、[ビルド] メニューの [Web サイトの発行] オプションを選択します。ただし、[このプリコンパイル済みサイトを更新可能にする] オプションはオフにします (**図 4**を参照)。

[![](precompiling-your-website-cs/_static/image11.png)](precompiling-your-website-cs/_static/image10.png)

**図 4**: 更新不可能な UI でプリコンパイルするために [このプリコンパイル済みサイトを更新可能にする] オプションをオフにする  
 ([クリックすると、フルサイズの画像が表示](precompiling-your-website-cs/_static/image12.png)される)

**図 5**は、更新できないユーザーインターフェイスを使用してプリコンパイルした後のターゲットロケーションフォルダーを示しています。

[![](precompiling-your-website-cs/_static/image14.png)](precompiling-your-website-cs/_static/image13.png)

**図 5**: 更新できない UI を使用した配置のターゲットロケーションフォルダー  
 ([クリックすると、フルサイズの画像が表示](precompiling-your-website-cs/_static/image15.png)される)

図**3**を**図 5**と比較します。 2つのフォルダーは同じように見えますが、更新できない UI フォルダーには、`Site.master`マスターページがありません。 また、**図 5**にはさまざまな ASP.NET ページが含まれていますが、これらのファイルの内容を表示すると、宣言型マークアップが削除され、"これはプリコンパイルツールによって生成されたマーカーファイルであり、削除することはできません" と表示されます。

[![](precompiling-your-website-cs/_static/image17.png)](precompiling-your-website-cs/_static/image16.png)

**図 5**: 宣言型のマークアップが ASP.NET ページから削除されている

**図 3**と**5**の `Bin` フォルダーは、より大きく異なります。 アセンブリに加えて、**図 5**の `Bin` フォルダーには、各 ASP.NET ページ、ユーザーコントロール、およびマスターページの `.compiled` ファイルが含まれています。

更新不可能な UI を使用してサイトをプリコンパイルすることは、運用環境で web サイトをインストールまたは管理するユーザーまたは会社が ASP.NET ページの内容を変更したくない場合に役立ちます。 お客様に販売する ASP.NET web アプリケーションを独自の web サーバーにインストールする場合は、発送する `.aspx` ページを直接編集して、サイトの外観を変更しないようにすることをお勧めします。 更新できない UI で web サイトをプリコンパイルすることによって、インストールの一部としてプレースホルダーを `.aspx` ページに発送し、顧客がコンテンツを検査または変更するのを防ぐことができます。

### <a name="precompiling-from-the-command-line"></a>コマンドラインからのプリコンパイル

バックグラウンドで、Visual Studio の [Web サイトの発行] ダイアログボックスで ASP.NET コンパイルツール (`aspnet_compiler.exe`) を呼び出して、web サイトをプリコンパイルします。 または、コマンドラインからこのツールを起動することもできます。 実際に Visual Web Developer を使用する場合は、Visual Web Developer の [ビルド] メニューに [Web サイトの発行] オプションが含まれていないため、コマンドラインからコンパイラツールを実行する必要があります。

コマンドラインからコンパイラツールを使用するには、まずコマンドラインにドロップし、フレームワークのディレクトリに移動して `%WINDIR%\Microsoft.NET\Framework\v2.0.50727`ます。 次に、コマンドラインに次のステートメントを入力します。

`aspnet_compiler -p "physical_path_to_app" -v / -f -u "target_location_folder"`

上のコマンドは、ASP.NET compiler ツール (`aspnet_compiler.exe`) を起動し、`-p` スイッチを使用して、*物理\_パス\_を*ルートとする web サイトを\_アプリにプリコンパイルするように指示します。この値は `C:\MySites\BookReviews`のようになります。引用符で区切る必要があります。

`-v` スイッチは、サイトの仮想ディレクトリを指定します。 サイトが IIS メタベースの既定の web サイトとして登録されている場合は、`-p` スイッチを省略し、アプリケーションの仮想ディレクトリを指定するだけで済みます。 `-p` スイッチを使用する場合、`-v` スイッチの後の値は web サイトのルートを示し、はアプリケーションルートの参照を解決するために使用されます。 たとえば、`-v /MySite` の値を指定した場合、`~/path/file` するアプリケーション内の参照は `~/MySite/path/file`として解決されます。 書籍のレビューサイトは、web ホスティング会社のルートディレクトリにあるため、スイッチ `-v /`を使用しました。

`-f` スイッチが存在する場合は、*ターゲット\_場所\_フォルダー*ディレクトリが既に存在する場合は上書きするようにコンパイルツールに指示します。 `-f` スイッチを省略し、ターゲットの場所のフォルダーが既に存在する場合、コンパイルツールは "エラー ASPRUNTIME: ターゲットディレクトリが空ではありません" というエラーで終了します。 手動で削除するか、別のターゲットを選択してください。 "

`-u` スイッチが存在する場合は、更新可能なユーザーインターフェイスを作成するようにツールに通知します。 更新できないユーザーインターフェイスを使用してサイトをプリコンパイルする場合は、このスイッチを省略します。

最後に、ターゲットの *\_の場所\_フォルダー*は、ターゲットの場所のディレクトリへの物理パスです。この値は `C:\MySites\Output\BookReviews`のようになります。引用符で区切る必要があります。

## <a name="deploying-the-precompiled-website"></a>プリコンパイル済み Web サイトの配置

この時点で、ASP.NET コンパイルツールを使用して、更新可能なユーザーインターフェイスオプションと更新できないユーザーインターフェイスオプションの両方を使用して web サイトをプリコンパイルする方法を説明しました。 ただし、この例では、web サイトを実稼働環境ではなくローカルフォルダーにプリコンパイルしています。 さいわいにも、プリコンパイル済み web サイトのデプロイは簡単であり、Visual Studio またはスタンドアロン FTP クライアントなどの他のファイルコピーメカニズムを使用して行うことができます。

[Web サイトの発行] ダイアログボックス (**図 1**の最初に表示) には、[ターゲットの場所] オプションがあります。このオプションは、プリコンパイル済み web サイトファイルのコピー先を示します。 この場所には、リモート web サーバーまたは FTP サーバーを指定できます。 このテキストボックスにリモートサーバーを入力すると、1回の手順で指定したサーバーに web サイトがプリコンパイルされ、展開されます。 または、web サイトをローカルフォルダーにプリコンパイルしてから、そのフォルダーの内容を FTP またはその他の方法を使用して運用環境に手動でコピーすることもできます。

Visual Studio の [Web サイトの発行] ダイアログボックスを使用して、プリコンパイルされた web サイトを自動的にデプロイすることは、開発環境と運用環境の間に構成の違いがない単純なサイトに役立ちます。 ただし、 [*開発と運用のチュートリアルの一般的な構成の違い*](common-configuration-differences-between-development-and-production-cs.md)に記載されているように、このような違いが存在することは珍しくありません。 たとえば、書籍レビュー web アプリケーションでは、開発環境とは異なるデータベースを運用環境で使用します。 Visual Studio によって web サイトがリモートサーバーに発行されると、開発環境の構成ファイル情報が無条件にコピーされます。

開発環境と運用環境の構成が異なるサイトの場合は、サイトをローカルディレクトリにプリコンパイルし、実稼働固有の構成ファイルをコピーして、プリコンパイル済み出力の内容をにコピーするのが最適な場合があります。時.

開発環境から運用環境へのファイルのコピーの詳細については、「 [*FTP クライアントを使用した Web サイトのデプロイ*](deploying-your-site-using-an-ftp-client-cs.md)」と[ *「Visual Studio を使用した Web サイトのデプロイ*](determining-what-files-need-to-be-deployed-cs.md)」チュートリアルを参照してください。

## <a name="summary"></a>まとめ

ASP.NET は、自動と explicit の2つのコンパイルモードをサポートしています。 前のチュートリアルで説明したように、Web アプリケーションプロジェクト (Wap) は明示的なコンパイルを使用しますが、Web サイトプロジェクト (WSPs) は既定で自動コンパイルを使用します。 ただし、ASP.NET コンパイルツールを使用すると、デプロイの前に WSP を明示的にコンパイルできます。

このチュートリアルでは、配置をサポートするためのコンパイルツールのプリコンパイルに焦点を絞っています。 配置のためにプリコンパイルを行う場合、コンパイルツールは、ターゲットの場所のフォルダーを作成し、指定された web アプリケーションのソースコードをコンパイルして、これらのコンパイル済みのアセンブリとコンテンツファイルをターゲットの場所のフォルダーにコピーします。 コンパイルツールを構成して、更新可能または更新不可能なユーザーインターフェイスを作成できます。 更新できないユーザーインターフェイスオプションを使用してプリコンパイルを行うと、コンテンツファイル内の宣言型マークアップが削除されます。 簡単に言うと、プリコンパイルを使用すると、必要に応じて、ソースコードファイルを含めずに、宣言型マークアップを削除して、Web サイトプロジェクトベースのアプリケーションを配置できます。

プログラミングを楽しんでください。

### <a name="further-reading"></a>参考資料

このチュートリアルで説明しているトピックの詳細については、次のリソースを参照してください。

- [ASP.NET Web サイトのプリコンパイル](https://msdn.microsoft.com/library/ms228015.aspx)
- [ASP.NET 2.0 での分離コードとコンパイル](https://msdn.microsoft.com/magazine/cc163675.aspx)
- [ASP.NET でのプリコンパイル](http://www.odetocode.com/Articles/417.aspx)
- [ASP.NET のプリコンパイル済みサイトオプション](http://www.dotnetperls.com/precompiled)

> [!div class="step-by-step"]
> [前へ](logging-error-details-with-elmah-cs.md)
> [次へ](users-and-roles-on-the-production-website-cs.md)
