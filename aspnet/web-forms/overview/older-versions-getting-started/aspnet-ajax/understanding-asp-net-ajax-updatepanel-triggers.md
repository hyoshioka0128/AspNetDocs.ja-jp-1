---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
title: ASP.NET AJAX UpdatePanel トリガーについて |Microsoft Docs
author: scottcate
description: Visual Studio でのマークアップ エディターで作業しているときにお気付き (IntelliSense) から、UpdatePanel コントロールの 2 つの子要素があることです。 値を下回った場合のいずれかを指定しています.
ms.author: riande
ms.date: 03/12/2008
ms.assetid: faab8503-2984-48a9-8a40-7728461abc50
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
msc.type: authoredcontent
ms.openlocfilehash: c61d10c28ba3975cb6fbadc6eda1f7a3c9406dfc
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2019
ms.locfileid: "65114606"
---
# <a name="understanding-aspnet-ajax-updatepanel-triggers"></a><span data-ttu-id="8ec95-104">ASP.NET AJAX UpdatePanel トリガーについて理解する</span><span class="sxs-lookup"><span data-stu-id="8ec95-104">Understanding ASP.NET AJAX UpdatePanel Triggers</span></span>

<span data-ttu-id="8ec95-105">によって[Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="8ec95-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="8ec95-106">PDF のダウンロード</span><span class="sxs-lookup"><span data-stu-id="8ec95-106">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial02_Triggers_cs.pdf)

> <span data-ttu-id="8ec95-107">Visual Studio でのマークアップ エディターで作業しているときにお気付き (IntelliSense) から、UpdatePanel コントロールの 2 つの子要素があることです。</span><span class="sxs-lookup"><span data-stu-id="8ec95-107">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an UpdatePanel control.</span></span> <span data-ttu-id="8ec95-108">ページ (または 1 つを使用している場合、ユーザー コントロール) 上のコントロールを指定するトリガー要素は、その 1 つの要素が存在する UpdatePanel コントロールは、部分的なレンダリングがトリガーされます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-108">One of which is the Triggers element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the element resides.</span></span>

## <a name="introduction"></a><span data-ttu-id="8ec95-109">はじめに</span><span class="sxs-lookup"><span data-stu-id="8ec95-109">Introduction</span></span>

<span data-ttu-id="8ec95-110">マイクロソフトの ASP.NET テクノロジ オブジェクト指向し、イベント ドリブン プログラミング モデルとそれを組み合わせたのコンパイル済みコードの利点があります。</span><span class="sxs-lookup"><span data-stu-id="8ec95-110">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="8ec95-111">ただし、そのサーバー側の処理モデルでは、Microsoft ASP.NET 3.5 の AJAX Extensions に含まれる新しい機能では多くのアドレスを指定することができます、テクノロジ固有のいくつかの欠点があります。</span><span class="sxs-lookup"><span data-stu-id="8ec95-111">However, its server-side processing model has several drawbacks inherent in the technology, many of which can be addressed by the new features included in the Microsoft ASP.NET 3.5 AJAX Extensions.</span></span> <span data-ttu-id="8ec95-112">これらの拡張機能は、ページ全体の更新では、(ASP.NET のプロファイル API を含む)、クライアント スクリプトと広範なクライアント側 API を使用して Web サービスにアクセスする機能を必要とせずにページの部分的なレンダリングを含む、多くの新機能豊富なクライアント機能を有効にします。ASP.NET サーバー側コントロール セットに表示されるコントロール パターンの多くをミラーに設計されています。</span><span class="sxs-lookup"><span data-stu-id="8ec95-112">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="8ec95-113">このホワイト ペーパーでは、ASP.NET AJAX の XML のトリガー機能を調べて`UpdatePanel`コンポーネント。</span><span class="sxs-lookup"><span data-stu-id="8ec95-113">This whitepaper examines the XML Triggers functionality of the ASP.NET AJAX `UpdatePanel` component.</span></span> <span data-ttu-id="8ec95-114">XML のトリガーでは、特定の UpdatePanel コントロールの部分的なレンダリングを引き起こす可能性のあるコンポーネントの詳細な制御を提供します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-114">XML Triggers give granular control over the components that can cause partial rendering for specific UpdatePanel controls.</span></span>

<span data-ttu-id="8ec95-115">このホワイト ペーパーでは、.NET Framework 3.5 のベータ 2 リリースと Visual Studio 2008 に基づきます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-115">This whitepaper is based on the Beta 2 release of the .NET Framework 3.5 and Visual Studio 2008.</span></span> <span data-ttu-id="8ec95-116">ASP.NET AJAX の拡張機能であり、以前 ASP.NET 2.0 を対象としたアドオン アセンブリは .NET Framework 基本クラス ライブラリに統合されました。</span><span class="sxs-lookup"><span data-stu-id="8ec95-116">The ASP.NET AJAX Extensions, previously an add-on assembly targeted at ASP.NET 2.0, are now integrated into the .NET Framework Base Class Library.</span></span> <span data-ttu-id="8ec95-117">このホワイト ペーパー Visual Studio 2008 のない Visual Web Developer Express で使用される (ただし、コードの一覧が完全な互換性に関係なくするには、Visual Studio のユーザー インターフェイスに従って概説はし、、も前提としています開発環境の場合)。</span><span class="sxs-lookup"><span data-stu-id="8ec95-117">This whitepaper also assumes that you will be working with Visual Studio 2008, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio (although code listings will be entirely compatible regardless of development environment).</span></span>

## <a name="triggers"></a><span data-ttu-id="8ec95-118">*トリガー*</span><span class="sxs-lookup"><span data-stu-id="8ec95-118">*Triggers*</span></span>

<span data-ttu-id="8ec95-119">既定では、特定の UpdatePanel のトリガーが自動的に (たとえば) を持つテキスト ボックス コントロールを含む、ポストバックを起動する子コントロールを含める、`AutoPostBack`プロパティに設定**true**します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-119">Triggers for a given UpdatePanel, by default, automatically include any child controls that invoke a postback, including (for example) TextBox controls that have their `AutoPostBack` property set to **true**.</span></span> <span data-ttu-id="8ec95-120">ただし、トリガー含めることもできます。 マークアップを使用して宣言内でこれは、 `<triggers>` UpdatePanel コントロールの宣言のセクション。</span><span class="sxs-lookup"><span data-stu-id="8ec95-120">However, triggers can also be included declaratively using markup; this is done within the `<triggers>` section of the UpdatePanel control declaration.</span></span> <span data-ttu-id="8ec95-121">トリガーを使用してアクセスできますが、`Triggers`コレクション プロパティ、それが推奨されます (たとえば、デザイン時に、コントロールを使用できません) 場合は、実行時に、部分的なレンダリングのトリガーを登録することを使用して、`RegisterAsyncPostBackControl(Control)`のメソッド、内部オブジェクト、ページの ScriptManager、`Page_Load`イベント。</span><span class="sxs-lookup"><span data-stu-id="8ec95-121">Although triggers can be accessed via the `Triggers` collection property, it is recommended that you register any partial render triggers at run-time (for instance, if a control is not available at design time) by using the `RegisterAsyncPostBackControl(Control)` method of the ScriptManager object for your page, within the `Page_Load` event.</span></span> <span data-ttu-id="8ec95-122">ページはステートレスで、これは再登録するこれらのコントロールが作成されるたびにことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="8ec95-122">Remember that Pages are stateless, and so you should re-register these controls every time they are created.</span></span>

<span data-ttu-id="8ec95-123">子の自動トリガー包含も無効にできます (そのポストバックを作成する子コントロールは、自動的に部分的なレンダリングをトリガーしません) を設定して、`ChildrenAsTriggers`プロパティを**false**します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-123">Automatic child trigger inclusion can also be disabled (so that child controls that create postbacks do not automatically trigger partial renders) by setting the `ChildrenAsTriggers` property to **false**.</span></span> <span data-ttu-id="8ec95-124">これによりどの特定のコントロールを割り当てることで最大の柔軟性、ページ レンダリングを呼び出すことができますし、お勧め、開発者はオプトイン可能性があるすべてのイベントを処理するのではなく、イベントに応答できるようにできます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-124">This allows you the greatest flexibility in assigning which specific controls may invoke a page render, and is recommended, so that a developer will opt-in to respond to an event, rather than handling any events that may arise.</span></span>

<span data-ttu-id="8ec95-125">UpdatePanel コントロールは入れ子になったときに、UpdateMode 設定されている場合注意してください**条件付き**子 UpdatePanel がトリガーされますが、UpdatePanel が更新されます子のみが、親ではないの場合は、します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-125">Note that when UpdatePanel controls are nested, when the UpdateMode is set to **Conditional**, if the child UpdatePanel is triggered, but the parent is not, then only the child UpdatePanel will refresh.</span></span> <span data-ttu-id="8ec95-126">ただし、親 UpdatePanel が更新された場合、子 UpdatePanel も更新されます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-126">However, if the parent UpdatePanel is refreshed, then the child UpdatePanel will also be refreshed.</span></span>

## <a name="the-lttriggersgt-element"></a><span data-ttu-id="8ec95-127">*&lt;トリガー&gt;要素*</span><span class="sxs-lookup"><span data-stu-id="8ec95-127">*The &lt;Triggers&gt; Element*</span></span>

<span data-ttu-id="8ec95-128">Visual Studio でのマークアップ エディターで作業しているときにすることがありますに注意してください (IntelliSense) から 2 つの子要素があることの`UpdatePanel`コントロール。</span><span class="sxs-lookup"><span data-stu-id="8ec95-128">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an `UpdatePanel` control.</span></span> <span data-ttu-id="8ec95-129">最も多く見要素は、`<ContentTemplate>`要素は、本質的に更新パネルによって保持されるコンテンツをカプセル化する (コンテンツの部分的なレンダリングを有効にします)。</span><span class="sxs-lookup"><span data-stu-id="8ec95-129">The most-frequently seen element is the `<ContentTemplate>` element, which essentially encapsulates the content that will be held by the update panel (the content for which we are enabling partial rendering).</span></span> <span data-ttu-id="8ec95-130">その他の要素が、`<Triggers>`ページ (または 1 つを使用している場合、ユーザー コントロール) 上のコントロールを指定する、要素を UpdatePanel コントロールの部分的なレンダリングをトリガーする、&lt;トリガー&gt;要素が存在します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-130">The other element is the `<Triggers>` element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the &lt;Triggers&gt; element resides.</span></span>

<span data-ttu-id="8ec95-131">`<Triggers>`要素は、任意の数ごとの 2 つの子ノードを含めることができます:`<asp:AsyncPostBackTrigger>`と`<asp:PostBackTrigger>`します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-131">The `<Triggers>` element can contain any number each of two child nodes: `<asp:AsyncPostBackTrigger>` and `<asp:PostBackTrigger>`.</span></span> <span data-ttu-id="8ec95-132">2 つの属性が受け入れる`ControlID`と`EventName`、カプセル化の現在の単位内の任意のコントロールを指定することができます (たとえば、Web ユーザー コントロール内で、UpdatePanel コントロールが存在する場合をしようとしないでくださいでコントロールを参照ページ、ユーザー コントロールが存在する)。</span><span class="sxs-lookup"><span data-stu-id="8ec95-132">They both accept two attributes, `ControlID` and `EventName`, and can specify any Control within the current unit of encapsulation (for instance, if your UpdatePanel control resides within a Web User Control, you should not attempt to reference a Control on the Page on which the User Control will reside).</span></span>

<span data-ttu-id="8ec95-133">`<asp:AsyncPostBackTrigger>`要素は、の子として存在するコントロールからイベントをターゲットにできることに特に便利です*任意*UpdatePanel コントロールをこのトリガーは、子 UpdatePanel だけでなく、カプセル化の単位.</span><span class="sxs-lookup"><span data-stu-id="8ec95-133">The `<asp:AsyncPostBackTrigger>` element is particularly useful in that it can target any event from a Control that exists as a child of *any* UpdatePanel control in the unit of encapsulation, not just the UpdatePanel under which this trigger is a child.</span></span> <span data-ttu-id="8ec95-134">したがって、部分ページ更新を開始する任意のコントロールを作成できます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-134">Thus, any control can be made to trigger a partial page update.</span></span>

<span data-ttu-id="8ec95-135">同様に、`<asp:PostBackTrigger>`部分ページ レンダリング、トリガーが、サーバーへの完全なラウンドト リップが必要な要素を使用できます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-135">Similarly, the `<asp:PostBackTrigger>` element can be used to trigger a partial page render, but one that requires a full round-trip to the server.</span></span> <span data-ttu-id="8ec95-136">このトリガーの要素がコントロールは通常、部分ページ レンダリングがトリガーするそれ以外の場合と、完全なページ レンダリングを強制することもできます (時など、`Button`コントロールが、 `<ContentTemplate>` UpdatePanel コントロールの要素)。</span><span class="sxs-lookup"><span data-stu-id="8ec95-136">This trigger element can also be used to force a full page render when a control would otherwise normally trigger a partial page render (for instance, when a `Button` control exists in the `<ContentTemplate>` element of an UpdatePanel control).</span></span> <span data-ttu-id="8ec95-137">ここでも、PostBackTrigger 要素は、カプセル化の現在の単位の UpdatePanel コントロールの子である任意のコントロールを指定できます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-137">Again, the PostBackTrigger element can specify any control that is a child of any UpdatePanel control in the current unit of encapsulation.</span></span>

## <a name="lttriggersgt-element-reference"></a><span data-ttu-id="8ec95-138">*&lt;トリガー&gt;要素のリファレンス*</span><span class="sxs-lookup"><span data-stu-id="8ec95-138">*&lt;Triggers&gt; Element Reference*</span></span>

<span data-ttu-id="8ec95-139">*マークアップの子孫。*</span><span class="sxs-lookup"><span data-stu-id="8ec95-139">*Markup Descendants:*</span></span>

| <span data-ttu-id="8ec95-140">**タグ**</span><span class="sxs-lookup"><span data-stu-id="8ec95-140">**Tag**</span></span> | <span data-ttu-id="8ec95-141">**説明**</span><span class="sxs-lookup"><span data-stu-id="8ec95-141">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="8ec95-142">&lt;asp:AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="8ec95-142">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="8ec95-143">コントロールと、部分ページ更新をこのトリガーの参照を含んでいる UpdatePanel の原因となるイベントを指定します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-143">Specifies a control and event that will cause a partial page update for the UpdatePanel that contains this trigger reference.</span></span> |
| <span data-ttu-id="8ec95-144">&lt;asp:PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="8ec95-144">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="8ec95-145">コントロールと、完全なページ更新 (ページ全体の更新) が発生するイベントを指定します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-145">Specifies a control and event that will cause a full page update (a full page refresh).</span></span> <span data-ttu-id="8ec95-146">このタグは、コントロールは、部分的なレンダリングをトリガーするそれ以外の場合と、完全な更新を強制的に使用できます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-146">This tag can be used to force a full refresh when a control would otherwise trigger partial rendering.</span></span> |

## <a name="walkthrough-cross-updatepanel-triggers"></a><span data-ttu-id="8ec95-147">*チュートリアル: クロス UpdatePanel トリガー*</span><span class="sxs-lookup"><span data-stu-id="8ec95-147">*Walkthrough: Cross-UpdatePanel Triggers*</span></span>

1. <span data-ttu-id="8ec95-148">Scriptmanager コントロール オブジェクトが部分的なレンダリングを有効にする設定で新しい ASP.NET ページを作成します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-148">Create a new ASP.NET page with a ScriptManager object set to enable partial rendering.</span></span> <span data-ttu-id="8ec95-149">最初のこのページに 2 つの Updatepanel を追加、ラベル コントロール (Label1) と 2 つのボタン コントロール (Button1 と Button2) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-149">Add two UpdatePanels to this page - in the first, include a Label control ( Label1 ) and two Button controls ( Button1 and Button2 ).</span></span> <span data-ttu-id="8ec95-150">Button1 の両方を更新する をクリックする必要がありますと答えてし、Button2 する必要があります、または次のようなこれらの行を更新する をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8ec95-150">Button1 should say Click to Update Both and Button2 should say Click to Update This, or something along those lines.</span></span> <span data-ttu-id="8ec95-151">2 番目の UpdatePanel では、ラベル コントロール (Label2) のみを含めるを区別するために既定値以外に、前景色プロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-151">In the second UpdatePanel, include only a Label control ( Label2 ), but set its ForeColor property to something other than the default to differentiate it.</span></span>
2. <span data-ttu-id="8ec95-152">両方の UpdatePanel タグの UpdateMode プロパティを設定**条件付き**します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-152">Set the UpdateMode property of both UpdatePanel tags to **Conditional**.</span></span>

<span data-ttu-id="8ec95-153">**リスト 1。Default.aspx のマークアップ:**</span><span class="sxs-lookup"><span data-stu-id="8ec95-153">**Listing 1: Markup for default.aspx:**</span></span> 

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample1.aspx)]

1. <span data-ttu-id="8ec95-154">Button1 のクリック イベント ハンドラーで何か (DateTime.Now.ToLongTimeString()) など時間に依存する Label1.Text と Label2.Text を設定します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-154">In the Click event handler for Button1, set Label1.Text and Label2.Text to something time-dependent (such as DateTime.Now.ToLongTimeString()).</span></span> <span data-ttu-id="8ec95-155">Button2 の Click イベント ハンドラー、Label1.Text のみ時間依存の値に設定します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-155">For the Click event handler for Button2, set only Label1.Text to the time-dependent value.</span></span>

<span data-ttu-id="8ec95-156">**リスト 2。(トリム) で default.aspx.cs 分離コード:**</span><span class="sxs-lookup"><span data-stu-id="8ec95-156">**Listing 2: Codebehind (trimmed) in default.aspx.cs:**</span></span> 

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample2.cs)]

1. <span data-ttu-id="8ec95-157">F5 キーを押して、プロジェクトをビルドして実行します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-157">Press F5 to build and run the project.</span></span> <span data-ttu-id="8ec95-158">更新の両方のパネルをクリックするとは、両方のラベルのテキストと変更に注意してください。ただし、このパネルの Update をクリックすると、Label1 のみに更新します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-158">Note that, when you click Update Both Panels, both labels change text; however, when you click Update This Panel, only Label1 updates.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image2.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image1.png)

<span data-ttu-id="8ec95-159">([フルサイズの画像を表示する をクリックします](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))。</span><span class="sxs-lookup"><span data-stu-id="8ec95-159">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span></span>

## <a name="under-the-hood"></a><span data-ttu-id="8ec95-160">*内部的な処理*</span><span class="sxs-lookup"><span data-stu-id="8ec95-160">*Under the Hood*</span></span>

<span data-ttu-id="8ec95-161">作成したばかりの例を利用することができますを見ていきます、ASP.NET AJAX が行っている内容と、UpdatePanel クロス パネル トリガーの動作します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-161">Utilizing the example we just constructed, we can take a look at what ASP.NET AJAX is doing and how our UpdatePanel cross-panel triggers work.</span></span> <span data-ttu-id="8ec95-162">FireBug - と呼ばれる、Mozilla Firefox 拡張機能と同様に、生成されたページのソース HTML、いたしますそのためには、AJAX ポストバックを簡単に確認できます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-162">To do so, we will work with the generated page source HTML, as well as the Mozilla Firefox extension called FireBug - with it, we can easily examine the AJAX postbacks.</span></span> <span data-ttu-id="8ec95-163">また、Lutz Roeder の .NET Reflector ツールを使用します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-163">We will also use the .NET Reflector tool by Lutz Roeder.</span></span> <span data-ttu-id="8ec95-164">どちらのツールは、オンラインで自由に利用できると、インターネット検索で見つかんだことができます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-164">Both of these tools are freely available online, and can be found with an internet search.</span></span>

<span data-ttu-id="8ec95-165">ページのソース コードの検査を示していません。 通常どおりほぼ何もUpdatePanel コントロールとしてレンダリングされます`<div>`コンテナー、および私たちスクリプト リソースには提供が含まれていますを確認できますが、 `<asp:ScriptManager>`。</span><span class="sxs-lookup"><span data-stu-id="8ec95-165">An examination of the page source code shows almost nothing out of the ordinary; the UpdatePanel controls are rendered as `<div>` containers, and we can see the script resource includes provided by the `<asp:ScriptManager>`.</span></span> <span data-ttu-id="8ec95-166">いくつか新しい AJAX 固有 AJAX のクライアント スクリプト ライブラリの内部に呼び出し、PageRequestManager にもあります。</span><span class="sxs-lookup"><span data-stu-id="8ec95-166">There are also some new AJAX-specific calls to the PageRequestManager that are internal to the AJAX client script library.</span></span> <span data-ttu-id="8ec95-167">最後に、2 つの UpdatePanel コンテナー - で、表示されたいずれかがわかります`<input>`、2 つのボタン`<asp:Label>`としてコントロールがレンダリング`<span>`コンテナー。</span><span class="sxs-lookup"><span data-stu-id="8ec95-167">Finally, we see the two UpdatePanel containers - one with the rendered `<input>` buttons with the two `<asp:Label>` controls rendered as `<span>` containers.</span></span> <span data-ttu-id="8ec95-168">(FireBug で DOM ツリーを検査するわかることを表示されるコンテンツを生成しないされることを示すために、ラベルが淡色表示されます)。</span><span class="sxs-lookup"><span data-stu-id="8ec95-168">(If you inspect the DOM tree in FireBug, you will notice that the labels are dimmed to indicate that they are not producing visible content).</span></span>

<span data-ttu-id="8ec95-169">このパネルの更新 ボタンをクリックして、現在のサーバー時刻で最上位の UpdatePanel が更新されますを注意してください。</span><span class="sxs-lookup"><span data-stu-id="8ec95-169">Click the Update This Panel button, and notice the top UpdatePanel will be updated with the current server time.</span></span> <span data-ttu-id="8ec95-170">、FireBug では、要求を確認するようにコンソール タブを選択します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-170">In FireBug, choose the Console tab so that you can examine the request.</span></span> <span data-ttu-id="8ec95-171">最初に POST 要求パラメーターを確認します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-171">Examine the POST request parameters first:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image5.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image4.png)

<span data-ttu-id="8ec95-172">([フルサイズの画像を表示する をクリックします](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))。</span><span class="sxs-lookup"><span data-stu-id="8ec95-172">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span></span>

<span data-ttu-id="8ec95-173">UpdatePanel に示されて、サーバー側の AJAX コード ScriptManager1 パラメーターを使用してコントロール ツリーが発生した正確な注:`Button1`の`UpdatePanel1`コントロール。</span><span class="sxs-lookup"><span data-stu-id="8ec95-173">Note that the UpdatePanel has indicated to the server-side AJAX code precisely which control tree was fired via the ScriptManager1 parameter: `Button1` of the `UpdatePanel1` control.</span></span> <span data-ttu-id="8ec95-174">両方のパネルの更新 ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="8ec95-174">Now, click on the Update Both Panels button.</span></span> <span data-ttu-id="8ec95-175">パイプで区切られた一連の変数を文字列に設定をわかります応答を検証するには、次に、具体的には、最上位の UpdatePanel がわかります`UpdatePanel1`が全体、HTML ブラウザーに送信します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-175">Then, examining the response, we see a pipe-delimited series of variables set in a string; specifically, we see the top UpdatePanel, `UpdatePanel1`, has the entirety of its HTML sent to the browser.</span></span> <span data-ttu-id="8ec95-176">AJAX のクライアント スクリプト ライブラリには、UpdatePanel の元の HTML コンテンツを使用して新しいコンテンツが置換されます、`.innerHTML`プロパティ、ため、サーバーは、HTML としてサーバーから変更されたコンテンツを送信します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-176">The AJAX client script library substitutes the UpdatePanel's original HTML content with the new content via the `.innerHTML` property, and so the server sends the changed content from the server as HTML.</span></span>

<span data-ttu-id="8ec95-177">ここで、更新の両方のパネルのボタンをクリックし、サーバーから結果を確認します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-177">Now, click on the Update Both Panels button and examine the results from the server.</span></span> <span data-ttu-id="8ec95-178">結果は非常に似ています - 両方の Updatepanel がサーバーから新しい HTML を受信します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-178">The results are very similar - both UpdatePanels receive new HTML from the server.</span></span> <span data-ttu-id="8ec95-179">前のコールバックと同様、追加のページの状態が送信されます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-179">As with the previous callback, additional page state is sent.</span></span>

<span data-ttu-id="8ec95-180">ご覧のとおり、AJAX ポストバックを実行する特別なコードを使用しないため、AJAX のクライアント スクリプト ライブラリがコードを追加しなくても、フォームのポストバックをインターセプトします。</span><span class="sxs-lookup"><span data-stu-id="8ec95-180">As we can see, because no special code is utilized to perform an AJAX postback, the AJAX client script library is able to intercept form postbacks without any additional code.</span></span> <span data-ttu-id="8ec95-181">サーバー コントロールは、フォームを自動的に送信しない - ASP.NET は、主に自動スクリプト リソースを含めること、PostBackOptions クラスによって実現フォーム検証および状態は既に、コードを自動的に挿入するために自動的に JavaScript を利用します。、、ClientScriptManager クラス。</span><span class="sxs-lookup"><span data-stu-id="8ec95-181">Server controls automatically utilize JavaScript so that they do not automatically submit the form - ASP.NET automatically injects code for form validation and state already, primarily achieved by automatic script resource inclusion, the PostBackOptions class, and the ClientScriptManager class.</span></span>

<span data-ttu-id="8ec95-182">たとえば、チェック ボックス コントロール.NET Reflector でクラスの逆アセンブリを調べます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-182">For instance, consider a CheckBox control; examine the class disassembly in .NET Reflector.</span></span> <span data-ttu-id="8ec95-183">これを行うには、System.Web アセンブリが、開いていることを確認しに移動します、`System.Web.UI.WebControls.CheckBox`クラス、開く、`RenderInputTag`メソッド。</span><span class="sxs-lookup"><span data-stu-id="8ec95-183">To do so, ensure that your System.Web assembly is open, and navigate to the `System.Web.UI.WebControls.CheckBox` class, opening the `RenderInputTag` method.</span></span> <span data-ttu-id="8ec95-184">チェックする条件を探して、`AutoPostBack`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="8ec95-184">Look for a conditional that checks the `AutoPostBack` property:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image8.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image7.png)

<span data-ttu-id="8ec95-185">([フルサイズの画像を表示する をクリックします](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))。</span><span class="sxs-lookup"><span data-stu-id="8ec95-185">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span></span>

<span data-ttu-id="8ec95-186">自動ポストバックが有効な場合、 `CheckBox` (、AutoPostBack プロパティが true) を使用して、結果を制御`<input>`ASP.NET イベントでのスクリプトの処理されたタグが表示されるため、`onclick`属性。</span><span class="sxs-lookup"><span data-stu-id="8ec95-186">When automatic postback is enabled on a `CheckBox` control (via the AutoPostBack property being true), the resultant `<input>` tag is therefore rendered with an ASP.NET event handling script in its `onclick` attribute.</span></span> <span data-ttu-id="8ec95-187">次に、フォームの送信の傍受は、互換性に影響する可能性がある不正確な文字列置換を使用することによって発生する可能性の変更可能性を回避するために支援 nonintrusively、ページに挿入する ASP.NET AJAX を使用できます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-187">The interception of the form's submission, then, allows ASP.NET AJAX to be injected into the page nonintrusively, helping to avoid any potential breaking changes that might occur by utilizing a possibly-imprecise string replacement.</span></span> <span data-ttu-id="8ec95-188">これにより、さらに、*任意*コードを追加しなくても、UpdatePanel のコンテナー内での使用をサポートするために ASP.NET AJAX の機能を利用するカスタムの ASP.NET コントロール。</span><span class="sxs-lookup"><span data-stu-id="8ec95-188">Furthermore, this enables *any* custom ASP.NET control to utilize the power of ASP.NET AJAX without any additional code to support its use within an UpdatePanel container.</span></span>

<span data-ttu-id="8ec95-189">`<triggers>` PageRequestManager の呼び出しで初期化される値に対応する機能\_updateControls (注、メソッド、イベント、およびフィールドの名前が始まる、ASP.NET AJAX のクライアント スクリプト ライブラリは、規則を使用して。アンダー スコアでは内部としてマークされて、ライブラリ自体の外部で使用するためのものではありません)。</span><span class="sxs-lookup"><span data-stu-id="8ec95-189">The `<triggers>` functionality corresponds to the values initialized in the PageRequestManager call to \_updateControls (note that the ASP.NET AJAX client script library utilizes the convention that methods, events, and field names that begin with an underscore are marked as internal, and are not meant for use outside of the library itself).</span></span> <span data-ttu-id="8ec95-190">コントロールは、AJAX ポストバックが発生することを確認できます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-190">With it, we can observe which controls are intended to cause AJAX postbacks.</span></span>

<span data-ttu-id="8ec95-191">たとえば、Updatepanel の外部で 1 つのコントロールを完全に終了し、UpdatePanel 内で 1 つのままにして、ページにしましょう 2 つの他のコントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-191">For example, let's add two additional controls to the page, leaving one control outside of the UpdatePanels entirely, and leaving one within an UpdatePanel.</span></span> <span data-ttu-id="8ec95-192">上部の UpdatePanel 内のチェック ボックス コントロールを追加いたします。 そのリスト内で定義されている色の数が、DropDownList を削除します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-192">We will add a CheckBox control within the upper UpdatePanel, and drop a DropDownList with a number of colors defined within the list.</span></span> <span data-ttu-id="8ec95-193">新しいマークアップを次に示します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-193">Here is the new markup:</span></span>

<span data-ttu-id="8ec95-194">**3 を一覧表示します。新しいマークアップ**</span><span class="sxs-lookup"><span data-stu-id="8ec95-194">**Listing 3: New Markup**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample3.aspx)]

<span data-ttu-id="8ec95-195">新しい分離コードを次に示します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-195">And here is the new code-behind:</span></span>

<span data-ttu-id="8ec95-196">**リスト 4。分離コード**</span><span class="sxs-lookup"><span data-stu-id="8ec95-196">**Listing 4: Codebehind**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample4.cs)]

<span data-ttu-id="8ec95-197">このページの背後にある考え方は、ドロップダウン リストが 2 つ目のラベルを表示する 3 つの色のいずれかを選択することで、両方が太字かどうかと、ラベルが、日付と時刻を表示するかどうかのチェック ボックスを決定することです。</span><span class="sxs-lookup"><span data-stu-id="8ec95-197">The idea behind this page is that the drop-down list selects one of three colors to show the second label, that the check box determines both whether it is bold, and whether the labels display the date as well as the time.</span></span> <span data-ttu-id="8ec95-198">チェック ボックスには、AJAX の更新する必要がありますされませんが、ドロップダウン リストは、しない、UpdatePanel 内で格納されている場合でも。</span><span class="sxs-lookup"><span data-stu-id="8ec95-198">The check box should not cause an AJAX update, but the drop-down list should, even though it is not housed within an UpdatePanel.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image11.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image10.png)

<span data-ttu-id="8ec95-199">([フルサイズの画像を表示する をクリックします](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))。</span><span class="sxs-lookup"><span data-stu-id="8ec95-199">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span></span>

<span data-ttu-id="8ec95-200">上記のスクリーン ショットで明らかには、最近のボタンがクリックされるは下部にある時間に依存しない、最上位の時間を更新する更新このパネルの右ボタンをしました。</span><span class="sxs-lookup"><span data-stu-id="8ec95-200">As is apparent in the above screen shot, the most-recent button to be clicked was the right button Update This Panel, which updated the top time independent of the bottom time.</span></span> <span data-ttu-id="8ec95-201">日付もオフになって、数回のクリックの間で日付が一番下のラベルに表示します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-201">The date was also switched off between clicks, as the date is visible in the bottom label.</span></span> <span data-ttu-id="8ec95-202">最後に関心のあるは、下部にあるラベルの色: コントロールの状態が重要なことについては、ラベルのテキストよりも最近更新されたユーザーだと思って AJAX ポストバック中に保持します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-202">Finally of interest is the bottom label's color: it was updated more recently than the label's text, which demonstrates that control state is important, and users expect it to be preserved through AJAX postbacks.</span></span> <span data-ttu-id="8ec95-203">*ただし*時刻は更新されませんでした。</span><span class="sxs-lookup"><span data-stu-id="8ec95-203">*However*, the time was not updated.</span></span> <span data-ttu-id="8ec95-204">時間がの永続性を自動的に再生成、 \_\_コントロールがサーバーに再表示されているときに、ASP.NET ランタイムによって解釈されるページの VIEWSTATE フィールド。</span><span class="sxs-lookup"><span data-stu-id="8ec95-204">The time was automatically repopulated through the persistence of the \_\_VIEWSTATE field of the page being interpreted by the ASP.NET runtime when the control was being re-rendered on the server.</span></span> <span data-ttu-id="8ec95-205">ASP.NET AJAX サーバー コードでは、状態を変更する方法、コントロールは認識しませんビューステートから単純に再作成し、適切なイベントが実行されます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-205">The ASP.NET AJAX server code does not recognize in which methods the controls are changing state; it simply repopulates from view state and then runs the events that are appropriate.</span></span>

<span data-ttu-id="8ec95-206">これは、指摘、ただし、いたは初期化されているページ内で時間\_Load イベントでは、時間がインクリメントされていた正しくします。</span><span class="sxs-lookup"><span data-stu-id="8ec95-206">It should be pointed out, however, that had I initialized the time within the Page\_Load event, the time would have been incremented correctly.</span></span> <span data-ttu-id="8ec95-207">その結果、開発者が、適切なイベント ハンドラーの中に、適切なコードが実行されることに注意してくださいし、ページの使用を回避する必要があります\_コントロールのイベント ハンドラーが適切なときにロードします。</span><span class="sxs-lookup"><span data-stu-id="8ec95-207">Consequently, developers should be wary that the appropriate code is being run during the appropriate event handlers, and avoid use of Page\_Load when a control event handler would be appropriate.</span></span>

## <a name="summary"></a><span data-ttu-id="8ec95-208">まとめ</span><span class="sxs-lookup"><span data-stu-id="8ec95-208">Summary</span></span>

<span data-ttu-id="8ec95-209">ASP.NET AJAX 拡張機能の UpdatePanel コントロールは、用途が広く、多くのメソッドを更新する必要がありますが、コントロールのイベントを識別するために利用できます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-209">The ASP.NET AJAX Extensions UpdatePanel control is versatile, and can utilize a number of methods for identifying control events that should cause it to be updated.</span></span> <span data-ttu-id="8ec95-210">その子コントロールによって自動的に更新されているサポートしていますが、ページ上のコントロール イベントにも応答できます。</span><span class="sxs-lookup"><span data-stu-id="8ec95-210">It supports being updated automatically by its child controls, but can also respond to control events elsewhere on the page.</span></span>

<span data-ttu-id="8ec95-211">サーバーの処理負荷が発生する可能性を削減することが推奨されます、 `ChildrenAsTriggers` UpdatePanel のプロパティに設定する`false`、10 営業日に既定で含まれているのではなくイベントであるとします。</span><span class="sxs-lookup"><span data-stu-id="8ec95-211">To reduce potential for server processing load, it is recommended that the `ChildrenAsTriggers` property of an UpdatePanel be set to `false`, and that events be opted-into rather than included by default.</span></span> <span data-ttu-id="8ec95-212">これも検証、および入力フィールドへの変更など、望ましくない可能性の効果の原因から不要なイベントを防止します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-212">This also prevents any unneeded events from causing potentially-unwanted effects, including validation, and changes to input fields.</span></span> <span data-ttu-id="8ec95-213">これらの種類のバグは、分離、ページがユーザーに透過的に更新され、原因、そのためすぐにわかりにくいためににくい場合があります。</span><span class="sxs-lookup"><span data-stu-id="8ec95-213">These types of bugs may be difficult to isolate, because the page updates transparently to the user, and the cause may therefore not be immediately obvious.</span></span>

<span data-ttu-id="8ec95-214">ASP.NET AJAX のフォームの内部動作を調べることで、傍受モデルを投稿、ASP.NET によって既に提供されているフレームワークを利用することを確認することができました。</span><span class="sxs-lookup"><span data-stu-id="8ec95-214">By examining the inner workings of the ASP.NET AJAX form post interception model, we were able to determine that it utilizes the framework already provided by ASP.NET.</span></span> <span data-ttu-id="8ec95-215">そのためは、同じフレームワークを使用してデザインされたコントロールと最大の互換性を維持し、ページ用に記述された任意の追加の JavaScript で最低限が関与します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-215">In doing so, it preserves maximum compatibility with controls designed using the same framework, and intrudes minimally on any additional JavaScript written for the page.</span></span>

## <a name="bio"></a><span data-ttu-id="8ec95-216">自己紹介</span><span class="sxs-lookup"><span data-stu-id="8ec95-216">Bio</span></span>

<span data-ttu-id="8ec95-217">Rob Paveza Terralever でシニア .NET アプリケーションの開発者は、([www.terralever.com](http://www.terralever.com))、Tempe、さんのマーケティング企業の主要な対話型</span><span class="sxs-lookup"><span data-stu-id="8ec95-217">Rob Paveza is a senior .NET application developer at Terralever ([www.terralever.com](http://www.terralever.com)), a leading interactive marketing firm in Tempe, AZ.</span></span> <span data-ttu-id="8ec95-218">彼に到達できる[ robpaveza@gmail.com ](mailto:robpaveza@gmail.com)、彼のブログはあると[ http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/)します。</span><span class="sxs-lookup"><span data-stu-id="8ec95-218">He can be reached at [robpaveza@gmail.com](mailto:robpaveza@gmail.com), and his blog is located at [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span></span>

<span data-ttu-id="8ec95-219">1997 年からマイクロソフトの Web テクノロジで働いてあり myKB.com プレジデント、Scott Cate ([www.myKB.com](http://www.myKB.com)) ベースのナレッジ ベースのソフトウェア ソリューションに重点を置いてアプリケーションを ASP.NET の記述を専門としています。</span><span class="sxs-lookup"><span data-stu-id="8ec95-219">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="8ec95-220">Scott は時に電子メールが接続可能[ scott.cate@myKB.com ](mailto:scott.cate@myKB.com)またはで彼のブログ[ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="8ec95-220">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8ec95-221">[前へ](understanding-partial-page-updates-with-asp-net-ajax.md)
> [次へ](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span><span class="sxs-lookup"><span data-stu-id="8ec95-221">[Previous](understanding-partial-page-updates-with-asp-net-ajax.md)
[Next](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span></span>
