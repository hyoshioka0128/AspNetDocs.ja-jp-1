---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-partial-page-updates-with-asp-net-ajax
title: ASP.NET AJAX を使用した部分ページの更新について |Microsoft Docs
author: scottcate
description: ASP.NET AJAX 拡張機能の中で最も見やすくなっているのは、完全なポストバックを行わずに、部分ページ更新または増分ページ更新を行う機能です。
ms.author: riande
ms.date: 03/28/2008
ms.assetid: 54d9df99-1161-4899-b4e8-2679c85915e7
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-partial-page-updates-with-asp-net-ajax
msc.type: authoredcontent
ms.openlocfilehash: 4b87cb8f58dbd7f27b16bcb0d488ff361770d4fe
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78439270"
---
# <a name="understanding-partial-page-updates-with-aspnet-ajax"></a><span data-ttu-id="b6805-103">ASP.NET AJAX の部分ページ更新について理解する</span><span class="sxs-lookup"><span data-stu-id="b6805-103">Understanding Partial Page Updates with ASP.NET AJAX</span></span>

<span data-ttu-id="b6805-104">[Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="b6805-104">by [Scott Cate](https://github.com/scottcate)</span></span>

<span data-ttu-id="b6805-105">[[Download PDF]\(PDF をダウンロード\)](https://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial01_Partial_Page_Updates_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="b6805-105">[Download PDF](https://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial01_Partial_Page_Updates_cs.pdf)</span></span>

> <span data-ttu-id="b6805-106">ASP.NET AJAX 拡張機能の中で最も見やすくなっているのは、サーバーへの完全なポストバックを実行することなく、部分的または増分ページの更新を行う機能です。コードを変更したり、マークアップの変更を最小限に抑えたりすることはできません。</span><span class="sxs-lookup"><span data-stu-id="b6805-106">Perhaps the most visible feature of the ASP.NET AJAX Extensions is the ability to do a partial or incremental page updates without doing a full postback to the server, with no code changes and minimal markup changes.</span></span> <span data-ttu-id="b6805-107">さまざまな利点があります。つまり、マルチメディア (Adobe Flash や Windows Media など) の状態は変化せず、帯域幅のコストが削減され、クライアントは通常、ポストバックに関連するちらつきを発生させません。</span><span class="sxs-lookup"><span data-stu-id="b6805-107">The advantages are extensive – the state of your multimedia (such as Adobe Flash or Windows Media) is unchanged, bandwidth costs are reduced, and the client does not experience the flicker usually associated with a postback.</span></span>

## <a name="introduction"></a><span data-ttu-id="b6805-108">はじめに</span><span class="sxs-lookup"><span data-stu-id="b6805-108">Introduction</span></span>

<span data-ttu-id="b6805-109">Microsoft の ASP.NET テクノロジは、オブジェクト指向プログラミングモデルとイベントドリブンプログラミングモデルを提供し、コンパイル済みコードの利点と結び付けます。</span><span class="sxs-lookup"><span data-stu-id="b6805-109">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="b6805-110">ただし、そのサーバー側の処理モデルには、テクノロジに固有のいくつかの欠点があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-110">However, its server-side processing model has several drawbacks inherent in the technology:</span></span>

- <span data-ttu-id="b6805-111">ページの更新には、ページの更新が必要なサーバーへのラウンドトリップが必要です。</span><span class="sxs-lookup"><span data-stu-id="b6805-111">Page updates require a round-trip to the server, which requires a page refresh.</span></span>
- <span data-ttu-id="b6805-112">ラウンドトリップは、Javascript またはその他のクライアント側テクノロジ (Adobe Flash など) によって生成された効果を保持しません。</span><span class="sxs-lookup"><span data-stu-id="b6805-112">Round-trips do not persist any effects generated by Javascript or other client-side technology (such as Adobe Flash)</span></span>
- <span data-ttu-id="b6805-113">ポストバック中、Microsoft Internet Explorer 以外のブラウザーでは、スクロール位置の自動復元はサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="b6805-113">During postback, browsers other than Microsoft Internet Explorer do not support automatically restoring the scroll position.</span></span> <span data-ttu-id="b6805-114">また、Internet Explorer でも、ページが更新されてもちらつきが発生します。</span><span class="sxs-lookup"><span data-stu-id="b6805-114">And even in Internet Explorer, there is still a flicker as the page is refreshed.</span></span>
- <span data-ttu-id="b6805-115">特に GridView コントロールやリピータなどのコントロールを扱う場合は、\_\_VIEWSTATE フォームフィールドのサイズが大きくなる可能性があるため、ポストバックには大量の帯域幅が必要になることがあります。</span><span class="sxs-lookup"><span data-stu-id="b6805-115">Postbacks may involve a high amount of bandwidth as the \_\_VIEWSTATE form field may grow, especially when dealing with controls such as the GridView control or repeaters.</span></span>
- <span data-ttu-id="b6805-116">JavaScript またはその他のクライアント側テクノロジを使用して Web サービスにアクセスするための統合モデルはありません。</span><span class="sxs-lookup"><span data-stu-id="b6805-116">There is no unified model for accessing Web Services through JavaScript or other client-side technology.</span></span>

<span data-ttu-id="b6805-117">Microsoft の ASP.NET AJAX extensions を入力します。</span><span class="sxs-lookup"><span data-stu-id="b6805-117">Enter Microsoft's ASP.NET AJAX extensions.</span></span> <span data-ttu-id="b6805-118">AJAX**は、Nd** **X** ML を同期している**ことを意味**します。これは、クロスプラットフォーム JavaScript を使用したインクリメンタルページ更新を提供するための統合フレームワークであり、microsoft ajax framework を構成するサーバー側コードと、microsoft ajax スクリプトライブラリと呼ばれるスクリプトコンポーネントで構成されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-118">AJAX, which stands for **A** synchronous **J** avaScript **A** nd **X** ML, is an integrated framework for providing incremental page updates via cross-platform JavaScript, composed of server-side code comprising the Microsoft AJAX Framework, and a script component called the Microsoft AJAX Script Library.</span></span> <span data-ttu-id="b6805-119">また、ASP.NET AJAX 拡張機能は、JavaScript を介して ASP.NET Web サービスにアクセスするためのクロスプラットフォームサポートも提供します。</span><span class="sxs-lookup"><span data-stu-id="b6805-119">The ASP.NET AJAX extensions also provide cross-platform support for accessing ASP.NET Web Services via JavaScript.</span></span>

<span data-ttu-id="b6805-120">このホワイトペーパーでは、ASP.NET AJAX Extensions の部分ページ更新機能について説明します。これには、ScriptManager コンポーネント、UpdatePanel コントロール、および UpdateProgress コントロールが含まれています。過大.</span><span class="sxs-lookup"><span data-stu-id="b6805-120">This whitepaper examines the partial page updates functionality of the ASP.NET AJAX Extensions, which includes the ScriptManager component, the UpdatePanel control, and the UpdateProgress control, and considers scenarios in which they should or should not be utilized.</span></span>

<span data-ttu-id="b6805-121">このホワイトペーパーは、Visual Studio 2008 のベータ2リリースと .NET Framework 3.5 に基づいています。これにより、ASP.NET AJAX 拡張機能が基本クラスライブラリ (以前は ASP.NET 2.0 で使用可能なアドオンコンポーネント) に統合されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-121">This whitepaper is based on the Beta 2 release of the Visual Studio 2008 and the .NET Framework 3.5, which integrates the ASP.NET AJAX Extensions into the Base Class Library (where it was previously an add-on component available for ASP.NET 2.0).</span></span> <span data-ttu-id="b6805-122">また、このホワイトペーパーでは、visual Web Developer Express Edition ではなく、Visual Studio 2008 を使用していることを前提としています。参照されている一部のプロジェクトテンプレートは、Visual Web Developer Express ユーザーが使用できない場合があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-122">This whitepaper also assumes that you are using Visual Studio 2008 and not Visual Web Developer Express Edition; some project templates that are referenced may not be available to Visual Web Developer Express users.</span></span>

## <a name="partial-page-updates"></a><span data-ttu-id="b6805-123">部分ページ更新</span><span class="sxs-lookup"><span data-stu-id="b6805-123">Partial Page Updates</span></span>

<span data-ttu-id="b6805-124">ASP.NET AJAX 拡張機能の中で最も見やすくなっているのは、サーバーへの完全なポストバックを実行することなく、部分的または増分ページの更新を行う機能です。コードを変更したり、マークアップの変更を最小限に抑えたりすることはできません。</span><span class="sxs-lookup"><span data-stu-id="b6805-124">Perhaps the most visible feature of the ASP.NET AJAX Extensions is the ability to do a partial or incremental page updates without doing a full postback to the server, with no code changes and minimal markup changes.</span></span> <span data-ttu-id="b6805-125">さまざまな利点があります。つまり、マルチメディア (Adobe Flash や Windows Media など) の状態は変化せず、帯域幅のコストが削減され、クライアントは通常、ポストバックに関連するちらつきを発生させません。</span><span class="sxs-lookup"><span data-stu-id="b6805-125">The advantages are extensive - the state of your multimedia (such as Adobe Flash or Windows Media) is unchanged, bandwidth costs are reduced, and the client does not experience the flicker usually associated with a postback.</span></span>

<span data-ttu-id="b6805-126">部分ページレンダリングを統合する機能は、プロジェクトへの変更を最小限に抑えて ASP.NET に統合されています。</span><span class="sxs-lookup"><span data-stu-id="b6805-126">The ability to integrate partial page rendering is integrated into ASP.NET with minimal changes into your project.</span></span>

## <a name="walkthrough-integrating-partial-rendering-into-an-existing-project"></a><span data-ttu-id="b6805-127">チュートリアル: 部分レンダリングを既存のプロジェクトに統合する</span><span class="sxs-lookup"><span data-stu-id="b6805-127">Walkthrough: Integrating Partial Rendering into an Existing Project</span></span>

1. <span data-ttu-id="b6805-128">Microsoft Visual Studio 2008 で、新しい ASP.NET Web サイトプロジェクトを作成します。そのためには、[<em>ファイル</em><em>-&gt; 新しい</em><em>-&gt; Web サイト</em>] に移動し、ダイアログボックスの [ASP.NET web site] を選択します。</span><span class="sxs-lookup"><span data-stu-id="b6805-128">In Microsoft Visual Studio 2008, create a new ASP.NET Web Site project by going to <em>File</em><em>-&gt; New</em><em>-&gt; Web Site</em> and selecting ASP.NET Web Site from the dialog.</span></span> <span data-ttu-id="b6805-129">任意の名前を付けることができ、ファイルシステムまたはインターネットインフォメーションサービス (IIS) にインストールすることができます。</span><span class="sxs-lookup"><span data-stu-id="b6805-129">You can name it whatever you like, and you may install it either to the file system or into Internet Information Services (IIS).</span></span>
2. <span data-ttu-id="b6805-130">ASP.NET の基本的なマークアップ (サーバー側フォームと `@Page` ディレクティブ) を含む空の既定のページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-130">You will be presented with the blank default page with basic ASP.NET markup (a server-side form and an `@Page` directive).</span></span> <span data-ttu-id="b6805-131">`Label1` という名前のラベルと、フォーム要素内のページに `Button1` というボタンをドロップします。</span><span class="sxs-lookup"><span data-stu-id="b6805-131">Drop a Label called `Label1` and a Button called `Button1` onto the page within the form element.</span></span> <span data-ttu-id="b6805-132">テキストプロパティを任意のものに設定できます。</span><span class="sxs-lookup"><span data-stu-id="b6805-132">You may set their text properties to whatever you like.</span></span>
3. <span data-ttu-id="b6805-133">デザインビューで、[`Button1`] をダブルクリックして、分離コードイベントハンドラーを生成します。</span><span class="sxs-lookup"><span data-stu-id="b6805-133">In Design view, double-click `Button1` to generate a code-behind event handler.</span></span> <span data-ttu-id="b6805-134">このイベントハンドラー内で `Label1.Text` を設定して、ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="b6805-134">Within this event handler, set `Label1.Text` to You clicked the button!</span></span> <span data-ttu-id="b6805-135">。</span><span class="sxs-lookup"><span data-stu-id="b6805-135">.</span></span>

<span data-ttu-id="b6805-136">**リスト 1: 部分レンダリングが有効になる前の default.aspx のマークアップ**</span><span class="sxs-lookup"><span data-stu-id="b6805-136">**Listing 1: Markup for default.aspx before partial rendering is enabled**</span></span>

[!code-aspx[Main](understanding-partial-page-updates-with-asp-net-ajax/samples/sample1.aspx)]

<span data-ttu-id="b6805-137">**リスト 2: default.aspx.cs の分離コード (トリム)**</span><span class="sxs-lookup"><span data-stu-id="b6805-137">**Listing 2: Codebehind (trimmed) in default.aspx.cs**</span></span>

[!code-csharp[Main](understanding-partial-page-updates-with-asp-net-ajax/samples/sample2.cs)]

1. <span data-ttu-id="b6805-138">F5 キーを押して、web サイトを起動します。</span><span class="sxs-lookup"><span data-stu-id="b6805-138">Press F5 to launch your web site.</span></span> <span data-ttu-id="b6805-139">Visual Studio では、デバッグを有効にするために web.config ファイルを追加するように求められます。これを行います。</span><span class="sxs-lookup"><span data-stu-id="b6805-139">Visual Studio will prompt you to add a web.config file to enable debugging; do so.</span></span> <span data-ttu-id="b6805-140">このボタンをクリックすると、ページが更新され、ラベル内のテキストが変更されます。ページが再描画されると、簡単なちらつきが発生します。</span><span class="sxs-lookup"><span data-stu-id="b6805-140">When you click the button, notice that the page refreshes to change the text in the label, and there is a brief flicker as the page is redrawn.</span></span>
2. <span data-ttu-id="b6805-141">ブラウザーウィンドウを閉じた後、Visual Studio に戻り、マークアップページに戻ります。</span><span class="sxs-lookup"><span data-stu-id="b6805-141">After closing your browser window, return to Visual Studio and to the markup page.</span></span> <span data-ttu-id="b6805-142">Visual Studio の [ツールボックス] を下にスクロールし、[AJAX 拡張] というラベルの付いたタブを見つけます。</span><span class="sxs-lookup"><span data-stu-id="b6805-142">Scroll down in the Visual Studio toolbox, and find the tab labeled AJAX Extensions.</span></span> <span data-ttu-id="b6805-143">(以前のバージョンの AJAX またはアトラス拡張機能を使用しているためにこのタブが表示されない場合は、このホワイトペーパーの後半にある AJAX 拡張ツールボックスの項目の登録に関するチュートリアルを参照するか、Windows インストーラーダウンロード可能な最新バージョンをインストールしてください。web サイトから)。</span><span class="sxs-lookup"><span data-stu-id="b6805-143">(If you do not have this tab because you are using an older version of AJAX or Atlas extensions, refer to the walkthrough for registering the AJAX Extensions toolbox items later in this whitepaper, or install the current version with the Windows Installer downloadable from the website).</span></span>

[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image2.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image1.png)

<span data-ttu-id="b6805-144">([クリックすると、フルサイズの画像が表示](understanding-partial-page-updates-with-asp-net-ajax/_static/image3.png)される)</span><span class="sxs-lookup"><span data-stu-id="b6805-144">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image3.png))</span></span>

1. <span data-ttu-id="b6805-145"><em>既知の問題:</em>ASP.NET 2.0 AJAX 拡張機能を使用して visual Studio 2005 が既にインストールされているコンピューターに Visual Studio 2008 をインストールすると、Visual Studio 2008 によって AJAX 拡張ツールボックス項目がインポートされます。</span><span class="sxs-lookup"><span data-stu-id="b6805-145"><em>Known Issue:</em>If you install Visual Studio 2008 onto a computer that already has Visual Studio 2005 installed with the ASP.NET 2.0 AJAX Extensions, Visual Studio 2008 will import the AJAX Extensions toolbox items.</span></span> <span data-ttu-id="b6805-146">コンポーネントのツールヒントを調べることで、これが該当するかどうかを判断できます。これはバージョン3.5.0.0 と言う必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-146">You can determine whether this is the case by examining the tooltip of the components; they should say Version 3.5.0.0.</span></span> <span data-ttu-id="b6805-147">これらがバージョン2.0.0.0 の場合は、以前のツールボックスアイテムをインポートしたので、Visual Studio の [ツールボックスアイテムの選択] ダイアログボックスを使用して手動でインポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-147">If they say Version 2.0.0.0, then you have imported your old toolbox items, and will need to manually import them by using the Choose Toolbox Items dialog in Visual Studio.</span></span> <span data-ttu-id="b6805-148">デザイナーを使用してバージョン2のコントロールを追加することはできません。</span><span class="sxs-lookup"><span data-stu-id="b6805-148">You will be unable to add Version 2 controls via the designer.</span></span>

2. <span data-ttu-id="b6805-149">`<asp:Label>` タグを開始する前に、空白行を作成し、ツールボックスの UpdatePanel コントロールをダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="b6805-149">Before the `<asp:Label>` tag begins, create a line of whitespace, and double-click on the UpdatePanel control in the toolbox.</span></span> <span data-ttu-id="b6805-150">新しい `@Register` ディレクティブがページの先頭に追加されていることに注意してください。これは、`asp:` プレフィックスを使用して、System.web 名前空間内のコントロールをインポートする必要があることを示しています。</span><span class="sxs-lookup"><span data-stu-id="b6805-150">Note that a new `@Register` directive is included at the top of the page, indicating that controls within the System.Web.UI namespace should be imported using the `asp:` prefix.</span></span>
3. <span data-ttu-id="b6805-151">閉じる `</asp:UpdatePanel>` タグをボタン要素の末尾の後ろにドラッグして、要素が、ラップされたラベルとボタンコントロールを持つ適切な形式になるようにします。</span><span class="sxs-lookup"><span data-stu-id="b6805-151">Drag the closing `</asp:UpdatePanel>` tag past the end of the Button element, so that the element is well-formed with the Label and Button controls wrapped.</span></span>
4. <span data-ttu-id="b6805-152">`<asp:UpdatePanel>` タグを開いた後、新しいタグを開き始めます。</span><span class="sxs-lookup"><span data-stu-id="b6805-152">After the opening `<asp:UpdatePanel>` tag, begin opening a new tag.</span></span> <span data-ttu-id="b6805-153">IntelliSense では2つのオプションが表示されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b6805-153">Note that IntelliSense prompts you with two options.</span></span> <span data-ttu-id="b6805-154">この場合は、`<ContentTemplate>` タグを作成します。</span><span class="sxs-lookup"><span data-stu-id="b6805-154">In this case, create a `<ContentTemplate>` tag.</span></span> <span data-ttu-id="b6805-155">マークアップが整形式になるように、ラベルとボタンの周りにこのタグをラップしてください。</span><span class="sxs-lookup"><span data-stu-id="b6805-155">Be sure to wrap this tag around your Label and Button so that the markup is well-formed.</span></span>

[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image5.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image4.png)

<span data-ttu-id="b6805-156">([クリックすると、フルサイズの画像が表示](understanding-partial-page-updates-with-asp-net-ajax/_static/image6.png)される)</span><span class="sxs-lookup"><span data-stu-id="b6805-156">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image6.png))</span></span>

1. <span data-ttu-id="b6805-157">`<form>` 要素内の任意の場所で、[ツールボックス] の `ScriptManager` 項目をダブルクリックして ScriptManager コントロールを含めます。</span><span class="sxs-lookup"><span data-stu-id="b6805-157">Anywhere within the `<form>` element, include a ScriptManager control by double-clicking on the `ScriptManager` item in the toolbox.</span></span>
2. <span data-ttu-id="b6805-158">属性 `EnablePartialRendering= true`を含むように `<asp:ScriptManager>` タグを編集します。</span><span class="sxs-lookup"><span data-stu-id="b6805-158">Edit the `<asp:ScriptManager>` tag so that it includes the attribute `EnablePartialRendering= true`.</span></span>

<span data-ttu-id="b6805-159">**リスト 3: 部分的なレンダリングが有効になっている default.aspx のマークアップ**</span><span class="sxs-lookup"><span data-stu-id="b6805-159">**Listing 3: Markup for default.aspx with partial rendering enabled**</span></span>

[!code-aspx[Main](understanding-partial-page-updates-with-asp-net-ajax/samples/sample3.aspx)]

1. <span data-ttu-id="b6805-160">Web.config ファイルを開きます。</span><span class="sxs-lookup"><span data-stu-id="b6805-160">Open your web.config file.</span></span> <span data-ttu-id="b6805-161">Visual Studio によって、Web.config にコンパイル参照が自動的に追加されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b6805-161">Notice that Visual Studio has automatically added a compilation reference to System.Web.Extensions.dll.</span></span>

1. <span data-ttu-id="b6805-162">Visual Studio 2008 の新機能: ASP.NET Web サイトプロジェクトテンプレートに付属する web.config には、ASP.NET AJAX 拡張機能に必要なすべての参照が含まれています。また、次のような構成情報のコメント付きセクションも含まれています。追加機能を有効にするためのコメントを解除します。</span><span class="sxs-lookup"><span data-stu-id="b6805-162">What's New in Visual Studio 2008: The web.config that comes with the ASP.NET Web Site project templates automatically includes all necessary references to the ASP.NET AJAX Extensions, and includes commented sections of configuration information that can be un-commented to enable additional functionality.</span></span> <span data-ttu-id="b6805-163">ASP.NET 2.0 AJAX 拡張機能がインストールされている場合、Visual Studio 2005 には同様のテンプレートがありました。</span><span class="sxs-lookup"><span data-stu-id="b6805-163">Visual Studio 2005 had similar templates when ASP.NET 2.0 AJAX Extensions were installed.</span></span> <span data-ttu-id="b6805-164">ただし、Visual Studio 2008 では、AJAX 拡張は既定でオプトアウトされます (つまり、既定で参照されますが、参照として削除できます)。</span><span class="sxs-lookup"><span data-stu-id="b6805-164">However, in Visual Studio 2008, the AJAX Extensions are opt-out by default (that is, they are referenced by default, but can be removed as references).</span></span>

[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image8.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image7.png)

<span data-ttu-id="b6805-165">([クリックすると、フルサイズの画像が表示](understanding-partial-page-updates-with-asp-net-ajax/_static/image9.png)される)</span><span class="sxs-lookup"><span data-stu-id="b6805-165">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image9.png))</span></span>

1. <span data-ttu-id="b6805-166">F5 キーを押して、web サイトを起動します。</span><span class="sxs-lookup"><span data-stu-id="b6805-166">Press F5 to launch your website.</span></span> <span data-ttu-id="b6805-167">部分表示のみのマークアップをサポートするためにソースコードの変更が必要ないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b6805-167">Note how no source code changes were required to support partial rendering - only markup was changed.</span></span>

<span data-ttu-id="b6805-168">Web サイトを起動すると、部分的なレンダリングが有効になっていることがわかります。ボタンをクリックしたときにちらつきが発生せず、ページのスクロール位置が変更されないためです (この例では説明しません)。</span><span class="sxs-lookup"><span data-stu-id="b6805-168">When you launch your website, you should see that partial rendering is now enabled, because when you click on the button there will be no flicker, nor will there be any change in the page scroll position (this example does not demonstrate that).</span></span> <span data-ttu-id="b6805-169">ボタンをクリックした後にページの表示されたソースを確認すると、実際にポストバックが発生していないことが確認されます。元のラベルテキストはまだソースマークアップの一部であり、そのラベルは JavaScript によって変更されています。</span><span class="sxs-lookup"><span data-stu-id="b6805-169">If you were to look at the rendered source of the page after clicking the button, it will confirm that in fact a post-back has not occurred - the original label text is still part of the source markup, and the label has changed through JavaScript.</span></span>

<span data-ttu-id="b6805-170">Visual Studio 2008 には、ASP.NET AJAX 対応 web サイト用に事前定義されたテンプレートが付属していません。</span><span class="sxs-lookup"><span data-stu-id="b6805-170">Visual Studio 2008 does not appear to come with a pre-defined template for an ASP.NET AJAX-Enabled web site.</span></span> <span data-ttu-id="b6805-171">ただし、Visual Studio 2005 と ASP.NET 2.0 AJAX 拡張機能がインストールされている場合、このようなテンプレートは Visual Studio 2005 内で使用できました。</span><span class="sxs-lookup"><span data-stu-id="b6805-171">However, such a template was available within Visual Studio 2005 if the Visual Studio 2005 and ASP.NET 2.0 AJAX Extensions were installed.</span></span> <span data-ttu-id="b6805-172">その結果、テンプレートには完全に構成された web.config ファイルが含まれている必要があるため、web サイトの構成と AJAX 対応 Web サイトテンプレートを使用する方がさらに簡単になります (Web サービスアクセスを含むすべての ASP.NET AJAX 拡張機能をサポートします)。と JSON のシリアル化-JavaScript Object Notation) には、既定でメインの Web フォームページ内に UpdatePanel と System.windows.controls.contentcontrol.contenttemplate が含まれています。</span><span class="sxs-lookup"><span data-stu-id="b6805-172">Consequently, configuring a web site and starting with the AJAX-Enabled Web Site template will likely be even easier, as the template should include a fully-configured web.config file (supporting all of the ASP.NET AJAX Extensions, including Web Services access and JSON serialization - JavaScript Object Notation) and includes an UpdatePanel and ContentTemplate within the main Web Forms page by default.</span></span> <span data-ttu-id="b6805-173">この既定のページで部分的なレンダリングを有効にすることは、このチュートリアルの手順10を再度実行し、コントロールをページにドロップするのと同じように簡単です。</span><span class="sxs-lookup"><span data-stu-id="b6805-173">Enabling partial rendering with this default page is as simple as revisiting Step 10 of this walkthrough and dropping controls onto the page.</span></span>

## <a name="the-scriptmanager-control"></a><span data-ttu-id="b6805-174">ScriptManager コントロール</span><span class="sxs-lookup"><span data-stu-id="b6805-174">The ScriptManager Control</span></span>

## <a name="scriptmanager-control-reference"></a><span data-ttu-id="b6805-175">ScriptManager コントロールリファレンス</span><span class="sxs-lookup"><span data-stu-id="b6805-175">ScriptManager Control Reference</span></span>

<span data-ttu-id="b6805-176">マークアップが有効なプロパティ:</span><span class="sxs-lookup"><span data-stu-id="b6805-176">Markup-Enabled Properties:</span></span>

| <span data-ttu-id="b6805-177">**プロパティ名**</span><span class="sxs-lookup"><span data-stu-id="b6805-177">**Property Name**</span></span> | <span data-ttu-id="b6805-178">**Type**</span><span class="sxs-lookup"><span data-stu-id="b6805-178">**Type**</span></span> | <span data-ttu-id="b6805-179">**説明**</span><span class="sxs-lookup"><span data-stu-id="b6805-179">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b6805-180">AllowCustomErrors-Redirect</span><span class="sxs-lookup"><span data-stu-id="b6805-180">AllowCustomErrors-Redirect</span></span> | <span data-ttu-id="b6805-181">Bool</span><span class="sxs-lookup"><span data-stu-id="b6805-181">Bool</span></span> | <span data-ttu-id="b6805-182">エラーを処理するために web.config ファイルのカスタムエラーセクションを使用するかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-182">Specifies whether to use the custom error section of the web.config file to handle errors.</span></span> |
| <span data-ttu-id="b6805-183">AsyncPostBackError-Message</span><span class="sxs-lookup"><span data-stu-id="b6805-183">AsyncPostBackError-Message</span></span> | <span data-ttu-id="b6805-184">String</span><span class="sxs-lookup"><span data-stu-id="b6805-184">String</span></span> | <span data-ttu-id="b6805-185">エラーが発生した場合にクライアントに送信されるエラーメッセージを取得または設定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-185">Gets or sets the error message sent to the client if an error is raised.</span></span> |
| <span data-ttu-id="b6805-186">AsyncPostBack-Timeout</span><span class="sxs-lookup"><span data-stu-id="b6805-186">AsyncPostBack-Timeout</span></span> | <span data-ttu-id="b6805-187">Int32</span><span class="sxs-lookup"><span data-stu-id="b6805-187">Int32</span></span> | <span data-ttu-id="b6805-188">クライアントが非同期要求の完了を待機する既定の時間を取得または設定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-188">Gets or sets the default amount of a time a client should wait for the asynchronous request to complete.</span></span> |
| <span data-ttu-id="b6805-189">EnableScript-Globalization</span><span class="sxs-lookup"><span data-stu-id="b6805-189">EnableScript-Globalization</span></span> | <span data-ttu-id="b6805-190">Bool</span><span class="sxs-lookup"><span data-stu-id="b6805-190">Bool</span></span> | <span data-ttu-id="b6805-191">スクリプトのグローバリゼーションを有効にするかどうかを取得または設定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-191">Gets or sets whether script globalization is enabled.</span></span> |
| <span data-ttu-id="b6805-192">EnableScript-Localization</span><span class="sxs-lookup"><span data-stu-id="b6805-192">EnableScript-Localization</span></span> | <span data-ttu-id="b6805-193">Bool</span><span class="sxs-lookup"><span data-stu-id="b6805-193">Bool</span></span> | <span data-ttu-id="b6805-194">スクリプトのローカライズが有効かどうかを取得します。値の設定も可能です。</span><span class="sxs-lookup"><span data-stu-id="b6805-194">Gets or sets whether script localization is enabled.</span></span> |
| <span data-ttu-id="b6805-195">ScriptLoadTimeout</span><span class="sxs-lookup"><span data-stu-id="b6805-195">ScriptLoadTimeout</span></span> | <span data-ttu-id="b6805-196">Int32</span><span class="sxs-lookup"><span data-stu-id="b6805-196">Int32</span></span> | <span data-ttu-id="b6805-197">クライアントへのスクリプトの読み込みに許容される秒数を指定します</span><span class="sxs-lookup"><span data-stu-id="b6805-197">Determines the number of seconds allowed for loading scripts into the client</span></span> |
| <span data-ttu-id="b6805-198">ScriptMode</span><span class="sxs-lookup"><span data-stu-id="b6805-198">ScriptMode</span></span> | <span data-ttu-id="b6805-199">Enum (Auto、Debug、Release、Inherit)</span><span class="sxs-lookup"><span data-stu-id="b6805-199">Enum (Auto, Debug, Release, Inherit)</span></span> | <span data-ttu-id="b6805-200">スクリプトのリリースバージョンを表示するかどうかを取得または設定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-200">Gets or sets whether to render release versions of scripts</span></span> |
| <span data-ttu-id="b6805-201">ScriptPath</span><span class="sxs-lookup"><span data-stu-id="b6805-201">ScriptPath</span></span> | <span data-ttu-id="b6805-202">String</span><span class="sxs-lookup"><span data-stu-id="b6805-202">String</span></span> | <span data-ttu-id="b6805-203">クライアントに送信されるスクリプトファイルの場所へのルートパスを取得または設定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-203">Gets or sets the root path to the location of script files to be sent to the client.</span></span> |

<span data-ttu-id="b6805-204">コードのみのプロパティ:</span><span class="sxs-lookup"><span data-stu-id="b6805-204">Code-Only Properties:</span></span>

| <span data-ttu-id="b6805-205">**プロパティ名**</span><span class="sxs-lookup"><span data-stu-id="b6805-205">**Property Name**</span></span> | <span data-ttu-id="b6805-206">**Type**</span><span class="sxs-lookup"><span data-stu-id="b6805-206">**Type**</span></span> | <span data-ttu-id="b6805-207">**説明**</span><span class="sxs-lookup"><span data-stu-id="b6805-207">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b6805-208">AuthenticationService</span><span class="sxs-lookup"><span data-stu-id="b6805-208">AuthenticationService</span></span> | <span data-ttu-id="b6805-209">AuthenticationService-Manager</span><span class="sxs-lookup"><span data-stu-id="b6805-209">AuthenticationService-Manager</span></span> | <span data-ttu-id="b6805-210">クライアントに送信される ASP.NET Authentication Service プロキシに関する詳細を取得します。</span><span class="sxs-lookup"><span data-stu-id="b6805-210">Gets details about the ASP.NET Authentication Service proxy that will be sent to the client.</span></span> |
| <span data-ttu-id="b6805-211">IsDebuggingEnabled</span><span class="sxs-lookup"><span data-stu-id="b6805-211">IsDebuggingEnabled</span></span> | <span data-ttu-id="b6805-212">Bool</span><span class="sxs-lookup"><span data-stu-id="b6805-212">Bool</span></span> | <span data-ttu-id="b6805-213">スクリプトとコードのデバッグが有効かどうかを取得します。</span><span class="sxs-lookup"><span data-stu-id="b6805-213">Gets whether script and code debugging is enabled.</span></span> |
| <span data-ttu-id="b6805-214">IsInAsyncPostback</span><span class="sxs-lookup"><span data-stu-id="b6805-214">IsInAsyncPostback</span></span> | <span data-ttu-id="b6805-215">Bool</span><span class="sxs-lookup"><span data-stu-id="b6805-215">Bool</span></span> | <span data-ttu-id="b6805-216">ページが現在非同期ポストバック要求であるかどうかを取得します。</span><span class="sxs-lookup"><span data-stu-id="b6805-216">Gets whether the page is currently in an asynchronous post back request.</span></span> |
| <span data-ttu-id="b6805-217">ProfileService</span><span class="sxs-lookup"><span data-stu-id="b6805-217">ProfileService</span></span> | <span data-ttu-id="b6805-218">ProfileService-Manager</span><span class="sxs-lookup"><span data-stu-id="b6805-218">ProfileService-Manager</span></span> | <span data-ttu-id="b6805-219">クライアントに送信される ASP.NET プロファイリングサービスプロキシに関する詳細を取得します。</span><span class="sxs-lookup"><span data-stu-id="b6805-219">Gets details about the ASP.NET Profiling Service proxy that will be sent to the client.</span></span> |
| <span data-ttu-id="b6805-220">スクリプト</span><span class="sxs-lookup"><span data-stu-id="b6805-220">Scripts</span></span> | <span data-ttu-id="b6805-221">コレクション&lt;スクリプト-リファレンス&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-221">Collection&lt;Script-Reference&gt;</span></span> | <span data-ttu-id="b6805-222">クライアントに送信されるスクリプト参照のコレクションを取得します。</span><span class="sxs-lookup"><span data-stu-id="b6805-222">Gets a collection of script references that will be sent to the client.</span></span> |
| <span data-ttu-id="b6805-223">サービス</span><span class="sxs-lookup"><span data-stu-id="b6805-223">Services</span></span> | <span data-ttu-id="b6805-224">コレクション&lt;サービス-参照&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-224">Collection&lt;Service-Reference&gt;</span></span> | <span data-ttu-id="b6805-225">クライアントに送信される Web サービスプロキシ参照のコレクションを取得します。</span><span class="sxs-lookup"><span data-stu-id="b6805-225">Gets a collection of Web Service proxy references that will be sent to the client.</span></span> |
| <span data-ttu-id="b6805-226">SupportsPartialRendering</span><span class="sxs-lookup"><span data-stu-id="b6805-226">SupportsPartialRendering</span></span> | <span data-ttu-id="b6805-227">Bool</span><span class="sxs-lookup"><span data-stu-id="b6805-227">Bool</span></span> | <span data-ttu-id="b6805-228">現在のクライアントが部分的なレンダリングをサポートするかどうかを取得します。</span><span class="sxs-lookup"><span data-stu-id="b6805-228">Gets whether the current client supports partial rendering.</span></span> <span data-ttu-id="b6805-229">このプロパティが**false**を返す場合、すべてのページ要求は標準ポストバックになります。</span><span class="sxs-lookup"><span data-stu-id="b6805-229">If this property returns **false**, then all page requests will be standard postbacks.</span></span> |

<span data-ttu-id="b6805-230">パブリックコードメソッド:</span><span class="sxs-lookup"><span data-stu-id="b6805-230">Public Code Methods:</span></span>

| <span data-ttu-id="b6805-231">**メソッド名**</span><span class="sxs-lookup"><span data-stu-id="b6805-231">**Method Name**</span></span> | <span data-ttu-id="b6805-232">**Type**</span><span class="sxs-lookup"><span data-stu-id="b6805-232">**Type**</span></span> | <span data-ttu-id="b6805-233">**説明**</span><span class="sxs-lookup"><span data-stu-id="b6805-233">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b6805-234">SetFocus (string)</span><span class="sxs-lookup"><span data-stu-id="b6805-234">SetFocus(string)</span></span> | <span data-ttu-id="b6805-235">Void</span><span class="sxs-lookup"><span data-stu-id="b6805-235">Void</span></span> | <span data-ttu-id="b6805-236">要求が完了したときに、クライアントのフォーカスを特定のコントロールに設定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-236">Sets the focus of the client to a particular control when the request has completed.</span></span> |

<span data-ttu-id="b6805-237">マークアップの子孫:</span><span class="sxs-lookup"><span data-stu-id="b6805-237">Markup Descendants:</span></span>

| <span data-ttu-id="b6805-238">**Tag**</span><span class="sxs-lookup"><span data-stu-id="b6805-238">**Tag**</span></span> | <span data-ttu-id="b6805-239">**説明**</span><span class="sxs-lookup"><span data-stu-id="b6805-239">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="b6805-240">&lt;AuthenticationService&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-240">&lt;AuthenticationService&gt;</span></span> | <span data-ttu-id="b6805-241">ASP.NET 認証サービスに対するプロキシの詳細を提供します。</span><span class="sxs-lookup"><span data-stu-id="b6805-241">Provides details about the proxy to the ASP.NET authentication service.</span></span> |
| <span data-ttu-id="b6805-242">&lt;ProfileService&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-242">&lt;ProfileService&gt;</span></span> | <span data-ttu-id="b6805-243">ASP.NET プロファイリングサービスに対するプロキシの詳細を提供します。</span><span class="sxs-lookup"><span data-stu-id="b6805-243">Provides details about the proxy to the ASP.NET profiling service.</span></span> |
| <span data-ttu-id="b6805-244">&lt;スクリプト&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-244">&lt;Scripts&gt;</span></span> | <span data-ttu-id="b6805-245">追加のスクリプト参照を提供します。</span><span class="sxs-lookup"><span data-stu-id="b6805-245">Provides additional script references.</span></span> |
| <span data-ttu-id="b6805-246">&lt;asp: System.web.ui.scriptreference&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-246">&lt;asp:ScriptReference&gt;</span></span> | <span data-ttu-id="b6805-247">特定のスクリプト参照を表します。</span><span class="sxs-lookup"><span data-stu-id="b6805-247">Denotes a specific script reference.</span></span> |
| <span data-ttu-id="b6805-248">&lt;サービス&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-248">&lt;Service&gt;</span></span> | <span data-ttu-id="b6805-249">プロキシクラスを生成する追加の Web サービス参照を提供します。</span><span class="sxs-lookup"><span data-stu-id="b6805-249">Provides additional Web Service references which will have proxy classes generated.</span></span> |
| <span data-ttu-id="b6805-250">&lt;asp: ServiceReference&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-250">&lt;asp:ServiceReference&gt;</span></span> | <span data-ttu-id="b6805-251">特定の Web サービス参照を表します。</span><span class="sxs-lookup"><span data-stu-id="b6805-251">Denotes a specific Web Service reference.</span></span> |

<span data-ttu-id="b6805-252">ScriptManager コントロールは、ASP.NET AJAX 拡張に不可欠なコアです。</span><span class="sxs-lookup"><span data-stu-id="b6805-252">The ScriptManager control is the essential core for the ASP.NET AJAX Extensions.</span></span> <span data-ttu-id="b6805-253">これにより、スクリプトライブラリ (広範なクライアント側のスクリプト型システムを含む) へのアクセスが可能になり、部分的なレンダリングがサポートされます。また、追加の ASP.NET サービス (認証やプロファイルなど、その他の Web サービス) も幅広くサポートされています。</span><span class="sxs-lookup"><span data-stu-id="b6805-253">It provides access to the script library (including the extensive client-side script type system), supports partial rendering, and provides extensive support for additional ASP.NET services (such as authentication and profiling, but also other Web Services).</span></span> <span data-ttu-id="b6805-254">ScriptManager コントロールでは、クライアントスクリプトのグローバリゼーションおよびローカリゼーションもサポートされています。</span><span class="sxs-lookup"><span data-stu-id="b6805-254">The ScriptManager control also provides globalization and localization support for the client scripts.</span></span>

## <a name="providing-alternative-and-supplemental-scripts"></a><span data-ttu-id="b6805-255">代替スクリプトと補足スクリプトの提供</span><span class="sxs-lookup"><span data-stu-id="b6805-255">Providing Alternative and Supplemental Scripts</span></span>

<span data-ttu-id="b6805-256">Microsoft ASP.NET 2.0 AJAX 拡張機能には、参照されたアセンブリに埋め込まれたリソースとして、デバッグエディションとリリースエディションの両方でスクリプトコード全体が含まれますが、開発者は、ScriptManager コントロールをカスタマイズされたスクリプトファイルにリダイレクトし、登録することが可能です。その他の必要なスクリプト。</span><span class="sxs-lookup"><span data-stu-id="b6805-256">While the Microsoft ASP.NET 2.0 AJAX Extensions include the entire script code in both debug and release editions as resources embedded in the referenced assemblies, developers are free to redirect the ScriptManager to customized script files, as well as register additional necessary scripts.</span></span>

<span data-ttu-id="b6805-257">通常含まれているスクリプト (WebForms 名前空間とカスタム型システムをサポートするスクリプトなど) の既定のバインディングをオーバーライドするには、ScriptManager クラスの `ResolveScriptReference` イベントに登録します。</span><span class="sxs-lookup"><span data-stu-id="b6805-257">To override the default binding for the typically-included scripts (such as those which support the Sys.WebForms namespace and the custom typing system), you can register for the `ResolveScriptReference` event of the ScriptManager class.</span></span> <span data-ttu-id="b6805-258">このメソッドが呼び出されると、イベントハンドラーは、問題のスクリプトファイルへのパスを変更できるようになります。スクリプトマネージャーは、スクリプトの別のコピーまたはカスタマイズされたコピーをクライアントに送信します。</span><span class="sxs-lookup"><span data-stu-id="b6805-258">When this method is called, the event handler has the opportunity to change the path to the script file in question; the script manager will then send a different or customized copy of the scripts to the client.</span></span>

<span data-ttu-id="b6805-259">また、スクリプト参照 (`ScriptReference` クラスによって表されます) は、プログラムまたはマークアップを使用して含めることができます。</span><span class="sxs-lookup"><span data-stu-id="b6805-259">Additionally, script references (represented by the `ScriptReference` class) can be included programmatically or via markup.</span></span> <span data-ttu-id="b6805-260">これを行うには、プログラムを使用して `ScriptManager.Scripts` コレクションを変更するか、ScriptManager コントロールの第1レベルの子である `<Scripts>` タグの下に `<asp:ScriptReference>` タグを追加します。</span><span class="sxs-lookup"><span data-stu-id="b6805-260">To do so, either programmatically modify the `ScriptManager.Scripts` collection, or include `<asp:ScriptReference>` tags under the `<Scripts>` tag, which is a first-level child of the ScriptManager control.</span></span>

## <a name="custom-error-handling-for-updatepanels"></a><span data-ttu-id="b6805-261">UpdatePanels のカスタムエラー処理</span><span class="sxs-lookup"><span data-stu-id="b6805-261">Custom Error Handling for UpdatePanels</span></span>

<span data-ttu-id="b6805-262">更新は UpdatePanel コントロールによって指定されたトリガーによって処理されますが、エラー処理とカスタムエラーメッセージのサポートは、ページの ScriptManager コントロールインスタンスによって処理されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-262">Although updates are handled by triggers specified by UpdatePanel controls, the support for error handling and custom error messages is handled by a page's ScriptManager control instance.</span></span> <span data-ttu-id="b6805-263">これを行うには、`AsyncPostBackError`のイベントをページに公開します。これにより、カスタム例外処理ロジックを提供できます。</span><span class="sxs-lookup"><span data-stu-id="b6805-263">This is done by exposing an event, `AsyncPostBackError`, to the page which can then provide custom exception-handling logic.</span></span>

<span data-ttu-id="b6805-264">AsyncPostBackError イベントを使用すると、`AsyncPostBackErrorMessage` プロパティを指定できます。これにより、コールバックの完了時に警告ボックスが生成されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-264">By consuming the AsyncPostBackError event, you may specify the `AsyncPostBackErrorMessage` property, which then causes an alert box to be raised upon completion of the callback.</span></span>

<span data-ttu-id="b6805-265">既定のアラートボックスを使用する代わりに、クライアント側のカスタマイズも可能です。たとえば、既定のブラウザーモーダルダイアログではなく、カスタマイズされた `<div>` 要素を表示することができます。</span><span class="sxs-lookup"><span data-stu-id="b6805-265">Client-side customization is also possible instead of using the default alert box; for instance, you may want to display a customized `<div>` element rather than the default browser modal dialog.</span></span> <span data-ttu-id="b6805-266">この場合は、クライアントスクリプトでエラーを処理できます。</span><span class="sxs-lookup"><span data-stu-id="b6805-266">In this case, you can handle the error in client script:</span></span>

<span data-ttu-id="b6805-267">**リスト 5: カスタムエラーを表示するクライアント側スクリプト**</span><span class="sxs-lookup"><span data-stu-id="b6805-267">**Listing 5: Client-side script to display custom errors**</span></span>

[!code-html[Main](understanding-partial-page-updates-with-asp-net-ajax/samples/sample4.html)]

<span data-ttu-id="b6805-268">簡単に言うと、上記のスクリプトでは、非同期要求が完了したときのクライアント側の AJAX ランタイムにコールバックを登録します。</span><span class="sxs-lookup"><span data-stu-id="b6805-268">Quite simply, the above script registers a callback with the client-side AJAX runtime for when the asynchronous request has been completed.</span></span> <span data-ttu-id="b6805-269">次に、エラーが報告されたかどうかを確認し、エラーが発生した場合はその詳細を処理します。最後に、エラーがカスタムスクリプトで処理されたことをランタイムに示します。</span><span class="sxs-lookup"><span data-stu-id="b6805-269">It then checks to see whether an error was reported, and if so, processes the details of it, finally indicating to the runtime that the error was handled in custom script.</span></span>

## <a name="globalization-and-localization-support"></a><span data-ttu-id="b6805-270">グローバリゼーションとローカリゼーションのサポート</span><span class="sxs-lookup"><span data-stu-id="b6805-270">Globalization and Localization Support</span></span>

<span data-ttu-id="b6805-271">ScriptManager コントロールは、スクリプト文字列とユーザーインターフェイスコンポーネントのローカライズを幅広くサポートしています。ただし、このトピックはこのホワイトペーパーの範囲外です。</span><span class="sxs-lookup"><span data-stu-id="b6805-271">The ScriptManager control provides extensive support for localization of script strings and user interface components; however, that topic is outside of the scope of this whitepaper.</span></span> <span data-ttu-id="b6805-272">詳細については、ASP.NET AJAX Extensions でのグローバリゼーションのサポートに関するホワイトペーパーを参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6805-272">For more information, see the whitepaper, Globalization Support in ASP.NET AJAX Extensions.</span></span>

## <a name="the-updatepanel-control"></a><span data-ttu-id="b6805-273">UpdatePanel コントロール</span><span class="sxs-lookup"><span data-stu-id="b6805-273">The UpdatePanel Control</span></span>

## <a name="updatepanel-control-reference"></a><span data-ttu-id="b6805-274">UpdatePanel コントロールリファレンス</span><span class="sxs-lookup"><span data-stu-id="b6805-274">UpdatePanel Control Reference</span></span>

<span data-ttu-id="b6805-275">マークアップが有効なプロパティ:</span><span class="sxs-lookup"><span data-stu-id="b6805-275">Markup-Enabled Properties:</span></span>

| <span data-ttu-id="b6805-276">**プロパティ名**</span><span class="sxs-lookup"><span data-stu-id="b6805-276">**Property Name**</span></span> | <span data-ttu-id="b6805-277">**Type**</span><span class="sxs-lookup"><span data-stu-id="b6805-277">**Type**</span></span> | <span data-ttu-id="b6805-278">**説明**</span><span class="sxs-lookup"><span data-stu-id="b6805-278">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b6805-279">ChildrenAsTriggers</span><span class="sxs-lookup"><span data-stu-id="b6805-279">ChildrenAsTriggers</span></span> | <span data-ttu-id="b6805-280">[bool]</span><span class="sxs-lookup"><span data-stu-id="b6805-280">bool</span></span> | <span data-ttu-id="b6805-281">ポストバック時に、子コントロールが自動的に更新を呼び出すかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-281">Specifies whether child controls automatically invoke refresh on postback.</span></span> |
| <span data-ttu-id="b6805-282">RenderMode</span><span class="sxs-lookup"><span data-stu-id="b6805-282">RenderMode</span></span> | <span data-ttu-id="b6805-283">enum (Block、Inline)</span><span class="sxs-lookup"><span data-stu-id="b6805-283">enum (Block, Inline)</span></span> | <span data-ttu-id="b6805-284">コンテンツを視覚的に表示する方法を指定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-284">Specifies the way the content will be visually presented.</span></span> |
| <span data-ttu-id="b6805-285">UpdateMode</span><span class="sxs-lookup"><span data-stu-id="b6805-285">UpdateMode</span></span> | <span data-ttu-id="b6805-286">enum (常に、条件付き)</span><span class="sxs-lookup"><span data-stu-id="b6805-286">enum (Always, Conditional)</span></span> | <span data-ttu-id="b6805-287">UpdatePanel が部分的なレンダリング中に常に更新されるか、またはトリガーにヒットしたときにのみ更新されるかを指定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-287">Specifies whether the UpdatePanel is always refreshed during a partial render or if it is only refreshed when a trigger is hit.</span></span> |

<span data-ttu-id="b6805-288">コードのみのプロパティ:</span><span class="sxs-lookup"><span data-stu-id="b6805-288">Code-Only Properties:</span></span>

| <span data-ttu-id="b6805-289">**プロパティ名**</span><span class="sxs-lookup"><span data-stu-id="b6805-289">**Property Name**</span></span> | <span data-ttu-id="b6805-290">**Type**</span><span class="sxs-lookup"><span data-stu-id="b6805-290">**Type**</span></span> | <span data-ttu-id="b6805-291">**説明**</span><span class="sxs-lookup"><span data-stu-id="b6805-291">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b6805-292">IsInPartialRendering</span><span class="sxs-lookup"><span data-stu-id="b6805-292">IsInPartialRendering</span></span> | <span data-ttu-id="b6805-293">[bool]</span><span class="sxs-lookup"><span data-stu-id="b6805-293">bool</span></span> | <span data-ttu-id="b6805-294">UpdatePanel が現在の要求に対する部分的なレンダリングをサポートしているかどうかを取得します。</span><span class="sxs-lookup"><span data-stu-id="b6805-294">Gets whether the UpdatePanel is supporting partial rendering for the current request.</span></span> |
| <span data-ttu-id="b6805-295">ContentTemplate</span><span class="sxs-lookup"><span data-stu-id="b6805-295">ContentTemplate</span></span> | <span data-ttu-id="b6805-296">ITemplate</span><span class="sxs-lookup"><span data-stu-id="b6805-296">ITemplate</span></span> | <span data-ttu-id="b6805-297">更新要求のマークアップテンプレートを取得します。</span><span class="sxs-lookup"><span data-stu-id="b6805-297">Gets the markup template for the update request.</span></span> |
| <span data-ttu-id="b6805-298">ContentTemplateContainer</span><span class="sxs-lookup"><span data-stu-id="b6805-298">ContentTemplateContainer</span></span> | <span data-ttu-id="b6805-299">コントロール</span><span class="sxs-lookup"><span data-stu-id="b6805-299">Control</span></span> | <span data-ttu-id="b6805-300">更新要求のプログラムテンプレートを取得します。</span><span class="sxs-lookup"><span data-stu-id="b6805-300">Gets the programmatic template for the update request.</span></span> |
| <span data-ttu-id="b6805-301">トリガー</span><span class="sxs-lookup"><span data-stu-id="b6805-301">Triggers</span></span> | <span data-ttu-id="b6805-302">UpdatePanel-TriggerCollection</span><span class="sxs-lookup"><span data-stu-id="b6805-302">UpdatePanel- TriggerCollection</span></span> | <span data-ttu-id="b6805-303">現在の UpdatePanel に関連付けられているトリガーの一覧を取得します。</span><span class="sxs-lookup"><span data-stu-id="b6805-303">Gets the list of triggers associated with the current UpdatePanel.</span></span> |

<span data-ttu-id="b6805-304">パブリックコードメソッド:</span><span class="sxs-lookup"><span data-stu-id="b6805-304">Public Code Methods:</span></span>

| <span data-ttu-id="b6805-305">**メソッド名**</span><span class="sxs-lookup"><span data-stu-id="b6805-305">**Method Name**</span></span> | <span data-ttu-id="b6805-306">**Type**</span><span class="sxs-lookup"><span data-stu-id="b6805-306">**Type**</span></span> | <span data-ttu-id="b6805-307">**説明**</span><span class="sxs-lookup"><span data-stu-id="b6805-307">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b6805-308">Update ()</span><span class="sxs-lookup"><span data-stu-id="b6805-308">Update()</span></span> | <span data-ttu-id="b6805-309">Void</span><span class="sxs-lookup"><span data-stu-id="b6805-309">Void</span></span> | <span data-ttu-id="b6805-310">指定した UpdatePanel をプログラムによって更新します。</span><span class="sxs-lookup"><span data-stu-id="b6805-310">Updates the specified UpdatePanel programmatically.</span></span> <span data-ttu-id="b6805-311">サーバー要求が、トリガーされていない UpdatePanel の部分的なレンダリングをトリガーできるようにします。</span><span class="sxs-lookup"><span data-stu-id="b6805-311">Allows a server request to trigger a partial render of an otherwise-untriggered UpdatePanel.</span></span> |

<span data-ttu-id="b6805-312">マークアップの子孫:</span><span class="sxs-lookup"><span data-stu-id="b6805-312">Markup Descendants:</span></span>

| <span data-ttu-id="b6805-313">**Tag**</span><span class="sxs-lookup"><span data-stu-id="b6805-313">**Tag**</span></span> | <span data-ttu-id="b6805-314">**説明**</span><span class="sxs-lookup"><span data-stu-id="b6805-314">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="b6805-315">&lt;System.windows.controls.contentcontrol.contenttemplate&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-315">&lt;ContentTemplate&gt;</span></span> | <span data-ttu-id="b6805-316">部分的なレンダリングの結果を表示するために使用するマークアップを指定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-316">Specifies the markup to be used to render the partial rendering result.</span></span> <span data-ttu-id="b6805-317">&lt;asp: UpdatePanel&gt;の子。</span><span class="sxs-lookup"><span data-stu-id="b6805-317">Child of &lt;asp:UpdatePanel&gt;.</span></span> |
| <span data-ttu-id="b6805-318">&lt;トリガー&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-318">&lt;Triggers&gt;</span></span> | <span data-ttu-id="b6805-319">この UpdatePanel の更新に関連付けられた*n 個*のコントロールのコレクションを指定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-319">Specifies a collection of *n* controls associated with updating this UpdatePanel.</span></span> <span data-ttu-id="b6805-320">&lt;asp: UpdatePanel&gt;の子。</span><span class="sxs-lookup"><span data-stu-id="b6805-320">Child of &lt;asp:UpdatePanel&gt;.</span></span> |
| <span data-ttu-id="b6805-321">&lt;asp: AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-321">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="b6805-322">指定された UpdatePanel の部分ページレンダリングを呼び出すトリガーを指定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-322">Specifies a trigger that invokes a partial page render for the given UpdatePanel.</span></span> <span data-ttu-id="b6805-323">これは、対象となる UpdatePanel の子孫として、コントロールである場合とない場合があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-323">This may or may not be a control as a descendant of the UpdatePanel in question.</span></span> <span data-ttu-id="b6805-324">イベント名を詳細に指定します。&lt;の子は&gt;トリガーします。</span><span class="sxs-lookup"><span data-stu-id="b6805-324">Granular to the event name.Child of &lt;Triggers&gt;.</span></span> |
| <span data-ttu-id="b6805-325">&lt;asp: PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-325">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="b6805-326">ページ全体を更新するコントロールを指定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-326">Specifies a control that causes the entire page to refresh.</span></span> <span data-ttu-id="b6805-327">これは、対象となる UpdatePanel の子孫として、コントロールである場合とない場合があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-327">This may or may not be a control as a descendant of the UpdatePanel in question.</span></span> <span data-ttu-id="b6805-328">詳細をオブジェクトに細分化します。</span><span class="sxs-lookup"><span data-stu-id="b6805-328">Granular to the object.</span></span> <span data-ttu-id="b6805-329">&lt;の子は&gt;トリガーします。</span><span class="sxs-lookup"><span data-stu-id="b6805-329">Child of &lt;Triggers&gt;.</span></span> |

<span data-ttu-id="b6805-330">`UpdatePanel` コントロールは、AJAX 拡張機能の部分的なレンダリング機能の一部となるサーバー側のコンテンツを区切るコントロールです。</span><span class="sxs-lookup"><span data-stu-id="b6805-330">The `UpdatePanel` control is the control that delimits the server-side content that will take part in the partial rendering functionality of the AJAX Extensions.</span></span> <span data-ttu-id="b6805-331">ページに配置できる UpdatePanel コントロールの数に制限はなく、入れ子にすることもできます。</span><span class="sxs-lookup"><span data-stu-id="b6805-331">There is no limit to the number of UpdatePanel controls that can be on a page, and they can be nested.</span></span> <span data-ttu-id="b6805-332">各 UpdatePanel は分離されているので、それぞれが独立して動作できます (2 つの UpdatePanels を同時に実行し、ページのポストバックに依存せずにページの異なる部分をレンダリングできます)。</span><span class="sxs-lookup"><span data-stu-id="b6805-332">Each UpdatePanel is isolated, so that each can work independently (you can have two UpdatePanels running at the same time, rendering different parts of the page, independent of the page's postback).</span></span>

<span data-ttu-id="b6805-333">UpdatePanel コントロールは、主にコントロールトリガーを処理します。既定では、ポストバックを作成する UpdatePanel の `ContentTemplate` 内に含まれるコントロールは、UpdatePanel のトリガーとして登録されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-333">The UpdatePanel control primarily deals with control triggers - by default, any control contained within an UpdatePanel's `ContentTemplate` that creates a postback is registered as a trigger for the UpdatePanel.</span></span> <span data-ttu-id="b6805-334">つまり、UpdatePanel は、既定のデータバインドコントロール (GridView など) とユーザーコントロールを使用して操作でき、スクリプトでプログラミングできます。</span><span class="sxs-lookup"><span data-stu-id="b6805-334">This means that the UpdatePanel can work with the default data-bound controls (such as the GridView), with user controls, and they can be programmed in script.</span></span>

<span data-ttu-id="b6805-335">既定では、部分ページレンダリングがトリガーされると、UpdatePanel がそのようなアクションに対して定義されたトリガーをコントロールするかどうかにかかわらず、ページ上のすべての UpdatePanel コントロールが更新されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-335">By default, when a partial page render is triggered, all UpdatePanel controls on the page will be refreshed, whether or not the UpdatePanel controls defined triggers for such action.</span></span> <span data-ttu-id="b6805-336">たとえば、1つの UpdatePanel がボタンコントロールを定義し、そのボタンコントロールがクリックされた場合、そのページのすべての UpdatePanel コントロールが既定で更新されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-336">For example, if one UpdatePanel defines a Button control, and that Button control is clicked, all UpdatePanel controls on that page will be refreshed by default.</span></span> <span data-ttu-id="b6805-337">これは、既定では、UpdatePanel の `UpdateMode` プロパティが `Always`に設定されているためです。</span><span class="sxs-lookup"><span data-stu-id="b6805-337">This is because, by default, the `UpdateMode` property of the UpdatePanel is set to `Always`.</span></span> <span data-ttu-id="b6805-338">または、UpdateMode プロパティを `Conditional`に設定します。これは、特定のトリガーがヒットした場合にのみ、UpdatePanel が更新されることを意味します。</span><span class="sxs-lookup"><span data-stu-id="b6805-338">Alternatively, you may set the UpdateMode property to `Conditional`, which means that the UpdatePanel will only be refreshed if a specific trigger is hit.</span></span>

## <a name="custom-control-notes"></a><span data-ttu-id="b6805-339">カスタムコントロールのメモ</span><span class="sxs-lookup"><span data-stu-id="b6805-339">Custom Control Notes</span></span>

<span data-ttu-id="b6805-340">UpdatePanel は、任意のユーザーコントロールまたはカスタムコントロールに追加できます。ただし、これらのコントロールが含まれているページには、EnablePartialRendering プロパティが**true**に設定されている ScriptManager コントロールも含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-340">An UpdatePanel can be added to any user control or custom control; however, the page on which these controls are included must also include a ScriptManager control with the property EnablePartialRendering set to **true**.</span></span>

<span data-ttu-id="b6805-341">Web カスタムコントロールを使用するときにこのことを考慮する方法の1つとして、`CompositeControl` クラスの protected `CreateChildControls()` メソッドをオーバーライドする方法があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-341">One way in which you might account for this when using Web Custom Controls is to override the protected `CreateChildControls()` method of the `CompositeControl` class.</span></span> <span data-ttu-id="b6805-342">このようにすることで、ページで部分的なレンダリングがサポートされていると判断した場合に、コントロールの子と外部との間に UpdatePanel を挿入できます。それ以外の場合は、単に子コントロールをコンテナー `Control` インスタンスにレイヤー化できます。</span><span class="sxs-lookup"><span data-stu-id="b6805-342">By doing so, you can inject an UpdatePanel between the control's children and the outside world if you determine the page supports partial rendering; otherwise, you can simply layer the child controls into a container `Control` instance.</span></span>

## <a name="updatepanel-considerations"></a><span data-ttu-id="b6805-343">UpdatePanel に関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="b6805-343">UpdatePanel Considerations</span></span>

<span data-ttu-id="b6805-344">UpdatePanel は、JavaScript XMLHttpRequest のコンテキスト内で ASP.NET ポストバックをラップする、ブラックボックスのように動作します。</span><span class="sxs-lookup"><span data-stu-id="b6805-344">The UpdatePanel operates as something of a black-box, wrapping ASP.NET postbacks within the context of a JavaScript XMLHttpRequest.</span></span> <span data-ttu-id="b6805-345">ただし、動作と速度の両方において、パフォーマンスに関して大きな考慮事項があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-345">However, there are significant performance considerations to bear in mind, both in terms of behavior and speed.</span></span> <span data-ttu-id="b6805-346">UpdatePanel がどのように機能するかを理解するために、使用方法が適切であることを判断するために、AJAX の交換を調べる必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-346">To understand how the UpdatePanel works, so that you can best decide when its use is appropriate, you should examine the AJAX exchange.</span></span> <span data-ttu-id="b6805-347">次の例では、既存のサイトと Mozilla Firefox を使用して、焼討バグ拡張機能を使用します (焼討バグは XMLHttpRequest データをキャプチャします)。</span><span class="sxs-lookup"><span data-stu-id="b6805-347">The following example uses an existing site and, Mozilla Firefox with the Firebug extension (Firebug captures XMLHttpRequest data).</span></span>

<span data-ttu-id="b6805-348">特に、フォームまたはコントロールの市区町村と都道府県フィールドに入力する郵便番号のテキストボックスを持つフォームがあるとします。</span><span class="sxs-lookup"><span data-stu-id="b6805-348">Consider a form that, among other things, has a postal code textbox which is supposed to populate a city and state field on a form or control.</span></span> <span data-ttu-id="b6805-349">このフォームは最終的に、ユーザーの名前、住所、連絡先情報などのメンバーシップ情報を収集します。</span><span class="sxs-lookup"><span data-stu-id="b6805-349">This form ultimately collects membership information, including a user's name, address, and contact information.</span></span> <span data-ttu-id="b6805-350">特定のプロジェクトの要件に基づいて、さまざまな設計上の考慮事項を考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-350">There are many design considerations to take into account, based on the requirements of a specific project.</span></span>

[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image11.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image10.png)

<span data-ttu-id="b6805-351">([クリックすると、フルサイズの画像が表示](understanding-partial-page-updates-with-asp-net-ajax/_static/image12.png)される)</span><span class="sxs-lookup"><span data-stu-id="b6805-351">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image12.png))</span></span>

[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image14.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image13.png)

<span data-ttu-id="b6805-352">([クリックすると、フルサイズの画像が表示](understanding-partial-page-updates-with-asp-net-ajax/_static/image15.png)される)</span><span class="sxs-lookup"><span data-stu-id="b6805-352">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image15.png))</span></span>

<span data-ttu-id="b6805-353">このアプリケーションの最初のイテレーションでは、郵便番号、市区町村、都道府県など、ユーザー登録データ全体を組み込んだコントロールが作成されています。</span><span class="sxs-lookup"><span data-stu-id="b6805-353">In the original iteration of this application, a control was built that incorporated the entirety of the user registration data, including the postal code, city, and state.</span></span> <span data-ttu-id="b6805-354">コントロール全体が UpdatePanel 内でラップされ、Web フォームにドロップされました。</span><span class="sxs-lookup"><span data-stu-id="b6805-354">The entire control was wrapped within an UpdatePanel and dropped onto a Web Form.</span></span> <span data-ttu-id="b6805-355">ユーザーが郵便番号を入力すると、UpdatePanel は、トリガーを指定するか、または true に設定された ChildrenAsTriggers プロパティを使用して、イベント (バックエンドの対応する TextChanged イベント) を検出します。</span><span class="sxs-lookup"><span data-stu-id="b6805-355">When the postal code is entered by the user, the UpdatePanel detects the event (the corresponding TextChanged event in the back-end, either by specifying triggers or by using the ChildrenAsTriggers property set to true).</span></span> <span data-ttu-id="b6805-356">AJAX では、消火バグによってキャプチャされた、UpdatePanel 内のすべてのフィールドがポストされます (右側の図を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="b6805-356">AJAX posts all of the fields within the UpdatePanel, as captured by FireBug (see the diagram on the right).</span></span>

<span data-ttu-id="b6805-357">画面のキャプチャによって、UpdatePanel 内のすべてのコントロールからの値 (この場合はすべて空) と ViewState フィールドが配信されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-357">As the screen capture indicates, values from every control within the UpdatePanel are delivered (in this case, they are all empty), as well as the ViewState field.</span></span> <span data-ttu-id="b6805-358">この特定の要求を行うために必要なのは5バイトのデータのみである場合、9 kb を超えるデータが送信されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-358">All told, over 9kb of data is sent, when in fact only five bytes of data were needed to make this particular request.</span></span> <span data-ttu-id="b6805-359">応答はさらに肥大化しています。つまり、57kb がクライアントに送信され、テキストフィールドとドロップダウンフィールドが更新されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-359">The response is even more bloated: in total, 57kb is sent to the client, simply to update a text field and a drop-down field.</span></span>

<span data-ttu-id="b6805-360">また、ASP.NET AJAX がプレゼンテーションを更新する方法を確認することが重要な場合もあります。</span><span class="sxs-lookup"><span data-stu-id="b6805-360">It may also be of interest to see how ASP.NET AJAX updates the presentation.</span></span> <span data-ttu-id="b6805-361">UpdatePanel の更新要求の応答部分は、左側の 消火バグコンソールの表示に表示されます。これは、クライアントスクリプトによって分割され、ページ上で再構築される、特殊な形式のパイプで区切られた文字列です。</span><span class="sxs-lookup"><span data-stu-id="b6805-361">The response portion of the UpdatePanel's update request is shown in the Firebug console display on the left; it is a specially-formulated pipe-delimited string that is broken up by the client script and then reassembled on the page.</span></span> <span data-ttu-id="b6805-362">具体的には、ASP.NET AJAX は、UpdatePanel を表すクライアント上の HTML 要素の*innerHTML*プロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-362">Specifically, ASP.NET AJAX sets the *innerHTML* property of the HTML element on the client that represents your UpdatePanel.</span></span> <span data-ttu-id="b6805-363">ブラウザーによって DOM が再生成されると、処理する必要がある情報の量によって若干の遅延が発生します。</span><span class="sxs-lookup"><span data-stu-id="b6805-363">As the browser re-generates the DOM, there is a slight delay, depending on the amount of information that needs to be processed.</span></span>

<span data-ttu-id="b6805-364">DOM の再生成により、いくつかの追加の問題が発生します。</span><span class="sxs-lookup"><span data-stu-id="b6805-364">The regeneration of the DOM triggers a number of additional issues:</span></span>

[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image17.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image16.png)

<span data-ttu-id="b6805-365">([クリックすると、フルサイズの画像が表示](understanding-partial-page-updates-with-asp-net-ajax/_static/image18.png)される)</span><span class="sxs-lookup"><span data-stu-id="b6805-365">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image18.png))</span></span>

- <span data-ttu-id="b6805-366">フォーカスされた HTML 要素が UpdatePanel 内にある場合、フォーカスは失われます。</span><span class="sxs-lookup"><span data-stu-id="b6805-366">If the focused HTML element is within the UpdatePanel, it will lose focus.</span></span> <span data-ttu-id="b6805-367">そのため、Tab キーを押して郵便番号のテキストボックスを終了したユーザーについては、次の宛先は [City] テキストボックスになります。</span><span class="sxs-lookup"><span data-stu-id="b6805-367">So, for users who pressed the Tab key to exit the postal code text box, their next destination would have been the City text box.</span></span> <span data-ttu-id="b6805-368">ただし、UpdatePanel によって表示が更新されると、フォームにフォーカスがなくなり、Tab キーを押すとフォーカス要素 (リンクなど) の強調表示が開始されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-368">However, once the UpdatePanel refreshed the display, the form would no longer have had focus, and pressing Tab would have started highlighting the focus elements (such as links).</span></span>
- <span data-ttu-id="b6805-369">DOM 要素にアクセスする任意の種類のカスタムクライアント側スクリプトが使用されている場合、関数によって永続化された参照は、部分ポストバック後に機能しなくなる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-369">If any type of custom client-side script is in use that accesses DOM elements, references persisted by functions may become defunct after a partial postback.</span></span>

<span data-ttu-id="b6805-370">UpdatePanels は、すべてをキャッチすることを目的としたものではありません。</span><span class="sxs-lookup"><span data-stu-id="b6805-370">UpdatePanels are not intended to be catch-all solutions.</span></span> <span data-ttu-id="b6805-371">むしろ、プロトタイプや小さなコントロールの更新など、特定の状況に対応した簡単なソリューションを提供し、.NET オブジェクトモデルについては理解しているが DOM を使用している ASP.NET 開発者向けの使い慣れたインターフェイスを提供します。</span><span class="sxs-lookup"><span data-stu-id="b6805-371">Rather, they provide a quick solution for certain situations, including prototyping, small control updates, and provide a familiar interface to ASP.NET developers who might be familiar with the .NET object model but less-so with the DOM.</span></span> <span data-ttu-id="b6805-372">アプリケーションのシナリオによっては、パフォーマンスを向上させるための代替手段がいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="b6805-372">There are a number of alternatives that may result in better performance, depending on the application scenario:</span></span>

- <span data-ttu-id="b6805-373">PageMethods と JSON (JavaScript Object Notation) を使用することを検討してください。開発者は、web サービス呼び出しが呼び出されているかのように、ページで静的メソッドを呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="b6805-373">Consider using PageMethods and JSON (JavaScript Object Notation) allows the developer to invoke static methods on a page as if a web service call was being invoked.</span></span> <span data-ttu-id="b6805-374">メソッドは静的であるため、状態は不要です。スクリプトの呼び出し元がパラメーターを指定すると、結果は非同期的に返されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-374">Because the methods are static, no state is necessary; the script caller supplies the parameters, and the result is returned asynchronously.</span></span>
- <span data-ttu-id="b6805-375">1つのコントロールをアプリケーション全体で複数の場所で使用する必要がある場合は、Web サービスと JSON の使用を検討してください。</span><span class="sxs-lookup"><span data-stu-id="b6805-375">Consider using a Web Service and JSON if a single control needs to be used in several places across an application.</span></span> <span data-ttu-id="b6805-376">この場合も、特別な作業はほとんど必要ありません。非同期で動作します。</span><span class="sxs-lookup"><span data-stu-id="b6805-376">This again requires very little special work, and works asynchronously.</span></span>

<span data-ttu-id="b6805-377">Web サービスまたはページのメソッドを使用した機能の組み込みも、欠点があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-377">Incorporating functionality through Web Services or Page Methods has drawbacks as well.</span></span> <span data-ttu-id="b6805-378">まず、ASP.NET の開発者は、通常、機能の小さなコンポーネントをユーザーコントロール (.ascx ファイル) にビルドする傾向があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-378">First and foremost, ASP.NET developers typically tend to build small components of functionality into user controls (.ascx files).</span></span> <span data-ttu-id="b6805-379">ページメソッドをこれらのファイルでホストすることはできません。これらは、実際の .aspx ページクラス内でホストされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-379">Page methods cannot be hosted in these files; they must be hosted within the actual .aspx page class.</span></span> <span data-ttu-id="b6805-380">Web サービスも同様に、.asmx クラス内でホストする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-380">Web services, similarly, must be hosted within the .asmx class.</span></span> <span data-ttu-id="b6805-381">アプリケーションによっては、このアーキテクチャが単一責任の原則に違反することがあります。これは、1つのコンポーネントの機能が2つ以上の物理コンポーネントに分散されるようになったためです。</span><span class="sxs-lookup"><span data-stu-id="b6805-381">Depending on the application, this architecture may violate the Single Responsibility Principle, in that the functionality for a single component is now spread across two or more physical components which may have little or no cohesive ties.</span></span>

<span data-ttu-id="b6805-382">最後に、アプリケーションで UpdatePanels を使用する必要がある場合は、次のガイドラインを参考にしてトラブルシューティングとメンテナンスを行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-382">Finally, if an application requires that UpdatePanels are used, the following guidelines should assist with troubleshooting and maintenance.</span></span>

- <span data-ttu-id="b6805-383">**UpdatePanels をできるだけ少ない数で入れ子にするだけでなく、コードの単位間で入れ子にすることもできます。**</span><span class="sxs-lookup"><span data-stu-id="b6805-383">**Nest UpdatePanels as little as possible, not only within-units, but also across units of code.**</span></span> <span data-ttu-id="b6805-384">たとえば、コントロールをラップするページに UpdatePanel を使用し、そのコントロールには、updatepanel を含む別のコントロールを含む UpdatePanel も含まれているのに対して、単位の入れ子があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-384">For example, having an UpdatePanel on a Page that wraps a Control, while that Control also contains an UpdatePanel, which contains another Control that contains an UpdatePanel, is cross-unit nesting.</span></span> <span data-ttu-id="b6805-385">これにより、更新する必要がある要素を明確にし、子アップデートパネルへの予期しない更新を防ぐことができます。</span><span class="sxs-lookup"><span data-stu-id="b6805-385">This helps to keep clear which elements should be refreshing, and prevents unexpected refreshes to child UpdatePanels.</span></span>
- <span data-ttu-id="b6805-386">\***ChildrenAsTriggers\*プロパティを false に設定したままにして、トリガーイベントを明示的に設定します。**</span><span class="sxs-lookup"><span data-stu-id="b6805-386">**Keep the *ChildrenAsTriggers* property set to false, and explicitly set triggering events.**</span></span> <span data-ttu-id="b6805-387">`<Triggers>` コレクションを使用すると、イベントを処理しやすくなり、予期しない動作を防ぐことができます。これは、メンテナンスタスクを支援し、開発者がイベントをオプトインするように強制するためです。</span><span class="sxs-lookup"><span data-stu-id="b6805-387">Utilizing the `<Triggers>` collection is a much clearer way to handle events, and may prevent unexpected behavior, helping with maintenance tasks and forcing a developer to opt-in for an event.</span></span>
- <span data-ttu-id="b6805-388">**機能を実現するには、可能な限り最小単位を使用します。**</span><span class="sxs-lookup"><span data-stu-id="b6805-388">**Use the smallest possible unit to achieve functionality.**</span></span> <span data-ttu-id="b6805-389">郵便番号サービスの説明に記載されているように、サーバーへの時間を短縮するだけで、処理の合計と、クライアント/サーバー間の exchange のフットプリントをラップすることで、パフォーマンスを向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="b6805-389">As noted in the discussion of the postal code service, wrapping only the bare minimum reduces time to the server, total processing, and the footprint of the client-server exchange, enhancing performance.</span></span>

## <a name="the-updateprogress-control"></a><span data-ttu-id="b6805-390">UpdateProgress コントロール</span><span class="sxs-lookup"><span data-stu-id="b6805-390">The UpdateProgress Control</span></span>

## <a name="updateprogress-control-reference"></a><span data-ttu-id="b6805-391">UpdateProgress コントロールリファレンス</span><span class="sxs-lookup"><span data-stu-id="b6805-391">UpdateProgress Control Reference</span></span>

<span data-ttu-id="b6805-392">マークアップが有効なプロパティ:</span><span class="sxs-lookup"><span data-stu-id="b6805-392">Markup-Enabled Properties:</span></span>

| <span data-ttu-id="b6805-393">**プロパティ名**</span><span class="sxs-lookup"><span data-stu-id="b6805-393">**Property Name**</span></span> | <span data-ttu-id="b6805-394">**Type**</span><span class="sxs-lookup"><span data-stu-id="b6805-394">**Type**</span></span> | <span data-ttu-id="b6805-395">**説明**</span><span class="sxs-lookup"><span data-stu-id="b6805-395">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b6805-396">AssociatedUpdate-PanelID</span><span class="sxs-lookup"><span data-stu-id="b6805-396">AssociatedUpdate-PanelID</span></span> | <span data-ttu-id="b6805-397">String</span><span class="sxs-lookup"><span data-stu-id="b6805-397">String</span></span> | <span data-ttu-id="b6805-398">この UpdateProgress が報告する必要がある UpdatePanel の ID を指定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-398">Specifies the ID of the UpdatePanel that this UpdateProgress should report on.</span></span> |
| <span data-ttu-id="b6805-399">DisplayAfter</span><span class="sxs-lookup"><span data-stu-id="b6805-399">DisplayAfter</span></span> | <span data-ttu-id="b6805-400">int</span><span class="sxs-lookup"><span data-stu-id="b6805-400">Int</span></span> | <span data-ttu-id="b6805-401">非同期要求の開始後にこのコントロールが表示されるまでのタイムアウトをミリ秒単位で指定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-401">Specifies the timeout in milliseconds before this control is displayed after the asynchronous request begins.</span></span> |
| <span data-ttu-id="b6805-402">DynamicLayout</span><span class="sxs-lookup"><span data-stu-id="b6805-402">DynamicLayout</span></span> | <span data-ttu-id="b6805-403">[bool]</span><span class="sxs-lookup"><span data-stu-id="b6805-403">bool</span></span> | <span data-ttu-id="b6805-404">進行状況を動的に表示するかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="b6805-404">Specifies whether the progress is rendered dynamically.</span></span> |

<span data-ttu-id="b6805-405">マークアップの子孫:</span><span class="sxs-lookup"><span data-stu-id="b6805-405">Markup Descendants:</span></span>

| <span data-ttu-id="b6805-406">**Tag**</span><span class="sxs-lookup"><span data-stu-id="b6805-406">**Tag**</span></span> | <span data-ttu-id="b6805-407">**説明**</span><span class="sxs-lookup"><span data-stu-id="b6805-407">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="b6805-408">&lt;ProgressTemplate&gt;</span><span class="sxs-lookup"><span data-stu-id="b6805-408">&lt;ProgressTemplate&gt;</span></span> | <span data-ttu-id="b6805-409">このコントロールに表示されるコンテンツに対して設定されたコントロールテンプレートを格納します。</span><span class="sxs-lookup"><span data-stu-id="b6805-409">Contains the control template set for the content that will be displayed with this control.</span></span> |

<span data-ttu-id="b6805-410">UpdateProgress コントロールを使用すると、サーバーに転送するために必要な作業を行っているときに、ユーザーの関心を維持するためのフィードバックを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="b6805-410">The UpdateProgress control gives you a measure of feedback to keep your users' interest while doing the necessary work to transport to the server.</span></span> <span data-ttu-id="b6805-411">これにより、特に、ほとんどのユーザーがページの更新に使用され、ステータスバーが強調表示されているため、ユーザーは何もしないことがわかります。</span><span class="sxs-lookup"><span data-stu-id="b6805-411">This can help your users know that you're doing something even though it may not be apparent, especially since most users are used to the page refreshing and seeing the status bar highlight.</span></span>

<span data-ttu-id="b6805-412">注として、UpdateProgress コントロールはページ階層の任意の場所に表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-412">As a note, UpdateProgress controls can appear anywhere on a page hierarchy.</span></span> <span data-ttu-id="b6805-413">ただし、部分ポストバックが子 UpdatePanel から開始された場合 (UpdatePanel が別の UpdatePanel 内に入れ子になっている場合)、子 UpdatePanel をトリガーするポストバックによって、子の UpdateProgress テンプレートが表示されます。UpdatePanel および親 UpdatePanel。</span><span class="sxs-lookup"><span data-stu-id="b6805-413">However, in cases in which a partial postback is initiated from a child UpdatePanel (where an UpdatePanel is nested within another UpdatePanel), postbacks that trigger the child UpdatePanel will cause UpdateProgress templates to be displayed for the child UpdatePanel as well as the parent UpdatePanel.</span></span> <span data-ttu-id="b6805-414">ただし、トリガーが親の UpdatePanel の直接の子である場合は、親に関連付けられている UpdateProgress テンプレートのみが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6805-414">But, if the trigger is a direct child of the parent UpdatePanel, then only the UpdateProgress templates associated with the parent will be displayed.</span></span>

## <a name="summary"></a><span data-ttu-id="b6805-415">まとめ</span><span class="sxs-lookup"><span data-stu-id="b6805-415">Summary</span></span>

<span data-ttu-id="b6805-416">Microsoft ASP.NET AJAX 拡張機能は、web コンテンツにアクセスしやすくし、web アプリケーションにより充実したユーザーエクスペリエンスを提供できるように設計された、洗練された製品です。</span><span class="sxs-lookup"><span data-stu-id="b6805-416">The Microsoft ASP.NET AJAX extensions are sophisticated products designed to assist in making web content more accessible and to provide a richer user experience to your web applications.</span></span> <span data-ttu-id="b6805-417">ASP.NET AJAX 拡張機能の一部として、ScriptManager、UpdatePanel、および UpdateProgress コントロールを含む部分ページレンダリングコントロールが、ツールキットの最も可視性の高いコンポーネントの一部になります。</span><span class="sxs-lookup"><span data-stu-id="b6805-417">As part of the ASP.NET AJAX Extensions, the partial page rendering controls, including the ScriptManager, the UpdatePanel, and UpdateProgress controls are some of the most visible components of the toolkit.</span></span>

<span data-ttu-id="b6805-418">ScriptManager コンポーネントは、拡張機能のクライアント JavaScript のプロビジョニングを統合するだけでなく、さまざまなサーバーおよびクライアント側コンポーネントが、最小限の開発投資で連携できるようにします。</span><span class="sxs-lookup"><span data-stu-id="b6805-418">The ScriptManager component integrates the provision of client JavaScript for the Extensions, as well as enables the various server- and client-side components to work together with minimal development investment.</span></span>

<span data-ttu-id="b6805-419">UpdatePanel コントロールは見かけ上のマジックボックスであり、UpdatePanel 内のマークアップはサーバー側の分離コードを持つことができ、ページの更新をトリガーしません。</span><span class="sxs-lookup"><span data-stu-id="b6805-419">The UpdatePanel control is the apparent magic box - markup within the UpdatePanel can have server-side Codebehind and not trigger a page refresh.</span></span> <span data-ttu-id="b6805-420">UpdatePanel コントロールは入れ子にすることができ、他の UpdatePanels のコントロールに依存できます。</span><span class="sxs-lookup"><span data-stu-id="b6805-420">UpdatePanel controls can be nested, and can be dependent on controls in other UpdatePanels.</span></span> <span data-ttu-id="b6805-421">既定では、UpdatePanels は、その子孫コントロールによって呼び出されるポストバックを処理します。ただし、この機能は、宣言的またはプログラムによってきめ細かく調整できます。</span><span class="sxs-lookup"><span data-stu-id="b6805-421">By default, UpdatePanels handle any postbacks invoked by their descendant controls, although this functionality can be finely tuned, either declaratively or programmatically.</span></span>

<span data-ttu-id="b6805-422">UpdatePanel コントロールを使用する場合、開発者は、発生する可能性があるパフォーマンスへの影響に注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-422">When using the UpdatePanel control, developers should be aware of the performance impact that could potentially arise.</span></span> <span data-ttu-id="b6805-423">考えられる代替手段として、web サービスとページメソッドがあります。ただし、アプリケーションの設計は考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6805-423">Potential alternatives include web services and page methods, though the design of the application should be considered.</span></span>

<span data-ttu-id="b6805-424">UpdateProgress コントロールを使用すると、ユーザーが無視しないこと、およびバックグラウンドでの要求が行われている間、ページがユーザー入力に応答する処理を実行していないことを知ることができます。</span><span class="sxs-lookup"><span data-stu-id="b6805-424">The UpdateProgress control allows the user to know that she or he is not being ignored, and that the behind-the-scenes request is going on while the page is otherwise not doing anything to respond to the user input.</span></span> <span data-ttu-id="b6805-425">また、部分的なレンダリングの結果を中止する機能も含まれています。</span><span class="sxs-lookup"><span data-stu-id="b6805-425">It also includes the ability to abort partial rendering results.</span></span>

<span data-ttu-id="b6805-426">これらのツールを一緒に使用すると、サーバーの動作をユーザーに明らかにせず、ワークフローを中断することで、豊富でシームレスなユーザーエクスペリエンスを実現できます。</span><span class="sxs-lookup"><span data-stu-id="b6805-426">Together, these tools assist creating a rich and seamless user experience by making server work less apparent to the user and interrupting workflow less.</span></span>

## <a name="bio"></a><span data-ttu-id="b6805-427">略歴</span><span class="sxs-lookup"><span data-stu-id="b6805-427">Bio</span></span>

<span data-ttu-id="b6805-428">Scott Cate は1997以来 Microsoft の Web テクノロジを使用しています。また、myKB.com ([www.myKB.com](http://www.myKB.com)) の大統領で、サポート技術情報のソフトウェアソリューションに重点を置いた ASP.NET ベースのアプリケーションを作成することを専門としています。</span><span class="sxs-lookup"><span data-stu-id="b6805-428">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="b6805-429">Scott は、 [scott.cate@myKB.com](mailto:scott.cate@myKB.com)または彼のブログ ( [ScottCate.com](http://ScottCate.com) ) で、電子メールで連絡を受けることができます。</span><span class="sxs-lookup"><span data-stu-id="b6805-429">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="b6805-430">Next</span><span class="sxs-lookup"><span data-stu-id="b6805-430">Next</span></span>](understanding-asp-net-ajax-updatepanel-triggers.md)
