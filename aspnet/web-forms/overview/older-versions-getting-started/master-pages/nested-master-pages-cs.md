---
uid: web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
title: 入れ子になったC#マスターページ () |Microsoft Docs
author: rick-anderson
description: 1つのマスターページを別のマスターページに入れ子にする方法について説明します。
ms.author: riande
ms.date: 07/28/2008
ms.assetid: 32b7fb6e-d74b-4048-91f8-70631b2523ee
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 67093266567a97cd22b353115616484fd9ef155e
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/28/2019
ms.locfileid: "74596775"
---
# <a name="nested-master-pages-c"></a><span data-ttu-id="5712b-103">入れ子にされたマスター ページ (C#)</span><span class="sxs-lookup"><span data-stu-id="5712b-103">Nested Master Pages (C#)</span></span>

<span data-ttu-id="5712b-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="5712b-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="5712b-105">[コードのダウンロード](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip)または[PDF のダウンロード](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="5712b-105">[Download Code](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) or [Download PDF](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span></span>

> <span data-ttu-id="5712b-106">1つのマスターページを別のマスターページに入れ子にする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="5712b-106">Shows how to nest one master page within another.</span></span>

## <a name="introduction"></a><span data-ttu-id="5712b-107">はじめに</span><span class="sxs-lookup"><span data-stu-id="5712b-107">Introduction</span></span>

<span data-ttu-id="5712b-108">これまでの9つのチュートリアルでは、マスターページを使用してサイト全体のレイアウトを実装する方法を説明しました。</span><span class="sxs-lookup"><span data-stu-id="5712b-108">Over the course of the past nine tutorials we have seen how to implement a site-wide layout with master pages.</span></span> <span data-ttu-id="5712b-109">簡単に言うと、マスターページを使用すると、ページ開発者は、マスターページで共通のマークアップを、コンテンツページごとにカスタマイズできる特定の領域と共に定義できます。</span><span class="sxs-lookup"><span data-stu-id="5712b-109">In a nutshell, master pages allow us, the page developer, to define common markup in the master page along with specific regions that can be customized on a content page-by-content page basis.</span></span> <span data-ttu-id="5712b-110">マスターページの ContentPlaceHolder コントロールは、カスタマイズ可能な領域を示します。ContentPlaceHolder コントロール用にカスタマイズしたマークアップは、コンテンツコントロールを使用してコンテンツページで定義されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-110">The ContentPlaceHolder controls in a master page indicate the customizable regions; the customized markup for the ContentPlaceHolder controls are defined in the content page via Content controls.</span></span>

<span data-ttu-id="5712b-111">これまでに説明したマスターページの手法は、サイト全体で1つのレイアウトを使用する場合に最適です。</span><span class="sxs-lookup"><span data-stu-id="5712b-111">The master page techniques we've explored thus far are great if you have a single layout used across the entire site.</span></span> <span data-ttu-id="5712b-112">ただし、多くの大規模な web サイトには、さまざまなセクションでカスタマイズされたサイトレイアウトがあります。</span><span class="sxs-lookup"><span data-stu-id="5712b-112">However, many large websites have a site layout that is customized across various sections.</span></span> <span data-ttu-id="5712b-113">たとえば、患者の情報、活動、請求を管理するために病院のスタッフが使用する医療関連アプリケーションを考えてみます。</span><span class="sxs-lookup"><span data-stu-id="5712b-113">For example, consider a health care application used by hospital staff to manage patient information, activities, and billing.</span></span> <span data-ttu-id="5712b-114">このアプリケーションには、次の3種類の web ページがあります。</span><span class="sxs-lookup"><span data-stu-id="5712b-114">There may be three types of web pages in this application:</span></span>

- <span data-ttu-id="5712b-115">スタッフメンバーが可用性を更新したり、スケジュールを表示したり、休暇時間を要求したりできるスタッフメンバー固有のページ。</span><span class="sxs-lookup"><span data-stu-id="5712b-115">Staff member-specific pages where staff members can update availability, view schedules, or request vacation time.</span></span>
- <span data-ttu-id="5712b-116">スタッフメンバーが特定の患者の情報を表示または編集する患者固有のページ。</span><span class="sxs-lookup"><span data-stu-id="5712b-116">Patient-specific pages where staff members view or edit information for a specific patient.</span></span>
- <span data-ttu-id="5712b-117">経理担当者が現在の要求の状態と財務報告を確認する請求固有のページ。</span><span class="sxs-lookup"><span data-stu-id="5712b-117">Billing-specific pages where accountants review current claim statuses and financial reports.</span></span>

<span data-ttu-id="5712b-118">すべてのページで、上部のメニューや下部に頻繁に使用する一連のリンクなど、一般的なレイアウトが共有されている場合があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-118">Every page might share a common layout, such as a menu across the top and a series of frequently used links along the bottom.</span></span> <span data-ttu-id="5712b-119">しかし、スタッフ、患者、および課金固有のページでは、この汎用レイアウトのカスタマイズが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-119">But the staff-, patient-, and billing-specific pages may need to customize this generic layout.</span></span> <span data-ttu-id="5712b-120">たとえば、スタッフ固有のすべてのページには、現在ログオンしているユーザーの可用性と日単位のスケジュールを示す予定表とタスク一覧が含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-120">For example, perhaps all staff-specific pages should include a calendar and task list showing the currently logged on user's availability and daily schedule.</span></span> <span data-ttu-id="5712b-121">場合によっては、患者固有のすべてのページで、情報を編集する患者の名前、住所、保険情報を表示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-121">Perhaps all patient-specific pages need to show the name, address, and insurance information for the patient whose information is being edited.</span></span>

<span data-ttu-id="5712b-122">*入れ子になったマスターページ*を使用して、このようなカスタマイズされたレイアウトを作成することができます。</span><span class="sxs-lookup"><span data-stu-id="5712b-122">It's possible to create such customized layouts by using *nested master pages*.</span></span> <span data-ttu-id="5712b-123">上記のシナリオを実装するには、まず、サイト全体のレイアウト (メニューとフッターのコンテンツ) を定義したマスターページを作成し、カスタマイズ可能な領域を定義する ContentPlaceHolders を使用します。</span><span class="sxs-lookup"><span data-stu-id="5712b-123">To implement the above scenario, we would start by creating a master page that defined the site-wide layout, the menu and footer content, with ContentPlaceHolders defining the customizable regions.</span></span> <span data-ttu-id="5712b-124">次に、web ページの種類ごとに1つずつ、入れ子になった3つのマスターページを作成します。</span><span class="sxs-lookup"><span data-stu-id="5712b-124">We would then create three nested master pages, one for each type of web page.</span></span> <span data-ttu-id="5712b-125">各入れ子になったマスターページは、マスターページを使用するコンテンツページの種類のコンテンツを定義します。</span><span class="sxs-lookup"><span data-stu-id="5712b-125">Each nested master page would define the content among the type of content pages that use the master page.</span></span> <span data-ttu-id="5712b-126">つまり、患者固有のコンテンツページの入れ子になったマスターページには、編集中の患者に関する情報を表示するためのマークアップとプログラムロジックが含まれます。</span><span class="sxs-lookup"><span data-stu-id="5712b-126">In other words, the nested master page for patient-specific content pages would include markup and programmatic logic for displaying information about the patient being edited.</span></span> <span data-ttu-id="5712b-127">新しい患者固有のページを作成する場合は、この入れ子になったマスターページにバインドします。</span><span class="sxs-lookup"><span data-stu-id="5712b-127">When creating a new patient-specific page we would bind it to this nested master page.</span></span>

<span data-ttu-id="5712b-128">このチュートリアルでは、まず、入れ子になったマスターページの利点を強調表示します。</span><span class="sxs-lookup"><span data-stu-id="5712b-128">This tutorial starts by highlighting the benefits of nested master pages.</span></span> <span data-ttu-id="5712b-129">次に、入れ子になったマスターページを作成して使用する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="5712b-129">It then shows how to create and use nested master pages.</span></span>

> [!NOTE]
> <span data-ttu-id="5712b-130">.NET Framework のバージョン2.0 以降、入れ子になったマスターページが使用可能になりました。</span><span class="sxs-lookup"><span data-stu-id="5712b-130">Nested master pages have been possible since version 2.0 of the .NET Framework.</span></span> <span data-ttu-id="5712b-131">ただし、Visual Studio 2005 には、入れ子になったマスターページのデザイン時サポートは含まれていませんでした。</span><span class="sxs-lookup"><span data-stu-id="5712b-131">However, Visual Studio 2005 did not include design-time support for nested master pages.</span></span> <span data-ttu-id="5712b-132">Visual Studio 2008 では、入れ子になったマスターページに対して豊富なデザイン時のエクスペリエンスが提供されていることが朗報です。</span><span class="sxs-lookup"><span data-stu-id="5712b-132">The good news is that Visual Studio 2008 offers a rich design-time experience for nested master pages.</span></span> <span data-ttu-id="5712b-133">入れ子になったマスターページの使用に関心があるが、Visual Studio 2005 をまだ使用している場合は、「 [VS 2005 デザイン時の入れ子になったマスターページのヒント](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx)」[をご覧ください](https://weblogs.asp.net/scottgu/)。</span><span class="sxs-lookup"><span data-stu-id="5712b-133">If you are interested in using nested master pages but are still using Visual Studio 2005, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog entry, [Tips for Nested Master Pages in VS 2005 Design-Time](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span></span>

## <a name="the-benefits-of-nested-master-pages"></a><span data-ttu-id="5712b-134">入れ子になったマスターページの利点</span><span class="sxs-lookup"><span data-stu-id="5712b-134">The Benefits of Nested Master Pages</span></span>

<span data-ttu-id="5712b-135">多くの web サイトには、包括的なサイト設計と、特定の種類のページに固有のカスタマイズされたデザインがあります。</span><span class="sxs-lookup"><span data-stu-id="5712b-135">Many websites have an overarching site design as well as more customized designs specific to certain types of pages.</span></span> <span data-ttu-id="5712b-136">たとえば、このデモ web アプリケーションでは、基本的な管理セクション (`~/Admin` フォルダー内のページ) を作成しました。</span><span class="sxs-lookup"><span data-stu-id="5712b-136">For instance, in our demo web application we have created a rudimentary Administration section (the pages in the `~/Admin` folder).</span></span> <span data-ttu-id="5712b-137">現在、`~/Admin` フォルダー内の web ページでは、[管理] セクションにないページと同じマスターページが使用されます (ユーザーの選択によっては、`Site.master` または `Alternate.master`ます)。</span><span class="sxs-lookup"><span data-stu-id="5712b-137">Currently the web pages in the `~/Admin` folder use the same master page as those pages not in the administration section (namely, `Site.master` or `Alternate.master`, depending on the user's selection).</span></span>

> [!NOTE]
> <span data-ttu-id="5712b-138">ここでは、このサイトには、`Site.master`ているマスターページが1つだけあるとします。</span><span class="sxs-lookup"><span data-stu-id="5712b-138">For now, pretend that our site has just one master page, `Site.master`.</span></span> <span data-ttu-id="5712b-139">このチュートリアルでは、後の「管理者用に入れ子になったマスターページを使用する」で始まる2つ (またはそれ以上) のマスターページを含む入れ子になったマスターページを使用する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="5712b-139">We'll address using nested master pages with two (or more) master pages starting with "Using a Nested Master Page for the Administration Section" later in this tutorial.</span></span>

<span data-ttu-id="5712b-140">管理ページのレイアウトをカスタマイズして、サイト内の他のページにない情報やリンクを追加するように求められたとします。</span><span class="sxs-lookup"><span data-stu-id="5712b-140">Imagine that we were asked to customize the layout of the Administration pages to include additional information or links that would not otherwise be present in other pages in the site.</span></span> <span data-ttu-id="5712b-141">この要件を実装するには、次の4つの方法があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-141">There are four techniques to implement this requirement:</span></span>

1. <span data-ttu-id="5712b-142">管理固有の情報と、`~/Admin` フォルダー内のすべてのコンテンツページへのリンクを手動で追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-142">Manually add the Administration-specific information and links to every content page in the `~/Admin` folder.</span></span>
2. <span data-ttu-id="5712b-143">`Site.master` マスターページを更新して、管理セクション固有の情報とリンクを含めます。次に、管理ページにアクセスしているかどうかに基づいて、これらのセクションを表示または非表示にするコードをマスターページに追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-143">Update the `Site.master` master page to include the Administration section-specific information and links, and then add code to the master page to show or hide these sections based on whether one of the Administration pages is being visited.</span></span>
3. <span data-ttu-id="5712b-144">[管理] セクション専用の新しいマスターページを作成し、`Site.master`からマークアップをコピーします。次に、[管理] セクション固有の情報とリンクを追加し、この新しいマスターページを使用するように `~/Admin` フォルダー内のコンテンツページを更新します。</span><span class="sxs-lookup"><span data-stu-id="5712b-144">Create a new master page specifically for the Administration section, copy over the markup from `Site.master`, add the Administration section-specific information and links, and then update the content pages in the `~/Admin` folder to use this new master page.</span></span>
4. <span data-ttu-id="5712b-145">入れ子になったマスターページを作成し `Site.master` にバインドし、`~/Admin` フォルダー内のコンテンツページでこの新しい入れ子になったマスターページを使用します。</span><span class="sxs-lookup"><span data-stu-id="5712b-145">Create a nested master page that binds to `Site.master` and have the content pages in the `~/Admin` folder use this new nested master page.</span></span> <span data-ttu-id="5712b-146">この入れ子になったマスターページには、管理ページに固有の追加情報とリンクだけが含まれており、`Site.master`で既に定義されているマークアップを繰り返す必要はありません。</span><span class="sxs-lookup"><span data-stu-id="5712b-146">This nested master page would include just the additional information and links specific to the Administration pages and would not need to repeat the markup already defined in `Site.master`.</span></span>

<span data-ttu-id="5712b-147">最初のオプションは、最小つながりです。</span><span class="sxs-lookup"><span data-stu-id="5712b-147">The first option is the least palatable.</span></span> <span data-ttu-id="5712b-148">マスターページを使用すると、共通のマークアップを手動でコピーして新しい ASP.NET ページに貼り付ける必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="5712b-148">The whole point of using master pages is to move away from having to manually copy and paste common markup to new ASP.NET pages.</span></span> <span data-ttu-id="5712b-149">2番目のオプションは許容されますが、アプリケーションの保守が容易になります。ただし、表示されることがときどきないマークアップを使用してマスターページを構成すると、開発者がこのマークアップを回避して、いつでも覚えておく必要があります。正確には、特定のマークアップが表示されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-149">The second option is acceptable, but makes the application less maintainable as it bulks up the master pages with markup that is only occasionally displayed and requires developers editing the master page to work around this markup and to have to remember when, exactly, certain markup is displayed versus when it is hidden.</span></span> <span data-ttu-id="5712b-150">この方法では、この1つのマスターページで対応する必要がある、より多くの種類の web ページからのカスタマイズが可能になります。</span><span class="sxs-lookup"><span data-stu-id="5712b-150">This approach would be less tenable as customizations from more and more types of web pages needed to be accommodated by this single master page.</span></span>

<span data-ttu-id="5712b-151">3番目のオプションは、2番目のオプションで表示される煩雑で複雑な問題を解消します。</span><span class="sxs-lookup"><span data-stu-id="5712b-151">The third option removes the clutter and complexity issues the surfaced with the second option.</span></span> <span data-ttu-id="5712b-152">ただし、オプションの3つの主な欠点は、`Site.master` から新しい管理セクション固有のマスターページに共通レイアウトをコピーして貼り付ける必要があることです。</span><span class="sxs-lookup"><span data-stu-id="5712b-152">However, option three's main drawback is that it requires us to copy and paste the common layout from `Site.master` to the new Administration section-specific master page.</span></span> <span data-ttu-id="5712b-153">後でサイト全体のレイアウトを変更する場合は、2か所で変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-153">If we later decide to change the site-wide layout we have to remember to change it in two places.</span></span>

<span data-ttu-id="5712b-154">4番目のオプションである [入れ子になったマスターページ] を選択すると、2番目と3番目のオプションが最適になります。</span><span class="sxs-lookup"><span data-stu-id="5712b-154">The fourth option, nested master pages, give us the best of the second and third options.</span></span> <span data-ttu-id="5712b-155">サイト全体のレイアウト情報は1つのファイル (最上位のマスターページ) に保持されますが、特定の領域に固有のコンテンツは別のファイルに分割されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-155">The site-wide layout information is maintained in one file - the top-level master page - while the content specific to particular regions is separated out into different files.</span></span>

<span data-ttu-id="5712b-156">このチュートリアルでは、まず、単純な入れ子になったマスターページの作成と使用について説明します。</span><span class="sxs-lookup"><span data-stu-id="5712b-156">This tutorial starts with a look at creating and using a simple nested master page.</span></span> <span data-ttu-id="5712b-157">新しいトップレベルマスターページ、2つの入れ子になったマスターページ、2つのコンテンツページを作成します。</span><span class="sxs-lookup"><span data-stu-id="5712b-157">We create a brand new top-level master page, two nested master pages, and two content pages.</span></span> <span data-ttu-id="5712b-158">「管理のための入れ子になったマスターページの使用」セクションでは、入れ子になったマスターページの使用を含むように、既存のマスターページアーキテクチャを更新することに注目しています。</span><span class="sxs-lookup"><span data-stu-id="5712b-158">Starting with "Using a Nested Master Page for the Administration Section," we look at updating our existing master page architecture to include the use of nested master pages.</span></span> <span data-ttu-id="5712b-159">具体的には、入れ子になったマスターページを作成し、それを使用して、`~/Admin` フォルダー内のコンテンツページの追加のカスタムコンテンツを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="5712b-159">Specifically, we create a nested master page and use it to include additional custom content for the content pages in the `~/Admin` folder.</span></span>

## <a name="step-1-creating-a-simple-top-level-master-page"></a><span data-ttu-id="5712b-160">手順 1: 単純なトップレベルマスターページの作成</span><span class="sxs-lookup"><span data-stu-id="5712b-160">Step 1: Creating a Simple Top-Level Master Page</span></span>

<span data-ttu-id="5712b-161">既存のコンテンツページで既に予想されているため、既存のマスターページのいずれかに基づいて入れ子になったマスターを作成し、既存のコンテンツページを更新して、新しい入れ子になったマスターページを使用する場合は、複雑な作業が必要になります。最上位レベルのマスターページで定義されている ContentPlaceHolder コントロール。</span><span class="sxs-lookup"><span data-stu-id="5712b-161">Creating a nested master based on one of the existing master pages and then updating an existing content page to use this new nested master page instead of the top-level master page entails some complexity because the existing content pages already expect certain ContentPlaceHolder controls defined in the top-level master page.</span></span> <span data-ttu-id="5712b-162">したがって、入れ子になったマスターページには、同じ名前を持つ同じ ContentPlaceHolder コントロールも含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-162">Therefore, the nested master page must also include the same ContentPlaceHolder controls with the same names.</span></span> <span data-ttu-id="5712b-163">さらに、特定のデモアプリケーションには、ユーザーの設定に基づいてコンテンツページに動的に割り当てられる2つのマスターページ (`Site.master` と `Alternate.master`) があり、さらにこの複雑さに追加されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-163">Furthermore, our particular demo application has two master pages (`Site.master` and `Alternate.master`) that are dynamically assigned to a content page based on a user's preferences, which further adds to this complexity.</span></span> <span data-ttu-id="5712b-164">このチュートリアルの後半では、入れ子になったマスターページを使用するように既存のアプリケーションを更新する方法について説明しますが、まず、単純な入れ子になったマスターページの例に注目します。</span><span class="sxs-lookup"><span data-stu-id="5712b-164">We will look at updating the existing application to use nested master pages later in this tutorial, but let's first focus on a simple nested master pages example.</span></span>

<span data-ttu-id="5712b-165">`NestedMasterPages` という名前の新しいフォルダーを作成し、`Simple.master`という名前の新しいマスターページファイルをそのフォルダーに追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-165">Create a new folder named `NestedMasterPages` and then add a new master page file to that folder named `Simple.master`.</span></span> <span data-ttu-id="5712b-166">(このフォルダーとファイルが追加された後のソリューションエクスプローラーのスクリーンショットについては、図1を参照してください。)`AlternateStyles.css` スタイルシートファイルをソリューションエクスプローラーからデザイナーにドラッグします。</span><span class="sxs-lookup"><span data-stu-id="5712b-166">(See Figure 1 for a screen shot of the Solution Explorer after this folder and file have been added.) Drag the `AlternateStyles.css` style sheet file from the Solution Explorer onto the Designer.</span></span> <span data-ttu-id="5712b-167">これにより、`<head>` 要素内のスタイルシートファイルに `<link>` 要素が追加されます。その後、マスターページの `<head>` 要素のマークアップは次のようになります。</span><span class="sxs-lookup"><span data-stu-id="5712b-167">This adds a `<link>` element to the style sheet file in the `<head>` element, after which the master page's `<head>` element's markup should look like:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample1.aspx)]

<span data-ttu-id="5712b-168">次に、`Simple.master`の Web フォーム内に次のマークアップを追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-168">Next, add the following markup within the Web Form of `Simple.master`:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample2.aspx)]

<span data-ttu-id="5712b-169">このマークアップは、ページの上部にある "入れ子になったマスターページ (Simple)" というタイトルのリンクを、海軍の背景にある大きな白いフォントで表示します。</span><span class="sxs-lookup"><span data-stu-id="5712b-169">This markup displays a link titled "Nested Master Pages (Simple)" at the top of the page in a large white font on a navy background.</span></span> <span data-ttu-id="5712b-170">その下に、`MainContent` ContentPlaceHolder があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-170">Beneath that is the `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="5712b-171">図1は、Visual Studio デザイナーで読み込まれたときの `Simple.master` マスターページを示しています。</span><span class="sxs-lookup"><span data-stu-id="5712b-171">Figure 1 shows the `Simple.master` master page when loaded in the Visual Studio Designer.</span></span>

<span data-ttu-id="5712b-172">[入れ子になったマスターページ ![、[管理] セクションのページに固有のコンテンツを定義します。](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-172">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span></span>

<span data-ttu-id="5712b-173">**図 01**: 入れ子になったマスターページは、[管理] セクションのページに固有のコンテンツを定義します ([クリックすると、フルサイズの画像が表示](nested-master-pages-cs/_static/image3.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5712b-173">**Figure 01**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image3.png))</span></span>

## <a name="step-2-creating-a-simple-nested-master-page"></a><span data-ttu-id="5712b-174">手順 2: 単純な入れ子になったマスターページの作成</span><span class="sxs-lookup"><span data-stu-id="5712b-174">Step 2: Creating a Simple Nested Master Page</span></span>

<span data-ttu-id="5712b-175">`Simple.master` には、Web フォーム内に追加した `MainContent` ContentPlaceHolder と `<head>` 要素の `head` ContentPlaceHolder の2つの ContentPlaceHolder コントロールが含まれています。</span><span class="sxs-lookup"><span data-stu-id="5712b-175">`Simple.master` contains two ContentPlaceHolder controls: the `MainContent` ContentPlaceHolder we added within the Web Form along with the `head` ContentPlaceHolder in the `<head>` element.</span></span> <span data-ttu-id="5712b-176">コンテンツページを作成してにバインドする場合、コンテンツページには2つの ContentPlaceHolders を参照する2つのコンテンツコントロールが `Simple.master` ます。</span><span class="sxs-lookup"><span data-stu-id="5712b-176">If we were to create a content page and bind it to `Simple.master` the content page would have two Content controls referencing the two ContentPlaceHolders.</span></span> <span data-ttu-id="5712b-177">同様に、入れ子になったマスターページを作成して `Simple.master` にバインドした場合、入れ子になったマスターページには2つのコンテンツコントロールが含まれます。</span><span class="sxs-lookup"><span data-stu-id="5712b-177">Similarly, if we create a nested master page and bind it to `Simple.master` then the nested master page will have two Content controls.</span></span>

<span data-ttu-id="5712b-178">新しい入れ子になったマスターページを `SimpleNested.master`という名前の `NestedMasterPages` フォルダーに追加してみましょう。</span><span class="sxs-lookup"><span data-stu-id="5712b-178">Let's add a new nested master page to the `NestedMasterPages` folder named `SimpleNested.master`.</span></span> <span data-ttu-id="5712b-179">`NestedMasterPages` フォルダーを右クリックし、[新しい項目の追加] を選択します。</span><span class="sxs-lookup"><span data-stu-id="5712b-179">Right-click on the `NestedMasterPages` folder and choose Add New Item.</span></span> <span data-ttu-id="5712b-180">これにより、図2に示す [新しい項目の追加] ダイアログボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-180">This brings up the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="5712b-181">マスターページテンプレートの種類を選択し、新しいマスターページの名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="5712b-181">Select the Master Page template type and type in the name of the new master page.</span></span> <span data-ttu-id="5712b-182">新しいマスターページが入れ子になったマスターページであることを示すには、[マスターページの選択] チェックボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="5712b-182">To indicate that the new master page should be a nested master page, check the "Select master page" checkbox.</span></span>

<span data-ttu-id="5712b-183">次に、[追加] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="5712b-183">Next, click the Add button.</span></span> <span data-ttu-id="5712b-184">これにより、コンテンツページをマスターページにバインドするときに表示されるのと同じ [マスターページの選択] ダイアログボックスが表示されます (図3を参照)。</span><span class="sxs-lookup"><span data-stu-id="5712b-184">This will display the same Select a Master Page dialog box you see when binding a content page to a master page (see Figure 3).</span></span> <span data-ttu-id="5712b-185">`NestedMasterPages` フォルダーの `Simple.master` マスターページを選択し、[OK] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="5712b-185">Choose the `Simple.master` master page in the `NestedMasterPages` folder and click OK.</span></span>

> [!NOTE]
> <span data-ttu-id="5712b-186">Web サイトプロジェクトモデルではなく、Web アプリケーションプロジェクトモデルを使用して ASP.NET web サイトを作成した場合、図2に示す [新しい項目の追加] ダイアログボックスの [マスターページの選択] チェックボックスは表示されません。</span><span class="sxs-lookup"><span data-stu-id="5712b-186">If you created your ASP.NET website using the Web Application Project model instead of the Web Site Project model you will not see the "Select master page" checkbox in the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="5712b-187">Web アプリケーションプロジェクトモデルを使用しているときに入れ子になったマスターページを作成するには、(マスターページテンプレートではなく) 入れ子になったマスターページテンプレートを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-187">To create a nested master page when using the Web Application Project model you must choose the Nested Master Page template (instead of the Master Page template).</span></span> <span data-ttu-id="5712b-188">入れ子になったマスターページテンプレートを選択して [追加] をクリックすると、図3に示されているのと同じ [マスターページの選択] ダイアログボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-188">After selecting the Nested Master Page template and clicking Add, the same Select a Master Page dialog box shown in Figure 3 will appear.</span></span>

<span data-ttu-id="5712b-189">[&quot;[マスターページの選択]&quot; チェックボックスをオンにして、入れ子になったマスターページを追加 ![ます。](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-189">[![Check the &quot;Select master page&quot; Checkbox to Add a Nested Master Page](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span></span>

<span data-ttu-id="5712b-190">**図 02**: [マスターページの選択] チェックボックスをオンにして、入れ子になったマスターページを追加する ([クリックすると、フルサイズの画像が表示](nested-master-pages-cs/_static/image6.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5712b-190">**Figure 02**: Check the "Select master page" Checkbox to Add a Nested Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image6.png))</span></span>

<span data-ttu-id="5712b-191">[入れ子になったマスターページを単純なマスターページにバインド ![には](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-191">[![Bind the Nested Master Page to the Simple.master Master Page](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span></span>

<span data-ttu-id="5712b-192">**図 03**: 入れ子になったマスターページを `Simple.master` マスターページにバインドする ([クリックすると、フルサイズの画像が表示](nested-master-pages-cs/_static/image9.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5712b-192">**Figure 03**: Bind the Nested Master Page to the `Simple.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image9.png))</span></span>

<span data-ttu-id="5712b-193">次に示す入れ子になったマスターページの宣言型のマークアップには、トップレベルのマスターページの2つの ContentPlaceHolder コントロールを参照する2つのコンテンツコントロールが含まれています。</span><span class="sxs-lookup"><span data-stu-id="5712b-193">The nested master page's declarative markup, shown below, contains two Content controls referencing the top-level master page's two ContentPlaceHolder controls.</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample3.aspx)]

<span data-ttu-id="5712b-194">`<%@ Master %>` ディレクティブを除き、入れ子になったマスターページの初期宣言マークアップは、コンテンツページを同じトップレベルマスターページにバインドするときに最初に生成されるマークアップと同じです。</span><span class="sxs-lookup"><span data-stu-id="5712b-194">Except for the `<%@ Master %>` directive, the nested master page's initial declarative markup is identical to the markup that is initially generated when binding a content page to the same top-level master page.</span></span> <span data-ttu-id="5712b-195">コンテンツページの `<%@ Page %>` ディレクティブと同様に、この `<%@ Master %>` ディレクティブには、入れ子になったマスターページの親マスターページを指定する `MasterPageFile` 属性が含まれています。</span><span class="sxs-lookup"><span data-stu-id="5712b-195">Like a content page's `<%@ Page %>` directive, the `<%@ Master %>` directive here includes a `MasterPageFile` attribute that specifies the nested master page's parent master page.</span></span> <span data-ttu-id="5712b-196">入れ子になったマスターページと同じトップレベルマスターページにバインドされたコンテンツページの主な違いは、入れ子になったマスターページに ContentPlaceHolder コントロールを含めることができることです。</span><span class="sxs-lookup"><span data-stu-id="5712b-196">The main difference between the nested master page and a content page bound to the same top-level master page is that the nested master page can include ContentPlaceHolder controls.</span></span> <span data-ttu-id="5712b-197">入れ子になったマスターページの ContentPlaceHolder コントロールは、コンテンツページがマークアップをカスタマイズできる領域を定義します。</span><span class="sxs-lookup"><span data-stu-id="5712b-197">The nested master page's ContentPlaceHolder controls define the regions where the content pages can customize the markup.</span></span>

<span data-ttu-id="5712b-198">"Hello, from SimpleNested!" というテキストが表示されるように、この入れ子になったマスターページを更新します。</span><span class="sxs-lookup"><span data-stu-id="5712b-198">Update this nested master page so that it displays the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="5712b-199">`MainContent` ContentPlaceHolder コントロールに対応するコンテンツコントロール。</span><span class="sxs-lookup"><span data-stu-id="5712b-199">in the Content control that corresponds to the `MainContent` ContentPlaceHolder control.</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample4.aspx)]

<span data-ttu-id="5712b-200">この追加を行った後、入れ子になったマスターページを保存し、`Default.aspx`という名前の `NestedMasterPages` フォルダーに新しいコンテンツページを追加して、`SimpleNested.master` マスターページにバインドします。</span><span class="sxs-lookup"><span data-stu-id="5712b-200">After making this addition, save the nested master page and then add a new content page to the `NestedMasterPages` folder named `Default.aspx`, and bind it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="5712b-201">このページを追加すると、コンテンツコントロールが含まれていないことがわかります (図4を参照)。</span><span class="sxs-lookup"><span data-stu-id="5712b-201">Upon adding this page you may be surprised to see that it contains no Content controls (see Figure 4)!</span></span> <span data-ttu-id="5712b-202">コンテンツページは、その*親*マスターページの contentplaceholders にのみアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="5712b-202">A content page can only access its *parent* master page's ContentPlaceHolders.</span></span> <span data-ttu-id="5712b-203">`SimpleNested.master` に ContentPlaceHolder コントロールが含まれていません。そのため、このマスターページにバインドされているコンテンツページにコンテンツコントロールを含めることはできません。</span><span class="sxs-lookup"><span data-stu-id="5712b-203">`SimpleNested.master` does not contain any ContentPlaceHolder controls; therefore, any content page bound to this master page cannot contain any Content controls.</span></span>

<span data-ttu-id="5712b-204">[[新しいコンテンツ] ページにコンテンツコントロールが含まれていない ![](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-204">[![The New Content Page Contains No Content Controls](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span></span>

<span data-ttu-id="5712b-205">**図 04**: [新しいコンテンツ] ページにコンテンツコントロールが含まれていない ([クリックしてフルサイズのイメージを表示する](nested-master-pages-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="5712b-205">**Figure 04**: The New Content Page Contains No Content Controls ([Click to view full-size image](nested-master-pages-cs/_static/image12.png))</span></span>

<span data-ttu-id="5712b-206">ContentPlaceHolder コントロールを含めるには、入れ子になったマスターページ (`SimpleNested.master`) を更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-206">What we need to do is update the nested master page (`SimpleNested.master`) to include ContentPlaceHolder controls.</span></span> <span data-ttu-id="5712b-207">通常、入れ子になったマスターページには、親マスターページで定義されている各 ContentPlaceHolder の ContentPlaceHolder を含める必要があります。これにより、その子マスターページまたはコンテンツページは、トップレベルマスターページの ContentPlaceHolder を操作できます。制限.</span><span class="sxs-lookup"><span data-stu-id="5712b-207">Typically you'll want your nested master pages to include a ContentPlaceHolder for each ContentPlaceHolder defined by its parent master page, thereby allowing its child master page or content page to work with any of the top-level master page's ContentPlaceHolder controls.</span></span>

<span data-ttu-id="5712b-208">`SimpleNested.master` マスターページを更新して、2つのコンテンツコントロールに ContentPlaceHolder を含めます。</span><span class="sxs-lookup"><span data-stu-id="5712b-208">Update the `SimpleNested.master` master page to include a ContentPlaceHolder in its two Content controls.</span></span> <span data-ttu-id="5712b-209">ContentPlaceHolder コントロールに、コンテンツコントロールが参照する ContentPlaceHolder コントロールと同じ名前を付けます。</span><span class="sxs-lookup"><span data-stu-id="5712b-209">Give the ContentPlaceHolder controls the same name as the ContentPlaceHolder control their Content control refers to.</span></span> <span data-ttu-id="5712b-210">つまり、`Simple.master`で `MainContent` ContentPlaceHolder を参照する `SimpleNested.master` のコンテンツコントロールに `MainContent` という名前の ContentPlaceHolder コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-210">That is, add a ContentPlaceHolder control named `MainContent` to the Content control in `SimpleNested.master` that references the `MainContent` ContentPlaceHolder in `Simple.master`.</span></span> <span data-ttu-id="5712b-211">`head` ContentPlaceHolder を参照するコンテンツコントロールでも同じことを行います。</span><span class="sxs-lookup"><span data-stu-id="5712b-211">Do the same thing in the Content control that references the `head` ContentPlaceHolder.</span></span>

> [!NOTE]
> <span data-ttu-id="5712b-212">入れ子になったマスターページの ContentPlaceHolder コントロールには、トップレベルマスターページの ContentPlaceHolders と同じ名前を付けることをお勧めしますが、この名前付けの対称は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="5712b-212">While I recommend naming the ContentPlaceHolder controls in the nested master page the same as the ContentPlaceHolders in the top-level master page, this naming symmetry is not required.</span></span> <span data-ttu-id="5712b-213">入れ子になったマスターページの ContentPlaceHolder コントロールには、好きな名前を付けることができます。</span><span class="sxs-lookup"><span data-stu-id="5712b-213">You can give the ContentPlaceHolder controls in your nested master page any name you like.</span></span> <span data-ttu-id="5712b-214">ただし、最上位のマスターページと入れ子になったマスターページが同じ名前を使用している場合は、どのような ContentPlaceHolders がページのどの領域に対応しているかがわかりやすくなります。</span><span class="sxs-lookup"><span data-stu-id="5712b-214">However, I find it easier to remember what ContentPlaceHolders correspond with what regions of the page if my top-level master page and nested master pages use the same names.</span></span>

<span data-ttu-id="5712b-215">これらの追加を行った後、`SimpleNested.master` マスターページの宣言型マークアップは次のようになります。</span><span class="sxs-lookup"><span data-stu-id="5712b-215">After making these additions your `SimpleNested.master` master page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="5712b-216">先ほど作成した `Default.aspx` コンテンツページを削除してから再度追加し、`SimpleNested.master` マスターページにバインドします。</span><span class="sxs-lookup"><span data-stu-id="5712b-216">Delete the `Default.aspx` content page we just created and then re-add it, binding it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="5712b-217">今回は、Visual Studio が2つのコンテンツコントロールを `Default.aspx`に追加し、`SimpleNested.master` で定義された ContentPlaceHolders を参照します (図6を参照)。</span><span class="sxs-lookup"><span data-stu-id="5712b-217">This time Visual Studio adds two Content controls to the `Default.aspx`, referencing the ContentPlaceHolders now defined in `SimpleNested.master` (see Figure 6).</span></span> <span data-ttu-id="5712b-218">"Hello, from default.aspx!" というテキストを追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-218">Add the text, "Hello, from Default.aspx!"</span></span> <span data-ttu-id="5712b-219">`MainContent`を参照したコンテンツコントロール。</span><span class="sxs-lookup"><span data-stu-id="5712b-219">in the Content control that referenced `MainContent`.</span></span>

<span data-ttu-id="5712b-220">図5に、`Simple.master`、`SimpleNested.master`、および `Default.aspx` に関連する3つのエンティティと、それらのエンティティが相互にどのように関連しているかを示します。</span><span class="sxs-lookup"><span data-stu-id="5712b-220">Figure 5 shows the three entities involved here - `Simple.master`, `SimpleNested.master`, and `Default.aspx` - and how they relate to one another.</span></span> <span data-ttu-id="5712b-221">図に示すように、入れ子になったマスターページは、その親の ContentPlaceHolder のコンテンツコントロールを実装します。</span><span class="sxs-lookup"><span data-stu-id="5712b-221">As the diagram shows, the nested master page implements Content controls for its parent's ContentPlaceHolder.</span></span> <span data-ttu-id="5712b-222">これらの領域がコンテンツページにアクセスできる必要がある場合は、入れ子になったマスターページがコンテンツコントロールに独自の ContentPlaceHolders を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-222">If these regions need to be accessible to the content page, the nested master page must add its own ContentPlaceHolders to the Content controls.</span></span>

<span data-ttu-id="5712b-223">[最上位レベルと入れ子になったマスターページを ![して、コンテンツページのレイアウトを決定します。](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-223">[![The Top-Level and Nested Master Pages Dictate the Content Page's Layout](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span></span>

<span data-ttu-id="5712b-224">**図 05**: 最上位レベルと入れ子になったマスターページは、コンテンツページのレイアウトを指示します ([クリックすると、フルサイズの画像が表示](nested-master-pages-cs/_static/image15.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5712b-224">**Figure 05**: The Top-Level and Nested Master Pages Dictate the Content Page's Layout ([Click to view full-size image](nested-master-pages-cs/_static/image15.png))</span></span>

<span data-ttu-id="5712b-225">この動作は、コンテンツページまたはマスターページがその親マスターページの cognizant のみであることを示しています。</span><span class="sxs-lookup"><span data-stu-id="5712b-225">This behavior illustrates how a content page or master page is only cognizant of its parent master page.</span></span> <span data-ttu-id="5712b-226">この動作は、Visual Studio デザイナーでも示されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-226">This behavior is also indicated by the Visual Studio Designer.</span></span> <span data-ttu-id="5712b-227">図6は、`Default.aspx`のデザイナーを示しています。</span><span class="sxs-lookup"><span data-stu-id="5712b-227">Figure 6 shows the Designer for `Default.aspx`.</span></span> <span data-ttu-id="5712b-228">デザイナーでは、コンテンツページから編集可能な領域とその部分が明確に示されていますが、入れ子になったマスターページからの編集できない領域と最上位のマスターページの領域は明確に区別されません。</span><span class="sxs-lookup"><span data-stu-id="5712b-228">While the Designer clearly shows what regions are editable from the content page and what portions aren't, it doesn't disambiguate what non-editable regions are from the nested master page and what regions are from the top-level master page.</span></span>

<span data-ttu-id="5712b-229">[コンテンツページに、入れ子になったマスターページの ContentPlaceHolders のコンテンツコントロールが含まれるようになりました ![](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-229">[![The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span></span>

<span data-ttu-id="5712b-230">**図 06**: コンテンツページに、入れ子になったマスターページの Contentplaceholders のコンテンツコントロールが含まれるようになりました ([クリックしてフルサイズのイメージを表示](nested-master-pages-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="5712b-230">**Figure 06**: The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders ([Click to view full-size image](nested-master-pages-cs/_static/image18.png))</span></span>

## <a name="step-3-adding-a-second-simple-nested-master-page"></a><span data-ttu-id="5712b-231">手順 3: 2 番目の単純な入れ子になったマスターページの追加</span><span class="sxs-lookup"><span data-stu-id="5712b-231">Step 3: Adding a Second Simple Nested Master Page</span></span>

<span data-ttu-id="5712b-232">入れ子になったマスターページの利点は、入れ子になったマスターページが複数存在する場合によりわかりやすくなります。</span><span class="sxs-lookup"><span data-stu-id="5712b-232">The benefit of nested master pages is more evident when there are multiple nested master pages.</span></span> <span data-ttu-id="5712b-233">この利点を説明するために、`NestedMasterPages` フォルダーに別の入れ子になったマスターページを作成します。この新しい入れ子になったマスターページの名前を `SimpleNestedAlternate.master` し、`Simple.master` マスターページにバインドします。</span><span class="sxs-lookup"><span data-stu-id="5712b-233">To illustrate this benefit, create another nested master page in the `NestedMasterPages` folder; name this new nested master page `SimpleNestedAlternate.master` and bind it to the `Simple.master` master page.</span></span> <span data-ttu-id="5712b-234">手順 2. で行ったように、入れ子になったマスターページの2つのコンテンツコントロールに ContentPlaceHolder コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-234">Add ContentPlaceHolder controls in the nested master page's two Content controls like we did in Step 2.</span></span> <span data-ttu-id="5712b-235">また、"Hello, from SimpleNestedAlternate!" というテキストも追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-235">Also add the text, "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="5712b-236">最上位レベルのマスターページの `MainContent` ContentPlaceHolder に対応するコンテンツコントロール。</span><span class="sxs-lookup"><span data-stu-id="5712b-236">in the Content control that corresponds to the top-level master page's `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="5712b-237">これらの変更を行った後、新しい入れ子になったマスターページの宣言型マークアップは次のようになります。</span><span class="sxs-lookup"><span data-stu-id="5712b-237">After making these changes your new nested master page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample6.aspx)]

<span data-ttu-id="5712b-238">`NestedMasterPages` フォルダーに `Alternate.aspx` という名前のコンテンツページを作成し、`SimpleNestedAlternate.master` の入れ子になったマスターページにバインドします。</span><span class="sxs-lookup"><span data-stu-id="5712b-238">Create a content page named `Alternate.aspx` in the `NestedMasterPages` folder and bind it to the `SimpleNestedAlternate.master` nested master page.</span></span> <span data-ttu-id="5712b-239">"Hello, from 代替!" というテキストを追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-239">Add the text, "Hello, from Alternate!"</span></span> <span data-ttu-id="5712b-240">`MainContent`に対応するコンテンツコントロール。</span><span class="sxs-lookup"><span data-stu-id="5712b-240">in the Content control that corresponds to `MainContent`.</span></span> <span data-ttu-id="5712b-241">図7は、Visual Studio デザイナーを使用して表示する場合の `Alternate.aspx` を示しています。</span><span class="sxs-lookup"><span data-stu-id="5712b-241">Figure 7 shows `Alternate.aspx` when viewed through the Visual Studio Designer.</span></span>

<span data-ttu-id="5712b-242">[![default.aspx は、SimpleNestedAlternate マスターページにバインドされます。](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-242">[![Alternate.aspx is Bound to the SimpleNestedAlternate.master Master Page](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span></span>

<span data-ttu-id="5712b-243">**図 07**: `Alternate.aspx` が `SimpleNestedAlternate.master` マスターページにバインドされている ([クリックしてフルサイズの画像を表示する](nested-master-pages-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="5712b-243">**Figure 07**: `Alternate.aspx` is Bound to the `SimpleNestedAlternate.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image21.png))</span></span>

<span data-ttu-id="5712b-244">図7のデザイナーを図6のデザイナーと比較します。</span><span class="sxs-lookup"><span data-stu-id="5712b-244">Compare the Designer in Figure 7 to the Designer in Figure 6.</span></span> <span data-ttu-id="5712b-245">どちらのコンテンツページも、最上位のマスターページ (`Simple.master`) で定義されているのと同じレイアウトを共有します。つまり、"入れ子になったマスターページチュートリアル (Simple)" タイトルを共有します。</span><span class="sxs-lookup"><span data-stu-id="5712b-245">Both content pages share the same layout defined in the top-level master page (`Simple.master`), namely the "Nested Master Pages Tutorial (Simple)" title.</span></span> <span data-ttu-id="5712b-246">2つの親マスターページに個別のコンテンツが定義されています。テキスト "Hello, from SimpleNested!"</span><span class="sxs-lookup"><span data-stu-id="5712b-246">Yet both have distinct content defined in their parent master pages - the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="5712b-247">図6と "Hello, from SimpleNestedAlternate!"</span><span class="sxs-lookup"><span data-stu-id="5712b-247">in Figure 6 and "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="5712b-248">図7の。</span><span class="sxs-lookup"><span data-stu-id="5712b-248">in Figure 7.</span></span> <span data-ttu-id="5712b-249">これらの違いは自明ですが、この例を拡張して、より意味のある相違点を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="5712b-249">Granted, these differences here are trivial, but you could extend this example to include more meaningful differences.</span></span> <span data-ttu-id="5712b-250">たとえば、[`SimpleNested.master`] ページには、コンテンツページに固有のオプションを含むメニューが含まれている場合があります。一方、`SimpleNestedAlternate.master` には、バインドされたコンテンツページに関連する情報が含まれている場合があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-250">For instance, the `SimpleNested.master` page might include a menu with options specific to its content pages, whereas `SimpleNestedAlternate.master` might have information pertinent to the content pages that bind to it.</span></span>

<span data-ttu-id="5712b-251">ここで、包括的なサイトレイアウトを変更する必要があるとします。</span><span class="sxs-lookup"><span data-stu-id="5712b-251">Now, imagine that we needed to make a change to the overarching site layout.</span></span> <span data-ttu-id="5712b-252">たとえば、すべてのコンテンツページに共通リンクのリストを追加するとします。</span><span class="sxs-lookup"><span data-stu-id="5712b-252">For example, imagine that we wanted to add a list of common links to all content pages.</span></span> <span data-ttu-id="5712b-253">これを実現するには、最上位レベルのマスターページを更新し、`Simple.master`します。</span><span class="sxs-lookup"><span data-stu-id="5712b-253">To accomplish this we update the top-level master page, `Simple.master`.</span></span> <span data-ttu-id="5712b-254">そこに加えられた変更は、入れ子になったマスターページおよび拡張機能によってコンテンツページに直ちに反映されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-254">Any changes there are immediately reflected in its nested master pages and, by extension, their content pages.</span></span>

<span data-ttu-id="5712b-255">最上層のサイトレイアウトを簡単に変更できるようにするには、`Simple.master` マスターページを開き、`topContent` と `mainContent` `<div>` 要素の間に次のマークアップを追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-255">To demonstrate the ease with which we can change the overarching site layout, open the `Simple.master` master page and add the following markup between the `topContent` and `mainContent` `<div>` elements:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample7.aspx)]

<span data-ttu-id="5712b-256">これにより、`Simple.master`、`SimpleNested.master`、または `SimpleNestedAlternate.master`にバインドされるすべてのページの上部に2つのリンクが追加されます。これらの変更は、すべての入れ子になったマスターページとそのコンテンツページに直ちに適用されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-256">This adds two links to the top of every page that binds to `Simple.master`, `SimpleNested.master`, or `SimpleNestedAlternate.master`; these changes apply to all nested master pages and their content pages immediately.</span></span> <span data-ttu-id="5712b-257">図8は、ブラウザーを使用して表示する場合の `Alternate.aspx` を示しています。</span><span class="sxs-lookup"><span data-stu-id="5712b-257">Figure 8 shows `Alternate.aspx` when viewed through a browser.</span></span> <span data-ttu-id="5712b-258">図7と比較して、ページの上部にリンクが追加されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="5712b-258">Note the addition of the links at the top of the page (compared to Figure 7).</span></span>

<span data-ttu-id="5712b-259">[トップレベルマスターページに変更された ![は、入れ子になったマスターページとそのコンテンツページに直ちに反映されます。](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-259">[![Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span></span>

<span data-ttu-id="5712b-260">**図 08**: トップレベルマスターページへの変更は、入れ子になったマスターページとそのコンテンツページに直ちに反映されます ([クリックすると、フルサイズの画像が表示](nested-master-pages-cs/_static/image24.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5712b-260">**Figure 08**: Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages ([Click to view full-size image](nested-master-pages-cs/_static/image24.png))</span></span>

## <a name="using-a-nested-master-page-for-the-administration-section"></a><span data-ttu-id="5712b-261">[管理] セクションに入れ子になったマスターページを使用する</span><span class="sxs-lookup"><span data-stu-id="5712b-261">Using a Nested Master Page for the Administration Section</span></span>

<span data-ttu-id="5712b-262">この時点で、入れ子になったマスターページの利点を確認し、ASP.NET アプリケーションでそれらを作成して使用する方法を見てきました。</span><span class="sxs-lookup"><span data-stu-id="5712b-262">At this point we have looked at the advantages of nested master pages and have seen how to create and use them in an ASP.NET application.</span></span> <span data-ttu-id="5712b-263">ただし、手順1、2、および3の例では、新しいトップレベルマスターページ、新しい入れ子になったマスターページ、新しいコンテンツページを作成します。</span><span class="sxs-lookup"><span data-stu-id="5712b-263">The examples in Steps 1, 2, and 3, however, involved creating a new top-level master page, new nested master pages, and new content pages.</span></span> <span data-ttu-id="5712b-264">新しい入れ子になったマスターページを、既存のトップレベルマスターページとコンテンツページを含む web サイトに追加するにはどうすればよいですか。</span><span class="sxs-lookup"><span data-stu-id="5712b-264">What about adding a new nested master page to a website with an existing top-level master page and content pages?</span></span>

<span data-ttu-id="5712b-265">入れ子になったマスターページを既存の web サイトに統合し、既存のコンテンツページと関連付けるには、最初から開始するよりも少し手間がかかります。</span><span class="sxs-lookup"><span data-stu-id="5712b-265">Integrating a nested master page into an existing website and associating it with existing content pages requires a bit more effort than starting from scratch.</span></span> <span data-ttu-id="5712b-266">手順4、5、6、および7では、デモアプリケーションを拡張して、管理者向けの手順を含む `AdminNested.master` という名前の新しい入れ子になったマスターページを追加し、`~/Admin` フォルダー内の ASP.NET ページで使用されるようにします。</span><span class="sxs-lookup"><span data-stu-id="5712b-266">Steps 4, 5, 6, and 7 explore these challenges as we augment our demo application to include a new nested master page named `AdminNested.master` that contains instructions for the administrator and is used by the ASP.NET pages in the `~/Admin` folder.</span></span>

<span data-ttu-id="5712b-267">入れ子になったマスターページをデモアプリケーションに統合すると、次のような課題が生じます。</span><span class="sxs-lookup"><span data-stu-id="5712b-267">Integrating a nested master page into our demo application introduces the following hurdles:</span></span>

- <span data-ttu-id="5712b-268">`~/Admin` フォルダー内の既存のコンテンツページには、マスターページからの特定の期待があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-268">The existing content pages in the `~/Admin` folder have certain expectations from their master page.</span></span> <span data-ttu-id="5712b-269">まず、特定の ContentPlaceHolder コントロールが存在することを想定しています。</span><span class="sxs-lookup"><span data-stu-id="5712b-269">For starters, they expect certain ContentPlaceHolder controls to be present.</span></span> <span data-ttu-id="5712b-270">さらに、`~/Admin/AddProduct.aspx` ページと `~/Admin/Products.aspx` ページは、マスターページのパブリック `RefreshRecentProductsGrid` メソッドを呼び出したり、その `GridMessageText` プロパティを設定したり、`PricesDoubled` イベントのイベントハンドラーを使用したりします。</span><span class="sxs-lookup"><span data-stu-id="5712b-270">Furthermore, the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages call the master page's public `RefreshRecentProductsGrid` method, set its `GridMessageText` property, or have an event handler for its `PricesDoubled` event.</span></span> <span data-ttu-id="5712b-271">そのため、入れ子になったマスターページは、同じ ContentPlaceHolders とパブリックメンバーを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-271">Consequently, our nested master page must provide the same ContentPlaceHolders and public members.</span></span>
- <span data-ttu-id="5712b-272">前のチュートリアルでは、`BasePage` クラスを拡張して、セッション変数に基づいて `Page` オブジェクトの `MasterPageFile` プロパティを動的に設定しました。</span><span class="sxs-lookup"><span data-stu-id="5712b-272">In the preceding tutorial we enhanced the `BasePage` class to dynamically set the `Page` object's `MasterPageFile` property based on a Session variable.</span></span> <span data-ttu-id="5712b-273">入れ子になったマスターページを使用する場合、動的マスターページをサポートするにはどうすればよいですか。</span><span class="sxs-lookup"><span data-stu-id="5712b-273">How to we support dynamic master pages when using nested master pages?</span></span>

<span data-ttu-id="5712b-274">これらの2つの課題は、入れ子になったマスターページを構築し、既存のコンテンツページから使用すると表示されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-274">These two challenges will surface as we build the nested master page and use it from our existing content pages.</span></span> <span data-ttu-id="5712b-275">これらの問題は、発生したときに調査して、マウントします。</span><span class="sxs-lookup"><span data-stu-id="5712b-275">We'll investigate and surmount these issues as they arise.</span></span>

## <a name="step-4-creating-the-nested-master-page"></a><span data-ttu-id="5712b-276">手順 4: 入れ子になったマスターページの作成</span><span class="sxs-lookup"><span data-stu-id="5712b-276">Step 4: Creating the Nested Master Page</span></span>

<span data-ttu-id="5712b-277">最初のタスクは、[管理] セクションのページで使用する、入れ子になったマスターページを作成することです。</span><span class="sxs-lookup"><span data-stu-id="5712b-277">Our first task is to create the nested master page to be used by the pages in the Administration section.</span></span> <span data-ttu-id="5712b-278">手順 2. で見たように、入れ子になった新しいマスターページを追加するときは、入れ子になったマスターページの親マスターページを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-278">As we saw in Step 2, when adding a new nested master page we need to specify the nested master page's parent master page.</span></span> <span data-ttu-id="5712b-279">しかし、`Site.master` と `Alternate.master`というトップレベルのマスターページが2つあります。</span><span class="sxs-lookup"><span data-stu-id="5712b-279">But we have two top-level master pages: `Site.master` and `Alternate.master`.</span></span> <span data-ttu-id="5712b-280">前のチュートリアルで `Alternate.master` を作成し、`Alternate.master` Session 変数の値に応じて、実行時に Page オブジェクトの `MasterPageFile` プロパティを `Site.master` または `MyMasterPage` に設定するコードを `BasePage` クラスに記述したことを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="5712b-280">Recall that we created `Alternate.master` in the preceding tutorial and wrote code in the `BasePage` class that set the Page object's `MasterPageFile` property at runtime to either `Site.master` or `Alternate.master` depending on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="5712b-281">適切なトップレベルマスターページを使用するように、入れ子になったマスターページを構成するにはどうすればよいですか。</span><span class="sxs-lookup"><span data-stu-id="5712b-281">How do we configure our nested master page so that it uses the appropriate top-level master page?</span></span> <span data-ttu-id="5712b-282">2つのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="5712b-282">We have two options:</span></span>

- <span data-ttu-id="5712b-283">2つの入れ子になったマスターページ `AdminNestedSite.master` と `AdminNestedAlternate.master`を作成し、それぞれをトップレベルのマスターページ `Site.master` および `Alternate.master`にバインドします。</span><span class="sxs-lookup"><span data-stu-id="5712b-283">Create two nested master pages, `AdminNestedSite.master` and `AdminNestedAlternate.master`, and bind them to the top-level master pages `Site.master` and `Alternate.master`, respectively.</span></span> <span data-ttu-id="5712b-284">`BasePage`では、`Page` オブジェクトの `MasterPageFile` を適切な入れ子になったマスターページに設定します。</span><span class="sxs-lookup"><span data-stu-id="5712b-284">In `BasePage`, then, we'd set the `Page` object's `MasterPageFile` to the appropriate nested master page.</span></span>
- <span data-ttu-id="5712b-285">1つの入れ子になったマスターページを作成し、コンテンツページがこの特定のマスターページを使用するようにします。</span><span class="sxs-lookup"><span data-stu-id="5712b-285">Create a single nested master page and have the content pages use this particular master page.</span></span> <span data-ttu-id="5712b-286">次に、実行時に、入れ子になったマスターページの `MasterPageFile` プロパティを、実行時に適切な最上位レベルのマスターページに設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-286">Then, at runtime, we'd need to set the nested master page's `MasterPageFile` property to the appropriate top-level master page at runtime.</span></span> <span data-ttu-id="5712b-287">(現時点では、マスターページには `MasterPageFile` のプロパティもあります)。</span><span class="sxs-lookup"><span data-stu-id="5712b-287">(As you might have figured out by now, master pages also have a `MasterPageFile` property.)</span></span>

<span data-ttu-id="5712b-288">2番目のオプションを使用してみましょう。</span><span class="sxs-lookup"><span data-stu-id="5712b-288">Let's use the second option.</span></span> <span data-ttu-id="5712b-289">`AdminNested.master`という名前の `~/Admin` フォルダーに、1つの入れ子になったマスターページファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="5712b-289">Create a single nested master page file in the `~/Admin` folder named `AdminNested.master`.</span></span> <span data-ttu-id="5712b-290">`Site.master` と `Alternate.master` の両方に同じ ContentPlaceHolder コントロールのセットがあるため、バインド先のマスターページは関係ありませんが、整合性のために `Site.master` にバインドすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="5712b-290">Because both `Site.master` and `Alternate.master` have the same set of ContentPlaceHolder controls, it doesn't matter what master page you bind it to, although I encourage you to bind it to `Site.master` for consistency's sake.</span></span>

<span data-ttu-id="5712b-291">[入れ子になったマスターページを ~/Admin フォルダーに追加 ![ます。](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-291">[![Add a Nested Master Page to the ~/Admin Folder.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span></span>

<span data-ttu-id="5712b-292">**図 09**: 入れ子になったマスターページを `~/Admin` フォルダーに追加する</span><span class="sxs-lookup"><span data-stu-id="5712b-292">**Figure 09**: Add a Nested Master Page to the `~/Admin` Folder.</span></span> <span data-ttu-id="5712b-293">([クリックすると、フルサイズの画像が表示](nested-master-pages-cs/_static/image27.png)される)</span><span class="sxs-lookup"><span data-stu-id="5712b-293">([Click to view full-size image](nested-master-pages-cs/_static/image27.png))</span></span>

<span data-ttu-id="5712b-294">入れ子になったマスターページは、4つの ContentPlaceHolder コントロールを持つマスターページにバインドされているため、Visual Studio は、新しい入れ子になったマスターページファイルの初期マークアップに4つのコンテンツコントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-294">Because the nested master page is bound to a master page with four ContentPlaceHolder controls, Visual Studio adds four Content controls to the new nested master page file's initial markup.</span></span> <span data-ttu-id="5712b-295">手順 2. と 3. で行ったように、各コンテンツコントロールに ContentPlaceHolder コントロールを追加し、最上位レベルのマスターページの ContentPlaceHolder コントロールと同じ名前を付けます。</span><span class="sxs-lookup"><span data-stu-id="5712b-295">Like we did in Steps 2 and 3, add a ContentPlaceHolder control in each Content control, giving it the same name as the top-level master page's ContentPlaceHolder control.</span></span> <span data-ttu-id="5712b-296">また、`MainContent` ContentPlaceHolder に対応する次のマークアップをコンテンツコントロールに追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-296">Also add the following markup to the Content control that corresponds to the `MainContent` ContentPlaceHolder:</span></span>

[!code-html[Main](nested-master-pages-cs/samples/sample8.html)]

<span data-ttu-id="5712b-297">次に、`Styles.css` CSS ファイルと `AlternateStyles.css` CSS ファイルで `instructions` CSS クラスを定義します。</span><span class="sxs-lookup"><span data-stu-id="5712b-297">Next, define the `instructions` CSS class in the `Styles.css` and `AlternateStyles.css` CSS files.</span></span> <span data-ttu-id="5712b-298">次の CSS ルールでは、`instructions` クラスを使用してスタイル設定された HTML 要素が、明るい黄色の背景色と黒の実線の境界線で表示されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-298">The following CSS rules cause HTML elements styled with the `instructions` class to be displayed with a light yellow background color and a black, solid border:</span></span>

[!code-css[Main](nested-master-pages-cs/samples/sample9.css)]

<span data-ttu-id="5712b-299">このマークアップは、入れ子になったマスターページに追加されているため、この入れ子になったマスターページ (つまり、[管理] セクションのページ) を使用するページにのみ表示されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-299">Because this markup has been added to the nested master page, it will only appear in those pages that use this nested master page (namely, the pages in the Administration section).</span></span>

<span data-ttu-id="5712b-300">入れ子になったマスターページにこれらの追加を行うと、宣言型のマークアップは次のようになります。</span><span class="sxs-lookup"><span data-stu-id="5712b-300">After making these additions to your nested master page, its declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample10.aspx)]

<span data-ttu-id="5712b-301">各コンテンツコントロールには ContentPlaceHolder コントロールがあり、ContentPlaceHolder コントロールの `ID` プロパティには、トップレベルマスターページの対応する ContentPlaceHolder コントロールと同じ値が割り当てられていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="5712b-301">Note that each Content control has a ContentPlaceHolder control and that the ContentPlaceHolder controls' `ID` properties are assigned the same values as the corresponding ContentPlaceHolder controls in the top-level master page.</span></span> <span data-ttu-id="5712b-302">さらに、管理セクション固有のマークアップが `MainContent` ContentPlaceHolder に表示されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-302">Moreover, the Administration section-specific markup appears in the `MainContent` ContentPlaceHolder.</span></span>

<span data-ttu-id="5712b-303">図10は、Visual Studio のデザイナーを使用して表示するときに `AdminNested.master` の入れ子になったマスターページを示しています。</span><span class="sxs-lookup"><span data-stu-id="5712b-303">Figure 10 shows the `AdminNested.master` nested master page when viewed through Visual Studio's Designer.</span></span> <span data-ttu-id="5712b-304">手順については、`MainContent` コンテンツコントロールの上部にある黄色のボックスを参照してください。</span><span class="sxs-lookup"><span data-stu-id="5712b-304">You can see the instructions in the yellow box at the top of the `MainContent` Content control.</span></span>

<span data-ttu-id="5712b-305">[入れ子になったマスターページ ![、トップレベルマスターページを拡張して、管理者に指示を含めます。](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-305">[![The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span></span>

<span data-ttu-id="5712b-306">**図 10**: 入れ子になったマスターページは、トップレベルマスターページを拡張して、管理者に指示を含めます。</span><span class="sxs-lookup"><span data-stu-id="5712b-306">**Figure 10**: The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.</span></span> <span data-ttu-id="5712b-307">([クリックすると、フルサイズの画像が表示](nested-master-pages-cs/_static/image30.png)される)</span><span class="sxs-lookup"><span data-stu-id="5712b-307">([Click to view full-size image](nested-master-pages-cs/_static/image30.png))</span></span>

## <a name="step-5-updating-the-existing-content-pages-to-use-the-new-nested-master-page"></a><span data-ttu-id="5712b-308">手順 5: 新しい入れ子になったマスターページを使用するように既存のコンテンツページを更新する</span><span class="sxs-lookup"><span data-stu-id="5712b-308">Step 5: Updating the Existing Content Pages to Use the New Nested Master Page</span></span>

<span data-ttu-id="5712b-309">[管理] セクションに新しいコンテンツページを追加するたびに、先ほど作成した `AdminNested.master` マスターページにバインドする必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-309">Anytime we add a new content page to the Administration section we need to bind it to the `AdminNested.master` master page we just created.</span></span> <span data-ttu-id="5712b-310">では、既存のコンテンツページについてはどうでしょうか。</span><span class="sxs-lookup"><span data-stu-id="5712b-310">But what about the existing content pages?</span></span> <span data-ttu-id="5712b-311">現時点では、サイト内のすべてのコンテンツページは `BasePage` クラスから派生します。このクラスは、実行時にコンテンツページのマスターページをプログラムによって設定します。</span><span class="sxs-lookup"><span data-stu-id="5712b-311">Currently, all content pages in the site derive from the `BasePage` class, which programmatically sets the content page's master page at runtime.</span></span> <span data-ttu-id="5712b-312">これは、[管理] セクションのコンテンツページに必要な動作ではありません。</span><span class="sxs-lookup"><span data-stu-id="5712b-312">This is not the behavior we want for the content pages in the Administration section.</span></span> <span data-ttu-id="5712b-313">代わりに、これらのコンテンツページで常に `AdminNested.master` ページを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-313">Instead, we want these content pages to always use the `AdminNested.master` page.</span></span> <span data-ttu-id="5712b-314">入れ子になったマスターページは、実行時に適切な最上位レベルのコンテンツページを選択する役割を担います。</span><span class="sxs-lookup"><span data-stu-id="5712b-314">It will be the responsibility of the nested master page to choose the right top-level content page at runtime.</span></span>

<span data-ttu-id="5712b-315">この目的の動作を実現する最善の方法は、`BasePage` クラスを拡張する `AdminBasePage` という名前の新しいカスタム基本ページクラスを作成することです。</span><span class="sxs-lookup"><span data-stu-id="5712b-315">To best way to achieve this desired behavior is to create a new custom base page class named `AdminBasePage` that extends the `BasePage` class.</span></span> <span data-ttu-id="5712b-316">その後、`SetMasterPageFile` をオーバーライドし、`Page` オブジェクトの `MasterPageFile` をハードコーディングされた値 "~/Admin/adminnested`AdminBasePage` に設定できます。</span><span class="sxs-lookup"><span data-stu-id="5712b-316">`AdminBasePage` can then override the `SetMasterPageFile` and set the `Page` object's `MasterPageFile` to the hard-coded value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="5712b-317">この方法では、`AdminBasePage` から派生したすべてのページで `AdminNested.master`が使用されます。一方、`BasePage` から派生したすべてのページでは、`MyMasterPage` Session 変数の値に基づいて "~/Site. マスター" または "~/alternate" のいずれかに動的に設定さ `MasterPageFile` れます。</span><span class="sxs-lookup"><span data-stu-id="5712b-317">In this way, any page that derives from `AdminBasePage` will use `AdminNested.master`, whereas any page that derives from `BasePage` will have its `MasterPageFile` property set dynamically to either "~/Site.master" or "~/Alternate.master" based on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="5712b-318">まず、`AdminBasePage.cs`という名前の `App_Code` フォルダーに新しいクラスファイルを追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-318">Start by adding a new class file to the `App_Code` folder named `AdminBasePage.cs`.</span></span> <span data-ttu-id="5712b-319">`BasePage` `AdminBasePage` 拡張し、`SetMasterPageFile` メソッドをオーバーライドする必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-319">Have `AdminBasePage` extend `BasePage` and then override the `SetMasterPageFile` method.</span></span> <span data-ttu-id="5712b-320">そのメソッドで、値 "~/Admin/adminnested`MasterPageFile` を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="5712b-320">In that method assign the `MasterPageFile` the value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="5712b-321">これらの変更を行った後、クラスファイルは次のようになります。</span><span class="sxs-lookup"><span data-stu-id="5712b-321">After making these changes your class file should look similar to the following:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample11.cs)]

<span data-ttu-id="5712b-322">次に、[管理] セクションの既存のコンテンツページを、`BasePage`ではなく `AdminBasePage` から派生させる必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-322">We now need to have the existing content pages in the Administration section derive from `AdminBasePage` instead of `BasePage`.</span></span> <span data-ttu-id="5712b-323">`~/Admin` フォルダー内の各コンテンツページの分離コードクラスファイルに移動し、この変更を行います。</span><span class="sxs-lookup"><span data-stu-id="5712b-323">Go to the code-behind class file for each content page in the `~/Admin` folder and make this change.</span></span> <span data-ttu-id="5712b-324">たとえば、`~/Admin/Default.aspx` では、分離コードクラスの宣言を次のように変更します。</span><span class="sxs-lookup"><span data-stu-id="5712b-324">For example, in `~/Admin/Default.aspx` you'd change the code-behind class declaration from:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample12.cs)]

<span data-ttu-id="5712b-325">宛先:</span><span class="sxs-lookup"><span data-stu-id="5712b-325">To:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample13.cs)]

<span data-ttu-id="5712b-326">図11は、最上位レベルのマスターページ (`Site.master` または `Alternate.master`)、入れ子になったマスターページ (`AdminNested.master`)、および管理セクションのコンテンツページが相互にどのように関連しているかを示しています。</span><span class="sxs-lookup"><span data-stu-id="5712b-326">Figure 11 depicts how the top-level master page (`Site.master` or `Alternate.master`), the nested master page (`AdminNested.master`), and the Administration section content pages relate to one another.</span></span>

<span data-ttu-id="5712b-327">[入れ子になったマスターページ ![、[管理] セクションのページに固有のコンテンツを定義します。](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-327">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span></span>

<span data-ttu-id="5712b-328">**図 11**: 入れ子になったマスターページは、[管理] セクションのページに固有のコンテンツを定義します ([クリックすると、フルサイズの画像が表示](nested-master-pages-cs/_static/image33.png)されます)</span><span class="sxs-lookup"><span data-stu-id="5712b-328">**Figure 11**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image33.png))</span></span>

## <a name="step-6-mirroring-the-master-pages-public-methods-and-properties"></a><span data-ttu-id="5712b-329">手順 6: マスターページのパブリックメソッドとプロパティをミラーリングする</span><span class="sxs-lookup"><span data-stu-id="5712b-329">Step 6: Mirroring the Master Page's Public Methods and Properties</span></span>

<span data-ttu-id="5712b-330">`~/Admin/AddProduct.aspx` ページと `~/Admin/Products.aspx` ページは、マスターページとプログラムによって対話することを思い出してください。 `~/Admin/AddProduct.aspx` は、マスターページのパブリック `RefreshRecentProductsGrid` メソッドを呼び出し、その `GridMessageText` プロパティを設定します。`~/Admin/Products.aspx` には、`PricesDoubled` イベントのイベントハンドラーがあります。</span><span class="sxs-lookup"><span data-stu-id="5712b-330">Recall that the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages interact programmatically with the master page: `~/Admin/AddProduct.aspx` calls the master page's public `RefreshRecentProductsGrid` method and sets its `GridMessageText` property; `~/Admin/Products.aspx` has an event handler for the `PricesDoubled` event.</span></span> <span data-ttu-id="5712b-331">前のチュートリアルでは、これらのパブリックメンバーを定義する抽象 `BaseMasterPage` クラスを作成しました。</span><span class="sxs-lookup"><span data-stu-id="5712b-331">In the preceding tutorial we created an abstract `BaseMasterPage` class that defined these public members.</span></span>

<span data-ttu-id="5712b-332">`~/Admin/AddProduct.aspx` ページと `~/Admin/Products.aspx` ページでは、マスターページが `BaseMasterPage` クラスから派生していることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="5712b-332">The `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages assume that their master page derives from the `BaseMasterPage` class.</span></span> <span data-ttu-id="5712b-333">ただし、`AdminNested.master` ページでは、現在 `System.Web.UI.MasterPage` クラスが拡張されています。</span><span class="sxs-lookup"><span data-stu-id="5712b-333">The `AdminNested.master` page, however, currently extends the `System.Web.UI.MasterPage` class.</span></span> <span data-ttu-id="5712b-334">その結果、`~/Admin/Products.aspx` にアクセスすると、"型 ' ASP のオブジェクトをキャストできませんでした。管理者\_adminnested\_master ' を型 ' BaseMasterPage ' にキャストできません。" というメッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-334">As a result, when visiting `~/Admin/Products.aspx` an `InvalidCastException` is thrown with the message: "Unable to cast object of type 'ASP.admin\_adminnested\_master' to type 'BaseMasterPage'."</span></span>

<span data-ttu-id="5712b-335">この問題を解決するには、`AdminNested.master` 分離コードクラスで `BaseMasterPage`を拡張する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-335">To fix this we need to have the `AdminNested.master` code-behind class extend `BaseMasterPage`.</span></span> <span data-ttu-id="5712b-336">入れ子になったマスターページの分離コードクラスの宣言を次のように更新します。</span><span class="sxs-lookup"><span data-stu-id="5712b-336">Update the nested master page's code-behind class declaration from:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample14.cs)]

<span data-ttu-id="5712b-337">宛先:</span><span class="sxs-lookup"><span data-stu-id="5712b-337">To:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample15.cs)]

<span data-ttu-id="5712b-338">まだ完了していません。</span><span class="sxs-lookup"><span data-stu-id="5712b-338">We're not done yet.</span></span> <span data-ttu-id="5712b-339">`BaseMasterPage` クラスは抽象であるため、`abstract` メンバー、`RefreshRecentProductsGrid`、および `GridMessageText`をオーバーライドする必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-339">Because the `BaseMasterPage` class is abstract, we need to override the `abstract` members, `RefreshRecentProductsGrid` and `GridMessageText`.</span></span> <span data-ttu-id="5712b-340">これらのメンバーは、最上位レベルのマスターページでユーザーインターフェイスを更新するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-340">These members are used by the top-level master pages to update their user interfaces.</span></span> <span data-ttu-id="5712b-341">(実際には、これらのメソッドを使用するのは `Site.master` マスターページのみですが、どちらのトップレベルマスターページもこれらのメソッドを実装しますが、どちらも `BaseMasterPage`を拡張するためです)。</span><span class="sxs-lookup"><span data-stu-id="5712b-341">(Actually, only the `Site.master` master page uses these methods, although both top-level master pages implement these methods, since both extend `BaseMasterPage`.)</span></span>

<span data-ttu-id="5712b-342">これらのメンバーは `AdminNested.master`で実装する必要がありますが、これらの実装で必要なのは、入れ子になったマスターページで使用される最上位レベルのマスターページで同じメンバーを呼び出すことだけです。</span><span class="sxs-lookup"><span data-stu-id="5712b-342">While we need to implement these members in `AdminNested.master`, all these implementations need to do is simply call the same member in the top-level master page used by the nested master page.</span></span> <span data-ttu-id="5712b-343">たとえば、[管理] セクションのコンテンツページで入れ子になったマスターページの `RefreshRecentProductsGrid` メソッドを呼び出す場合、入れ子になったマスターページはすべて、`Site.master` または `Alternate.master`の `RefreshRecentProductsGrid` メソッドを呼び出す必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-343">For instance, when a content page in the Administration section calls the nested master page's `RefreshRecentProductsGrid` method, all the nested master page needs to do is, in turn, call `Site.master` or `Alternate.master`'s `RefreshRecentProductsGrid` method.</span></span>

<span data-ttu-id="5712b-344">これを実現するには、まず、次の `@MasterType` ディレクティブを `AdminNested.master`の先頭に追加します。</span><span class="sxs-lookup"><span data-stu-id="5712b-344">To achieve this, start by adding the following `@MasterType` directive to the top of `AdminNested.master`:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample16.aspx)]

<span data-ttu-id="5712b-345">`@MasterType` ディレクティブにより、厳密に型指定されたプロパティが `Master`という名前の分離コードクラスに追加されることを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="5712b-345">Recall that the `@MasterType` directive adds a strongly-typed property to the code-behind class named `Master`.</span></span> <span data-ttu-id="5712b-346">次に、`RefreshRecentProductsGrid` と `GridMessageText` のメンバーをオーバーライドし、`Master`の対応するメソッドへの呼び出しを単純に委任します。</span><span class="sxs-lookup"><span data-stu-id="5712b-346">Then override the `RefreshRecentProductsGrid` and `GridMessageText` members and simply delegate the call to the `Master`'s corresponding method:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample17.cs)]

<span data-ttu-id="5712b-347">このコードを配置すると、[管理] セクションのコンテンツページにアクセスして使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="5712b-347">With this code in place, you should be able to visit and use the content pages in the Administration section.</span></span> <span data-ttu-id="5712b-348">図12は、ブラウザーを使用して表示するときの `~/Admin/Products.aspx` ページを示しています。</span><span class="sxs-lookup"><span data-stu-id="5712b-348">Figure 12 shows the `~/Admin/Products.aspx` page when viewed through a browser.</span></span> <span data-ttu-id="5712b-349">ご覧のように、このページには、入れ子になったマスターページで定義されている管理手順ボックスが含まれています。</span><span class="sxs-lookup"><span data-stu-id="5712b-349">As you can see, the page includes the Administration Instructions box, which is defined in the nested master page.</span></span>

<span data-ttu-id="5712b-350">[[管理] セクションのコンテンツページ ![、各ページの上部に説明があります。](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-350">[![The Content Pages in the Administration Section Include Instructions at the Top of Each Page](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span></span>

<span data-ttu-id="5712b-351">**図 12**: [管理] セクションの [コンテンツ] ページには、各ページの上部に表示される指示が含まれます ([クリックすると、フルサイズの画像が表示](nested-master-pages-cs/_static/image36.png)されます)。</span><span class="sxs-lookup"><span data-stu-id="5712b-351">**Figure 12**: The Content Pages in the Administration Section Include Instructions at the Top of Each Page ([Click to view full-size image](nested-master-pages-cs/_static/image36.png))</span></span>

## <a name="step-7-using-the-appropriate-top-level-master-page-at-runtime"></a><span data-ttu-id="5712b-352">手順 7: 実行時に適切なトップレベルマスターページを使用する</span><span class="sxs-lookup"><span data-stu-id="5712b-352">Step 7: Using the Appropriate Top-Level Master Page at Runtime</span></span>

<span data-ttu-id="5712b-353">[管理] セクションのすべてのコンテンツページは完全に機能しますが、すべて同じトップレベルのマスターページを使用し、`ChooseMasterPage.aspx`でユーザーが選択したマスターページを無視します。</span><span class="sxs-lookup"><span data-stu-id="5712b-353">While all the content pages in the Administration section are fully functional, they all use the same top-level master page and ignore the master page selected by the user at `ChooseMasterPage.aspx`.</span></span> <span data-ttu-id="5712b-354">この動作は、入れ子になったマスターページの `MasterPageFile` プロパティが、その `<%@ Master %>` ディレクティブで `Site.master` に静的に設定されていることが原因です。</span><span class="sxs-lookup"><span data-stu-id="5712b-354">This behavior is due to the fact that the nested master page has its `MasterPageFile` property statically set to `Site.master` in its `<%@ Master %>` directive.</span></span>

<span data-ttu-id="5712b-355">エンドユーザーが選択した最上位レベルのマスターページを使用するには、`AdminNested.master`の `MasterPageFile` プロパティを `MyMasterPage` Session 変数の値に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-355">To use the top-level master page selected by the end user we need to set the `AdminNested.master`'s `MasterPageFile` property to the value in the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="5712b-356">コンテンツページの `MasterPageFile` プロパティは `BasePage`で設定されているため、`BaseMasterPage` または `AdminNested.master`の分離コードクラスで、入れ子になったマスターページの `MasterPageFile` プロパティを設定することになるかもしれません。</span><span class="sxs-lookup"><span data-stu-id="5712b-356">Because we set the content pages' `MasterPageFile` properties in `BasePage`, you may think that we would set the nested master page's `MasterPageFile` property in `BaseMasterPage` or in the `AdminNested.master`'s code-behind class.</span></span> <span data-ttu-id="5712b-357">ただし、PreInit ステージの最後までに `MasterPageFile` プロパティを設定する必要があるため、これは機能しません。</span><span class="sxs-lookup"><span data-stu-id="5712b-357">This won't work, however, because we need to have set the `MasterPageFile` property by the end of the PreInit stage.</span></span> <span data-ttu-id="5712b-358">マスターページからページライフサイクルをプログラムによってタップできる最も早い時間は、(PreInit ステージの後に発生する) Init ステージです。</span><span class="sxs-lookup"><span data-stu-id="5712b-358">The earliest time that we can programmatically tap into the page lifecycle from a master page is the Init stage (which occurs after the PreInit stage).</span></span>

<span data-ttu-id="5712b-359">そのため、入れ子になったマスターページの `MasterPageFile` プロパティをコンテンツページから設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5712b-359">Therefore, we need to set the nested master page's `MasterPageFile` property from the content pages.</span></span> <span data-ttu-id="5712b-360">`AdminNested.master` マスターページを使用する唯一のコンテンツページは、`AdminBasePage`から派生します。</span><span class="sxs-lookup"><span data-stu-id="5712b-360">The only content pages that use the `AdminNested.master` master page derive from `AdminBasePage`.</span></span> <span data-ttu-id="5712b-361">このため、このロジックを配置できます。</span><span class="sxs-lookup"><span data-stu-id="5712b-361">Therefore, we can put this logic there.</span></span> <span data-ttu-id="5712b-362">手順 5. で `SetMasterPageFile` メソッドをオーバーライドして、`Page` オブジェクトの `MasterPageFile` プロパティを "~/Admin/マスター" に設定します。</span><span class="sxs-lookup"><span data-stu-id="5712b-362">In Step 5 we overrode the `SetMasterPageFile` method, setting the `Page` object's `MasterPageFile` property to "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="5712b-363">`SetMasterPageFile` を更新して、マスターページの `MasterPageFile` プロパティを、セッションに格納されている結果にも設定します。</span><span class="sxs-lookup"><span data-stu-id="5712b-363">Update `SetMasterPageFile` to also set the master page's `MasterPageFile` property to the result stored in Session:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample18.cs)]

<span data-ttu-id="5712b-364">前のチュートリアルで `BasePage` クラスに追加した `GetMasterPageFileFromSession` メソッドは、セッション変数の値に基づいて、適切なマスターページのファイルパスを返します。</span><span class="sxs-lookup"><span data-stu-id="5712b-364">The `GetMasterPageFileFromSession` method, which we added to the `BasePage` class in the preceding tutorial, returns the appropriate master page file path based on the Session variable value.</span></span>

<span data-ttu-id="5712b-365">この変更により、ユーザーのマスターページ選択は [管理] セクションに引き継がれます。</span><span class="sxs-lookup"><span data-stu-id="5712b-365">With this change in place, the user's master page selection carries over to the Administration section.</span></span> <span data-ttu-id="5712b-366">図13は、図12と同じページを示していますが、ユーザーがマスターページの選択を `Alternate.master`に変更した後に表示されます。</span><span class="sxs-lookup"><span data-stu-id="5712b-366">Figure 13 shows the same page as Figure 12, but after the user has changed their master page selection to `Alternate.master`.</span></span>

<span data-ttu-id="5712b-367">[入れ子になった管理ページで、ユーザーが選択した最上位レベルのマスターページを使用 ![](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="5712b-367">[![The Nested Administration Page Uses the Top-Level Master Page Selected by the User](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span></span>

<span data-ttu-id="5712b-368">**図 13**: 入れ子になった管理ページで、ユーザーが選択した最上位レベルのマスターページを使用[する (クリックしてフルサイズの画像を表示する](nested-master-pages-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="5712b-368">**Figure 13**: The Nested Administration Page Uses the Top-Level Master Page Selected by the User ([Click to view full-size image](nested-master-pages-cs/_static/image39.png))</span></span>

## <a name="summary"></a><span data-ttu-id="5712b-369">要約</span><span class="sxs-lookup"><span data-stu-id="5712b-369">Summary</span></span>

<span data-ttu-id="5712b-370">コンテンツページをマスターページにバインドするのと同じように、子マスターページを親マスターページにバインドすることで、入れ子になったマスターページを作成できます。</span><span class="sxs-lookup"><span data-stu-id="5712b-370">Much like how content pages can bind to a master page, it is possible to create nested master pages by having a child master page bind to a parent master page.</span></span> <span data-ttu-id="5712b-371">子マスターページでは、各親の ContentPlaceHolders のコンテンツコントロールを定義できます。その後、独自の ContentPlaceHolder コントロール (およびその他のマークアップ) をこれらのコンテンツコントロールに追加できます。</span><span class="sxs-lookup"><span data-stu-id="5712b-371">The child master page may define Content controls for each of its parent's ContentPlaceHolders; it can then add its own ContentPlaceHolder controls (as well as other markup) to these Content controls.</span></span> <span data-ttu-id="5712b-372">入れ子になったマスターページは、すべてのページが包括的なルックアンドフィールを共有する大規模な web アプリケーションで非常に便利ですが、サイトの特定のセクションでは独自のカスタマイズが必要です。</span><span class="sxs-lookup"><span data-stu-id="5712b-372">Nested master pages are quite useful in large web applications where all pages share an overarching look and feel, yet certain sections of the site require unique customizations.</span></span>

<span data-ttu-id="5712b-373">プログラミングを楽しんでください。</span><span class="sxs-lookup"><span data-stu-id="5712b-373">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="5712b-374">関連項目</span><span class="sxs-lookup"><span data-stu-id="5712b-374">Further Reading</span></span>

<span data-ttu-id="5712b-375">このチュートリアルで説明しているトピックの詳細については、次のリソースを参照してください。</span><span class="sxs-lookup"><span data-stu-id="5712b-375">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="5712b-376">入れ子になった ASP.NET マスターページ</span><span class="sxs-lookup"><span data-stu-id="5712b-376">Nested ASP.NET Master Pages</span></span>](https://msdn.microsoft.com/library/x2b3ktt7.aspx)
- [<span data-ttu-id="5712b-377">入れ子になったマスターページと VS 2005 デザイン時のヒント</span><span class="sxs-lookup"><span data-stu-id="5712b-377">Tips for Nested Master Pages and VS 2005 Design-Time</span></span>](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx)
- [<span data-ttu-id="5712b-378">VS 2008 入れ子になったマスターページのサポート</span><span class="sxs-lookup"><span data-stu-id="5712b-378">VS 2008 Nested Master Page Support</span></span>](https://weblogs.asp.net/scottgu/archive/2007/07/09/vs-2008-nested-master-page-support.aspx)

### <a name="about-the-author"></a><span data-ttu-id="5712b-379">作成者について</span><span class="sxs-lookup"><span data-stu-id="5712b-379">About the Author</span></span>

<span data-ttu-id="5712b-380">1998以降、Microsoft の Web テクノロジを使用して、 [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)(複数の asp/創設者4GuysFromRolla.com の執筆者) が Microsoft の Web テクノロジを使用しています。</span><span class="sxs-lookup"><span data-stu-id="5712b-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="5712b-381">Scott は、独立したコンサルタント、トレーナー、およびライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="5712b-381">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="5712b-382">彼の最新の書籍は[ *、ASP.NET 3.5 を24時間以内に教え*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco)ています。</span><span class="sxs-lookup"><span data-stu-id="5712b-382">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="5712b-383">Scott は、 [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)またはブログで[http://ScottOnWriting.NET](http://scottonwriting.net/)にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="5712b-383">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="5712b-384">ありがとうございました。</span><span class="sxs-lookup"><span data-stu-id="5712b-384">Special Thanks To</span></span>

<span data-ttu-id="5712b-385">このチュートリアルシリーズは、役に立つ多くのレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="5712b-385">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="5712b-386">今後の MSDN 記事を確認することに興味がありますか?</span><span class="sxs-lookup"><span data-stu-id="5712b-386">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="5712b-387">その場合は、 [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)の行を削除します。</span><span class="sxs-lookup"><span data-stu-id="5712b-387">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5712b-388">[前へ](specifying-the-master-page-programmatically-cs.md)
> [次へ](creating-a-site-wide-layout-using-master-pages-vb.md)</span><span class="sxs-lookup"><span data-stu-id="5712b-388">[Previous](specifying-the-master-page-programmatically-cs.md)
[Next](creating-a-site-wide-layout-using-master-pages-vb.md)</span></span>
