---
uid: web-forms/overview/older-versions-getting-started/master-pages/creating-a-site-wide-layout-using-master-pages-cs
title: マスターページを使用してサイト全体のレイアウトC#を作成する () |Microsoft Docs
author: rick-anderson
description: このチュートリアルでは、マスターページの基本について説明します。 つまり、マスターページとは何か、どのようにしてマスターページを作成するか、コンテンツプレースホルダーとは何ですか。
ms.author: riande
ms.date: 05/21/2008
ms.assetid: 78f8d194-03b9-44a5-8255-90e7cd1c2ee1
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/creating-a-site-wide-layout-using-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 1a5e85c443a2a3642ec185ab1897c43cdb2ab1f7
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78507334"
---
# <a name="creating-a-site-wide-layout-using-master-pages-c"></a><span data-ttu-id="d932c-104">マスター ページを利用してサイト全体レイアウトを作成する (C#)</span><span class="sxs-lookup"><span data-stu-id="d932c-104">Creating a Site-Wide Layout Using Master Pages (C#)</span></span>

<span data-ttu-id="d932c-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="d932c-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="d932c-106">[コードのダウンロード](https://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_01_CS.zip)または[PDF のダウンロード](https://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_01_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="d932c-106">[Download Code](https://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_01_CS.zip) or [Download PDF](https://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_01_CS.pdf)</span></span>

> <span data-ttu-id="d932c-107">このチュートリアルでは、マスターページの基本について説明します。</span><span class="sxs-lookup"><span data-stu-id="d932c-107">This tutorial will show master page basics.</span></span> <span data-ttu-id="d932c-108">つまり、マスターページとは何か、どのようにしてマスターページを作成するか、どのようにしてコンテンツプレースホルダーを作成するか、マスターページを使用する ASP.NET ページをどのように作成するか、マスターページの変更が関連するコンテンツページに自動的に反映されるかなどです。</span><span class="sxs-lookup"><span data-stu-id="d932c-108">Namely, what are master pages, how does one create a master page, what are content place holders, how does one create an ASP.NET page that uses a master page, how modifying the master page is automatically reflected in its associated content pages, and so on.</span></span>

## <a name="introduction"></a><span data-ttu-id="d932c-109">はじめに</span><span class="sxs-lookup"><span data-stu-id="d932c-109">Introduction</span></span>

<span data-ttu-id="d932c-110">適切にデザインされた web サイトの1つの属性は、一貫したサイト全体のページレイアウトです。</span><span class="sxs-lookup"><span data-stu-id="d932c-110">One attribute of a well-designed website is a consistent site-wide page layout.</span></span> <span data-ttu-id="d932c-111">[www.asp.net](www.asp.net) web サイトを例にとってみましょう。</span><span class="sxs-lookup"><span data-stu-id="d932c-111">Take the www.asp.net website, for example.</span></span> <span data-ttu-id="d932c-112">このドキュメントの執筆時点では、ページの上部と下部にすべてのページの内容が同じになっています。</span><span class="sxs-lookup"><span data-stu-id="d932c-112">At the time of this writing, every page has the same content at the top and bottom of the page.</span></span> <span data-ttu-id="d932c-113">図1に示すように、各ページの上部には、Microsoft コミュニティの一覧を含む灰色のバーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-113">As Figure 1 shows, the very top of each page displays a gray bar with a list of Microsoft Communities.</span></span> <span data-ttu-id="d932c-114">その下には、サイトのロゴ、サイトが翻訳された言語の一覧、および主要なセクションである [ホーム]、[はじめに]、[学習]、[ダウンロード] などがあります。</span><span class="sxs-lookup"><span data-stu-id="d932c-114">Beneath that is the site logo, the list of languages into which the site has been translated, and the core sections: Home, Get Started, Learn, Downloads, and so forth.</span></span> <span data-ttu-id="d932c-115">同様に、ページの下部には、 www.asp.net 、著作権、およびプライバシーに関する声明へのリンク上の広告に関する情報が含まれます。</span><span class="sxs-lookup"><span data-stu-id="d932c-115">Likewise, the bottom of the page includes information about advertising on www.asp.net, a copyright statement, and a link to the privacy statement.</span></span>

<span data-ttu-id="d932c-116">[www.asp.net の Web サイトでは、すべてのページで一貫したルックアンドフィールを採用している ![](creating-a-site-wide-layout-using-master-pages-cs/_static/image2.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="d932c-116">[![The www.asp.net Website Employs a Consistent Look and Feel Across All Pages](creating-a-site-wide-layout-using-master-pages-cs/_static/image2.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image1.png)</span></span>

<span data-ttu-id="d932c-117"><strong>図 01</strong>: Www.asp.net web サイトは、すべてのページで一貫したルックアンドフィールを採用しています ([クリックすると、フルサイズの画像が表示](creating-a-site-wide-layout-using-master-pages-cs/_static/image3.png)されます)</span><span class="sxs-lookup"><span data-stu-id="d932c-117"><strong>Figure 01</strong>: The www.asp.net Website Employs a Consistent Look and Feel Across All Pages ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image3.png))</span></span>

<span data-ttu-id="d932c-118">適切に設計されたサイトのもう1つの属性は、サイトの外観を簡単に変更できるようにすることです。</span><span class="sxs-lookup"><span data-stu-id="d932c-118">Another attribute of a well-designed site is the ease with which the site's appearance can be changed.</span></span> <span data-ttu-id="d932c-119">図 1 が 2008 年 3 月の時点で www.asp.net ホームページを示していますが、ルック アンド フィールをここで、このチュートリアルのパブリケーションの変更可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-119">Figure 1 shows the www.asp.net homepage as of March 2008, but between now and this tutorial's publication, the look and feel may have changed.</span></span> <span data-ttu-id="d932c-120">場合によっては、上部にあるメニュー項目が展開され、MVC フレームワークの新しいセクションが追加されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-120">Perhaps the menu items along the top will expand to include a new section for the MVC framework.</span></span> <span data-ttu-id="d932c-121">または、色、フォント、レイアウトが異なる、新しいデザインが公開される可能性もあります。</span><span class="sxs-lookup"><span data-stu-id="d932c-121">Or maybe a radically new design with different colors, fonts, and layout will be unveiled.</span></span> <span data-ttu-id="d932c-122">サイト全体にこのような変更を適用するのは、サイトを構成する数千の web ページを変更する必要がない、高速で単純なプロセスである必要があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-122">Applying such changes to the entire site should be a fast and simple process that does not require modifying the thousands of web pages that make up the site.</span></span>

<span data-ttu-id="d932c-123">ASP.NET でサイト全体のページテンプレートを作成するには、*マスターページ*を使用します。</span><span class="sxs-lookup"><span data-stu-id="d932c-123">Creating a site-wide page template in ASP.NET is possible through the use of *master pages*.</span></span> <span data-ttu-id="d932c-124">簡単に言うと、マスターページは、コンテンツページごとにカスタマイズ可能な領域だけでなく、すべての*コンテンツページ*で共通のマークアップを定義する特別な種類の ASP.NET ページです。</span><span class="sxs-lookup"><span data-stu-id="d932c-124">In a nutshell, a master page is a special type of ASP.NET page that defines the markup that is common among all *content pages* as well as regions that are customizable on a content page-by-content page basis.</span></span> <span data-ttu-id="d932c-125">(コンテンツページは、マスターページにバインドされている ASP.NET ページです)。マスターページのレイアウトまたは書式設定が変更されると、そのすべてのコンテンツページの出力も同様に直ちに更新されるため、1つのファイル (つまり、マスターページ) を更新および展開するのと同じように、サイト全体の外観の変更が簡単に適用されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-125">(A content page is an ASP.NET page that is bound to the master page.) Whenever a master page's layout or formatting is changed, all of its content pages' output is likewise immediately updated, which makes applying site-wide appearance changes as easy as updating and deploying a single file (namely, the master page).</span></span>

<span data-ttu-id="d932c-126">これは、マスターページの使用について説明する一連のチュートリアルの最初のチュートリアルです。</span><span class="sxs-lookup"><span data-stu-id="d932c-126">This is the first tutorial in a series of tutorials that explore using master pages.</span></span> <span data-ttu-id="d932c-127">このチュートリアルシリーズでは、次のことを行います。</span><span class="sxs-lookup"><span data-stu-id="d932c-127">Over the course of this tutorial series we:</span></span>

- <span data-ttu-id="d932c-128">マスターページとそれに関連するコンテンツページを作成する方法を確認します。</span><span class="sxs-lookup"><span data-stu-id="d932c-128">Examine creating master pages and their associated content pages,</span></span>
- <span data-ttu-id="d932c-129">さまざまなヒント、テクニック、およびトラップについて説明します。</span><span class="sxs-lookup"><span data-stu-id="d932c-129">Discuss a variety of tips, tricks, and traps,</span></span>
- <span data-ttu-id="d932c-130">一般的なマスターページの落とし穴を特定し、回避策を調べる</span><span class="sxs-lookup"><span data-stu-id="d932c-130">Identify common master page pitfalls and explore workarounds,</span></span>
- <span data-ttu-id="d932c-131">コンテンツページからマスターページにアクセスする方法と、その逆の方法を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d932c-131">See how to access the master page from a content page and vice-a-versa,</span></span>
- <span data-ttu-id="d932c-132">実行時にコンテンツページのマスターページを指定する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d932c-132">Learn how to specify a content page's master page at runtime, and</span></span>
- <span data-ttu-id="d932c-133">その他の高度なマスターページのトピック。</span><span class="sxs-lookup"><span data-stu-id="d932c-133">Other advanced master page topics.</span></span>

<span data-ttu-id="d932c-134">これらのチュートリアルは簡潔にすることを目的としており、プロセスを視覚的に説明するためのさまざまなスクリーンショットを含む詳細な手順を説明しています。</span><span class="sxs-lookup"><span data-stu-id="d932c-134">These tutorials are geared to be concise and provide step-by-step instructions with plenty of screen shots to walk you through the process visually.</span></span> <span data-ttu-id="d932c-135">各チュートリアルは、およびC# Visual Basic バージョンで使用でき、使用されている完全なコードのダウンロードが含まれています。</span><span class="sxs-lookup"><span data-stu-id="d932c-135">Each tutorial is available in C# and Visual Basic versions and includes a download of the complete code used.</span></span>

<span data-ttu-id="d932c-136">この初めチュートリアルでは、まずマスターページの基本について説明します。</span><span class="sxs-lookup"><span data-stu-id="d932c-136">This inaugural tutorial starts with a look at master page basics.</span></span> <span data-ttu-id="d932c-137">ここでは、マスターページの動作について説明し、Visual Web Developer を使用してマスターページと関連するコンテンツページを作成する方法について説明します。また、マスターページに対する変更がコンテンツページに直ちに反映されるしくみについても説明します。</span><span class="sxs-lookup"><span data-stu-id="d932c-137">We discuss how master pages work, look at creating a master page and associated content pages using Visual Web Developer, and see how changes to a master page are immediately reflected in its content pages.</span></span> <span data-ttu-id="d932c-138">作業開始</span><span class="sxs-lookup"><span data-stu-id="d932c-138">Let's get started!</span></span>

## <a name="understanding-how-master-pages-work"></a><span data-ttu-id="d932c-139">マスターページの動作について</span><span class="sxs-lookup"><span data-stu-id="d932c-139">Understanding How Master Pages Work</span></span>

<span data-ttu-id="d932c-140">サイト全体の一貫したページレイアウトで web サイトを構築するには、カスタムコンテンツに加えて、各 web ページで共通の書式設定マークアップを出力する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-140">Building a website with a consistent site-wide page layout requires that each web page emit common formatting markup in addition to its custom content.</span></span> <span data-ttu-id="d932c-141">たとえば、 www.asp.net の各チュートリアルまたはフォーラムの投稿には独自のコンテンツがありますが、これらの各ページには、最上位のセクションリンク ([ホーム]、[はじめに]、[学習] など) を表示する一連の共通 `<div>` 要素も表示されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-141">For example, while each tutorial or forum post on www.asp.net have their own unique content, each of these pages also render a series of common `<div>` elements that display the top-level section links: Home, Get Started, Learn, and so on.</span></span>

<span data-ttu-id="d932c-142">一貫したルックアンドフィールで web ページを作成するためのさまざまな方法があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-142">There are a variety of techniques for creating web pages with a consistent look and feel.</span></span> <span data-ttu-id="d932c-143">単純な方法では、共通のレイアウトマークアップをコピーしてすべての web ページに貼り付けますが、この方法にはさまざまな欠点があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-143">A naive approach is to simply copy and paste the common layout markup into all web pages, but this approach has a number of downsides.</span></span> <span data-ttu-id="d932c-144">まず、新しいページが作成されるたびに、共有コンテンツをコピーしてページに貼り付ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-144">For starters, every time a new page is created, you must remember to copy and paste the shared content into the page.</span></span> <span data-ttu-id="d932c-145">共有マークアップのサブセットのみを新しいページに誤ってコピーする可能性があるため、このようなコピー操作や貼り付け操作はエラーに準備ます。</span><span class="sxs-lookup"><span data-stu-id="d932c-145">Such copying and pasting operations are ripe for error as you may accidentally copy only a subset of the shared markup into a new page.</span></span> <span data-ttu-id="d932c-146">また、この方法では、サイト内のすべてのページを編集して新しいルックアンドフィールを使用する必要があるため、サイト全体の既存の外観を新しいものに置き換えることができます。</span><span class="sxs-lookup"><span data-stu-id="d932c-146">And to top it off, this approach makes replacing the existing site-wide appearance with a new one a real pain because every single page in the site must be edited in order to use the new look and feel.</span></span>

<span data-ttu-id="d932c-147">ASP.NET バージョン2.0 より前では、ページ開発者は通常、[ユーザーコントロール](https://msdn.microsoft.com/library/y6wb1a0e.aspx)に共通のマークアップを配置し、各ページにこれらのユーザーコントロールを追加しました。</span><span class="sxs-lookup"><span data-stu-id="d932c-147">Prior to ASP.NET version 2.0, page developers often placed common markup in [User Controls](https://msdn.microsoft.com/library/y6wb1a0e.aspx) and then added these User Controls to each and every page.</span></span> <span data-ttu-id="d932c-148">この方法では、ページ開発者は、ユーザーコントロールをすべての新しいページに手動で追加することを覚えておく必要がありました。ただし、共通のマークアップを更新するときは、ユーザーコントロールのみを変更する必要があるため、サイト全体の変更が可能になります。</span><span class="sxs-lookup"><span data-stu-id="d932c-148">This approach required that the page developer remember to manually add the User Controls to every new page, but allowed for easier site-wide modifications because when updating the common markup only the User Controls needed to be modified.</span></span> <span data-ttu-id="d932c-149">残念ながら、Visual Studio .NET 2002 および 2003-ASP.NET 1.x アプリケーションを作成するために使用される Visual Studio のバージョンは、灰色のボックスとしてデザインビューに表示されるユーザーコントロールです。</span><span class="sxs-lookup"><span data-stu-id="d932c-149">Unfortunately, Visual Studio .NET 2002 and 2003 - the versions of Visual Studio used to create ASP.NET 1.x applications - rendered User Controls in the Design view as gray boxes.</span></span> <span data-ttu-id="d932c-150">そのため、この方法を使用するページ開発者は、WYSIWYG デザイン時環境を利用できませんでした。</span><span class="sxs-lookup"><span data-stu-id="d932c-150">Consequently, page developers using this approach did not enjoy a WYSIWYG design-time environment.</span></span>

<span data-ttu-id="d932c-151">ユーザーコントロールを使用する場合の欠点は、ASP.NET バージョン2.0 と Visual Studio 2005 で、*マスターページ*の導入によって解決されました。</span><span class="sxs-lookup"><span data-stu-id="d932c-151">The shortcomings of using User Controls were addressed in ASP.NET version 2.0 and Visual Studio 2005 with the introduction of *master pages*.</span></span> <span data-ttu-id="d932c-152">マスターページは、サイト全体のマークアップと、関連する*コンテンツページ*でカスタムマークアップが定義されている*領域*の両方を定義する、特殊な ASP.NET ページです。</span><span class="sxs-lookup"><span data-stu-id="d932c-152">A master page is a special type of ASP.NET page that defines both the site-wide markup and the *regions* where associated *content pages* define their custom markup.</span></span> <span data-ttu-id="d932c-153">手順1で説明したように、これらの領域は ContentPlaceHolder コントロールによって定義されています。</span><span class="sxs-lookup"><span data-stu-id="d932c-153">As we will see in Step 1, these regions are defined by ContentPlaceHolder controls.</span></span> <span data-ttu-id="d932c-154">ContentPlaceHolder コントロールは、コンテンツページによってカスタムコンテンツを挿入できるマスターページのコントロール階層内の位置を示します。</span><span class="sxs-lookup"><span data-stu-id="d932c-154">The ContentPlaceHolder control simply denotes a position in the master page's control hierarchy where custom content can be injected by a content page.</span></span>

> [!NOTE]
> <span data-ttu-id="d932c-155">マスターページの主要な概念と機能は、ASP.NET バージョン2.0 以降、変更されていません。</span><span class="sxs-lookup"><span data-stu-id="d932c-155">The core concepts and functionality of master pages has not changed since ASP.NET version 2.0.</span></span> <span data-ttu-id="d932c-156">ただし、Visual Studio 2008 では、入れ子になったマスターページ (Visual Studio 2005 に欠けていた機能) のデザイン時サポートを提供しています。</span><span class="sxs-lookup"><span data-stu-id="d932c-156">However, Visual Studio 2008 offers design-time support for nested master pages, a feature that was lacking in Visual Studio 2005.</span></span> <span data-ttu-id="d932c-157">入れ子になったマスターページの使用については、今後のチュートリアルで説明します。</span><span class="sxs-lookup"><span data-stu-id="d932c-157">We will look at using nested master pages in a future tutorial.</span></span>

<span data-ttu-id="d932c-158">図 2 は、 www.asp.net  のマスター ページの外観を示しています。</span><span class="sxs-lookup"><span data-stu-id="d932c-158">Figure 2 shows what the master page for www.asp.net might look like.</span></span> <span data-ttu-id="d932c-159">マスターページでは、一般的なサイト全体のレイアウトを定義しています。各ページの上部、下部、および右にマークアップがあります。また、ContentPlaceHolder は、各 web ページの固有のコンテンツが配置されている中央左にあります。</span><span class="sxs-lookup"><span data-stu-id="d932c-159">Note that the master page defines the common site-wide layout - the markup at the top, bottom, and right of every page - as well as a ContentPlaceHolder in the middle-left, where the unique content for each individual web page is located.</span></span>

![マスターページでは、サイト全体のレイアウトと、コンテンツページごとに編集可能な領域を定義します。](creating-a-site-wide-layout-using-master-pages-cs/_static/image4.png)

<span data-ttu-id="d932c-161">**図 02**: マスターページでは、サイト全体のレイアウトと、コンテンツページごとに編集可能な領域を定義します。</span><span class="sxs-lookup"><span data-stu-id="d932c-161">**Figure 02**: A Master Page Defines the Site-Wide Layout and the Regions Editable on a Content Page-by-Content Page Basis</span></span>

<span data-ttu-id="d932c-162">マスターページを定義したら、チェックボックスの目盛りを通じて新しい ASP.NET ページにバインドすることができます。</span><span class="sxs-lookup"><span data-stu-id="d932c-162">Once a master page has been defined it can be bound to new ASP.NET pages through the tick of a checkbox.</span></span> <span data-ttu-id="d932c-163">これらの ASP.NET ページ (コンテンツページ) には、マスターページの ContentPlaceHolder コントロールごとにコンテンツコントロールが含まれています。</span><span class="sxs-lookup"><span data-stu-id="d932c-163">These ASP.NET pages - called content pages - include a Content control for each of the master page's ContentPlaceHolder controls.</span></span> <span data-ttu-id="d932c-164">ブラウザーを使用してコンテンツページにアクセスすると、ASP.NET engine はマスターページのコントロール階層を作成し、コンテンツページのコントロール階層を適切な場所に挿入します。</span><span class="sxs-lookup"><span data-stu-id="d932c-164">When the content page is visited through a browser the ASP.NET engine creates the master page's control hierarchy and injects the content page's control hierarchy into the appropriate places.</span></span> <span data-ttu-id="d932c-165">この結合コントロール階層がレンダリングされ、結果の HTML がエンドユーザーのブラウザーに返されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-165">This combined control hierarchy is rendered and the resulting HTML is returned to the end user's browser.</span></span> <span data-ttu-id="d932c-166">その結果、コンテンツページは、マスターページで定義されている共通のマークアップを ContentPlaceHolder コントロールの外部に出力し、独自のコンテンツコントロール内に定義されているページ固有のマークアップを出力します。</span><span class="sxs-lookup"><span data-stu-id="d932c-166">Consequently, the content page emits both the common markup defined in its master page outside of the ContentPlaceHolder controls and the page-specific markup defined within its own Content controls.</span></span> <span data-ttu-id="d932c-167">図3は、この概念を示しています。</span><span class="sxs-lookup"><span data-stu-id="d932c-167">Figure 3 illustrates this concept.</span></span>

<span data-ttu-id="d932c-168">[要求されたページのマークアップがマスターページに ![](creating-a-site-wide-layout-using-master-pages-cs/_static/image6.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="d932c-168">[![The Requested Page's Markup is Fused into the Master Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image6.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image5.png)</span></span>

<span data-ttu-id="d932c-169">**図 03**: 要求されたページのマークアップがマスターページに組み込まれている ([クリックすると、フルサイズの画像が表示](creating-a-site-wide-layout-using-master-pages-cs/_static/image7.png)されます)</span><span class="sxs-lookup"><span data-stu-id="d932c-169">**Figure 03**: The Requested Page's Markup is Fused into the Master Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image7.png))</span></span>

<span data-ttu-id="d932c-170">これで、マスターページの動作について説明しました。次は、Visual Web Developer を使用してマスターページと関連するコンテンツページを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d932c-170">Now that we have discussed how master pages work, let's take a look at creating a master page and associated content pages using Visual Web Developer.</span></span>

> [!NOTE]
> <span data-ttu-id="d932c-171">最も多くのユーザーにリーチするために、このチュートリアルシリーズで作成する ASP.NET web サイトは、Microsoft の無償版の Visual Studio 2008、 [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/)を使用して ASP.NET 3.5 を使用して作成されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-171">In order to reach the widest possible audience, the ASP.NET website we build throughout this tutorial series will be created using ASP.NET 3.5 with Microsoft's free version of Visual Studio 2008, [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/).</span></span> <span data-ttu-id="d932c-172">まだ ASP.NET 3.5 にアップグレードしていない場合は、心配しないでください。これらのチュートリアルで説明する概念は、ASP.NET 2.0 と Visual Studio 2005 でも同様に機能します。</span><span class="sxs-lookup"><span data-stu-id="d932c-172">If you have not yet upgraded to ASP.NET 3.5, don't worry - the concepts discussed in these tutorials work equally well with ASP.NET 2.0 and Visual Studio 2005.</span></span> <span data-ttu-id="d932c-173">ただし、一部のデモアプリケーションでは、.NET Framework バージョン3.5 の新機能を使用する場合があります。3.5 固有の機能が使用されている場合、バージョン2.0 で同様の機能を実装する方法について説明するメモを含めます。</span><span class="sxs-lookup"><span data-stu-id="d932c-173">However, some demo applications may use features new to the .NET Framework version 3.5; when 3.5-specific features are used, I include a note that discusses how to implement similar functionality in version 2.0.</span></span> <span data-ttu-id="d932c-174">各チュートリアルからダウンロードできるデモアプリケーションは .NET Framework バージョン3.5 を対象としているため、3.5 固有の構成要素を含む `Web.config` ファイルと、ASP.NET pages の分離コードクラスの `using` ステートメント内の3.5 固有の名前空間への参照が含まれていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="d932c-174">Do keep in mind that the demo applications available for download from each tutorial target the .NET Framework version 3.5, which results in a `Web.config` file that includes 3.5-specific configuration elements and references to 3.5-specific namespaces in the `using` statements in ASP.NET pages' code-behind classes.</span></span> <span data-ttu-id="d932c-175">長期的には、コンピューターに .NET 3.5 をまだインストールしていない場合、`Web.config`から3.5 固有のマークアップを最初に削除しないと、ダウンロード可能な web アプリケーションは動作しません。</span><span class="sxs-lookup"><span data-stu-id="d932c-175">Long story short, if you have yet to install .NET 3.5 on your computer then the downloadable web application will not work without first removing the 3.5-specific markup from `Web.config`.</span></span> <span data-ttu-id="d932c-176">このトピックの詳細については、「[解説 ASP.NET Version 3.5 の `Web.config` ファイル](http://www.4guysfromrolla.com/articles/121207-1.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d932c-176">See [Dissecting ASP.NET Version 3.5's `Web.config` File](http://www.4guysfromrolla.com/articles/121207-1.aspx) for more information on this topic.</span></span> <span data-ttu-id="d932c-177">また、3.5 固有の名前空間を参照する `using` ステートメントも削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-177">You will also need to remove the `using` statements that reference 3.5-specific namespaces.</span></span>

## <a name="step-1-creating-a-master-page"></a><span data-ttu-id="d932c-178">手順 1: マスターページの作成</span><span class="sxs-lookup"><span data-stu-id="d932c-178">Step 1: Creating a Master Page</span></span>

<span data-ttu-id="d932c-179">マスターページとコンテンツページの作成と使用の詳細については、まず ASP.NET web サイトが必要です。</span><span class="sxs-lookup"><span data-stu-id="d932c-179">Before we can explore creating and using master and content pages, we first need an ASP.NET website.</span></span> <span data-ttu-id="d932c-180">まず、新しいファイルシステムベースの ASP.NET web サイトを作成します。</span><span class="sxs-lookup"><span data-stu-id="d932c-180">Start by creating a new file system-based ASP.NET website.</span></span> <span data-ttu-id="d932c-181">これを行うには、Visual Web Developer を起動して [ファイル] メニューにアクセスし、[新しい Web サイト] をクリックします。 [新しい Web サイト] ダイアログボックスが表示されます (図4を参照)。</span><span class="sxs-lookup"><span data-stu-id="d932c-181">To accomplish this, launch Visual Web Developer and then go to the File menu and choose New Web Site, displaying the New Web Site dialog box (see Figure 4).</span></span> <span data-ttu-id="d932c-182">ASP.NET Web サイトテンプレートを選択し、[場所] ドロップダウンリストを [ファイルシステム] に設定して、Web サイトを配置するフォルダーを選択C#し、言語をに設定します。</span><span class="sxs-lookup"><span data-stu-id="d932c-182">Choose the ASP.NET Web Site template, set the Location drop-down list to File System, choose a folder to place the web site, and set the language to C#.</span></span> <span data-ttu-id="d932c-183">これにより、`Default.aspx` ASP.NET ページ、`App_Data` フォルダー、および `Web.config` ファイルを含む新しい web サイトが作成されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-183">This will create a new web site with a `Default.aspx` ASP.NET page, an `App_Data` folder, and a `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="d932c-184">Visual Studio では、2つのプロジェクト管理モード (Web サイトプロジェクトと Web アプリケーションプロジェクト) がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="d932c-184">Visual Studio supports two modes of project management: Web Site Projects and Web Application Projects.</span></span> <span data-ttu-id="d932c-185">Web サイトプロジェクトにはプロジェクトファイルがありませんが、Web アプリケーションプロジェクトは Visual Studio .NET 2002/2003 のプロジェクトアーキテクチャに似ています。プロジェクトファイルが含まれ、プロジェクトのソースコードが1つのアセンブリにコンパイルされ、`/bin` フォルダーに配置されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-185">Web Site Projects lack a project file, whereas Web Application Projects mimic the project architecture in Visual Studio .NET 2002/2003 - they include a project file and compile the project's source code into a single assembly, which is placed in the `/bin` folder.</span></span> <span data-ttu-id="d932c-186">Visual Studio 2005 は、web[アプリケーションプロジェクトモデル](https://msdn.microsoft.com/library/aa730880(vs.80).aspx)が Service Pack 1 で導入されましたが、最初はサポートされている Web サイトプロジェクトのみです。Visual Studio 2008 では、両方のプロジェクトモデルが提供されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-186">Visual Studio 2005 initially only supported Web Site Projects, although the [Web Application Project model](https://msdn.microsoft.com/library/aa730880(vs.80).aspx) was reintroduced with Service Pack 1; Visual Studio 2008 offers both project models.</span></span> <span data-ttu-id="d932c-187">ただし、Visual Web Developer 2005 と2008の各エディションでは、Web サイトプロジェクトのみがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="d932c-187">The Visual Web Developer 2005 and 2008 editions, however, only support Web Site Projects.</span></span> <span data-ttu-id="d932c-188">このチュートリアルシリーズのデモでは、Web サイトプロジェクトモデルを使用します。</span><span class="sxs-lookup"><span data-stu-id="d932c-188">I use the Web Site Project model for my demos in this tutorial series.</span></span> <span data-ttu-id="d932c-189">Express 以外のエディションを使用していて、代わりに Web アプリケーションプロジェクトモデルを使用する場合は、自由に選択してください。ただし、画面に表示される内容と、表示される手順およびスクリーンショットと instructio の間にはいくつかの不一致がある可能性があることに注意してください。このチュートリアルで提供されている ns。</span><span class="sxs-lookup"><span data-stu-id="d932c-189">If you are using a non-Express edition and want to use the Web Application Project model instead, feel free to do so but be aware that there may be some discrepancies between what you see on your screen and the steps you must take versus the screen shots shown and instructions provided in these tutorials.</span></span>

<span data-ttu-id="d932c-190">[新しいファイルシステムベースの Web サイトを作成 ![には](creating-a-site-wide-layout-using-master-pages-cs/_static/image9.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="d932c-190">[![Create a New File System-Based Web Site](creating-a-site-wide-layout-using-master-pages-cs/_static/image9.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image8.png)</span></span>

<span data-ttu-id="d932c-191">**図 04**: 新しいファイルシステムベースの Web サイトを作成[する (クリックすると、フルサイズの画像が表示](creating-a-site-wide-layout-using-master-pages-cs/_static/image10.png)されます)</span><span class="sxs-lookup"><span data-stu-id="d932c-191">**Figure 04**: Create a New File System-Based Web Site  ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image10.png))</span></span>

<span data-ttu-id="d932c-192">次に、ルートディレクトリ内のサイトにマスターページを追加します。そのためには、プロジェクト名を右クリックし、[新しい項目の追加] を選択して、マスターページテンプレートを選択します。</span><span class="sxs-lookup"><span data-stu-id="d932c-192">Next, add a master page to the site in the root directory by right-clicking on the Project name, choosing Add New Item, and selecting the Master Page template.</span></span> <span data-ttu-id="d932c-193">マスターページの末尾には `.master`拡張子が付いていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="d932c-193">Note that master pages end with the extension `.master`.</span></span> <span data-ttu-id="d932c-194">この新しいマスターページの名前を `Site.master`、[追加] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="d932c-194">Name this new master page `Site.master` and click Add.</span></span>

<span data-ttu-id="d932c-195">[Website という名前のマスターページを Web サイトに追加 ![には](creating-a-site-wide-layout-using-master-pages-cs/_static/image12.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="d932c-195">[![Add a Master Page Named Site.master to the Website](creating-a-site-wide-layout-using-master-pages-cs/_static/image12.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image11.png)</span></span>

<span data-ttu-id="d932c-196">**図 05**: `Site.master` という名前のマスターページを web サイトに追加する ([クリックすると、フルサイズの画像が表示](creating-a-site-wide-layout-using-master-pages-cs/_static/image13.png)されます)</span><span class="sxs-lookup"><span data-stu-id="d932c-196">**Figure 05**: Add a Master Page Named `Site.master` to the Website ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image13.png))</span></span>

<span data-ttu-id="d932c-197">Visual Web Developer を使用して新しいマスターページファイルを追加すると、次の宣言型マークアップを持つマスターページが作成されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-197">Adding a new master page file through Visual Web Developer creates a master page with the following declarative markup:</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample1.aspx)]

<span data-ttu-id="d932c-198">宣言マークアップの最初の行は、 [`@Master` ディレクティブ](https://msdn.microsoft.com/library/ms228176.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="d932c-198">The first line in the declarative markup is the [`@Master` directive](https://msdn.microsoft.com/library/ms228176.aspx).</span></span> <span data-ttu-id="d932c-199">`@Master` ディレクティブは、ASP.NET ページに表示される[`@Page` ディレクティブ](https://msdn.microsoft.com/library/ydy4x04a.aspx)に似ています。</span><span class="sxs-lookup"><span data-stu-id="d932c-199">The `@Master` directive is similar to the [`@Page` directive](https://msdn.microsoft.com/library/ydy4x04a.aspx) that appears in ASP.NET pages.</span></span> <span data-ttu-id="d932c-200">サーバー側の言語 (C#) と、マスターページの分離コードクラスの場所と継承に関する情報を定義します。</span><span class="sxs-lookup"><span data-stu-id="d932c-200">It defines the server-side language (C#) and information about the location and inheritance of the master page's code-behind class.</span></span>

<span data-ttu-id="d932c-201">`DOCTYPE` とページの宣言マークアップが `@Master` ディレクティブの下に表示されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-201">The `DOCTYPE` and the page's declarative markup appears beneath the `@Master` directive.</span></span> <span data-ttu-id="d932c-202">このページには、次の4つのサーバー側コントロールと共に、静的 HTML が含まれています。</span><span class="sxs-lookup"><span data-stu-id="d932c-202">The page includes static HTML along with four server-side controls:</span></span>

- <span data-ttu-id="d932c-203">**Web フォーム (`<form runat="server">`)** 。通常、すべての ASP.NET ページには web フォームがあります。また、マスターページには web フォーム内に表示する必要がある web コントロールが含まれる場合があるため、web フォームを各コンテンツページに追加するのではなく、マスターページに追加してください。</span><span class="sxs-lookup"><span data-stu-id="d932c-203">**A Web Form (the `<form runat="server">`)** - because all ASP.NET pages typically have a Web Form - and because the master page may include Web controls that must appear within a Web Form - be sure to add the Web Form to your master page (rather than adding a Web Form to each content page).</span></span>
- <span data-ttu-id="d932c-204">**`ContentPlaceHolder1`という名前の ContentPlaceHolder コントロール**-この ContentPlaceHolder コントロールは Web フォーム内に表示され、コンテンツページのユーザーインターフェイスの領域として機能します。</span><span class="sxs-lookup"><span data-stu-id="d932c-204">**A ContentPlaceHolder control named `ContentPlaceHolder1`** - this ContentPlaceHolder control appears within the Web Form and serves as the region for the content page's user interface.</span></span>
- <span data-ttu-id="d932c-205">**サーバー側の `<head>` 要素**-`<head>` 要素には `runat="server"` 属性があるため、サーバー側のコードを使用してアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="d932c-205">**A server-side `<head>` element** - the `<head>` element has the `runat="server"` attribute, making it accessible through server-side code.</span></span> <span data-ttu-id="d932c-206">`<head>` 要素は、ページのタイトルとその他の `<head>`関連のマークアップがプログラムによって追加または調整されるように、この方法で実装されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-206">The `<head>` element is implemented this way so that the page's title and other `<head>`-related markup may be added or adjusted programmatically.</span></span> <span data-ttu-id="d932c-207">たとえば、ASP.NET ページの `Title` プロパティを設定すると、`<head>` サーバーコントロールによって表示される `<title>` 要素が変更されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-207">For example, setting an ASP.NET page's `Title` property changes the `<title>` element rendered by the `<head>` server control.</span></span>
- <span data-ttu-id="d932c-208">**`head`という名前の ContentPlaceHolder コントロール**-この ContentPlaceHolder コントロールは、`<head>` サーバーコントロール内に表示され、`<head>` 要素にコンテンツを宣言によって追加するために使用できます。</span><span class="sxs-lookup"><span data-stu-id="d932c-208">**A ContentPlaceHolder control named `head`** - this ContentPlaceHolder control appears within the `<head>` server control and can be used to declaratively add content to the `<head>` element.</span></span>

<span data-ttu-id="d932c-209">この既定のマスターページ宣言型マークアップは、独自のマスターページを設計するための出発点として機能します。</span><span class="sxs-lookup"><span data-stu-id="d932c-209">This default master page declarative markup serves as a starting point for designing your own master pages.</span></span> <span data-ttu-id="d932c-210">HTML を自由に編集したり、Web コントロールや ContentPlaceHolders をマスターページに追加したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="d932c-210">Feel free to edit the HTML or to add additional Web controls or ContentPlaceHolders to the master page.</span></span>

> [!NOTE]
> <span data-ttu-id="d932c-211">マスターページをデザインするときは、マスターページに Web フォームが含まれていることと、少なくとも1つの ContentPlaceHolder コントロールがこの Web フォーム内に表示されていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="d932c-211">When designing a master page make sure that the master page contains a Web Form and that at least one ContentPlaceHolder control appears within this Web Form.</span></span>

### <a name="creating-a-simple-site-layout"></a><span data-ttu-id="d932c-212">単純なサイトレイアウトの作成</span><span class="sxs-lookup"><span data-stu-id="d932c-212">Creating a Simple Site Layout</span></span>

<span data-ttu-id="d932c-213">次に、`Site.master`の既定の宣言マークアップを展開して、すべてのページが共有するサイトレイアウトを作成します。共通ヘッダー。ナビゲーション、ニュース、およびその他のサイト全体のコンテンツを含む左の列。"電源付き Microsoft ASP.NET" アイコンが表示されるフッター。</span><span class="sxs-lookup"><span data-stu-id="d932c-213">Let's expand `Site.master`'s default declarative markup to create a site layout where all pages share: a common header; a left column with navigation, news and other site-wide content; and a footer that displays the "Powered by Microsoft ASP.NET" icon.</span></span> <span data-ttu-id="d932c-214">図6は、そのコンテンツページの1つがブラウザーで表示されたときのマスターページの最終的な結果を示しています。</span><span class="sxs-lookup"><span data-stu-id="d932c-214">Figure 6 shows the end result of the master page when one of its content pages is viewed through a browser.</span></span> <span data-ttu-id="d932c-215">図6の赤い丸で囲まれた領域は、アクセスされているページ (`Default.aspx`) に固有です。その他のコンテンツはマスターページで定義されるため、すべてのコンテンツページで一貫しています。</span><span class="sxs-lookup"><span data-stu-id="d932c-215">The red circled region in Figure 6 is specific to the page being visited (`Default.aspx`); the other content is defined in the master page and therefore consistent across all content pages.</span></span>

<span data-ttu-id="d932c-216">[マスターページ ![、上、左、および下の部分のマークアップを定義します。](creating-a-site-wide-layout-using-master-pages-cs/_static/image15.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="d932c-216">[![The Master Page Defines the Markup for the Top, Left, and Bottom Portions](creating-a-site-wide-layout-using-master-pages-cs/_static/image15.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image14.png)</span></span>

<span data-ttu-id="d932c-217">**図 06**: マスターページでは、上、左、下の部分のマークアップを定義します ([クリックすると、フルサイズの画像が表示](creating-a-site-wide-layout-using-master-pages-cs/_static/image16.png)されます)</span><span class="sxs-lookup"><span data-stu-id="d932c-217">**Figure 06**: The Master Page Defines the Markup for the Top, Left, and Bottom Portions ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image16.png))</span></span>

<span data-ttu-id="d932c-218">図6に示されているサイトレイアウトを実現するには、まず `Site.master` マスターページを更新して、次の宣言型マークアップが含まれるようにします。</span><span class="sxs-lookup"><span data-stu-id="d932c-218">To achieve the site layout shown in Figure 6, start by updating the `Site.master` master page so that it contains the following declarative markup:</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample2.aspx)]

<span data-ttu-id="d932c-219">マスターページのレイアウトは、一連の `<div>` HTML 要素を使用して定義されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-219">The master page's layout is defined using a series of `<div>` HTML elements.</span></span> <span data-ttu-id="d932c-220">`topContent` `<div>` には、各ページの上部に表示されるマークアップが含まれています。また、`mainContent`、`leftContent`、および `footerContent` `<div>` を使用して、ページのコンテンツ、左の列、および "機能強化 Microsoft ASP.NET" アイコンをそれぞれ表示します。</span><span class="sxs-lookup"><span data-stu-id="d932c-220">The `topContent` `<div>` contains the markup that appears at the top of each page, while the `mainContent`, `leftContent`, and `footerContent` `<div>` s are used to display the page's content, the left column, and the "Powered by Microsoft ASP.NET" icon, respectively.</span></span> <span data-ttu-id="d932c-221">これらの `<div>` 要素を追加するだけでなく、プライマリ ContentPlaceHolder コントロールの `ID` プロパティの名前も `ContentPlaceHolder1` から `MainContent`に変更しました。</span><span class="sxs-lookup"><span data-stu-id="d932c-221">In addition to adding these `<div>` elements, I also renamed the `ID` property of the primary ContentPlaceHolder control from `ContentPlaceHolder1` to `MainContent`.</span></span>

<span data-ttu-id="d932c-222">これらの類別された `<div>` 要素の書式設定とレイアウトの規則は、[カスケードスタイルシート (CSS)](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)ファイル `Styles.css`に記載されています。このファイルは、マスターページの &lt;ヘッド&gt; 要素の &lt;リンク&gt; 要素によって指定されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-222">The formatting and layout rules for these assorted `<div>` elements is spelled out in the [Cascading Stylesheet (CSS)](http://en.wikipedia.org/wiki/Cascading_Style_Sheets) file `Styles.css`, which is specified via a &lt;link&gt; element in the master page's &lt;head&gt; element.</span></span> <span data-ttu-id="d932c-223">これらのさまざまな規則では、上記の各 `<div>` 要素の外観を定義します。</span><span class="sxs-lookup"><span data-stu-id="d932c-223">These various rules define the look and feel of each `<div>` element noted above.</span></span> <span data-ttu-id="d932c-224">たとえば、"マスターページチュートリアル" のテキストとリンクを表示する `topContent` `<div>` 要素には、`Styles.css` で次のように指定された書式規則があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-224">For example, the `topContent` `<div>` element, which displays the "Master Pages Tutorials" text and link, has its formatting rules specified in `Styles.css` as follows:</span></span>

[!code-css[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample3.css)]

<span data-ttu-id="d932c-225">コンピューターに従っている場合は、このチュートリアルに付属するコードをダウンロードし、`Styles.css` ファイルをプロジェクトに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-225">If you are following along at your computer, you will need to download this tutorial's accompanying code and add the `Styles.css` file to your project.</span></span> <span data-ttu-id="d932c-226">同様に、Images という名前のフォルダーを作成し、ダウンロードしたデモ web サイトからプロジェクトに "Microsoft ASP.NET" をコピーすることも必要になります。</span><span class="sxs-lookup"><span data-stu-id="d932c-226">Similarly, you will also need to create a folder named Images and copy the "Powered by Microsoft ASP.NET" icon from the downloaded demo website to your project.</span></span>

> [!NOTE]
> <span data-ttu-id="d932c-227">CSS と web ページの書式設定の詳細については、この記事では説明しません。</span><span class="sxs-lookup"><span data-stu-id="d932c-227">A discussion of CSS and web page formatting is beyond the scope of this article.</span></span> <span data-ttu-id="d932c-228">CSS の詳細については、 [W3Schools.com](http://www.w3schools.com/)の[css チュートリアル](http://www.w3schools.com/css/default.asp)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d932c-228">For more on CSS, check out the [CSS Tutorials](http://www.w3schools.com/css/default.asp) at [W3Schools.com](http://www.w3schools.com/).</span></span> <span data-ttu-id="d932c-229">また、このチュートリアルの付随するコードをダウンロードし、`Styles.css` の CSS 設定を使用して、さまざまな書式規則の効果を確認することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d932c-229">I also encourage you to download this tutorial's accompanying code and play with the CSS settings in `Styles.css` to see the effects of different formatting rules.</span></span>

### <a name="creating-a-master-page-using-an-existing-design-template"></a><span data-ttu-id="d932c-230">既存のデザインテンプレートを使用してマスターページを作成する</span><span class="sxs-lookup"><span data-stu-id="d932c-230">Creating a Master Page Using an Existing Design Template</span></span>

<span data-ttu-id="d932c-231">長年にわたり、小規模から中規模の企業向けに、多数の ASP.NET web アプリケーションを構築しました。</span><span class="sxs-lookup"><span data-stu-id="d932c-231">Over the years I've built a number of ASP.NET web applications for small- to medium-sized companies.</span></span> <span data-ttu-id="d932c-232">一部のクライアントには、使用したい既存のサイトレイアウトがあります。他の人は、有能なグラフィックスデザイナーを採用しています。</span><span class="sxs-lookup"><span data-stu-id="d932c-232">Some of my clients had an existing site layout they wanted to use; others hired a competent graphics designer.</span></span> <span data-ttu-id="d932c-233">Web サイトのレイアウトを設計するためのいくつかの委任。</span><span class="sxs-lookup"><span data-stu-id="d932c-233">A few entrusted me to design the website layout.</span></span> <span data-ttu-id="d932c-234">図6でわかるように、プログラマが web サイトのレイアウトを設計するための作業は、一般に、医師が税金を出している間にオープン・ハートの手術を行うようにしてください。</span><span class="sxs-lookup"><span data-stu-id="d932c-234">As you can tell by Figure 6, tasking a programmer to design a website's layout is usually as wise as having your accountant perform open-heart surgery while your doctor does your taxes.</span></span>

<span data-ttu-id="d932c-235">幸いなことに、HTML デザインテンプレートを無料で提供する web サイトがたくさんあります。 Google からは、"無料の web サイトテンプレート" という検索用語に対して600万を超える結果が返されました。</span><span class="sxs-lookup"><span data-stu-id="d932c-235">Fortunately, there are innumerous websites that offer free HTML design templates - Google returned more than six million results for the search term "free website templates."</span></span> <span data-ttu-id="d932c-236">お気に入りの1つは[OpenDesigns.org](http://opendesigns.org/)です。好みの web サイトテンプレートが見つかったら、web サイトプロジェクトに CSS ファイルとイメージを追加し、そのテンプレートの HTML をマスターページに統合します。</span><span class="sxs-lookup"><span data-stu-id="d932c-236">One of my favorite ones is [OpenDesigns.org](http://opendesigns.org/). Once you find a website template you like, add the CSS files and images to your website project and integrate the template's HTML into your master page.</span></span>

> [!NOTE]
> <span data-ttu-id="d932c-237">Microsoft では、Visual Studio の [新しい Web サイト] ダイアログボックスに統合される、[無料の ASP.NET Design スタートキットテンプレート](https://msdn.microsoft.com/asp.net/aa336613.aspx)も多数用意されています。</span><span class="sxs-lookup"><span data-stu-id="d932c-237">Microsoft also offers a number of [free ASP.NET Design Start Kit Templates](https://msdn.microsoft.com/asp.net/aa336613.aspx) that integrate into the New Web Site dialog box in Visual Studio.</span></span>

## <a name="step-2-creating-associated-content-pages"></a><span data-ttu-id="d932c-238">手順 2: 関連するコンテンツページを作成する</span><span class="sxs-lookup"><span data-stu-id="d932c-238">Step 2: Creating Associated Content Pages</span></span>

<span data-ttu-id="d932c-239">マスターページを作成したので、マスターページにバインドされている ASP.NET ページの作成を開始できます。</span><span class="sxs-lookup"><span data-stu-id="d932c-239">With the master page created, we are ready to start creating ASP.NET pages that are bound to the master page.</span></span> <span data-ttu-id="d932c-240">このようなページは、*コンテンツページ*と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="d932c-240">Such pages are referred to as *content pages*.</span></span>

<span data-ttu-id="d932c-241">新しい ASP.NET ページをプロジェクトに追加し、`Site.master` マスターページにバインドしてみましょう。</span><span class="sxs-lookup"><span data-stu-id="d932c-241">Let's add a new ASP.NET page to the project and bind it to the `Site.master` master page.</span></span> <span data-ttu-id="d932c-242">ソリューションエクスプローラーでプロジェクト名を右クリックし、[新しい項目の追加] オプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="d932c-242">Right-click on the project name in Solution Explorer and choose the Add New Item option.</span></span> <span data-ttu-id="d932c-243">[Web フォーム] テンプレートを選択して `About.aspx`名前を入力し、図7に示すように [マスターページの選択] チェックボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="d932c-243">Select the Web Form template, enter the name `About.aspx`, and then check the "Select master page" checkbox as shown in Figure 7.</span></span> <span data-ttu-id="d932c-244">この操作を行うと、[マスターページの選択] ダイアログボックスが表示されます (図8を参照)。ここで、使用するマスターページを選択できます。</span><span class="sxs-lookup"><span data-stu-id="d932c-244">Doing so will display the Select a Master Page dialog box (see Figure 8) from where you can choose the master page to use.</span></span>

> [!NOTE]
> <span data-ttu-id="d932c-245">Web サイトプロジェクトモデルではなく、Web アプリケーションプロジェクトモデルを使用して ASP.NET web サイトを作成した場合は、図7に示すように、[新しい項目の追加] ダイアログボックスの [マスターページの選択] チェックボックスは表示されません。</span><span class="sxs-lookup"><span data-stu-id="d932c-245">If you created your ASP.NET website using the Web Application Project model instead of the Web Site Project model you will not see the "Select master page" checkbox in the Add New Item dialog box shown in Figure 7.</span></span> <span data-ttu-id="d932c-246">Web アプリケーションプロジェクトモデルを使用するときにコンテンツページを作成するには、web フォームテンプレートではなく、Web コンテンツフォームテンプレートを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-246">To create a content page when using the Web Application Project model you must choose the Web Content Form template instead of the Web Form template.</span></span> <span data-ttu-id="d932c-247">[Web コンテンツフォーム] テンプレートを選択し、[追加] をクリックすると、図8に示されているのと同じ [マスターページの選択] ダイアログボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-247">After selecting the Web Content Form template and clicking Add, the same Select a Master Page dialog box shown in Figure 8 will appear.</span></span>

<span data-ttu-id="d932c-248">[新しいコンテンツページを追加 ![には](creating-a-site-wide-layout-using-master-pages-cs/_static/image18.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="d932c-248">[![Add a New Content Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image18.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image17.png)</span></span>

<span data-ttu-id="d932c-249">**図 07**: 新しいコンテンツページを追加[する (クリックすると、フルサイズの画像が表示](creating-a-site-wide-layout-using-master-pages-cs/_static/image19.png)される)</span><span class="sxs-lookup"><span data-stu-id="d932c-249">**Figure 07**: Add a New Content Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image19.png))</span></span>

<span data-ttu-id="d932c-250">[[] ![選択します。](creating-a-site-wide-layout-using-master-pages-cs/_static/image21.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="d932c-250">[![Select the Site.master Master Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image21.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image20.png)</span></span>

<span data-ttu-id="d932c-251">**図 08**: `Site.master` マスターページを選択[する (クリックすると、フルサイズの画像が表示](creating-a-site-wide-layout-using-master-pages-cs/_static/image22.png)されます)</span><span class="sxs-lookup"><span data-stu-id="d932c-251">**Figure 08**: Select the `Site.master` Master Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image22.png))</span></span>

<span data-ttu-id="d932c-252">次の宣言型マークアップに示すように、新しいコンテンツページには `@Page` ディレクティブが含まれています。このディレクティブは、マスターページと、各マスターページの ContentPlaceHolder コントロールのコンテンツコントロールを参照します。</span><span class="sxs-lookup"><span data-stu-id="d932c-252">As the following declarative markup shows, a new content page contains a `@Page` directive that points back to its master page and a Content control for each of the master page's ContentPlaceHolder controls.</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample4.aspx)]

> [!NOTE]
> <span data-ttu-id="d932c-253">手順 1. の [単純なサイトレイアウトの作成] セクションで、`ContentPlaceHolder1` 名前を `MainContent`に変更しました。</span><span class="sxs-lookup"><span data-stu-id="d932c-253">In the "Creating a Simple Site Layout" section in Step 1 I renamed `ContentPlaceHolder1` to `MainContent`.</span></span> <span data-ttu-id="d932c-254">同じ方法でこの ContentPlaceHolder コントロールの `ID` の名前を変更しなかった場合、コンテンツページの宣言型のマークアップは、上に示したマークアップとは若干異なります。</span><span class="sxs-lookup"><span data-stu-id="d932c-254">If you did not rename this ContentPlaceHolder control's `ID` in the same way, your content page's declarative markup will differ slightly from the markup shown above.</span></span> <span data-ttu-id="d932c-255">つまり、2番目のコンテンツコントロールの `ContentPlaceHolderID` には、マスターページ内の対応する ContentPlaceHolder コントロールの `ID` が反映されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-255">Namely, the second Content control's `ContentPlaceHolderID` will reflect the `ID` of the corresponding ContentPlaceHolder control in your master page.</span></span>

<span data-ttu-id="d932c-256">コンテンツページをレンダリングする場合、ASP.NET エンジンは、ページのコンテンツコントロールとそのマスターページの ContentPlaceHolder コントロールをヒューズする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-256">When rendering a content page, the ASP.NET engine must fuse the page's Content controls with its master page's ContentPlaceHolder controls.</span></span> <span data-ttu-id="d932c-257">ASP.NET エンジンは、`@Page` ディレクティブの `MasterPageFile` 属性からコンテンツページのマスターページを決定します。</span><span class="sxs-lookup"><span data-stu-id="d932c-257">The ASP.NET engine determines the content page's master page from the `@Page` directive's `MasterPageFile` attribute.</span></span> <span data-ttu-id="d932c-258">上のマークアップに示すように、このコンテンツページは `~/Site.master`にバインドされています。</span><span class="sxs-lookup"><span data-stu-id="d932c-258">As the above markup shows, this content page is bound to `~/Site.master`.</span></span>

<span data-ttu-id="d932c-259">マスターページには `head` と `MainContent` の2つの ContentPlaceHolder コントロールがあるため、Visual Web Developer では2つのコンテンツコントロールが生成されました。</span><span class="sxs-lookup"><span data-stu-id="d932c-259">Because the master page has two ContentPlaceHolder controls - `head` and `MainContent` - Visual Web Developer generated two Content controls.</span></span> <span data-ttu-id="d932c-260">各コンテンツコントロールは、`ContentPlaceHolderID` プロパティを介して特定の ContentPlaceHolder を参照します。</span><span class="sxs-lookup"><span data-stu-id="d932c-260">Each Content control references a particular ContentPlaceHolder via its `ContentPlaceHolderID` property.</span></span>

<span data-ttu-id="d932c-261">以前のサイト全体のテンプレート手法を使用した場合、デザイン時サポートがあります。</span><span class="sxs-lookup"><span data-stu-id="d932c-261">Where master pages shine over previous site-wide template techniques is with their design-time support.</span></span> <span data-ttu-id="d932c-262">図9に、Visual Web Developer のデザインビューで表示する場合の `About.aspx` コンテンツページを示します。</span><span class="sxs-lookup"><span data-stu-id="d932c-262">Figure 9 shows the `About.aspx` content page when viewed through Visual Web Developer's Design view.</span></span> <span data-ttu-id="d932c-263">マスターページのコンテンツは表示されていても、グレーで表示され、変更できないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="d932c-263">Note that while the master page content is visible, it is grayed out and cannot be modified.</span></span> <span data-ttu-id="d932c-264">ただし、マスターページの ContentPlaceHolders に対応するコンテンツコントロールは編集できます。</span><span class="sxs-lookup"><span data-stu-id="d932c-264">The Content controls corresponding to the master page's ContentPlaceHolders are, however, editable.</span></span> <span data-ttu-id="d932c-265">他の ASP.NET ページと同様に、ソースビューまたはデザインビューを介して Web コントロールを追加することにより、コンテンツページのインターフェイスを作成できます。</span><span class="sxs-lookup"><span data-stu-id="d932c-265">And just like with any other ASP.NET page, you can create the content page's interface by adding Web controls through the Source or Design views.</span></span>

<span data-ttu-id="d932c-266">[コンテンツページのデザインビューにページ固有のコンテンツとマスターページのコンテンツの両方が表示される ![](creating-a-site-wide-layout-using-master-pages-cs/_static/image24.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="d932c-266">[![The Content Page's Design View Displays Both the Page-Specific and Master Page Contents](creating-a-site-wide-layout-using-master-pages-cs/_static/image24.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image23.png)</span></span>

<span data-ttu-id="d932c-267">**図 09**: コンテンツページのデザインビューにページ固有のコンテンツとマスターページのコンテンツの両方が表示される ([クリックすると、フルサイズの画像が表示](creating-a-site-wide-layout-using-master-pages-cs/_static/image25.png)されます)</span><span class="sxs-lookup"><span data-stu-id="d932c-267">**Figure 09**: The Content Page's Design View Displays Both the Page-Specific and Master Page Contents ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image25.png))</span></span>

### <a name="adding-markup-and-web-controls-to-the-content-page"></a><span data-ttu-id="d932c-268">コンテンツページにマークアップと Web コントロールを追加する</span><span class="sxs-lookup"><span data-stu-id="d932c-268">Adding Markup and Web Controls to the Content Page</span></span>

<span data-ttu-id="d932c-269">`About.aspx` ページのコンテンツを作成します。</span><span class="sxs-lookup"><span data-stu-id="d932c-269">Take a moment to create some content for the `About.aspx` page.</span></span> <span data-ttu-id="d932c-270">図10に示すように、「著者について」という見出しとテキストの段落を入力しましたが、Web コントロールも自由に追加できます。</span><span class="sxs-lookup"><span data-stu-id="d932c-270">As you can see in Figure 10, I entered an "About the Author" heading and a couple of paragraphs of text, but feel free to add Web controls, too.</span></span> <span data-ttu-id="d932c-271">このインターフェイスを作成したら、ブラウザーを使用して `About.aspx` のページにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="d932c-271">After creating this interface, visit the `About.aspx` page through a browser.</span></span>

<span data-ttu-id="d932c-272">[ブラウザーから About .aspx ページにアクセス ![には](creating-a-site-wide-layout-using-master-pages-cs/_static/image27.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="d932c-272">[![Visit the About.aspx Page Through a Browser](creating-a-site-wide-layout-using-master-pages-cs/_static/image27.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image26.png)</span></span>

<span data-ttu-id="d932c-273">**図 10**: ブラウザーを使用して `About.aspx` のページにアクセス[する (クリックすると、フルサイズの画像が表示](creating-a-site-wide-layout-using-master-pages-cs/_static/image28.png)されます)</span><span class="sxs-lookup"><span data-stu-id="d932c-273">**Figure 10**: Visit the `About.aspx` Page Through a Browser ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image28.png))</span></span>

<span data-ttu-id="d932c-274">要求されたコンテンツページとそれに関連付けられているマスターページは、すべて web サーバー上で全体として表示されることを理解しておくことが重要です。</span><span class="sxs-lookup"><span data-stu-id="d932c-274">It is important to understand that the requested content page and its associated master page are fused and rendered as a whole entirely on the web server.</span></span> <span data-ttu-id="d932c-275">その後、エンドユーザーのブラウザーに、結果として、ヒューズが付いた HTML が送信されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-275">The end user's browser is then sent the resulting, fused HTML.</span></span> <span data-ttu-id="d932c-276">これを確認するには、ブラウザーで受信した HTML を表示するには、[表示] メニューの [ソース] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="d932c-276">To verify this, view the HTML received by the browser by going to the View menu and choosing Source.</span></span> <span data-ttu-id="d932c-277">2つの異なる web ページを1つのウィンドウに表示するためのフレームまたはその他の特別な技法はありません。</span><span class="sxs-lookup"><span data-stu-id="d932c-277">Note that there are no frames or any other specialized techniques for displaying two different web pages in a single window.</span></span>

### <a name="binding-a-master-page-to-an-existing-aspnet-page"></a><span data-ttu-id="d932c-278">既存の ASP.NET ページへのマスターページのバインド</span><span class="sxs-lookup"><span data-stu-id="d932c-278">Binding a Master Page to an Existing ASP.NET Page</span></span>

<span data-ttu-id="d932c-279">この手順で説明したように、新しいコンテンツページを ASP.NET web アプリケーションに追加するのは、[マスターページの選択] チェックボックスをオンにしてマスターページを選択するのと同じように簡単です。</span><span class="sxs-lookup"><span data-stu-id="d932c-279">As we saw in this step, adding a new content page to an ASP.NET web application is as easy as checking the "Select master page" checkbox and picking the master page.</span></span> <span data-ttu-id="d932c-280">残念ながら、既存の ASP.NET ページをマスターページに変換するのは簡単ではありません。</span><span class="sxs-lookup"><span data-stu-id="d932c-280">Unfortunately, converting an existing ASP.NET page to a master page is not as easy.</span></span>

<span data-ttu-id="d932c-281">マスターページを既存の ASP.NET ページにバインドするには、次の手順を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-281">To bind a master page to an existing ASP.NET page you need to perform the following steps:</span></span>

1. <span data-ttu-id="d932c-282">ASP.NET ページの `@Page` ディレクティブに `MasterPageFile` 属性を追加して、適切なマスターページをポイントします。</span><span class="sxs-lookup"><span data-stu-id="d932c-282">Add the `MasterPageFile` attribute to the ASP.NET page's `@Page` directive, pointing it to the appropriate master page.</span></span>
2. <span data-ttu-id="d932c-283">マスターページ内の各 ContentPlaceHolders ホルダーのコンテンツコントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="d932c-283">Add Content controls for each of the ContentPlaceHolders in the master page.</span></span>
3. <span data-ttu-id="d932c-284">ASP.NET ページの既存のコンテンツを選択的に切り取って、適切なコンテンツコントロールに貼り付けます。</span><span class="sxs-lookup"><span data-stu-id="d932c-284">Selectively cut and paste the ASP.NET page's existing content into the appropriate Content controls.</span></span> <span data-ttu-id="d932c-285">ASP.NET ページには、マスターページで既に表現されているマークアップ (`DOCTYPE`、`<html>` 要素、Web フォームなど) が含まれている可能性があるため、ここでは "選択的" と言います。</span><span class="sxs-lookup"><span data-stu-id="d932c-285">I say "selectively" here because the ASP.NET page likely contains markup that's already expressed by the master page, such as the `DOCTYPE`, the `<html>` element, and the Web Form.</span></span>

<span data-ttu-id="d932c-286">このプロセスの詳細な手順については、「[マスターページとサイトナビゲーション](http://webproject.scottgu.com/CSharp/MasterPages/MasterPages.aspx)[の](https://weblogs.asp.net/scottgu/)使用」チュートリアルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="d932c-286">For step-by-step instructions on this process along with screen shots, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s [Using Master Pages and Site Navigation](http://webproject.scottgu.com/CSharp/MasterPages/MasterPages.aspx) tutorial.</span></span> <span data-ttu-id="d932c-287">これらの手順の詳細については、「マスターページを使用するための `Default.aspx` の更新と `DataSample.aspx`」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="d932c-287">The "Update `Default.aspx` and `DataSample.aspx` to use the Master Page" section details these steps.</span></span>

<span data-ttu-id="d932c-288">既存の ASP.NET ページをコンテンツページに変換するよりも、新しいコンテンツページを作成する方がはるかに簡単であるため、新しい ASP.NET web サイトを作成するときは常に、マスターページをサイトに追加することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d932c-288">Because it is much easier to create new content pages than it is to convert existing ASP.NET pages into content pages, I recommend that whenever you create a new ASP.NET website add a master page to the site.</span></span> <span data-ttu-id="d932c-289">すべての新しい ASP.NET ページをこのマスターページにバインドします。</span><span class="sxs-lookup"><span data-stu-id="d932c-289">Bind all new ASP.NET pages to this master page.</span></span> <span data-ttu-id="d932c-290">最初のマスターページが非常に単純であるか、またはシンプルであるかは心配しないでください。マスターページは後で更新できます。</span><span class="sxs-lookup"><span data-stu-id="d932c-290">Don't worry if the initial master page is very simple or plain; you can update the master page later.</span></span>

> [!NOTE]
> <span data-ttu-id="d932c-291">新しい ASP.NET アプリケーションを作成するときに、Visual Web Developer によって、マスターページにバインドされていない `Default.aspx` ページが追加されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-291">When creating a new ASP.NET application, Visual Web Developer adds a `Default.aspx` page that isn't bound to a master page.</span></span> <span data-ttu-id="d932c-292">既存の ASP.NET ページをコンテンツページに変換する場合は、`Default.aspx`で実行します。</span><span class="sxs-lookup"><span data-stu-id="d932c-292">If you want to practice converting an existing ASP.NET page into a content page, go ahead and do so with `Default.aspx`.</span></span> <span data-ttu-id="d932c-293">または、`Default.aspx` 削除してからもう一度追加することもできますが、今回は [マスターページの選択] チェックボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="d932c-293">Alternatively, you can delete `Default.aspx` and then re-add it, but this time checking the "Select master page" checkbox.</span></span>

## <a name="step-3-updating-the-master-pages-markup"></a><span data-ttu-id="d932c-294">手順 3: マスターページのマークアップの更新</span><span class="sxs-lookup"><span data-stu-id="d932c-294">Step 3: Updating the Master Page's Markup</span></span>

<span data-ttu-id="d932c-295">マスターページの主な利点の1つは、1つのマスターページを使用して、サイト上の多数のページの全体的なレイアウトを定義できることです。</span><span class="sxs-lookup"><span data-stu-id="d932c-295">One of the primary benefits of master pages is that a single master page may be used to define the overall layout for numerous pages on the site.</span></span> <span data-ttu-id="d932c-296">そのため、サイトの外観を更新するには、1つのファイル (マスターページ) を更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-296">Therefore, updating the site's look and feel requires updating a single file - the master page.</span></span>

<span data-ttu-id="d932c-297">この動作を説明するために、マスターページを更新して、現在の日付を左側の列の上部に追加してみましょう。</span><span class="sxs-lookup"><span data-stu-id="d932c-297">To illustrate this behavior, let's update our master page to include the current date in at the top of the left column.</span></span> <span data-ttu-id="d932c-298">`DateDisplay` という名前のラベルを `leftContent` `<div>`に追加します。</span><span class="sxs-lookup"><span data-stu-id="d932c-298">Add a Label named `DateDisplay` to the `leftContent` `<div>`.</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="d932c-299">次に、マスターページの `Page_Load` イベントハンドラーを作成し、次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="d932c-299">Next, create a `Page_Load` event handler for the master page and add the following code:</span></span>

[!code-csharp[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample6.cs)]

<span data-ttu-id="d932c-300">上のコードでは、ラベルの `Text` プロパティが、曜日、月の名前、および2桁の日として書式設定された現在の日付と時刻に設定されています (図11を参照)。</span><span class="sxs-lookup"><span data-stu-id="d932c-300">The above code sets the Label's `Text` property to the current date and time formatted as the day of the week, the name of the month, and the two-digit day (see Figure 11).</span></span> <span data-ttu-id="d932c-301">この変更により、コンテンツページのいずれかを再利用します。</span><span class="sxs-lookup"><span data-stu-id="d932c-301">With this change, revisit one of your content pages.</span></span> <span data-ttu-id="d932c-302">図11に示すように、結果として得られるマークアップは、マスターページへの変更を含むように直ちに更新されます。</span><span class="sxs-lookup"><span data-stu-id="d932c-302">As Figure 11 shows, the resulting markup is immediately updated to include the change to the master page.</span></span>

<span data-ttu-id="d932c-303">[[コンテンツ] ページを表示すると、マスターページへの変更が反映され ![](creating-a-site-wide-layout-using-master-pages-cs/_static/image30.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="d932c-303">[![The Changes to the Master Page are Reflected When Viewing the a Content Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image30.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image29.png)</span></span>

<span data-ttu-id="d932c-304">**図 11**: コンテンツページを表示するときにマスターページへの変更が反映される ([クリックしてフルサイズの画像を表示する](creating-a-site-wide-layout-using-master-pages-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="d932c-304">**Figure 11**: The Changes to the Master Page are Reflected When Viewing the a Content Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image31.png))</span></span>

> [!NOTE]
> <span data-ttu-id="d932c-305">この例に示すように、マスターページには、サーバー側の Web コントロール、コード、およびイベントハンドラーが含まれている場合があります。</span><span class="sxs-lookup"><span data-stu-id="d932c-305">As this example illustrates, master pages may contain server-side Web controls, code, and event handlers.</span></span>

## <a name="summary"></a><span data-ttu-id="d932c-306">まとめ</span><span class="sxs-lookup"><span data-stu-id="d932c-306">Summary</span></span>

<span data-ttu-id="d932c-307">マスターページを使用すると、ASP.NET の開発者は、簡単に更新できる一貫したサイト全体のレイアウトを設計できます。</span><span class="sxs-lookup"><span data-stu-id="d932c-307">Master pages enable ASP.NET developers to design a consistent site-wide layout that is easily updateable.</span></span> <span data-ttu-id="d932c-308">Visual Web Developer では、豊富なデザイン時サポートが提供されているため、マスターページとそれに関連するコンテンツページを作成するのは簡単です。</span><span class="sxs-lookup"><span data-stu-id="d932c-308">Creating master pages and their associated content pages is as simple as creating standard ASP.NET pages, as Visual Web Developer offers rich design-time support.</span></span>

<span data-ttu-id="d932c-309">このチュートリアルで作成したマスターページの例には、`head` と `MainContent`という2つの ContentPlaceHolder コントロールがありました。</span><span class="sxs-lookup"><span data-stu-id="d932c-309">The master page example we created in this tutorial had two ContentPlaceHolder controls, `head` and `MainContent`.</span></span> <span data-ttu-id="d932c-310">ただし、コンテンツページでは、`MainContent` ContentPlaceHolder コントロールにマークアップを指定しただけです。</span><span class="sxs-lookup"><span data-stu-id="d932c-310">We only specified markup for the `MainContent` ContentPlaceHolder control in our content page, however.</span></span> <span data-ttu-id="d932c-311">次のチュートリアルでは、コンテンツページの複数のコンテンツコントロールの使用について説明します。</span><span class="sxs-lookup"><span data-stu-id="d932c-311">In the next tutorial we look at using multiple Content controls in the content page.</span></span> <span data-ttu-id="d932c-312">また、マスターページ内のコンテンツコントロールの既定のマークアップを定義する方法に加えて、マスターページで定義されている既定のマークアップを使用したり、コンテンツページからカスタムマークアップを提供したりする方法についても説明します。</span><span class="sxs-lookup"><span data-stu-id="d932c-312">We also see how to define default markup for Content controls within the master page, as well as how to toggle between using the default markup defined in the master page and providing custom markup from the content page.</span></span>

<span data-ttu-id="d932c-313">プログラミングを楽しんでください。</span><span class="sxs-lookup"><span data-stu-id="d932c-313">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="d932c-314">参考資料</span><span class="sxs-lookup"><span data-stu-id="d932c-314">Further Reading</span></span>

<span data-ttu-id="d932c-315">このチュートリアルで説明しているトピックの詳細については、次のリソースを参照してください。</span><span class="sxs-lookup"><span data-stu-id="d932c-315">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="d932c-316">ASP.NET for Designer: Web 標準を使用して ASP.NET Websites を構築するための無料の設計テンプレートとガイダンス</span><span class="sxs-lookup"><span data-stu-id="d932c-316">ASP.NET for Designers: Free Design Templates and Guidance on Building ASP.NET Websites Using Web Standards</span></span>](https://msdn.microsoft.com/asp.net/aa336602.aspx)
- [<span data-ttu-id="d932c-317">ASP.NET マスターページの概要</span><span class="sxs-lookup"><span data-stu-id="d932c-317">ASP.NET Master Pages Overview</span></span>](https://msdn.microsoft.com/library/wtxbf3hh.aspx)
- [<span data-ttu-id="d932c-318">カスケードスタイルシート (CSS) のチュートリアル</span><span class="sxs-lookup"><span data-stu-id="d932c-318">Cascading Stylesheets (CSS) Tutorials</span></span>](http://www.w3schools.com/css/default.asp)
- [<span data-ttu-id="d932c-319">ページのタイトルを動的に設定する</span><span class="sxs-lookup"><span data-stu-id="d932c-319">Dynamically Setting the Page's Title</span></span>](http://aspnet.4guysfromrolla.com/articles/051006-1.aspx)
- [<span data-ttu-id="d932c-320">ASP.NET のマスターページ</span><span class="sxs-lookup"><span data-stu-id="d932c-320">Master Pages in ASP.NET</span></span>](http://www.odetocode.com/articles/419.aspx)
- [<span data-ttu-id="d932c-321">マスターページのクイックスタートチュートリアル</span><span class="sxs-lookup"><span data-stu-id="d932c-321">Master Pages QuickStart Tutorials</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/masterpages/default.aspx)

### <a name="about-the-author"></a><span data-ttu-id="d932c-322">著者について</span><span class="sxs-lookup"><span data-stu-id="d932c-322">About the Author</span></span>

<span data-ttu-id="d932c-323">1998以降、Microsoft の Web テクノロジを使用して、 [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)(複数の asp/創設者4GuysFromRolla.com の執筆者) が Microsoft の Web テクノロジを使用しています。</span><span class="sxs-lookup"><span data-stu-id="d932c-323">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="d932c-324">Scott は、独立したコンサルタント、トレーナー、およびライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="d932c-324">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="d932c-325">彼の最新の書籍は[ *、ASP.NET 3.5 を24時間以内に教え*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ています。</span><span class="sxs-lookup"><span data-stu-id="d932c-325">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="d932c-326">Scott は、 [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)またはブログで[http://ScottOnWriting.NET](http://scottonwriting.net/)にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="d932c-326">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="d932c-327">ありがとうございました。</span><span class="sxs-lookup"><span data-stu-id="d932c-327">Special Thanks To</span></span>

<span data-ttu-id="d932c-328">今後の MSDN 記事を確認することに興味がありますか?</span><span class="sxs-lookup"><span data-stu-id="d932c-328">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="d932c-329">その場合は、 [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)の行を削除します。</span><span class="sxs-lookup"><span data-stu-id="d932c-329">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="d932c-330">Next</span><span class="sxs-lookup"><span data-stu-id="d932c-330">Next</span></span>](multiple-contentplaceholders-and-default-content-cs.md)
