---
uid: web-pages/overview/ui-layouts-and-themes/9-working-with-images
title: ASP.NET Web ページ (Razor) サイトでのイメージの操作 |Microsoft Docs
author: Rick-Anderson
description: この章では、web サイトでイメージを追加、表示、操作する方法 (サイズ変更、反転、透かしの追加) について説明します。
ms.author: riande
ms.date: 02/20/2014
ms.assetid: 778c4e58-4372-4d25-bab9-aec4a8d8e38d
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/9-working-with-images
msc.type: authoredcontent
ms.openlocfilehash: 53514b3c314fc182a43c82974ffcfa8158a636a1
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78512878"
---
# <a name="working-with-images-in-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="6bde8-103">ASP.NET Web ページ (Razor) サイトでのイメージの操作</span><span class="sxs-lookup"><span data-stu-id="6bde8-103">Working with Images in an ASP.NET Web Pages (Razor) Site</span></span>

<span data-ttu-id="6bde8-104">[Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="6bde8-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="6bde8-105">この記事では、ASP.NET Web ページ (Razor) web サイトでイメージを追加、表示、操作する方法 (サイズ変更、反転、透かしの追加) について説明します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-105">This article shows you how to add, display, and manipulate images (resize, flip, and add watermarks) in an ASP.NET Web Pages (Razor) website.</span></span>
> 
> <span data-ttu-id="6bde8-106">ここでは、次の内容について学習します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-106">What you'll learn:</span></span>
> 
> - <span data-ttu-id="6bde8-107">ページにイメージを動的に追加する方法。</span><span class="sxs-lookup"><span data-stu-id="6bde8-107">How to add an image to a page dynamically.</span></span>
> - <span data-ttu-id="6bde8-108">ユーザーがイメージをアップロードできるようにする方法。</span><span class="sxs-lookup"><span data-stu-id="6bde8-108">How to let users upload an image.</span></span>
> - <span data-ttu-id="6bde8-109">イメージのサイズを変更する方法。</span><span class="sxs-lookup"><span data-stu-id="6bde8-109">How to resize an image.</span></span>
> - <span data-ttu-id="6bde8-110">画像を反転または回転させる方法。</span><span class="sxs-lookup"><span data-stu-id="6bde8-110">How to flip or rotate an image.</span></span>
> - <span data-ttu-id="6bde8-111">画像にウォーターマークを追加する方法。</span><span class="sxs-lookup"><span data-stu-id="6bde8-111">How to add a watermark to an image.</span></span>
> - <span data-ttu-id="6bde8-112">画像をウォーターマークとして使用する方法。</span><span class="sxs-lookup"><span data-stu-id="6bde8-112">How to use an image as a watermark.</span></span>
> 
> <span data-ttu-id="6bde8-113">この記事で紹介する ASP.NET プログラミング機能を次に示します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-113">These are the ASP.NET programming features introduced in the article:</span></span>
> 
> - <span data-ttu-id="6bde8-114">`WebImage` ヘルパー。</span><span class="sxs-lookup"><span data-stu-id="6bde8-114">The `WebImage` helper.</span></span>
> - <span data-ttu-id="6bde8-115">`Path` オブジェクト。パスとファイル名を操作できるメソッドを提供します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-115">The `Path` object, which provides methods that let you manipulate path and file names.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="6bde8-116">このチュートリアルで使用されているソフトウェアのバージョン</span><span class="sxs-lookup"><span data-stu-id="6bde8-116">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="6bde8-117">ASP.NET Web ページ (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="6bde8-117">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="6bde8-118">WebMatrix 2</span><span class="sxs-lookup"><span data-stu-id="6bde8-118">WebMatrix 2</span></span>
>   
> 
> <span data-ttu-id="6bde8-119">このチュートリアルでは、WebMatrix 3 も使用できます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-119">This tutorial also works with WebMatrix 3.</span></span>

<a id="Adding_an_Image"></a>
## <a name="adding-an-image-to-a-web-page-dynamically"></a><span data-ttu-id="6bde8-120">Web ページへのイメージの動的な追加</span><span class="sxs-lookup"><span data-stu-id="6bde8-120">Adding an Image to a Web Page Dynamically</span></span>

<span data-ttu-id="6bde8-121">Web サイトの開発中に、web サイトや個々のページに画像を追加できます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-121">You can add images to your website and to individual pages while you're developing the website.</span></span> <span data-ttu-id="6bde8-122">また、ユーザーがイメージをアップロードできるようにすることもできます。これは、プロファイルの写真を追加するなどのタスクに便利な場合があります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-122">You can also let users upload images, which might be useful for tasks like letting them add a profile photo.</span></span>

<span data-ttu-id="6bde8-123">イメージがサイトで既に使用可能であり、ページに表示する場合は、次のような HTML `<img>` 要素を使用します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-123">If an image is already available on your site and you just want to display it on a page, you use an HTML `<img>` element like this:</span></span>

[!code-html[Main](9-working-with-images/samples/sample1.html)]

<span data-ttu-id="6bde8-124">ただし、イメージを動的&#8212;に表示できる必要がある場合もあります。これは、ページが実行されるまでどの画像を表示するかがわからないことがあります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-124">Sometimes, though, you need to be able to display images dynamically &#8212; that is, you don't know what image to display until the page is running.</span></span>

<span data-ttu-id="6bde8-125">このセクションの手順では、イメージ名の一覧からユーザーがイメージファイル名を指定するときにイメージを表示する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-125">The procedure in this section shows how to display an image on the fly where users specify the image file name from a list of image names.</span></span> <span data-ttu-id="6bde8-126">ドロップダウンリストからイメージの名前を選択すると、ページを送信するときに、選択したイメージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-126">They select the name of the image from a drop-down list, and when they submit the page, the image they selected is displayed.</span></span>

<span data-ttu-id="6bde8-127">![絵](9-working-with-images/_static/image1.jpg "ch9images-1")</span><span class="sxs-lookup"><span data-stu-id="6bde8-127">![[image]](9-working-with-images/_static/image1.jpg "ch9images-1.jpg")</span></span>

1. <span data-ttu-id="6bde8-128">WebMatrix で、新しい web サイトを作成します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-128">In WebMatrix, create a new website.</span></span>
2. <span data-ttu-id="6bde8-129">*Dynamicimage. cshtml*という名前の新しいページを追加します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-129">Add a new page named *DynamicImage.cshtml*.</span></span>
3. <span data-ttu-id="6bde8-130">Web サイトのルートフォルダーに新しいフォルダーを追加し、「 *images*」という名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-130">In the root folder of the website, add a new folder and name it *images*.</span></span>
4. <span data-ttu-id="6bde8-131">先ほど作成した*images*フォルダーに4つのイメージを追加します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-131">Add four images to the *images* folder you just created.</span></span> <span data-ttu-id="6bde8-132">(便利なイメージであれば、1ページに収めることができます)。画像の名前を*Photo1*、 *Photo2*、 *Photo3*、および*Photo4*に変更します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-132">(Any images you have handy will do, but they should fit onto a page.) Rename the images *Photo1.jpg*, *Photo2.jpg*, *Photo3.jpg*, and *Photo4.jpg*.</span></span> <span data-ttu-id="6bde8-133">(この手順では*Photo4*を使用しませんが、この記事の後半で使用します)。</span><span class="sxs-lookup"><span data-stu-id="6bde8-133">(You won't use *Photo4.jpg* in this procedure, but you'll use it later in the article.)</span></span>
5. <span data-ttu-id="6bde8-134">4つのイメージが読み取り専用としてマークされていないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-134">Verify that the four images are not marked as read-only.</span></span>
6. <span data-ttu-id="6bde8-135">ページ内の既存のコンテンツを次の内容に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-135">Replace the existing content in the page with the following:</span></span>

    [!code-cshtml[Main](9-working-with-images/samples/sample2.cshtml)]

    <span data-ttu-id="6bde8-136">ページの本文には、`photoChoice`という名前のドロップダウンリスト (`<select>` 要素) があります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-136">The body of the page has a drop-down list (a `<select>` element) that's named `photoChoice`.</span></span> <span data-ttu-id="6bde8-137">この一覧には3つのオプションがあり、各リストオプションの `value` 属性には、 *images*フォルダーに配置したいずれかのイメージの名前が含まれています。</span><span class="sxs-lookup"><span data-stu-id="6bde8-137">The list has three options, and the `value` attribute of each list option has the name of one of the images that you put in the *images* folder.</span></span> <span data-ttu-id="6bde8-138">基本的に、この一覧では、ユーザーは &quot;Photo 1&quot;のようなフレンドリ名を選択できます。その後、ページの送信時に *.jpg*ファイル名が渡されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-138">Essentially, the list lets the user select a friendly name like &quot;Photo 1&quot;, and it then passes the *.jpg* file name when the page is submitted.</span></span>

    <span data-ttu-id="6bde8-139">コードでは、`Request["photoChoice"]`を読み取ることで、一覧からユーザーの選択を取得できます (つまり、イメージファイル名)。</span><span class="sxs-lookup"><span data-stu-id="6bde8-139">In the code, you can get the user's selection (in other words, the image file name) from the list by reading `Request["photoChoice"]`.</span></span> <span data-ttu-id="6bde8-140">最初に選択範囲があるかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-140">You first see if there's a selection at all.</span></span> <span data-ttu-id="6bde8-141">存在する場合は、イメージのフォルダー名とユーザーのイメージファイル名で構成されるイメージのパスを作成します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-141">If there is, you construct a path for the image that consists of the name of the folder for the images and the user's image file name.</span></span> <span data-ttu-id="6bde8-142">(パスを構築しようとしたときに `Request["photoChoice"]`に何もなかった場合は、エラーが発生します)。この結果、次のような相対パスになります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-142">(If you tried to construct a path but there was nothing in `Request["photoChoice"]`, you'd get an error.) This results in a relative path like this:</span></span>

    <span data-ttu-id="6bde8-143">*images/Photo1*</span><span class="sxs-lookup"><span data-stu-id="6bde8-143">*images/Photo1.jpg*</span></span>

    <span data-ttu-id="6bde8-144">パスは `imagePath` という名前の変数に格納されます。この変数は後で必要になります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-144">The path is stored in variable named `imagePath` that you'll need later in the page.</span></span>

    <span data-ttu-id="6bde8-145">本文には、ユーザーが選択したイメージを表示するために使用される `<img>` 要素もあります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-145">In the body, there's also an `<img>` element that's used to display the image that the user picked.</span></span> <span data-ttu-id="6bde8-146">`src` 属性は、静的要素を表示する場合と同様に、ファイル名または URL に設定されていません。</span><span class="sxs-lookup"><span data-stu-id="6bde8-146">The `src` attribute isn't set to a file name or URL, like you'd do to display a static element.</span></span> <span data-ttu-id="6bde8-147">代わりに、`@imagePath`に設定されています。つまり、コードで設定したパスから値を取得します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-147">Instead, it's set to `@imagePath`, meaning that it gets its value from the path you set in code.</span></span>

    <span data-ttu-id="6bde8-148">ただし、ユーザーが何も選択していないため、ページを初めて実行するときは、表示するイメージはありません。</span><span class="sxs-lookup"><span data-stu-id="6bde8-148">The first time that the page runs, though, there's no image to display, because the user hasn't selected anything.</span></span> <span data-ttu-id="6bde8-149">これは通常、`src` 属性が空であり、イメージが赤い &quot;x&quot; として表示されることを意味します (または、イメージが見つからないときにブラウザーでレンダリングされます)。</span><span class="sxs-lookup"><span data-stu-id="6bde8-149">This would normally mean that the `src` attribute would be empty and the image would show up as a red &quot;x&quot; (or whatever the browser renders when it can't find an image).</span></span> <span data-ttu-id="6bde8-150">これを回避するには、`imagePath` 変数に何かが含まれているかどうかをテストする `if` ブロックに `<img>` 要素を配置します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-150">To prevent this, you put the `<img>` element in an `if` block that tests to see whether the `imagePath` variable has anything in it.</span></span> <span data-ttu-id="6bde8-151">ユーザーが選択を行った場合、`imagePath` にはパスが含まれます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-151">If the user made a selection, `imagePath` contains the path.</span></span> <span data-ttu-id="6bde8-152">ユーザーがイメージを選択しなかった場合、またはページを初めて表示する場合は、`<img>` 要素もレンダリングされません。</span><span class="sxs-lookup"><span data-stu-id="6bde8-152">If the user didn't pick an image or if this is the first time the page is displayed, the `<img>` element isn't even rendered.</span></span>
7. <span data-ttu-id="6bde8-153">ファイルを保存し、ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-153">Save the file and run the page in a browser.</span></span> <span data-ttu-id="6bde8-154">(実行する前に、 **[ファイル]** ワークスペースでページが選択されていることを確認してください)。</span><span class="sxs-lookup"><span data-stu-id="6bde8-154">(Make sure the page is selected in the **Files** workspace before you run it.)</span></span>
8. <span data-ttu-id="6bde8-155">ドロップダウンリストからイメージを選択し、 **[サンプルイメージ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="6bde8-155">Select an image from the drop-down list and then click **Sample Image**.</span></span> <span data-ttu-id="6bde8-156">さまざまな選択肢に対して異なるイメージが表示されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-156">Make sure that you see different images for different choices.</span></span>

<a id="Uploading_an_Image"></a>
## <a name="uploading-an-image"></a><span data-ttu-id="6bde8-157">イメージのアップロード</span><span class="sxs-lookup"><span data-stu-id="6bde8-157">Uploading an Image</span></span>

<span data-ttu-id="6bde8-158">前の例では、イメージを動的に表示する方法を示しましたが、web サイトに既に存在していたイメージでのみ動作していました。</span><span class="sxs-lookup"><span data-stu-id="6bde8-158">The previous example showed you how to display an image dynamically, but it worked only with images that were already on your website.</span></span> <span data-ttu-id="6bde8-159">この手順では、ユーザーがイメージをアップロードして、ページに表示する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-159">This procedure shows how to let users upload an image, which is then displayed on the page.</span></span> <span data-ttu-id="6bde8-160">ASP.NET では、イメージの作成、操作、保存を行うことができるメソッドを含む `WebImage` ヘルパーを使用して、すぐにイメージを操作できます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-160">In ASP.NET, you can manipulate images on the fly using the `WebImage` helper, which has methods that let you create, manipulate, and save images.</span></span> <span data-ttu-id="6bde8-161">`WebImage` helper は、 *.jpg*、 *.png*、 *.bmp*など、一般的な種類の web イメージファイルをすべてサポートしています。</span><span class="sxs-lookup"><span data-stu-id="6bde8-161">The `WebImage` helper supports all the common web image file types, including *.jpg*, *.png*, and *.bmp*.</span></span> <span data-ttu-id="6bde8-162">この記事では、 *.jpg*イメージを使用しますが、イメージの種類を使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-162">Throughout this article, you'll use *.jpg* images, but you can use any of the image types.</span></span>

<span data-ttu-id="6bde8-163">![絵](9-working-with-images/_static/image2.jpg "ch9images-2")</span><span class="sxs-lookup"><span data-stu-id="6bde8-163">![[image]](9-working-with-images/_static/image2.jpg "ch9images-2.jpg")</span></span>

1. <span data-ttu-id="6bde8-164">新しいページを追加し、 *UploadImage*という名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-164">Add a new page and name it *UploadImage.cshtml*.</span></span>
2. <span data-ttu-id="6bde8-165">ページ内の既存のコンテンツを次の内容に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-165">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample3.cshtml)]

    <span data-ttu-id="6bde8-166">テキストの本文には、アップロードするファイルをユーザーが選択できるようにする `<input type="file">` 要素があります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-166">The body of the text has an `<input type="file">` element, which lets users select a file to upload.</span></span> <span data-ttu-id="6bde8-167">**[送信]** をクリックすると、選択したファイルがフォームと共に送信されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-167">When they click **Submit**, the file they picked is submitted along with the form.</span></span>

    <span data-ttu-id="6bde8-168">アップロードされたイメージを取得するには、`WebImage` ヘルパーを使用します。このヘルパーには、イメージを操作するための便利なメソッドがすべて含まれています。</span><span class="sxs-lookup"><span data-stu-id="6bde8-168">To get the uploaded image, you use the `WebImage` helper, which has all sorts of useful methods for working with images.</span></span> <span data-ttu-id="6bde8-169">具体的には、`WebImage.GetImageFromRequest` を使用してアップロードされたイメージ (存在する場合) を取得し、それを `photo`という名前の変数に格納します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-169">Specifically, you use `WebImage.GetImageFromRequest` to get the uploaded image (if any) and store it in a variable named `photo`.</span></span>

    <span data-ttu-id="6bde8-170">この例の作業の大部分には、ファイル名とパス名の取得と設定が含まれます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-170">A lot of the work in this example involves getting and setting file and path names.</span></span> <span data-ttu-id="6bde8-171">この問題は、ユーザーがアップロードしたイメージの名前 (および名前のみ) を取得し、イメージを保存する場所の新しいパスを作成することです。</span><span class="sxs-lookup"><span data-stu-id="6bde8-171">The issue is that you want to get the name (and just the name) of the image that the user uploaded, and then create a new path for where you're going to store the image.</span></span> <span data-ttu-id="6bde8-172">ユーザーは、同じ名前を持つ複数のイメージをアップロードできる可能性があるため、いくつかの追加のコードを使用して一意の名前を作成し、ユーザーが既存の画像を上書きしないようにします。</span><span class="sxs-lookup"><span data-stu-id="6bde8-172">Because users could potentially upload multiple images that have the same name, you use a bit of extra code to create unique names and make sure that users don't overwrite existing pictures.</span></span>

    <span data-ttu-id="6bde8-173">イメージが実際にアップロードされている場合 (テスト `if (photo != null)`)、イメージの `FileName` プロパティからイメージ名を取得します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-173">If an image actually has been uploaded (the test `if (photo != null)`), you get the image name from the image's `FileName` property.</span></span> <span data-ttu-id="6bde8-174">ユーザーがイメージをアップロードすると `FileName` には、ユーザーのコンピューターからのパスを含む、ユーザーの元の名前が含まれます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-174">When the user uploads the image, `FileName` contains the user's original name, which includes the path from the user's computer.</span></span> <span data-ttu-id="6bde8-175">次のようになります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-175">It might look like this:</span></span>

    <span data-ttu-id="6bde8-176">*C:\Users\Joe\Pictures\SamplePhoto1.jpg*</span><span class="sxs-lookup"><span data-stu-id="6bde8-176">*C:\Users\Joe\Pictures\SamplePhoto1.jpg*</span></span>

    <span data-ttu-id="6bde8-177">実際のファイル名 (*SamplePhoto1*) だけが&#8212;必要な場合でも、すべてのパス情報は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="6bde8-177">You don't want all that path information, though &#8212; you just want the actual file name (*SamplePhoto1.jpg*).</span></span> <span data-ttu-id="6bde8-178">次のように `Path.GetFileName` メソッドを使用して、パスからファイルのみを取り除くことができます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-178">You can strip out just the file from a path by using the `Path.GetFileName` method, like this:</span></span>

    [!code-csharp[Main](9-working-with-images/samples/sample4.cs)]

    <span data-ttu-id="6bde8-179">次に、元の名前に GUID を追加して、新しい一意のファイル名を作成します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-179">You then create a new unique file name by adding a GUID to the original name.</span></span> <span data-ttu-id="6bde8-180">(Guid の詳細については、この記事で後述する「 [Guid につい](#SB_AboutGUIDs)て」を参照してください)。次に、イメージを保存するために使用できる完全なパスを作成します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-180">(For more about GUIDs, see [About GUIDs](#SB_AboutGUIDs) later in this article.) Then you construct a complete path that you can use to save the image.</span></span> <span data-ttu-id="6bde8-181">保存パスは、新しいファイル名、フォルダー (イメージ)、および現在の web サイトの場所で構成されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-181">The save path is made up of the new file name, the folder (images), and the current website location.</span></span>

    > [!NOTE]
    > <span data-ttu-id="6bde8-182">コードで*images*フォルダーにファイルを保存するには、そのフォルダーに対する読み取り/書き込みアクセス許可がアプリケーションに必要です。</span><span class="sxs-lookup"><span data-stu-id="6bde8-182">In order for your code to save files in the *images* folder, the application needs read-write permissions for that folder.</span></span> <span data-ttu-id="6bde8-183">開発用コンピューターでは、これは通常は問題ではありません。</span><span class="sxs-lookup"><span data-stu-id="6bde8-183">On your development computer this is not typically an issue.</span></span> <span data-ttu-id="6bde8-184">ただし、サイトをホスティングプロバイダーの web サーバーに発行する場合は、これらのアクセス許可を明示的に設定する必要がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-184">However, when you publish your site to a hosting provider's web server, you might need to explicitly set those permissions.</span></span> <span data-ttu-id="6bde8-185">このコードをホスティングプロバイダーのサーバーで実行し、エラーが発生した場合は、ホスティングプロバイダーに確認して、これらのアクセス許可を設定する方法を確認してください。</span><span class="sxs-lookup"><span data-stu-id="6bde8-185">If you run this code on a hosting provider's server and get errors, check with the hosting provider to find out how to set those permissions.</span></span>

    <span data-ttu-id="6bde8-186">最後に、保存パスを `WebImage` ヘルパーの `Save` メソッドに渡します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-186">Finally, you pass the save path to the `Save` method of the `WebImage` helper.</span></span> <span data-ttu-id="6bde8-187">これにより、アップロードしたイメージが新しい名前で格納されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-187">This stores the uploaded image under its new name.</span></span> <span data-ttu-id="6bde8-188">Save メソッドは、`photo.Save(@"~\" + imagePath)`のようになります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-188">The save method looks like this: `photo.Save(@"~\" + imagePath)`.</span></span> <span data-ttu-id="6bde8-189">完全なパスは、現在の web サイトの場所である `@"~\"`に追加されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-189">The complete path is appended to `@"~\"`, which is the current website location.</span></span> <span data-ttu-id="6bde8-190">(`~` 演算子の詳細については、「 [Razor 構文を使用した ASP.NET Web プログラミングの概要」を](https://go.microsoft.com/fwlink/?LinkId=202890#ID_WorkingWithFileAndFolderPaths)参照してください。)</span><span class="sxs-lookup"><span data-stu-id="6bde8-190">(For information about the `~` operator, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#ID_WorkingWithFileAndFolderPaths).)</span></span>

    <span data-ttu-id="6bde8-191">前の例と同様に、ページの本文には、イメージを表示するための `<img>` 要素が含まれています。</span><span class="sxs-lookup"><span data-stu-id="6bde8-191">As in the previous example, the body of the page contains an `<img>` element to display the image.</span></span> <span data-ttu-id="6bde8-192">`imagePath` が設定されている場合、`<img>` 要素がレンダリングされ、その `src` 属性が `imagePath` 値に設定されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-192">If `imagePath` has been set, the `<img>` element is rendered and its `src` attribute is set to the `imagePath` value.</span></span>
3. <span data-ttu-id="6bde8-193">ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-193">Run the page in a browser.</span></span>
4. <span data-ttu-id="6bde8-194">イメージをアップロードして、ページに表示されることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-194">Upload an image and make sure it's displayed in the page.</span></span>
5. <span data-ttu-id="6bde8-195">サイトで、 *images*フォルダーを開きます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-195">In your site, open the *images* folder.</span></span> <span data-ttu-id="6bde8-196">次のようなファイル名を持つ新しいファイルが追加されていることがわかります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-196">You see that a new file has been added whose file name looks something like this::</span></span> 

    <span data-ttu-id="6bde8-197">*45ea4527-7ddd-4965-b9ca-c6444982b342\_MyPhoto .png*</span><span class="sxs-lookup"><span data-stu-id="6bde8-197">*45ea4527-7ddd-4965-b9ca-c6444982b342\_MyPhoto.png*</span></span>

    <span data-ttu-id="6bde8-198">これは、名前にプレフィックスとして GUID を付けてアップロードしたイメージです。</span><span class="sxs-lookup"><span data-stu-id="6bde8-198">This is the image that you uploaded with a GUID prefixed to the name.</span></span> <span data-ttu-id="6bde8-199">(独自のファイルには GUID が異なり、場合によっては*Myphoto .png*という名前の別の名前が付けられます)。</span><span class="sxs-lookup"><span data-stu-id="6bde8-199">(Your own file will have a different GUID and probably is named something different than *MyPhoto.png*.)</span></span>

> [!TIP] 
> 
> <a id="SB_AboutGUIDs"></a>
> ### <a name="about-guids"></a><span data-ttu-id="6bde8-200">Guid について</span><span class="sxs-lookup"><span data-stu-id="6bde8-200">About GUIDs</span></span>
> 
> <span data-ttu-id="6bde8-201">GUID (グローバル一意 ID) は、通常、`936DA01F-9ABD-4d9d-80C7-02AF85C822A8`のような形式で表示される識別子です。</span><span class="sxs-lookup"><span data-stu-id="6bde8-201">A GUID (globally-unique ID) is an identifier that's usually rendered in a format like this: `936DA01F-9ABD-4d9d-80C7-02AF85C822A8`.</span></span> <span data-ttu-id="6bde8-202">数字と文字 (A ~ F) は GUID ごとに異なりますが、これらはすべて8-4-4-4-12 文字のグループを使用するパターンに従います。</span><span class="sxs-lookup"><span data-stu-id="6bde8-202">The numbers and letters (from A-F) differ for each GUID, but they all follow the pattern of using groups of 8-4-4-4-12 characters.</span></span> <span data-ttu-id="6bde8-203">(技術的には、GUID は16バイト/128 ビットの数値です)。GUID が必要な場合は、GUID を生成する特殊なコードを呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-203">(Technically, a GUID is a 16-byte/128-bit number.) When you need a GUID, you can call specialized code that generates a GUID for you.</span></span> <span data-ttu-id="6bde8-204">Guid の背後にある考え方は、数値の巨大なサイズ (3.4 x 10<sup>38</sup>) とそれを生成するためのアルゴリズムの間で、結果として得られる数値が実質的にはいずれかの種類であることが保証されることです。</span><span class="sxs-lookup"><span data-stu-id="6bde8-204">The idea behind GUIDs is that between the enormous size of the number (3.4 x 10<sup>38</sup>) and the algorithm for generating it, the resulting number is virtually guaranteed to be one of a kind.</span></span> <span data-ttu-id="6bde8-205">したがって、Guid は、同じ名前を2回使用しないことを保証する必要がある場合に、名前を生成するのに適した方法です。</span><span class="sxs-lookup"><span data-stu-id="6bde8-205">GUIDs therefore are a good way to generate names for things when you must guarantee that you won't use the same name twice.</span></span> <span data-ttu-id="6bde8-206">当然のことですが、Guid は特にユーザーフレンドリではないため、名前がコード内でのみ使用される場合に使用される傾向があります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-206">The downside, of course, is that GUIDs aren't particularly user friendly, so they tend to be used when the name is used only in code.</span></span>

<a id="Resizing_an_Image"></a>
## <a name="resizing-an-image"></a><span data-ttu-id="6bde8-207">イメージのサイズ変更</span><span class="sxs-lookup"><span data-stu-id="6bde8-207">Resizing an Image</span></span>

<span data-ttu-id="6bde8-208">Web サイトがユーザーのイメージを受け入れる場合は、イメージを表示または保存する前にサイズを変更することができます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-208">If your website accepts images from a user, you might want to resize the images before you display or save them.</span></span> <span data-ttu-id="6bde8-209">このためには、もう一度 `WebImage` ヘルパーを使用できます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-209">You can again use the `WebImage` helper for this.</span></span>

<span data-ttu-id="6bde8-210">この手順では、アップロードしたイメージのサイズを変更してサムネイルを作成し、サムネイルと元のイメージを web サイトに保存する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-210">This procedure shows how to resize an uploaded image to create a thumbnail and then save the thumbnail and original image in the website.</span></span> <span data-ttu-id="6bde8-211">ページにサムネイルを表示し、ハイパーリンクを使用して、フルサイズの画像にユーザーをリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="6bde8-211">You display the thumbnail on the page and use a hyperlink to redirect users to the full-sized image.</span></span>

<span data-ttu-id="6bde8-212">![絵](9-working-with-images/_static/image3.jpg "ch9images-3")</span><span class="sxs-lookup"><span data-stu-id="6bde8-212">![[image]](9-working-with-images/_static/image3.jpg "ch9images-3.jpg")</span></span>

1. <span data-ttu-id="6bde8-213">*Thumbnail. cshtml*という名前の新しいページを追加します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-213">Add a new page named *Thumbnail.cshtml*.</span></span>
2. <span data-ttu-id="6bde8-214">*Images*フォルダーで、「*親指*」という名前のサブフォルダーを作成します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-214">In the *images* folder, create a subfolder named *thumbs*.</span></span>
3. <span data-ttu-id="6bde8-215">ページ内の既存のコンテンツを次の内容に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-215">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample5.cshtml)]

    <span data-ttu-id="6bde8-216">このコードは、前の例のコードに似ています。</span><span class="sxs-lookup"><span data-stu-id="6bde8-216">This code is similar to the code from the previous example.</span></span> <span data-ttu-id="6bde8-217">違いは、このコードでは、イメージのサムネイルコピーを作成した後、通常と1回、イメージを2回保存することです。</span><span class="sxs-lookup"><span data-stu-id="6bde8-217">The difference is that this code saves the image twice, once normally and once after you create a thumbnail copy of the image.</span></span> <span data-ttu-id="6bde8-218">まず、アップロードしたイメージを取得し、 *images*フォルダーに保存します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-218">First you get the uploaded image and save it in the *images* folder.</span></span> <span data-ttu-id="6bde8-219">次に、サムネイル画像の新しいパスを作成します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-219">You then construct a new path for the thumbnail image.</span></span> <span data-ttu-id="6bde8-220">実際にサムネイルを作成するには、`WebImage` ヘルパーの `Resize` メソッドを呼び出して、60ピクセルの60ピクセルのイメージを作成します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-220">To actually create the thumbnail, you call the `WebImage` helper's `Resize` method to create a 60-pixel by 60-pixel image.</span></span> <span data-ttu-id="6bde8-221">この例は、縦横比を維持する方法と、画像が拡大されないようにする方法を示しています (新しいサイズが実際にイメージを拡大する場合)。</span><span class="sxs-lookup"><span data-stu-id="6bde8-221">The example shows how you preserve the aspect ratio and how you can prevent the image from being enlarged (in case the new size would actually make the image larger).</span></span> <span data-ttu-id="6bde8-222">サイズ変更されたイメージは、*親指*サブフォルダーに保存されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-222">The resized image is then saved in the *thumbs* subfolder.</span></span>

    <span data-ttu-id="6bde8-223">マークアップの最後に、前の例で示した動的 `src` 属性と同じ `<img>` 要素を使用して、条件に応じてイメージを表示します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-223">At the end of the markup, you use the same `<img>` element with the dynamic `src` attribute that you've seen in the previous examples to conditionally show the image.</span></span> <span data-ttu-id="6bde8-224">この場合、サムネイルが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-224">In this case, you display the thumbnail.</span></span> <span data-ttu-id="6bde8-225">また、`<a>` 要素を使用して、イメージの大規模なバージョンへのハイパーリンクを作成します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-225">You also use an `<a>` element to create a hyperlink to the big version of the image.</span></span> <span data-ttu-id="6bde8-226">`<img>` 要素の `src` 属性と同様に、`<a>` 要素の `href` 属性を `imagePath`内の任意のものに動的に設定します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-226">As with the `src` attribute of the `<img>` element, you set the `href` attribute of the `<a>` element dynamically to whatever is in `imagePath`.</span></span> <span data-ttu-id="6bde8-227">パスが URL として機能できることを確認するには、`imagePath` を `Html.AttributeEncode` メソッドに渡します。これにより、パス内の予約文字が URL 内の ok 文字に変換されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-227">To make sure that the path can work as a URL, you pass `imagePath` to the `Html.AttributeEncode` method, which converts reserved characters in the path to characters that are ok in a URL.</span></span>
4. <span data-ttu-id="6bde8-228">ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-228">Run the page in a browser.</span></span>
5. <span data-ttu-id="6bde8-229">写真をアップロードし、サムネイルが表示されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-229">Upload a photo and verify that the thumbnail is shown.</span></span>
6. <span data-ttu-id="6bde8-230">サムネイルをクリックすると、フルサイズの画像が表示されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-230">Click the thumbnail to see the full-size image.</span></span>
7. <span data-ttu-id="6bde8-231">*画像*と*画像/親指*で、新しいファイルが追加されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6bde8-231">In the *images* and *images/thumbs*, note that new files have been added.</span></span>

<a id="Rotating_and_Flipping"></a>
## <a name="rotating-and-flipping-an-image"></a><span data-ttu-id="6bde8-232">イメージの回転と反転</span><span class="sxs-lookup"><span data-stu-id="6bde8-232">Rotating and Flipping an Image</span></span>

<span data-ttu-id="6bde8-233">`WebImage` ヘルパーを使用すると、イメージを反転して回転させることもできます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-233">The `WebImage` helper also lets you flip and rotate images.</span></span> <span data-ttu-id="6bde8-234">この手順では、サーバーからイメージを取得し、画像を上下に反転させて保存し、反転したイメージをページに表示する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-234">This procedure shows how to get an image from the server, flip the image upside down (vertically), save it, and then display the flipped image on the page.</span></span> <span data-ttu-id="6bde8-235">この例では、サーバー上に既にあるファイル (*Photo2*) を使用しています。</span><span class="sxs-lookup"><span data-stu-id="6bde8-235">In this example, you're just using a file you already have on the server (*Photo2.jpg*).</span></span> <span data-ttu-id="6bde8-236">実際のアプリケーションでは、前の例で行ったように、動的に取得した名前を持つイメージを反転させることができます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-236">In a real application, you'd probably flip an image whose name you get dynamically, like you did in previous examples.</span></span>

<span data-ttu-id="6bde8-237">![絵](9-working-with-images/_static/image4.jpg "ch9images-4")</span><span class="sxs-lookup"><span data-stu-id="6bde8-237">![[image]](9-working-with-images/_static/image4.jpg "ch9images-4.jpg")</span></span>

1. <span data-ttu-id="6bde8-238">*FlipImage*という名前の新しいページを追加します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-238">Add a new page named *FlipImage.cshtml*.</span></span>
2. <span data-ttu-id="6bde8-239">ページ内の既存のコンテンツを次の内容に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-239">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample6.cshtml)]

    <span data-ttu-id="6bde8-240">このコードでは、`WebImage` ヘルパーを使用して、サーバーからイメージを取得します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-240">The code uses the `WebImage` helper to get an image from the server.</span></span> <span data-ttu-id="6bde8-241">イメージのパスを作成するには、前の例でイメージを保存する場合と同じ手法を使用し、`WebImage`を使用してイメージを作成するときにそのパスを渡します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-241">You create the path to the image using the same technique you used in earlier examples for saving images, and you pass that path when you create an image using `WebImage`:</span></span>

    [!code-javascript[Main](9-working-with-images/samples/sample7.js)]

    <span data-ttu-id="6bde8-242">イメージが見つかった場合は、前の例で行ったように、新しいパスとファイル名を作成します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-242">If an image is found, you construct a new path and file name, like you did in earlier examples.</span></span> <span data-ttu-id="6bde8-243">画像を反転させるには、`FlipVertical` メソッドを呼び出してから、再度画像を保存します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-243">To flip the image, you call the `FlipVertical` method, and then you save the image again.</span></span>

    <span data-ttu-id="6bde8-244">このイメージは、`src` 属性が `imagePath`に設定された `<img>` 要素を使用して、ページに再び表示されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-244">The image is again displayed on the page by using the `<img>` element with the `src` attribute set to `imagePath`.</span></span>
3. <span data-ttu-id="6bde8-245">ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-245">Run the page in a browser.</span></span> <span data-ttu-id="6bde8-246">*Photo2*のイメージが反転して表示されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-246">The image for *Photo2.jpg* is shown upside down.</span></span>
4. <span data-ttu-id="6bde8-247">ページを最新の情報に更新するか、もう一度ページを要求して、もう一度イメージが反転されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-247">Refresh the page or request the page again to see the image is flipped right side up again.</span></span>

<span data-ttu-id="6bde8-248">画像を回転させるには、同じコードを使用します。ただし、`FlipVertical` または `FlipHorizontal`を呼び出すのではなく、`RotateLeft` または `RotateRight`を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-248">To rotate an image, you use the same code, except that instead of calling the `FlipVertical` or `FlipHorizontal`, you call `RotateLeft` or `RotateRight`.</span></span>

<a id="Adding_a_Watermark"></a>
## <a name="adding-a-watermark-to-an-image"></a><span data-ttu-id="6bde8-249">画像へのウォーターマークの追加</span><span class="sxs-lookup"><span data-stu-id="6bde8-249">Adding a Watermark to an Image</span></span>

<span data-ttu-id="6bde8-250">Web サイトに画像を追加する場合は、画像を保存したり、ページに表示したりする前に、透かしを画像に追加することができます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-250">When you add images to your website, you might want to add a watermark to the image before you save it or display it on a page.</span></span> <span data-ttu-id="6bde8-251">多くの場合、透かしを使用して、画像に著作権情報を追加したり、ビジネス名を提供したりします。</span><span class="sxs-lookup"><span data-stu-id="6bde8-251">People often use watermarks to add copyright information to an image or to advertise their business name.</span></span>

<span data-ttu-id="6bde8-252">![絵](9-working-with-images/_static/image5.jpg "ch9images-5")</span><span class="sxs-lookup"><span data-stu-id="6bde8-252">![[image]](9-working-with-images/_static/image5.jpg "ch9images-5.jpg")</span></span>

1. <span data-ttu-id="6bde8-253">*Watermark. cshtml*という名前の新しいページを追加します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-253">Add a new page named *Watermark.cshtml*.</span></span>
2. <span data-ttu-id="6bde8-254">ページ内の既存のコンテンツを次の内容に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-254">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample8.cshtml)]

    <span data-ttu-id="6bde8-255">このコードは、前の*FlipImage*ページのコードに似ています (現時点では、 *Photo3*ファイルを使用します)。</span><span class="sxs-lookup"><span data-stu-id="6bde8-255">This code is like the code in the *FlipImage.cshtml* page from earlier (although this time it uses the *Photo3.jpg* file).</span></span> <span data-ttu-id="6bde8-256">透かしを追加するには、イメージを保存する前に、`WebImage` ヘルパーの `AddTextWatermark` メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-256">To add the watermark, you call the `WebImage` helper's `AddTextWatermark` method before you save the image.</span></span> <span data-ttu-id="6bde8-257">`AddTextWatermark`への呼び出しでは、テキストをウォーターマーク&quot;&quot;渡し、フォントの色を黄色に設定し、フォントファミリを Arial に設定します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-257">In the call to `AddTextWatermark`, you pass the text &quot;My Watermark&quot;, set the font color to yellow, and set the font family to Arial.</span></span> <span data-ttu-id="6bde8-258">(ここには示されていませんが、`WebImage` ヘルパーでは、不透明度、フォントファミリ、フォントサイズ、および透かしテキストの位置を指定することもできます)。イメージを保存するときは、読み取り専用にすることはできません。</span><span class="sxs-lookup"><span data-stu-id="6bde8-258">(Although it's not shown here, the `WebImage` helper also lets you specify opacity, font family and font size, and the position of the watermark text.) When you save the image it must not be read-only.</span></span>

    <span data-ttu-id="6bde8-259">前に説明したように、[src] 属性が [`@imagePath`] に設定された `<img>` 要素を使用して、ページに画像を表示します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-259">As you've seen before, the image is displayed on the page by using the `<img>` element with the src attribute set to `@imagePath`.</span></span>
3. <span data-ttu-id="6bde8-260">ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-260">Run the page in a browser.</span></span> <span data-ttu-id="6bde8-261">イメージの右下隅に "My Watermark" というテキストが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-261">Notice the text "My Watermark" at the bottom-right corner of the image.</span></span>

<a id="Using_an_Image_as_a_Watermark"></a>
## <a name="using-an-image-as-a-watermark"></a><span data-ttu-id="6bde8-262">透かしとしての画像の使用</span><span class="sxs-lookup"><span data-stu-id="6bde8-262">Using an Image As a Watermark</span></span>

<span data-ttu-id="6bde8-263">透かしのテキストを使用する代わりに、別の画像を使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-263">Instead of using text for a watermark, you can use another image.</span></span> <span data-ttu-id="6bde8-264">会社のロゴなどの画像を透かしとして使用する場合や、著作権情報のテキストではなく透かし画像を使用する場合があります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-264">People sometimes use images like a company logo as a watermark, or they use a watermark image instead of text for copyright information.</span></span>

<span data-ttu-id="6bde8-265">![絵](9-working-with-images/_static/image6.jpg "ch9images-6")</span><span class="sxs-lookup"><span data-stu-id="6bde8-265">![[image]](9-working-with-images/_static/image6.jpg "ch9images-6.jpg")</span></span>

1. <span data-ttu-id="6bde8-266">*Imagewatermark. cshtml*という名前の新しいページを追加します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-266">Add a new page named *ImageWatermark.cshtml*.</span></span>
2. <span data-ttu-id="6bde8-267">ロゴとして使用できるイメージを*images*フォルダーに追加し、画像の名前を*my企業のロゴ .jpg*に変更します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-267">Add an image to the *images* folder that you can use as a logo, and rename the image *MyCompanyLogo.jpg*.</span></span> <span data-ttu-id="6bde8-268">この画像は、幅が80ピクセル、高さが20ピクセルに設定されている場合に明確に見える画像にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6bde8-268">This image should be an image that you can see clearly when it's set to 80 pixels wide and 20 pixels high.</span></span>
3. <span data-ttu-id="6bde8-269">ページ内の既存のコンテンツを次の内容に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-269">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample9.cshtml)]

    <span data-ttu-id="6bde8-270">これは、前の例のコードの別のバリエーションです。</span><span class="sxs-lookup"><span data-stu-id="6bde8-270">This is another variation on the code from earlier examples.</span></span> <span data-ttu-id="6bde8-271">この場合は、`AddImageWatermark` を呼び出して、画像を保存する前にウォーターマーク画像をターゲットイメージ (*Photo3*) に追加します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-271">In this case, you call `AddImageWatermark` to add the watermark image to the target image (*Photo3.jpg*) before you save the image.</span></span> <span data-ttu-id="6bde8-272">`AddImageWatermark`を呼び出すときは、幅を80ピクセル、高さを20ピクセルに設定します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-272">When you call `AddImageWatermark`, you set its width to 80 pixels and the height to 20 pixels.</span></span> <span data-ttu-id="6bde8-273">*My企業のロゴ .jpg*画像は、中央に水平方向に配置され、ターゲットイメージの下部に垂直方向に配置されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-273">The *MyCompanyLogo.jpg* image is horizontally aligned in the center and vertically aligned at the bottom of the target image.</span></span> <span data-ttu-id="6bde8-274">不透明度は100% に設定され、余白は10ピクセルに設定されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-274">The opacity is set to 100% and the padding is set to 10 pixels.</span></span> <span data-ttu-id="6bde8-275">ウォーターマークの画像がターゲットイメージより大きい場合は、何も起こりません。</span><span class="sxs-lookup"><span data-stu-id="6bde8-275">If the watermark image is bigger than the target image, nothing will happen.</span></span> <span data-ttu-id="6bde8-276">透かし画像がターゲットイメージよりも大きい場合に、画像ウォーターマークの埋め込みを0に設定すると、透かしは無視されます。</span><span class="sxs-lookup"><span data-stu-id="6bde8-276">If the watermark image is bigger than the target image and you set the padding for the image watermark to zero, the watermark is ignored.</span></span>

    <span data-ttu-id="6bde8-277">前と同様に、`<img>` 要素と動的 `src` 属性を使用してイメージを表示します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-277">As before, you display the image using the `<img>` element and a dynamic `src` attribute.</span></span>
4. <span data-ttu-id="6bde8-278">ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="6bde8-278">Run the page in a browser.</span></span> <span data-ttu-id="6bde8-279">透かし画像がメインイメージの下部に表示されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6bde8-279">Notice that the watermark image appears at the bottom of the main image.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="6bde8-280">その他のリソース</span><span class="sxs-lookup"><span data-stu-id="6bde8-280">Additional Resources</span></span>

[<span data-ttu-id="6bde8-281">ASP.NET Web ページサイト内のファイルの操作</span><span class="sxs-lookup"><span data-stu-id="6bde8-281">Working with Files in an ASP.NET Web Pages Site</span></span>](https://go.microsoft.com/fwlink/?LinkId=202896)

[<span data-ttu-id="6bde8-282">Razor 構文を使用した ASP.NET Web ページプログラミングの概要</span><span class="sxs-lookup"><span data-stu-id="6bde8-282">Introduction to ASP.NET Web Pages Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=251587)
