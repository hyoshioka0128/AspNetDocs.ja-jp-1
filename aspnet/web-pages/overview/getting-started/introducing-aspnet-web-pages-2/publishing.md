---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/publishing
title: 'ASP.NET Web ページの概要: WebMatrix を使用したサイトの発行 |Microsoft Docs'
author: Rick-Anderson
description: このチュートリアルは、ASP.NET Web ページと Microsoft WebMatrix が導入されたチュートリアルセットの最終段階です。 サイト t を発行する方法について説明します...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: 7e85c70e-1a88-4408-8b3d-29611c7713ed
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/publishing
msc.type: authoredcontent
ms.openlocfilehash: a09339a833ea0b4a2d3c3a9323cce777577ea048
ms.sourcegitcommit: 0cf7d06071a8ff986e6c028ac9daf0c0e7490412
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/23/2020
ms.locfileid: "85240583"
---
# <a name="introducing-aspnet-web-pages---publishing-a-site-by-using-webmatrix"></a>ASP.NET Web ページの概要-WebMatrix を使用したサイトの発行

[Tom FitzMacken](https://github.com/tfitzmac)

> このチュートリアルは、ASP.NET Web ページと Microsoft WebMatrix が導入されたチュートリアルセットの最終段階です。 他のユーザーが使用できるように、サイトをインターネットに発行する方法についても説明します。 [ASP.NET Web ページサイトの一貫性のある検索を作成](https://go.microsoft.com/fwlink/?LinkId=251585)することによって、シリーズを完了していることを前提としています。
> 
> 次のものを使用してサイトを公開する方法について説明します。
> 
> - Microsoft Azure
> - Web ホスティング会社

## <a name="about-publishing-your-site"></a>サイトの公開について

ここまでは、ページのテストを含め、すべての作業をローカルコンピューターで行いました。 このように、<em>cshtml</em>ページを実行するには、WebMatrix に組み込まれている web サーバー (IIS Express) を使用しました。 ただし、もちろん、作成したサイトを確認することはできません。 他のユーザーがサイトを操作できるようにするには、インターネットに発行する必要があります。

公開されている web サーバーにまだアクセスできない限り、公開とは、*クラウドプラットフォーム*または*ホスティングプロバイダー*を持つアカウントが必要であることを意味します。 Microsoft Azure などのクラウドプラットフォームは、アプリケーションに対してオンデマンドのインフラストラクチャを提供します。 ホスティングプロバイダーは、パブリックにアクセスできる web サーバーを所有し、サイトの領域をレンタルする企業です。 ホスティングプランは、大規模な商用 web サイトで、1か月に1か月 (または無料) の小規模サイトから数百ドルの月に実行されます。

> [!NOTE]
> インターネットサービスを自宅で利用するために使用するインターネットサービスプロバイダー (ISP) 経由でパブリック web サーバーにアクセスできる場合があります。 ただし、ホスティングプロバイダーが ASP.NET Web ページをサポートしている必要があります。 多くの Isp はそうではありませんが、常にチェックする価値があります。

このチュートリアルでは、発行方法の概要について説明します。 すべてのホストプロバイダーのプロセスが少し異なるため、すべての情報を正確に指定することは実用的ではありません。 しかし、このプロセスがどのように機能するかについては、理解しておいてください。

このチュートリアルには、次の4つのセクションがあります。

1. [既定のページの設定](#defaultpage)
2. 発行 (次のいずれかを選択します)  
 a. [Microsoft Azure にサイトを発行する](#azure)  
 b. [Web ホスティング会社へのサイトの発行](#host)
3. [ライブサイトを更新しています: 再発行](#update)

<a id="defaultpage"></a>
## <a name="setting-up-the-default-page"></a>既定のページの設定

ユーザーが web サイトのベースアドレスに移動すると、サイトの既定のページがユーザーに表示されます。 たとえば、 *Default.htm*がのサイトの既定のページとして設定されている場合、への移動 `www.contoso.com` `www.contoso.com` はに移動するのと同じです `www.contoso.com/Default.htm` 。

現在、サイトでは既定のページとして**既定の cshtml**が使用されています。 このページは既定のページには適していますが、このチュートリアルでは、空白のページが表示されるように、このページにコンテンツを追加していません。 既定の cshtml を開き、内容を次のコードに置き換えます。

[!code-cshtml[Main](publishing/samples/sample1.cshtml)]

これで、サイトを発行する準備ができました。 まず、サイトを Azure にデプロイする方法と、それを web ホスティング会社にデプロイする方法を説明します。 どちらのオプションも web サイトに対して機能します。いずれかの配置オプションに従うだけでかまいません。

<a id="azure"></a>
## <a name="publishing-your-site-to-microsoft-azure"></a>Microsoft Azure にサイトを発行する

このチュートリアルでは、まず Microsoft Azure にサイトを展開する方法について説明します。 Microsoft アカウントでサインインすることで、Azure で最大10個の無料サイトを作成できます。 これらの無料サイトでは、サイトをテストするための便利な方法が提供されます。 このサンプルサイトをいつでも削除して、すべての無料サイトを使用しないようにすることができます。 数分で無料試用版のアカウントを作成することができます。 詳細については、「[Azure の無料試用版サイト](https://azure.microsoft.com/free/dotnet/)」を参照してください。

WebMatrix リボンで、[**発行**] ボタンをクリックします。

![WebMatrix リボンの [発行] ボタン](publishing/_static/image1.png)

[**サイトの発行**] ダイアログボックスが表示されます。 Microsoft アカウントにサインインしていない場合は、ダイアログボックスに**Azure の使用を開始**するリンクが表示されます。 このリンクをクリックします。

![サイトを発行する](publishing/_static/image2.png)

Microsoft アカウントにサインインしていない場合は、もう一度サインインする機会が与えられます。 Azure にサイトを発行するには、Microsoft アカウントにサインインする必要があります。

![Sign In (Azure: サインイン)](publishing/_static/image3.png)

Microsoft アカウントにサインインすると、Azure で新しいサイトを作成したり、Azure 上の既存のサイトのいずれかに接続したりするためのリンクがダイアログボックスに表示されます。

![新しいサイトの作成](publishing/_static/image4.png)

[**新しいサイトの作成**] を選択します。

プロジェクトに**webwebpagesmovies.azurewebsites.net**という名前を付けた場合は、サイトの既定の**webpagesmovies.azurewebsites.net**名前が使用されます。 この既定の名前は、赤い感嘆符で示されているように、使用できない可能性があります。

![既定の Web サイト名](publishing/_static/image5.png)

サイト名を使用可能なものに変更し、場所に近い場所を選択します。

![変更されたサイト名](publishing/_static/image6.png)

**[OK]** をクリックします。

WebMatrix は、サーバーがサイトと互換性があるかどうかを判断するためのテストを行います。

![互換性テスト](publishing/_static/image7.png)

**[続行]** をクリックします。

互換性テストの結果が表示されます。

![互換性の結果](publishing/_static/image8.png)

**[続行]** をクリックします。

WebMatrix では、サイトに発行されるファイルとデータベースが表示されます。 サイトを初めて発行するときは、すべてのファイルが一覧表示されます。 発行する準備ができていないファイルをオフにすることができます。 以降のパブリケーションでは、変更されたファイルのみが表示されます。 「[ライブサイトの更新: 再パブリッシュ」を](#update)参照してください。

![[続行]](publishing/_static/image9.png)

**[続行]** をクリックします。

サイトが Azure にデプロイされると、デプロイが完了したことを示すメッセージが表示されます。

![発行の完了](publishing/_static/image10.png)

サイトとデータベースが Azure に発行され、パブリックで使用できるようになりました。 [発行が完了しました] というメッセージ内のリンクをクリックすると、デプロイ済みのサイトが表示されます。 ユーザーまたはインターネットアクセス権を持つユーザーは、データベース内のレコードを追加または変更できます。

![](publishing/_static/image11.png)

<a id="host"></a>
## <a name="publishing-your-site-to-a-web-hosting-company"></a>Web ホスティング会社へのサイトの発行

Azure に発行しない場合は、代わりに、サイトを web ホスティング会社に発行することができます。

[ **Web ホスティングの検索**] リンクをクリックします。

![[発行の設定] ダイアログボックスの [web ホスティングの検索] ボタン](publishing/_static/image12.png)

Microsoft サイトのページにアクセスして、ASP.NET をサポートするホスティングプロバイダーの一覧を表示します。

![ホスティングプロバイダーを一覧表示する Microsoft サイトのページ](publishing/_static/image13.png)

当然ながら、長期的には、必要になる可能性のあるホスティング機能を正確に把握することが困難な場合があります。 次に、考慮すべき点をいくつか示します。

- Webextra 映画サイトでは、SQL Server 用に個別のアドオンを用意する必要はありません。多くの場合、余分なコストがかかります。 サイトでは SQL Server Compact エディションを使用しています。これは自己完結しています。 ただし、後で実行する web サイトの作業には、SQL Server アクセスが必要になる場合があります。 考えられる場合は、後で SQL Server 機能を追加できることを確認してください。
- ホスティングプロバイダーが Web 配置 publishing プロトコルをサポートしているかどうかを確認します。 FTP プロトコルを使用して公開できますが、Web 配置を使用する方が便利です。

一部のサイトは無料試用期間を提供します。 引き続き WebMatrix と ASP.NET Web ページを試しながら、発行とホスティングを試すには、無料試用版を使用することをお勧めします。

好きなものを選択してください。 このチュートリアルでは、DiscountASP.NET を選択しました。チュートリアルを作成していたのに対し、この会社は、数か月間、サイトを無料でホストできるプロモーションを持っていました。

> [!NOTE]
> このチュートリアルでは、ホスティングプロバイダーを選択しても、他の企業の保証としては解釈されません。 しかし、説明のために1つを選択する必要がありました。 DiscountASP.NET は、ASP.NET Web ページと、発行のための Web 配置プロトコルをサポートする多くの企業の1つです。

通常、ホスティングプロバイダーにサインアップすると、ユーザー名とパスワード、web サーバーの URL などが記載された電子メールが送信されます。 ホスティング会社が Web 配置プロトコルをサポートしている場合は、発行設定を含むファイルを送信するか、ダウンロードすることができます。 発行設定ファイルを使用すると、プロセスが簡単になります。

サインアップし、発行する準備ができたら、WebMatrix リボンの [**発行**] ボタンをクリックします。 [**発行の設定**] ダイアログボックスが表示されます。

ホスティングプロバイダーから発行設定ファイルが送信された場合は、[**発行設定のインポート**] リンクをクリックして、ファイルをインポートします。 発行設定ファイルがない場合は、ホスト会社から電子メールで送信された値を使用してフィールドに入力します。 完了すると、[**発行の設定**] ダイアログボックスは次のようになります。

![[発行の設定] ダイアログボックスに入力された発行設定](publishing/_static/image14.png)

[**接続の検証**] をクリックします。 問題がなければ、ダイアログボックスは**正常に接続されて**いることを示しています。これは、ホスティングプロバイダーのサーバーと通信できることを意味します。

![発行設定が正しい場合の成功メッセージ](publishing/_static/image15.png)

問題が発生した場合は、次のような問題があります。

![発行設定に問題がある場合のエラーメッセージ](publishing/_static/image16.png)

**[Save]** をクリックして設定を保存します。 WebMatrix では、テストを実行して、ホストサイトと正しく通信できるかどうかを確認します。

![公開プロセスのテストを実行するためのメッセージオファリング](publishing/_static/image17.png)

**[はい]** をクリックします。 WebMatrix は、いくつかのサンプルファイルをホスティングプロバイダーにアップロードします。 互換性テストが完了すると、WebMatrix は次の結果を報告します。

![発行テストの結果](publishing/_static/image18.png)

準備ができたら、[**続行**] をクリックして、実際の発行プロセスを開始します。 WebMatrix では、サイト内に存在し、既にホストサーバー上にあるファイル (現時点では none) を調べ、発行プロセスのプレビューを提供しています。

![発行プロセスによってアップロードされるファイルのプレビュー](publishing/_static/image19.png)

発行するファイルの一覧には、*ムービー*のように作成した web ページが含まれます。 この一覧には、インストールしたヘルパーのファイル、データベースの SQL Server Compact エディションで実行するファイルなども含まれています。 このため、初期発行プロセスはかなりの可能性があります。

**[Continue]** をクリックします。 WebMatrix は、ホスティングプロバイダーのサーバーにファイルをコピーします。 完了すると、ステータスバーに結果がレポートされます。

![発行プロセスが正常に完了したときのステータスバーメッセージ](publishing/_static/image20.png)

ライブサイトを表示するには、ステータスバーのリンクをクリックします。 URL に*ムービー*を追加すると、作成した*ムービーの cshtml*ファイルが表示されます。

![ムービーページを表示しているライブサイト](publishing/_static/image21.png)

<a id="update"></a>
## <a name="updating-the-live-site-republishing"></a>ライブサイトを更新しています: 再発行

(Azure または web ホスティング会社のいずれかに) サイトを発行すると、 &mdash; コンピューター上のバージョンとサービスプロバイダーのバージョンの2つのコピーが作成されます。 おそらく、次のチュートリアルセットの一部として、サイトを開発し続けることができます。 この場合、変更内容をコンピューターからサービスプロバイダーにコピーするために、サイトを再発行する必要があります。 WebMatrix の発行プロセスでは、サイトで変更されたファイルを特定し、それらのファイルだけを発行できます。

再パブリッシュのしくみを確認するに*は、del サイトを*開き、少し変更を加えてから、ファイルを保存します。 たとえば、タイトルをに変更 `Movies - Updated` します。

リボンの [**発行**] ボタンをクリックします。 WebMatrix によって変更内容が特定され、発行されるファイルのプレビューが表示されます。

![再パブリッシュの準備ができている変更されたファイルを示す [発行] ダイアログボックス](publishing/_static/image22.png)

> [!IMPORTANT] 
> 
> 既定では、WebMatrix は、サイトを初めて発行するときにのみデータベース (*.sdf*ファイル) を発行します。 サイトが公開され、web サイトと対話している場合、ライブサイト上のデータベースには通常、サイトの実際のデータが含まれます。 ライブデータベースを、コンピューター上の *.sdf*ファイルで上書きしないように注意する必要があります。このファイルには、通常、テストデータのみが含まれています。 このため、[発行] によって**リモートデータベースが上書きさ**れることがわかります。また、既定では、[ *web* ] のチェックボックスがオフになっています。

**[Continue]** をクリックします。 WebMatrix は、変更されたファイルを発行し、初めて発行したときと同様に成功メッセージを表示します。

ライブサイトに移動し (まだ表示されている場合は成功メッセージのリンクをクリックします)、変更が発行されたことを確認します。

> [!TIP] 
> 
> **ファイルのリモート編集**
> 
> サイトを変更してから再パブリッシュする代わりに、WebMatrix で直接リモートファイルを編集することもできます。 このシナリオでは、サービスプロバイダー上のファイルを開き、WebMatrix のコピーをダウンロードして編集できるようにします。 ファイルを保存するたびに、WebMatrix によって変更がサイトに送信されます。
> 
> リモート編集を使用すると、ライブサイトに簡単に変更を加えることができます。 ただし、この方法で行った変更は、ローカルサイト内のファイルと同期されません。 ローカルファイルをリモートサイトと同期するには、リモートファイルをダウンロードします。 このプロセスは、逆の場合を除き、発行とよく似ています。
> 
> WebMatrix のリモート編集機能とリモートダウンロード機能については、ここでは詳しく説明しません。 複数のユーザーが異なるコンピューター上の同じサイトで作業する必要がある場合に非常に便利です。 詳細については、「 [WebMatrix 2 Beta を使用したリモートサイトの発行と編集](https://go.microsoft.com/fwlink/?LinkId=251591)」を参照してください。

## <a name="additional-resources"></a>その他のリソース

- [ASP.NET WebMatrix ASP.NET Web ページフォーラム](https://forums.asp.net/1224.aspx/1?WebMatrix+and+ASP+NET+Web+Pages)。質問を投稿して回答を得ることができます。

> [!div class="step-by-step"]
> [前へ](layouts.md)
