---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/intro-to-web-pages-programming
title: ASP.NET Web ページプログラミングの基礎 |Microsoft Docs
author: Rick-Anderson
description: "このチュートリアルでは、Razor 構文を使用して ASP.NET Web ページでプログラミングする方法の概要を示します。 学習内容: pr に使用する基本的な ' Razor ' 構文..."
ms.author: riande
ms.date: 06/17/2015
ms.assetid: 7526ed45-a97d-4e8a-8301-01324ef0eff9
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/intro-to-web-pages-programming
msc.type: authoredcontent
ms.openlocfilehash: 474de7671ac2931e5ba9ff635d77385403644521
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78509980"
---
# <a name="introducing-aspnet-web-pages---programming-basics"></a>ASP.NET Web ページの概要-プログラミングの基礎

[Tom FitzMacken](https://github.com/tfitzmac)

> このチュートリアルでは、Razor 構文を使用して ASP.NET Web ページでプログラミングする方法の概要を示します。
> 
> ここでは、次の内容について学習します。
> 
> - ASP.NET Web ページでのプログラミングに使用する基本的な "Razor" 構文。
> - 基本的なC#ものとして、使用するプログラミング言語があります。
> - Web ページの基本的なプログラミング概念をいくつか紹介します。
> - サイトで使用するパッケージ (事前にビルドされたコードを含むコンポーネント) をインストールする方法。
> - *ヘルパー*を使用して一般的なプログラミングタスクを実行する方法。
>   
> 
> 説明する機能/テクノロジ:
> 
> - NuGet およびパッケージマネージャー。
> - `Gravatar` ヘルパー。

このチュートリアルでは、主に ASP.NET Web ページに使用するプログラミング構文を紹介します。 プログラミング言語で記述された Razor 構文とコードについて説明します。 C# 前のチュートリアルでは、この構文を見ていきます。このチュートリアルでは、構文の詳細について説明します。

このチュートリアルでは、1つのチュートリアルで紹介している最も多くのプログラミングについて説明します。これは、プログラミング*に関する唯一のチュートリアルです。* このセットの残りのチュートリアルでは、興味深い作業を行うページを実際に作成します。

*ヘルパー*についても学習します。 ヘルパーは、ページに追加できるコンポーネントで、パッケージ化されたコードの一部です。 ヘルパーは、不要な作業や複雑な作業を手作業で行うことができます。

## <a name="creating-a-page-to-play-with-razor"></a>Razor で再生するページを作成する

このセクションでは、基本的な構文を理解できるように、Razor を使用して少し説明します。

WebMatrix がまだ実行されていない場合は、開始します。 前のチュートリアル ([Web ページではじめに](https://go.microsoft.com/fwlink/?LinkId=251578)) で作成した web サイトを使用します。 もう一度開くには、 **[マイサイト]** をクリックし、 **[Webpagemovies]** を選択します。

![[サイトを開く] オプションと [マイサイト] が強調表示されている WebMatrix の開始画面](intro-to-web-pages-programming/_static/image1.png)

**[ファイル]** ワークスペースを選択します。

リボンで **[新規]** をクリックしてページを作成します。 **[CSHTML]** を選択し、新しいページに*TestRazor*という名前を指定します。

**[OK]** をクリックします。

次のファイルをコピーして、既に存在するものを完全に置き換えます。

> [!NOTE]
> コードまたはマークアップを例からページにコピーする場合、インデントとアラインメントはチュートリアルと同じではない可能性があります。 ただし、インデントとアラインメントは、コードの実行方法には影響しません。

[!code-cshtml[Main](intro-to-web-pages-programming/samples/sample1.cshtml)]

## <a name="examining-the-example-page"></a>例のページを調べる

ほとんどの場合、通常の HTML が表示されます。 ただし、上部には次のコードブロックがあります。

[!code-cshtml[Main](intro-to-web-pages-programming/samples/sample2.cshtml)]

このコードブロックについては、次の点に注意してください。

- @ 文字は、次の内容が HTML ではなく Razor コードであることを ASP.NET に通知します。 ASP.NET は、@ 文字の後のすべてを、HTML に再度実行されるまでコードとして扱います。 (この例では、これは &lt;です。DOCTYPE&gt; 要素。
- コードに複数の行が含まれている場合、中かっこ ({と}) は Razor コードのブロックを囲みます。 中かっこは、そのブロックのコードの開始位置と終了位置を ASP.NET に指示します。
- //文字は、コメント、つまり実行されないコードの一部をマークします。
- 各ステートメントは、セミコロン (;) で終わる必要があります。 (ただし、コメントはありません)。
- 変数に値を格納することができます。*変数*には、var というキーワードを使用して作成する (*declare*) 必要があります。 変数を作成するときに、名前を指定します。これには、文字、数字、アンダースコア (\_) を含めることができます。 変数名の先頭を数字にすることはできません。プログラミングキーワードの名前 (var など) を使用することはできません。
- 文字列 ("ASP.NET" や "Web Pages" など) は引用符で囲みます。 (二重引用符で囲む必要があります)。数字は引用符で囲まれていません。
- 引用符以外の空白は意味がありません。 改行はほとんど問題ありません。例外として、行を引用符で囲んだ文字列を分割することはできません。 インデントとアラインメントは関係ありません。

この例では、すべてのコードで大文字と小文字が区別されていることがわかりません。 これは、変数の変数が、変数として指定されている変数と異なる変数であることを意味します。 同様に、var はキーワードですが、Var はキーワードではありません。

### <a name="objects-and-properties-and-methods"></a>オブジェクト、プロパティ、およびメソッド

次に、式 DateTime を指定します。 簡単に言うと、DateTime は*オブジェクト*です。 オブジェクトは、ページ、テキストボックス、ファイル、画像、web 要求、電子メールメッセージ、顧客レコードなどを使用してプログラミングすることができます。オブジェクトには、その特性を説明する1つ以上の*プロパティ*があります。 テキストボックスオブジェクトには、テキストプロパティ (その他)、要求オブジェクト、Url プロパティ (その他)、電子メールメッセージの From プロパティ、To プロパティなどがあります。 オブジェクトには、実行可能な "動詞" である*メソッド*もあります。 オブジェクトを頻繁に操作します。

例からわかるように、DateTime は、日付と時刻をプログラミングできるオブジェクトです。 現在の日付と時刻を返す Now という名前のプロパティがあります。

### <a name="using-code-to-render-markup-in-the-page"></a>コードを使用してページにマークアップを表示する

ページの本文で、次の点に注意してください。

[!code-html[Main](intro-to-web-pages-programming/samples/sample3.html)]

ここでも、@ 文字は、次のコードが HTML ではなくコードであることを ASP.NET に伝えます。 マークアップでは、@ の後にコード式を追加することができ、ASP.NET はその式の値をその時点で右に表示します。 この例では、@a は、という名前の変数の値を表示します。また、@product product という名前の変数には何でもレンダリングします。

ただし、変数に限定されるわけではありません。 ここでは、@ 文字が式の前にあります。

- @ (a\*b) は、変数 a と b に含まれるすべての製品を表示します。 (\* 演算子は乗算を意味します)。
- @ (テクノロジ + "" + 製品) では、変数を連結し、その間にスペースを追加すると、変数のテクノロジと製品の値がレンダリングされます。 文字列を連結する演算子 (+) は、数値を追加する演算子と同じです。 ASP.NET は、通常、数値または文字列を使用しているかどうかを判断し、+ 演算子を使用して適切な処理を行います。
- @Request.Url は、要求オブジェクトの Url プロパティを表示します。 要求オブジェクトには、ブラウザーからの現在の要求に関する情報が含まれています。もちろん、Url プロパティには、現在の要求の URL が含まれています。

この例は、さまざまな方法で作業できることを示すためにも設計されています。 先頭のコードブロックで計算を実行し、結果を変数に格納して、その変数をマークアップでレンダリングできます。 または、マークアップ内の式の中で計算を行うことができます。 使用する方法は、ユーザーの好みに応じて、何を実行しているかによって異なります。

### <a name="seeing-the-code-in-action"></a>コードの動作を確認する

ファイルの名前を右クリックし、 **[ブラウザーで起動]** を選択します。 ページ内ですべての値と式が解決されたページがブラウザーに表示されます。

![ブラウザーで実行されている ' TestRazor ' ページ](intro-to-web-pages-programming/_static/image2.png)

ブラウザーでソースを確認します。

![ブラウザーでの ' テスト Razor ' ページソース](intro-to-web-pages-programming/_static/image3.png)

前のチュートリアルの経験から予想されるように、このページには Razor コードはありません。 実際の表示値が表示されます。 ページを実行すると、WebMatrix に組み込まれている web サーバーに対して実際に要求を行うことになります。 ASP.NET は、要求を受信すると、すべての値と式を解決し、その値をページに表示します。 次に、ページをブラウザーに送信します。

> [!TIP] 
> 
> **Razor とC#**
> 
> ここまでは、Razor 構文を操作していることを説明しました。 これは真実ですが、完全な話ではありません。 実際に使用しているプログラミング言語が*C#* 呼び出されます。 C#10年前にマイクロソフトによって作成され、Windows アプリを作成するための主要なプログラミング言語の1つになりました。 変数に名前を指定する方法と、ステートメントを作成する方法について説明したすべてのルールは、実際C#には言語のすべてのルールです。
> 
> Razor は、このコードをページに埋め込む方法に関する少数の規則セットに特化しています。 たとえば、@ を使用してページ内のコードをマークし、@ {} を使用してコードブロックを埋め込むという規則は、ページの Razor の側面です。 ヘルパーは Razor の一部としても見なされます。 Razor 構文は、ASP.NET Web ページだけではなく、より多くの場所で使用されます。 (たとえば、ASP.NET MVC ビューでも使用されます)。
> 
> ここでは、ASP.NET Web ページのプログラミングに関する情報を探している場合、Razor に関する多くの参照を見つけることができます。 ただし、これらの参照の大部分は、実行している内容には適用されないため、混乱を招く可能性があります。 実際、プログラミングに関する質問の多くは、ASP.NET を使用しC#たり、作業したりすることになります。 したがって、特に Razor に関する情報を探しても、必要な回答が見つからない場合があります。

## <a name="adding-some-conditional-logic"></a>いくつかの条件ロジックの追加

ページでコードを使用する場合の優れた機能の1つは、さまざまな条件に基づいて動作を変更できることです。 チュートリアルのこの部分では、ページに表示される内容を変更するいくつかの方法について説明します。

この例は単純であり、条件ロジックに集中できるように多少不自然です。 ここで作成するページは次のようになります。

- ページが最初に表示されるかどうか、またはボタンをクリックしてページを送信するかどうかに応じて、ページに別のテキストを表示します。 これが最初の条件テストになります。
- URL のクエリ文字列に特定の値が渡された場合にのみメッセージを表示します (http://...? show = true)。 これが2番目の条件付きテストになります。

WebMatrix で、ページを作成し、 *TestRazorPart2*という名前を指定します。 (リボンで **[新規]** をクリックし、 **[CSHTML]** を選択して、ファイルに名前を指定し、 **[OK]** をクリックします)。

そのページの内容を次のように置き換えます。

[!code-cshtml[Main](intro-to-web-pages-programming/samples/sample4.cshtml)]

上部のコードブロックでは、メッセージという名前の変数をいくつかのテキストと共に初期化します。 ページの本文では、メッセージ変数の内容が &lt;p&gt; 要素内に表示されます。 マークアップには、 **[送信]** ボタンを作成するための &lt;input&gt; 要素も含まれています。

ページを実行して、現在の動作を確認します。 ここでは、 **[送信]** ボタンをクリックした場合でも、基本的に静的ページになります。

WebMatrix に戻ります。 コードブロック内で、メッセージを初期化する行の*後*に、次の強調表示されたコードを追加します。

[!code-cshtml[Main](intro-to-web-pages-programming/samples/sample5.cshtml?highlight=4-6)]

### <a name="the-if---block"></a>If {} ブロック

先ほど追加したものは if 条件でした。 コードでは、if 条件に次のような構造があります。

[!code-csharp[Main](intro-to-web-pages-programming/samples/sample6.cs)]

テストする条件がかっこで囲まれています。 この値は、true または false を返す値または式である必要があります。 条件が true の場合、ASP.NET は、中かっこ内にあるステートメントを実行します。 (これらは、 *if then*ロジック*の一部です*)。条件が false の場合は、コードブロックがスキップされます。

If ステートメントでテストできる条件の例をいくつか次に示します。

[!code-csharp[Main](intro-to-web-pages-programming/samples/sample7.cs)]

*論理演算子*または*比較演算子*を使用すると、変数を値に対して、または式に対してテストできます。等号 (= =)、より大きい (&gt;)、より小さい (&lt;)、以上 (&gt;=)、および以下 (&lt;=) です。 ! = 演算子はと等しくないことを意味します。たとえば、(a! = 0) の場合、*が0と等しくない*ことを意味します。

> [!NOTE]
> 等号 (= =) の比較演算子が = と同じではないことを確認してください。 = 演算子は、値を代入するためにのみ使用されます (var a = 2)。 これらの演算子を組み合わせて使用すると、エラーが発生するか、予想外の結果が得られます。

何かが true であるかどうかをテストするために、完全な構文は if (IsDone = = true) です。 ただし、ショートカット (IsDone) を使用することもできます。 比較演算子がない場合、ASP.NET は、テスト対象が true であることを前提としています。

! 演算子自体は、論理 NOT であることを意味します。 たとえば、(!IsPost) は、 *IsPost が true でない場合を*意味します。

条件を結合するには、論理 AND (&amp;&amp; 演算子) または論理 OR (| | 演算子) を使用します。 たとえば、前の例の if 条件の最後は、 *FileProcessingIsDone が true に設定されておらず、displayMessage が false に設定*されている場合を意味します。

### <a name="the-else-block"></a>Else ブロック

If ブロックの最後の1つは、if ブロックの後に else ブロックを指定する方法です。 Else ブロックが役に立つのは、条件が false の場合に別のコードを実行する必要があることです。 単純な例を次に示します。

[!code-csharp[Main](intro-to-web-pages-programming/samples/sample8.cs)]

このシリーズの後のチュートリアルでは、else ブロックを使用すると便利な例をいくつか紹介します。

### <a name="testing-whether-the-request-is-a-submit-post"></a>要求が送信 (post) であるかどうかをテストする

この例に戻りましょう。この例では、(IsPost) {...} という条件を使用しています。 IsPost は、実際には現在のページのプロパティです。 ページが初めて要求されたときに、IsPost は false を返します。 ただし、ボタンをクリックした場合、またはページを送信した場合 (つまり、投稿した場合)、IsPost は true を返します。 IsPost を使用すると、フォームの送信を処理しているかどうかを判断できます。 (HTTP 動詞の点では、要求が GET 操作である場合、IsPost は false を返します。 要求が POST 操作の場合、IsPost は true を返します)。後のチュートリアルでは、このテストが特に役立つ入力フォームを使用します。

ページを実行します。 このページを初めて要求したため、"このページを初めて要求したとき" と表示されます。 この文字列は、メッセージ変数を初期化した値です。 If (IsPost) テストがありますが、現時点では false が返されるため、if ブロック内のコードは実行されません。

**[送信]** ボタンをクリックします。 ページが再度要求されます。 前と同様に、メッセージ変数は "This is the first time..." に設定されています。 ただし今回は、if ブロック内のコードが実行されるように、if (IsPost) によって true が返されることをテストします。 このコードは、メッセージ変数の値を別の値に変更します。この値は、マークアップで表示されます。

ここで、マークアップに if 条件を追加します。 **[送信]** ボタンを含む &lt;p&gt; 要素の下に、次のマークアップを追加します。

[!code-cshtml[Main](intro-to-web-pages-programming/samples/sample9.cshtml)]

マークアップ内にコードを追加しようとしているため、@から始める必要があります。 次に、コードブロックで前に追加したものと同様の if テストがあります。 ただし、中かっこ内では通常の HTML を追加しています。少なくとも、@DateTime.Nowになるまでは通常の HTML です。 これは Razor コードのもう1つの部分です。そのため、その前に @ を追加する必要があります。

ここでは、上部とマークアップの両方のコードブロックに条件を追加できることを示します。 ページの本文で if 条件を使用する場合は、ブロック内の行をマークアップまたはコードにすることができます。 そのような場合や、マークアップとコードを混在させる場合は常に、@ を使用して、コードがどこにあるかを ASP.NET に明確にする必要があります。

ページを実行し、 **[送信]** をクリックします。 今回は、送信時に別のメッセージが表示されるだけではありません ("現在送信した...") が、日付と時刻を一覧表示する新しいメッセージが表示されます。

![送信後にタイムスタンプが表示されているブラウザーで実行されている ' テスト Razor 2 ' ページ](intro-to-web-pages-programming/_static/image4.png)

### <a name="testing-the-value-of-a-query-string"></a>クエリ文字列の値のテスト

もう1つテスト。 今回は、クエリ文字列に渡される可能性がある show という名前の値をテストする if ブロックを追加します。 (例: `http://localhost:43097/TestRazorPart2.cshtml?show=true`)表示されているメッセージ ("This is the first time..." など) が表示されるようにページを変更します。 [表示] の値が true の場合にのみ表示されます。

ページの一番上にあるコードブロックの下 (ただし内側) で、次のコードを追加します。

[!code-csharp[Main](intro-to-web-pages-programming/samples/sample10.cs)]

完成したコードブロックは、次の例のようになります。 (コードをページにコピーすると、インデントが異なる場合があることに注意してください。 ただし、これはコードの実行方法には影響しません)。

[!code-cshtml[Main](intro-to-web-pages-programming/samples/sample11.cshtml)]

ブロック内の新しいコードは、showMessage という名前の変数を false に初期化します。 次に、if テストを実行して、クエリ文字列内の値を検索します。 最初にページを要求すると、次のような URL が表示されます。

`http://localhost:43097/TestRazorPart2.cshtml`

このコードは、url の次のバージョンのように、クエリ文字列に show という名前の変数が含まれているかどうかを判断します。

`http://localhost:43097/TestRazorPart2.cshtml`? show = true

テスト自体は、要求オブジェクトの QueryString プロパティを調べます。 クエリ文字列に show という名前の項目が含まれていて、その項目が true に設定されている場合は、if ブロックが実行され、showMessage 変数が true に設定されます。

ご覧のとおり、ここにはコツがあります。 名前のように、クエリ文字列は文字列です。 ただし、テストする値がブール値 (true/false) の場合にのみ、true と false のテストを行うことができます。 クエリ文字列の show 変数の値をテストする前に、それをブール値に変換する必要があります。 これが AsBool メソッドで実行されます。これは、文字列を入力として受け取り、それをブール値に変換します。 文字列が "true" の場合、AsBool メソッドはその値を true に変換します。 文字列の値が他の値の場合、AsBool は false を返します。

> [!TIP] 
> 
> **データ型と As () メソッド**
> 
> ここまでに説明したのは、変数を作成するときに、キーワード var を使用することです。 ただし、これはストーリー全体ではありません。 値の操作 (数値の追加、文字列の連結、日付の比較、または true/false のテスト) C#を行うには、値の適切な内部表現を使用する必要があります。 C#*通常*は、値を使用して何を行っているかに基づいて、その表現がどのようなものであるか (つまり、データの*種類*) を把握できます。 でも、それはできません。 それ以外の場合は、がデータをどのようC#に表すかを明示的に示す必要があります。 AsBool メソッドは、"true" またC#は "false" の文字列値をブール値として処理するように指示します。 同様のメソッドは、AsInt (整数として扱う)、Asint (日付/時刻として扱う)、Asint (浮動小数点数として扱う) など、他の型として文字列を表すためにも存在します。 これらの As () メソッドを使用する場合C# 、が要求どおりに文字列値を表すことができないと、エラーが表示されます。

ページのマークアップで、この要素を削除またはコメントアウトします (ここではコメントアウトされています)。

[!code-html[Main](intro-to-web-pages-programming/samples/sample12.html)]

そのテキストを削除またはコメントアウトした場合は、次の内容を追加します。

[!code-cshtml[Main](intro-to-web-pages-programming/samples/sample13.cshtml)]

If テストでは、showMessage 変数が true の場合、メッセージ変数の値を使用して &lt;p&gt; 要素をレンダリングします。

### <a name="summary-of-your-conditional-logic"></a>条件ロジックの概要

完了したことが完全にわからない場合は、概要を確認してください。

- メッセージ変数は、既定の文字列に初期化されます ("This is the first time...")。
- ページ要求が送信 (post) の結果である場合、メッセージの値は "現在送信しています..." に変更されます。
- ShowMessage 変数は false に初期化されます。
- クエリ文字列に? show = true が含まれている場合、showMessage 変数は true に設定されます。
- マークアップでは、showMessage が true の場合、メッセージの値を示す &lt;p&gt; 要素がレンダリングされます。 (ShowMessage が false の場合、マークアップのその時点では何もレンダリングされません)。
- マークアップでは、要求が post の場合、&lt;p&gt; 要素がレンダリングされ、日付と時刻が表示されます。

ページを実行します。 ShowMessage が false であるため、メッセージはありません。そのため、マークアップでは、if (showMessage) テストは false を返します。

**[送信]** をクリックします。 日付と時刻は表示されますが、メッセージは表示されません。

ブラウザーで [URL] ボックスにアクセスし、URL の末尾に次のコードを追加します。? show = true と入力し、enter キーを押します。

![クエリ文字列を示す ' テスト Razor 2 ' ページ (ブラウザー内)](intro-to-web-pages-programming/_static/image5.png)

ページが再び表示されます。 (URL を変更したため、これは送信ではなく新しい要求です)。もう一度 **[送信]** をクリックします。 メッセージは、日付と時刻と同様に再び表示されます。

![クエリ文字列がある場合に送信された ' テスト Razor 2 ' ページ](intro-to-web-pages-programming/_static/image6.png)

URL で? show = true に変更し、show = false と入力し、enter キーを押します。 ページをもう一度送信します。 ページは開始した方法に戻ります。メッセージは表示されません。

前述のように、この例のロジックは少し不自然です。 ただし、が多くのページで使用される場合は、ここに表示されている1つ以上のフォームを取得します。

## <a name="installing-a-helper-displaying-a-gravatar-image"></a>ヘルパーのインストール (Gravatar イメージの表示)

Web ページで頻繁に実行するタスクには、多くのコードが必要になる場合や、追加の知識が必要な場合があります。 例: データのグラフを表示するFacebook の "Like" ボタンをページに配置します。web サイトから電子メールを送信しています。イメージのトリミングまたはサイズ変更サイトで PayPal を使用します。 このような作業を簡単に行うために、ASP.NET Web ページで*ヘルパー*を使用できます。 ヘルパーは、サイト用にインストールするコンポーネントであり、いくつかの Razor コードだけを使用して一般的なタスクを実行できます。

ASP.NET Web ページには、いくつかのヘルパーが組み込まれています。 ただし、NuGet パッケージマネージャーを使用して提供されているパッケージ (アドイン) では、多くのヘルパーを利用できます。 NuGet を使用すると、インストールするパッケージを選択して、インストールのすべての詳細を処理できます。

チュートリアルのこの部分では、Gravatar ("グローバルに認識されたアバター") イメージを表示できるヘルパーをインストールします。 2つのことについて説明します。 1つは、ヘルパーを検索してインストールする方法です。 また、ヘルパーを使用して、自分で記述する必要のあるコードを多数使用することによって行う必要がある操作を簡単に行う方法についても説明します。

[http://www.gravatar.com/](http://www.gravatar.com/)の Gravatar web サイトに独自の Gravatar を登録できますが、チュートリアルのこの部分を実行するために Gravatar アカウントを作成する必要はありません。

WebMatrix で、 **[NuGet]** ボタンをクリックします。

![WebMatrix の [NuGet ギャラリー] ダイアログボックス](intro-to-web-pages-programming/_static/image7.png)

NuGet パッケージマネージャーが起動し、使用可能なパッケージが表示されます。 (すべてのパッケージがヘルパーであるとは限りません。 WebMatrix 自体に機能を追加するものと、追加のテンプレートを追加するものがあります)。バージョンに互換性がないというエラーメッセージが表示される場合があります。 このエラーメッセージを無視するには、 **[OK]** をクリックし、このチュートリアルを続行します。

![WebMatrix の [NuGet ギャラリー] ダイアログボックス](intro-to-web-pages-programming/_static/image8.png)

検索ボックスに、「asp.net のヘルパー」と入力します。 NuGet では、検索語句に一致するパッケージが表示されます。

![パッケージを示す WebMatrix の NuGet ギャラリー](intro-to-web-pages-programming/_static/image9.png)

ASP.NET Web ヘルパーライブラリには、Gravatar イメージの使用など、多くの一般的なタスクを簡略化するコードが含まれています。 **ASP.NET Web ヘルパーライブラリ**パッケージを選択し、 **[インストール]** をクリックしてインストーラーを起動します。 パッケージをインストールするかどうかを確認するメッセージが表示されたら [**はい]** を選択し、インストールを完了するための条項に同意します。

これで終了です。 NuGet では、必要になる可能性のある追加コンポーネント (*依存関係*) を含め、すべてがダウンロードされ、インストールされます。

何らかの理由でヘルパーをアンインストールする必要がある場合、プロセスは非常に似ています。 **[NuGet]** ボタンをクリックし、 **[インストール済み]** タブをクリックして、アンインストールするパッケージを選択します。

## <a name="using-a-helper-in-a-page"></a>ページでのヘルパーの使用

ここで、インストールしたばかりのヘルパーを使用します。 ヘルパーをページに追加するプロセスは、ほとんどのヘルパーに似ています。

WebMatrix で、ページを作成し、 *GravatarTest*という名前を指定します。 (ヘルパーをテストするための特別なページを作成していますが、ヘルパーはサイト内のどのページでも使用できます)。

&lt;body&gt; 要素内に、&lt;div&gt; 要素を追加します。 &lt;div&gt; 要素内に、次のように入力します。

[https://login.microsoftonline.com/consumers/](@Gravatar)

@ 文字は、Razor コードをマークするために使用していた文字と同じです。 **Gravatar**は、使用しているヘルパーオブジェクトです。

ピリオド (.) を入力するとすぐに、WebMatrix によって、Gravatar helper によって使用可能になる*メソッド*(関数) の一覧が表示されます。

![Gravatar helper IntelliSense のドロップダウンリスト](intro-to-web-pages-programming/_static/image10.png)

この機能は、 *IntelliSense*と呼ばれています。 コンテキストに適した選択肢を提供することで、コードを作成できます。 IntelliSense は、HTML、CSS、ASP.NET コード、JavaScript、および WebMatrix でサポートされているその他の言語で動作します。 これは、WebMatrix で web ページを簡単に開発できるようにするもう1つの機能です。

キーボードの G キーを押すと、IntelliSense によって GetHtml メソッドが検出されることがわかります。 Tab キーを押します。 IntelliSense によって、選択したメソッド (GetHtml) が挿入されます。 始めかっこを入力すると、閉じかっこが自動的に追加されます。 2つのかっこの間に、電子メールアドレスを引用符で囲んで入力します。 Gravatar アカウントを持っている場合は、プロファイル画像が返されます。 Gravatar アカウントを持っていない場合は、既定の画像が返されます。 完了すると、行は次のようになります。

[!code-css[Main](intro-to-web-pages-programming/samples/sample14.css)]

次に、ブラウザーでページを表示します。 Gravatar アカウントがあるかどうかに応じて、画像または既定の画像が表示されます。

![Gravatar](intro-to-web-pages-programming/_static/image11.png) ![既定の画像](intro-to-web-pages-programming/_static/image12.png)

ヘルパーが何をしているかを把握するには、ブラウザーでページのソースを表示します。 ページにある HTML と共に、識別子を含む image 要素が表示されます。 これは、@Gravatar.GetHtmlした場所のページにヘルパーがレンダリングしたコードです。 ヘルパーは、指定された情報を受け取り、指定されたアカウントの正しいイメージを取得するために、Gravatar に直接通信するコードを生成しました。

GetHtml メソッドを使用すると、他のパラメーターを指定してイメージをカスタマイズすることもできます。 次のコードは、イメージの幅と高さが40ピクセルであることを要求する方法を示しています。指定されたアカウントが存在しない場合は、 **wavatar**という名前の指定された既定のイメージを使用します。

[!code-javascript[Main](intro-to-web-pages-programming/samples/sample15.js)]

このコードでは、次のような結果が生成されます (既定のイメージはランダムに変化します)。

![](intro-to-web-pages-programming/_static/image13.png)

## <a name="coming-up-next"></a>次へ

このチュートリアルを簡潔にするために、いくつかの基本に焦点を当てる必要がありました。 当然ながら、Razor とC#に*はさらに多くの*ことがあります。 詳細については、これらのチュートリアルを参照してください。 Razor とC#現在のプログラミングの側面の詳細については、「 [Razor 構文を使用した ASP.NET Web プログラミングの概要」を](https://go.microsoft.com/fwlink/?LinkID=202890)参照してください。

次のチュートリアルでは、データベースを操作する方法について説明します。 このチュートリアルでは、お気に入りのムービーの一覧を表示できるサンプルアプリケーションの作成を開始します。

## <a name="complete-listing-for-testrazor-page"></a>TestRazor ページの完全な一覧表示

[!code-cshtml[Main](intro-to-web-pages-programming/samples/sample16.cshtml)]

## <a name="complete-listing-for-testrazorpart2-page"></a>TestRazorPart2 ページの完全な一覧表示

[!code-cshtml[Main](intro-to-web-pages-programming/samples/sample17.cshtml)]

## <a name="complete-listing-for-gravatartest-page"></a>GravatarTest ページの完全な一覧表示

[!code-cshtml[Main](intro-to-web-pages-programming/samples/sample18.cshtml)]

## <a name="additional-resources"></a>その他のリソース

- [Razor 構文を使用した ASP.NET Web プログラミングの概要](https://go.microsoft.com/fwlink/?LinkID=202890)
- [Twitter ヘルパー](../../ui-layouts-and-themes/twitter-helper.md)

> [!div class="step-by-step"]
> [前へ](getting-started.md)
> [次へ](displaying-data.md)
