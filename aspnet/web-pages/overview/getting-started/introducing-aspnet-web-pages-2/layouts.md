---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/layouts
title: ASP.NET Web ページの概要-一貫したレイアウトの作成 |Microsoft Docs
author: Rick-Anderson
description: このチュートリアルでは、レイアウトを使用して、ASP.NET Web ページを使用するサイト上のページの一貫性のある検索を作成する方法について説明します。 完了したことを前提としています...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: c85ec591-f8d7-4882-b763-de6ab9f3df7a
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/layouts
msc.type: authoredcontent
ms.openlocfilehash: 678eb7089e95e3d221d6b2d82034a62aefa75757
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2020
ms.locfileid: "78422746"
---
# <a name="introducing-aspnet-web-pages---creating-a-consistent-layout"></a>ASP.NET Web ページの概要-一貫したレイアウトの作成

[Tom FitzMacken](https://github.com/tfitzmac)

> このチュートリアルでは、*レイアウト*を使用して、ASP.NET Web ページを使用するサイト上のページの一貫性のある検索を作成する方法について説明します。 [ASP.NET Web ページでデータベースデータを削除](https://go.microsoft.com/fwlink/?LinkId=251584)して、シリーズを完了していることを前提としています。
> 
> ここでは、次の内容について学習します。
> 
> - レイアウトページとは何ですか。
> - レイアウトページと動的なコンテンツを結合する方法。
> - レイアウトページに値を渡す方法。

## <a name="about-layouts"></a>レイアウトについて

これまでに作成したページはすべて完成し、スタンドアロンページです。 これらはすべて同じサイトに属していますが、共通の要素や標準的な外観を持っていません。

ほとんどのサイトには、一貫した外観とレイアウトがあります。 たとえば、 [Microsoft.com/web](https://www.microsoft.com/web/)サイトに移動して、すべてのページがレイアウト全体と視覚テーマに準拠していることがわかります。

![ヘッダー、ナビゲーション領域、コンテンツ領域、およびフッターのレイアウトを表示する Microsoft.com/web サイトページ](layouts/_static/image1.png)

このレイアウトを*効率的*に作成する方法としては、各ページで個別にヘッダー、ナビゲーションバー、およびフッターを定義する方法があります。 毎回同じマークアップを複製します。 何かを変更する (たとえば、フッターを更新する) 場合は、各ページを個別に変更する必要があります。

ここで*レイアウトページ*が登場します。 ASP.NET Web ページでは、サイト上のページのコンテナー全体を提供するレイアウトページを定義できます。 たとえば、[レイアウト] ページには、ヘッダー、ナビゲーション領域、およびフッターを含めることができます。 レイアウトページには、メインコンテンツが配置されるプレースホルダーが含まれています。

その後、マークアップを含む個々のコンテンツページと、そのページのみのコードを定義できます。 コンテンツページは HTML ページ全体である必要はありません。`<body>` 要素を持つ必要もありません。 また、コンテンツを表示するレイアウトページを ASP.NET に伝えるコード行もあります。 このリレーションシップのしくみを次の図に示します。

![2つのコンテンツページと、それらが適合するレイアウトページを示す概念図](layouts/_static/image2.png)

この相互作用は、実際に動作していることを確認するとわかりやすくなります。 このチュートリアルでは、レイアウトを使用するようにムービーページを変更します。

## <a name="adding-a-layout-page"></a>レイアウトページの追加

まず、ヘッダー、フッター、およびメインコンテンツ用の領域を含む一般的なページレイアウトを定義するレイアウトページを作成します。 Webweb ムービーサイトで、 *\_Layout. cshtml*という名前の cshtml ページを追加します。

先頭のアンダースコア (`_`) 文字は重要です。 ページの名前がアンダースコアで始まる場合、ASP.NET はそのページをブラウザーに直接送信しません。 この規則を使用すると、サイトに必要なページを定義できますが、ユーザーが直接要求することはできません。

ページのコンテンツを次の内容に置き換えます。

[!code-html[Main](layouts/samples/sample1.html)]

ご覧のように、このマークアップは `<div>` 要素を使用してページ内の3つのセクションを定義し、3つのセクションを保持するもう1つの `<div>` 要素を使用する HTML にすぎません。 フッターには、ページ内の現在の年を表示する Razor コードの `@DateTime.Now.Year`が含まれています。

「 *.Css*」という名前のスタイルシートへのリンクが表示されていることに注意してください。 スタイルシートには、要素の物理的なレイアウトの詳細が定義されます。 これは、すぐに作成します。

この *\_Layout*ページの通常とは異なる機能は、`@Render.Body()` 行です。 これは、このレイアウトが別のページにマージされたときにコンテンツが移動するプレースホルダーです。

## <a name="adding-a-css-file"></a>.Css ファイルの追加

ページ上の要素の実際の配置 (外観) を定義するには、カスケードスタイルシート (CSS) 規則を使用することをお勧めします。 そのため、新しいレイアウトのルールを含む *.css*ファイルを作成します。

WebMatrix で、サイトのルートを選択します。 次に、リボンの **[ファイル]** タブで、 **[新規]** ボタンの下の矢印をクリックし、 **[新しいフォルダー]** をクリックします。

![リボンの [新規] の下にある [新しいフォルダー] オプション。](layouts/_static/image3.png)

新しいフォルダーの*スタイル*の名前を指定します。

![新しいフォルダーに ' Styles ' という名前を付ける](layouts/_static/image4.png)

[新しい*スタイル*] フォルダー内に、「 *.css*」という名前のファイルを作成します。

![新しいムービーの .css ファイルを作成する](layouts/_static/image5.png)

新しい *.css*ファイルの内容を次のように置き換えます。

[!code-css[Main](layouts/samples/sample2.css)]

これらの CSS 規則についてはあまり詳しく説明しませんが、2つの点に注意してください。 1つの方法として、フォントとサイズの設定に加えて、ルールでは、ヘッダー、フッター、およびメインコンテンツ領域の位置を設定するための絶対配置が使用されます。 CSS での配置を初めて使用する場合は、W3Schools サイトの[css の配置](http://www.w3schools.com/css/css_positioning.asp)に関するチュートリアルを参照してください。

もう1つ注意すべき点は、一番下には、最初に*ムービーの cshtml*ファイルで定義されたスタイルルールがコピーされていることです。 これらのルールは、 [ASP.NET Web ページチュートリアルを使用してデータを表示する方法の概要](https://go.microsoft.com/fwlink/?LinkId=251580)で、`WebGrid` ヘルパーが、テーブルにストライプを追加したマークアップを表示するようにするために使用されていました。 (スタイル定義に *.css*ファイルを使用する場合は、サイト全体のスタイルルールを配置することもできます)。

## <a name="updating-the-movies-file-to-use-the-layout"></a>レイアウトを使用するようにムービーファイルを更新する

これで、サイト内の既存のファイルを更新して、新しいレイアウトを使用できるようになりました。 ムービーの*cshtml*ファイルを開きます。 先頭に、コードの最初の行として、次のコードを追加します。

[!code-csharp[Main](layouts/samples/sample3.cs)]

これで、このページは次のように開始されます。

[!code-cshtml[Main](layouts/samples/sample4.cshtml?highlight=2)]

この1行のコードでは、*ムービー*ページが実行されたときに、 *\_* ASP.NET ファイルにマージする必要があることがわかります。

現在、この*ムービー*ファイルではレイアウトページが使用されているため、 *\_layout*ファイルによって処理される、*ムービーの cshtml*ページからマークアップを削除できます。 `<!DOCTYPE>`、`<html>`、および `<body>` の開始タグと終了タグを取得します。 `<head>` の要素とその内容をすべて取得し*ます。* これには、グリッドのスタイルルールが含まれています。これは、これらのルールが .css ファイルに格納されているためです。 この時点で、既存の `<h1>` 要素を `<h2>` 要素に変更します。レイアウトページに `<h1>` 要素が既に存在します。 `<h2>` テキストを「ムービーの一覧表示」に変更します。

通常、このような変更をコンテンツページで行う必要はありません。 レイアウトページを使用してサイトを開始するときに、これらすべての要素を開始せずにコンテンツページを作成します。 ただし、この場合は、スタンドアロンページをレイアウトを使用するものに変換するので、クリーンアップが少しあります。

完了すると、次のような*ムービー*ページが表示されます。

[!code-cshtml[Main](layouts/samples/sample5.cshtml)]

### <a name="testing-the-layout"></a>レイアウトのテスト

これで、レイアウトがどのように見えるかを確認できます。 WebMatrix で、[*ムービー* ] ページを右クリックし、 **[ブラウザーで起動]** を選択します。 ブラウザーがページを表示すると、次のようなページが表示されます。

![レイアウトを使用してレンダリングされたムービーページ](layouts/_static/image6.png)

ASP.NET は、ページの内容を、`RenderBody` メソッドがである *\_のレイアウト*にマージしました。 もちろん、\_の*レイアウトの cshtml*ページでは、ページの外観を定義する *.css*ファイルが参照されます。

## <a name="updating-the-addmovie-page-to-use-the-layout"></a>レイアウトを使用するように AddMovie ページを更新する

レイアウトの実際の利点は、サイト内のすべてのページに使用できることです。 *Addmovie. cshtml*ページを開きます。

最初に、 *Addmovie. cshtml*ページには、検証エラーメッセージの外観を定義する CSS ルールがいくつかありました。 ここでは、サイトの *.css*ファイルがあるため、これらのルールを *.css*ファイルに移動できます。 これらのファイルを、もう一度*Addmovie*ファイルから削除し、*ムービーの .css*ファイルの一番下に追加します。 次のルールを移動しています:

[!code-css[Main](layouts/samples/sample6.css)]

次に、[ *Addmovie. cshtml* ] で同じ種類の変更を加え*ます。* ここでは、`Layout="~/_Layout.cshtml;` を追加し、余分な HTML マークアップを削除します。 `<h1>` 要素を `<h2>` に変更します。 完了すると、ページは次の例のようになります。

[!code-cshtml[Main](layouts/samples/sample7.cshtml)]

ページを実行します。 次の図のようになります。

![レイアウトを使用してレンダリングされた ' ムービーの追加 ' ページ](layouts/_static/image7.png)

サイト内のページ ( *Editmovie. cshtml*と*DeleteMovie*) に同様の変更を行う場合。 ただし、これを行う前に、レイアウトに別の変更を加えて、もう少し柔軟にすることができます。

## <a name="passing-title-information-to-the-layout-page"></a>タイトル情報をレイアウトページに渡す

作成した *\_の Layout*ページには、"マイムービーサイト" に設定されている `<title>` 要素があります。 ほとんどのブラウザーでは、この要素の内容がタブ上のテキストとして表示されます。

![ブラウザータブに表示されるページの &lt;タイトル&gt; 要素](layouts/_static/image8.png)

このタイトル情報は汎用的なものです。 タイトルのテキストを現在のページにより具体的に指定するとします。 (タイトルのテキストは、検索エンジンによって、ページの内容を判別するためにも使用されます)。Movie *. cshtml*や*addmovie. cshtml*などのコンテンツページの情報をレイアウトページに渡し、その情報を使用してレイアウトページの表示内容をカスタマイズすることができます。

もう一度、[*ムービー* ] ページを開きます。 上部にあるコードで、次の行を追加します。

[!code-csharp[Main](layouts/samples/sample8.cs)]

`Page` オブジェクトは、すべての*cshtml*ページで使用でき、この目的のために、ページとそのレイアウトの間で情報を共有します。

*\_Layout*ページを開きます。 次のマークアップのように `<title>` 要素を変更します。

[!code-html[Main](layouts/samples/sample9.html)]

このコードは、`Page.Title` プロパティ内の任意のものを、ページ内のその位置にある任意の場所にレンダリングします。

[*ムービー* ] ページを実行します。 今度は、[ブラウザー] タブに `Page.Title`の値として渡された内容が表示されます。

![タイトルが動的に作成されたブラウザータブ](layouts/_static/image9.png)

必要に応じて、ブラウザーでページソースを表示します。 `<title>` 要素が `<title>List Movies</title>`としてレンダリングされていることがわかります。

> [!TIP] 
> 
> **Page オブジェクト**
> 
> `Page` の便利な機能は、動的なオブジェクトであり、`Title` プロパティは固定または予約された名前ではないということです。 `Page` オブジェクトの値には *、任意*の名前を使用できます。 たとえば、`Page.CurrentName` または `Page.MyPage`という名前のプロパティを使用して、タイトルを簡単に渡すことができます。 唯一の制限は、名前を付けることができるプロパティの通常の規則に従う必要があることです。 (たとえば、名前にスペースを含めることはできません)。
> 
> `Page` オブジェクトを使用して、任意の数の値を渡すことができます。 ムービー情報をレイアウトページに渡す必要がある場合は、`Page.MovieTitle`、`Page.Genre` と `Page.MovieYear`などを使用して値を渡すことができます。 (または、情報を格納するために開発したその他のすべての名前)。唯一の要件として、[コンテンツ] ページと [レイアウト] ページで同じ名前を使用する必要があります。
> 
> `Page` オブジェクトを使用して渡す情報は、レイアウトページに表示されるテキストのみに制限されていません。 レイアウトページに値を渡すことができます。次に、レイアウトページ内のコードで値を使用して、ページのセクション、使用する *.css*ファイルなどを表示するかどうかを決定できます。 `Page` オブジェクトで渡す値は、コードで使用する他の値と同じです。 値がコンテンツページに由来し、レイアウトページに渡されるだけです。

*Addmovie. cshtml*ページを開き、 *addmovie. cshtml*ページのタイトルを提供するコードの先頭に行を追加します。

[!code-csharp[Main](layouts/samples/sample10.cs)]

*Addmovie. cshtml*ページを実行します。 新しいタイトルが表示されます。

![[ムービーの追加] タイトルが動的に作成されたブラウザータブ](layouts/_static/image10.png)

## <a name="updating-the-remaining-pages-to-use-the-layout"></a>レイアウトを使用するために残りのページを更新する

これで、サイト内の残りのページを完了して、新しいレイアウトを使用できるようになりました。 *Editmovie. cshtml*と*DeleteMovie*をもう一度開き、それぞれに同じ変更を加えます。

レイアウトページにリンクするコード行を追加します。

[!code-csharp[Main](layouts/samples/sample11.cs)]

ページのタイトルを設定する行を追加します。

[!code-csharp[Main](layouts/samples/sample12.cs)]

または

[!code-csharp[Main](layouts/samples/sample13.cs)]

余分な HTML マークアップをすべて削除します。基本的には、`<body>` 要素の内側にあるビットだけを残します (上部にあるコードブロックを使用します)。

`<h1>` 要素を `<h2>` 要素に変更します。

これらの変更を行ったら、それぞれをテストし、正しく表示されていること、およびタイトルが正しいことを確認します。

## <a name="parting-thoughts-about-layout-pages"></a>レイアウトページについての分離の考え

このチュートリアルでは、 *\_の Layout*ページを作成し、`RenderBody` メソッドを使用して別のページのコンテンツをマージしました。 これは、Web ページでレイアウトを使用するための基本的なパターンです。

レイアウトページには、ここでは説明しなかった機能が追加されています。 たとえば、レイアウトページを入れ子にすることができ、1つのレイアウトページで別のレイアウトページを参照することができます。 入れ子になったレイアウトは、異なるレイアウトを必要とするサイトのサブセクションを操作する場合に便利です。 また、追加のメソッド (`RenderSection`など) を使用して、レイアウトページで名前付きセクションを設定することもできます。

レイアウトページと *.css*ファイルの組み合わせは強力です。 次のチュートリアルシリーズで説明するように、WebMatrix では、*テンプレート*に基づいてサイトを作成できます。これにより、作成済みの機能を持つサイトが作成されます。 テンプレートでは、レイアウトページと CSS を使用して、見栄えの良いサイトや、メニューのような機能を持つサイトを作成することができます。 次に示すのは、テンプレートに基づいたサイトのホームページのスクリーンショットです。レイアウトページと CSS を使用する機能が表示されています。

![WebMatrix サイトテンプレートによって作成されたレイアウトで、ヘッダー、ナビゲーション領域、コンテンツエリア、オプションのセクション、およびログインリンクが表示されます。](layouts/_static/image11.png)

## <a name="complete-listing-for-movie-page-updated-to-use-a-layout-page"></a>[ムービーの完全な一覧表示] ページ (レイアウトページを使用するように更新)

[!code-cshtml[Main](layouts/samples/sample14.cshtml)]

## <a name="complete-page-listing-for-add-movie-page-updated-for-layout"></a>[ムービーの追加] ページのページの完全な一覧 (レイアウト用に更新)

[!code-cshtml[Main](layouts/samples/sample15.cshtml)]

## <a name="complete-page-listing-for-delete-movie-page-updated-for-layout"></a>[ムービーの削除] ページのページの完全な一覧 (レイアウト用に更新)

[!code-cshtml[Main](layouts/samples/sample16.cshtml)]

## <a name="complete-page-listing-for-edit-movie-page-updated-for-layout"></a>[ムービーの編集] ページの完全なページリスト (レイアウト用に更新)

[!code-cshtml[Main](layouts/samples/sample17.cshtml)]

## <a name="coming-up-next"></a>次へ

次のチュートリアルでは、すべてのユーザーが閲覧できるように、サイトをインターネットに発行する方法について説明します。

## <a name="additional-resources"></a>その他のリソース

- [一貫性のある外観の作成](https://go.microsoft.com/fwlink/?LinkID=202891): レイアウトの操作に関する詳細情報を提供する記事です。 また、コンテンツの一部を表示または非表示にするレイアウトページに値を渡す方法についても説明します。
- [Razor を使用した入れ子になったレイアウトページ](http://www.mikesdotnetting.com/Article/164/Nested-Layout-Pages-with-Razor): Mike brind ブログでは、レイアウトページを入れ子にする方法の例を示しています。 (ページのダウンロードも含まれています)。

> [!div class="step-by-step"]
> [前へ](deleting-data.md)
> [次へ](publishing.md)
